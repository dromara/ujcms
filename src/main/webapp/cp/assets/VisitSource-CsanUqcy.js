import{d as h,r as o,o as w,X as l,b as c,P as b,l as y,h as n,w as v,aF as k,aG as B,v as V,x as $,e as P,y as R,c as N,aQ as L,aP as T,k as f,bq as U,br as j}from"./index-DiyxZ9gY.js";import{E as q}from"./el-pagination-XJDb0Dbq.js";import"./el-select-Fa4N2NlQ.js";import{b as F,E as G}from"./el-radio-group-3iEWUNV9.js";/* empty css                        */import{e as x}from"./stat-D6Xe539s.js";const Q={class:"p-3 mt-3 app-block"},X={class:"mt-2"},Z=h({__name:"VisitSource",setup(A){const s=o("last30day"),D=t=>{switch(t){case"today":return l().format("YYYY-MM-DD");case"yesterday":return l().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return l().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return l().subtract(29,"day").format("YYYY-MM-DD");case"last3month":return l().subtract(3,"month").format("YYYY-MM-DD");case"last6month":return l().subtract(6,"month").format("YYYY-MM-DD");case"lastYear":return l().subtract(1,"year").format("YYYY-MM-DD");default:return}},M=t=>t==="yesterday"?l().subtract(1,"day").format("YYYY-MM-DD"):l().format("YYYY-MM-DD"),i=o(!1),d=o(1),p=o(10),Y=o(0),_=o(),g=o([]),r=async t=>{i.value=!0;try{const{content:a,page:{totalElements:m}}=await x({begin:D(t),end:M(t),page:d.value,pageSize:p.value});g.value=a,Y.value=Number(m)}finally{i.value=!1}};return w(async()=>{r(s.value)}),(t,a)=>{const m=F,z=G,u=L,C=T,E=q,S=R;return c(),b("div",null,[y("div",Q,[y("div",null,[n(z,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),onChange:a[1]||(a[1]=e=>r(e))},{default:v(()=>[(c(),b(k,null,B(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],e=>n(m,{key:e,value:e},{default:v(()=>[V($(t.$t("visit.".concat(e))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),y("div",X,[P((c(),N(C,{ref_key:"table",ref:_,data:g.value},{default:v(()=>[n(u,{property:"name",label:t.$t("visitSource.name"),"min-width":"260"},null,8,["label"]),n(u,{property:"pvCount",label:t.$t("visit.pv"),"min-width":"80"},null,8,["label"]),n(u,{property:"uvCount",label:t.$t("visit.uv"),"min-width":"80"},null,8,["label"]),n(u,{property:"ipCount",label:t.$t("visit.ip"),"min-width":"80"},null,8,["label"])]),_:1},8,["data"])),[[S,i.value]]),n(E,{"current-page":d.value,"onUpdate:currentPage":a[2]||(a[2]=e=>d.value=e),"page-size":p.value,"onUpdate:pageSize":a[3]||(a[3]=e=>p.value=e),total:Y.value,"page-sizes":f(j),layout:f(U),size:"small",background:"",class:"justify-end px-3 py-2",onSizeChange:a[4]||(a[4]=()=>r(s.value)),onCurrentChange:a[5]||(a[5]=()=>r(s.value))},null,8,["current-page","page-size","total","page-sizes","layout"])])])])}}});export{Z as default};
