import{d as g,u as _,r as w,Y as O,o as x,X as e,a0 as m,b as y,P as f,l as d,h as p,w as v,aF as C,aG as B,v as V,x as k}from"./index-DiyxZ9gY.js";import{b as E,E as N}from"./el-radio-group-3iEWUNV9.js";/* empty css                        */import{q as R}from"./stat-D6Xe539s.js";const D={class:"p-3 mt-3 app-block"},Y=g({__name:"VisitTrend",setup(T){const{t:s}=_(),l=w("last30day"),b=r=>{switch(r){case"now":return e().subtract(2,"hour").format();case"today":return e().startOf("day").format();case"yesterday":return e().startOf("day").subtract(1,"day").format();case"last7day":return e().startOf("day").subtract(6,"day").format();case"last30day":return e().startOf("day").subtract(29,"day").format();case"last3month":return e().startOf("day").subtract(3,"month").format();case"last6month":return e().startOf("day").subtract(6,"month").format();case"lastYear":return e().startOf("day").subtract(1,"year").format();default:return}},h=r=>r==="now"?e().format():r==="yesterday"?e().endOf("day").subtract(1,"day").format():e().endOf("day").format(),u=O(),c=async r=>{const a=await R({begin:b(r),end:h(r)}),i={tooltip:{trigger:"axis"},legend:{data:[s("visit.pv"),s("visit.uv"),s("visit.ip")]},grid:{left:16,right:24,top:40,bottom:8,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1},data:a.map(n=>n.dateString)},yAxis:{type:"value",minInterval:1},series:[{name:s("visit.pv"),type:"line",symbol:a.length>30?"none":"circle",data:a.map(n=>Number(n.pvCount))},{name:s("visit.uv"),type:"line",symbol:a.length>30?"none":"circle",data:a.map(n=>Number(n.uvCount))},{name:s("visit.ip"),type:"line",symbol:a.length>30?"none":"circle",data:a.map(n=>Number(n.ipCount))}]},o=u.value;if(o==null)return;let t=m.getInstanceByDom(o);t==null&&(t=m.init(o)),t.setOption(i),window.addEventListener("resize",function(){t&&t.resize()})};return x(async()=>{c(l.value)}),(r,a)=>{const i=E,o=N;return y(),f("div",null,[d("div",D,[d("div",null,[p(o,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value=t),onChange:a[1]||(a[1]=t=>c(t))},{default:v(()=>[(y(),f(C,null,B(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],t=>p(i,{key:t,value:t},{default:v(()=>[V(k(r.$t("visit.".concat(t))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),d("div",{ref_key:"trendChart",ref:u,class:"h-80"},null,512)])])}}});export{Y as default};
