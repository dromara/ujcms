import{a2 as co,a3 as Sa,a4 as po,d as $t,a5 as Vn,p as Zn,S as vt,r as z,v as Nt,a6 as fo,b as j,c as Aa,e as T,f as M,w as d,k as pe,g as Ai,K as ke,t as I,a7 as Le,a8 as Qe,j as C,n as O,h as ne,i as p,a9 as yn,_ as mr,u as Jn,a as hr,aa as pt,ab as Ta,ac as Ca,ad as Ra,ae as Da,af as Yn,l as In,ag as mo,ah as Ia,ai as Na,E as Ut,aj as Pa,Z as ho,ak as Ma,al as yo,am as vo,an as go,ao as it,o as $a,ap as bo,V as Fe,aq as Re,ar as Lr,as as _o,P as di,at as Br,au as wo,av as xo,aw as Eo,ax as ko,ay as So,az as Ao,C as To,aA as Co,aB as Ro,aC as Do,aD as Io,U as No,aE as Po,aF as Mo,aG as $o,aH as Vo,aI as Lo}from"./index-B6OoDg6B.js";import{S as Bo}from"./sortable.esm-DEaZq8gs.js";import{E as Oo,x as Uo,h as Fo,D as Yi,f as Or,T as qo}from"./TuiEditor-B6ufQpc_.js";import{t as Qn,d as jo,a as Ur,b as zo}from"./tree-CFBn_SXc.js";import{i as Wo,f as Ho,q as Va,a as Yo}from"./config-DiPdhBV1.js";import{d as yr,e as Ko,f as Go,g as Fr,h as Qo,i as Xo,j as Zo,k as Jo,l as el,r as tl,s as La,m as Ba,u as nl,n as il,o as Oa,p as rl,t as al,v as sl,w as ol,x as Ua,y as Fa,z as qa,A as ll,B as ul,C as cl,D as dl,E as pl,F as fl,G as qr}from"./content-2hwtLvQa.js";import{_ as ml,a as Ue,b as hl,c as yl}from"./QueryItem.vue_vue_type_script_setup_true_lang-Tf1Ym-Zs.js";import{d as vl}from"./duration-Bs6V08tO.js";import{q as gl,a as bl,b as _l,v as wl,c as xl,d as El}from"./system-DEylFcMw.js";import{q as kl,a as Sl,b as Al,c as Tl}from"./user-DGHrS2p0.js";import{a as jr,m as zr,g as Wr}from"./data-BgduHdtJ.js";import{_ as Hr}from"./FieldItem.vue_vue_type_script_setup_true_lang-BdcYOY4E.js";import{_ as Cl}from"./DialogForm.vue_vue_type_script_setup_true_lang-BCAZsuC3.js";import{T as Rl}from"./Tinymce-B_tUWdg4.js";import{I as Dl,a as Il}from"./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-DTCj5vvC.js";import{d as Nl}from"./vuedraggable.umd-BHO2ywuu.js";import{B as zn}from"./BaseUpload-B0NBMb5L.js";import{_ as Pl,a as Ml}from"./BlockItemForm.vue_vue_type_script_setup_true_lang-BHQ9yb0q.js";import"./index-Vcq4gwWv.js";/* empty css                                                                   */var be;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(be||(be={}));var W;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(W||(W={}));function Ht(e){return e===be.Space||e===be.NewLine||e===be.Tab||e===be.FormFeed||e===be.CarriageReturn}function pi(e){return e===be.Slash||e===be.Gt||Ht(e)}function $l(e){return e>=be.LowerA&&e<=be.LowerZ||e>=be.UpperA&&e<=be.UpperZ}var Ft;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(Ft||(Ft={}));const rt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Vl{constructor({xmlMode:t=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=W.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=n,this.entityDecoder=new Oo(t?Uo:Fo,(r,a)=>this.emitCodePoint(r,a))}reset(){this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=W.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===be.Lt||!this.decodeEntities&&this.fastForwardTo(be.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=W.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===be.Amp&&this.startEntity()}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?pi(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=W.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===be.Gt||Ht(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===rt.TitleEnd?this.decodeEntities&&t===be.Amp&&this.startEntity():this.fastForwardTo(be.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===be.Lt)}stateCDATASequence(t){t===rt.Cdata[this.sequenceIndex]?++this.sequenceIndex===rt.Cdata.length&&(this.state=W.InCommentLike,this.currentSequence=rt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=W.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===rt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=W.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!pi(t):$l(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=W.SpecialStartSequence}stateBeforeTagName(t){if(t===be.ExclamationMark)this.state=W.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===be.Questionmark)this.state=W.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,this.xmlMode?this.state=W.InTagName:n===rt.ScriptEnd[2]?this.state=W.BeforeSpecialS:n===rt.TitleEnd[2]?this.state=W.BeforeSpecialT:this.state=W.InTagName}else t===be.Slash?this.state=W.BeforeClosingTagName:(this.state=W.Text,this.stateText(t))}stateInTagName(t){pi(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){Ht(t)||(t===be.Gt?this.state=W.Text:(this.state=this.isTagStartChar(t)?W.InClosingTagName:W.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===be.Gt||Ht(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===be.Gt||this.fastForwardTo(be.Gt))&&(this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===be.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=W.InSpecialTag,this.sequenceIndex=0):this.state=W.Text,this.sectionStart=this.index+1):t===be.Slash?this.state=W.InSelfClosingTag:Ht(t)||(this.state=W.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===be.Gt?(this.cbs.onselfclosingtag(this.index),this.state=W.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Ht(t)||(this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===be.Eq||pi(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=W.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===be.Eq?this.state=W.BeforeAttributeValue:t===be.Slash||t===be.Gt?(this.cbs.onattribend(Ft.NoValue,this.sectionStart),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):Ht(t)||(this.cbs.onattribend(Ft.NoValue,this.sectionStart),this.state=W.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===be.DoubleQuote?(this.state=W.InAttributeValueDq,this.sectionStart=this.index+1):t===be.SingleQuote?(this.state=W.InAttributeValueSq,this.sectionStart=this.index+1):Ht(t)||(this.sectionStart=this.index,this.state=W.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===be.DoubleQuote?Ft.Double:Ft.Single,this.index+1),this.state=W.BeforeAttributeName):this.decodeEntities&&t===be.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,be.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,be.SingleQuote)}stateInAttributeValueNoQuotes(t){Ht(t)||t===be.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Ft.Unquoted,this.index),this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===be.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===be.OpeningSquareBracket?(this.state=W.CDATASequence,this.sequenceIndex=0):this.state=t===be.Dash?W.BeforeComment:W.InDeclaration}stateInDeclaration(t){(t===be.Gt||this.fastForwardTo(be.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===be.Gt||this.fastForwardTo(be.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===be.Dash?(this.state=W.InCommentLike,this.currentSequence=rt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=W.InDeclaration}stateInSpecialComment(t){(t===be.Gt||this.fastForwardTo(be.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===rt.ScriptEnd[3]?this.startSpecial(rt.ScriptEnd,4):n===rt.StyleEnd[3]?this.startSpecial(rt.StyleEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){const n=t|32;n===rt.TitleEnd[3]?this.startSpecial(rt.TitleEnd,4):n===rt.TextareaEnd[3]?this.startSpecial(rt.TextareaEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}startEntity(){this.baseState=this.state,this.state=W.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Yi.Strict:this.baseState===W.Text||this.baseState===W.InSpecialTag?Yi.Legacy:Yi.Attribute)}stateInEntity(){const t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===W.Text||this.state===W.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===W.InAttributeValueDq||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case W.Text:{this.stateText(t);break}case W.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case W.InSpecialTag:{this.stateInSpecialTag(t);break}case W.CDATASequence:{this.stateCDATASequence(t);break}case W.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case W.InAttributeName:{this.stateInAttributeName(t);break}case W.InCommentLike:{this.stateInCommentLike(t);break}case W.InSpecialComment:{this.stateInSpecialComment(t);break}case W.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case W.InTagName:{this.stateInTagName(t);break}case W.InClosingTagName:{this.stateInClosingTagName(t);break}case W.BeforeTagName:{this.stateBeforeTagName(t);break}case W.AfterAttributeName:{this.stateAfterAttributeName(t);break}case W.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case W.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case W.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case W.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case W.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case W.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case W.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case W.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case W.InDeclaration:{this.stateInDeclaration(t);break}case W.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case W.BeforeComment:{this.stateBeforeComment(t);break}case W.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case W.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===W.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===W.InCommentLike?this.currentSequence===rt.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===W.InTagName||this.state===W.BeforeAttributeName||this.state===W.BeforeAttributeValue||this.state===W.AfterAttributeName||this.state===W.InAttributeName||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueDq||this.state===W.InAttributeValueNq||this.state===W.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){this.baseState!==W.Text&&this.baseState!==W.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}}const Tn=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Me=new Set(["p"]),Yr=new Set(["thead","tbody"]),Kr=new Set(["dd","dt"]),Gr=new Set(["rt","rp"]),Ll=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Me],["h1",Me],["h2",Me],["h3",Me],["h4",Me],["h5",Me],["h6",Me],["select",Tn],["input",Tn],["output",Tn],["button",Tn],["datalist",Tn],["textarea",Tn],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Kr],["dt",Kr],["address",Me],["article",Me],["aside",Me],["blockquote",Me],["details",Me],["div",Me],["dl",Me],["fieldset",Me],["figcaption",Me],["figure",Me],["footer",Me],["form",Me],["header",Me],["hr",Me],["main",Me],["nav",Me],["ol",Me],["pre",Me],["section",Me],["table",Me],["ul",Me],["rt",Gr],["rp",Gr],["tbody",Yr],["tfoot",Yr]]),Bl=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Qr=new Set(["math","svg"]),Xr=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Ol=/\s|\//;let Ul=class{constructor(t,n={}){var i,r,a,o,u,c;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:this.htmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:this.htmlMode,this.recognizeSelfClosing=(a=n.recognizeSelfClosing)!==null&&a!==void 0?a:!this.htmlMode,this.tokenizer=new((o=n.Tokenizer)!==null&&o!==void 0?o:Vl)(this.options,this),this.foreignContext=[!this.htmlMode],(c=(u=this.cbs).onparserinit)===null||c===void 0||c.call(u,this)}ontext(t,n){var i,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n}ontextentity(t,n){var i,r;this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,Or(t)),this.startIndex=n}isVoidElement(t){return this.htmlMode&&Bl.has(t)}onopentagname(t,n){this.endIndex=n;let i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;const o=this.htmlMode&&Ll.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){const u=this.stack.shift();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,u,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(Qr.has(t)?this.foreignContext.unshift(!0):Xr.has(t)&&this.foreignContext.unshift(!1))),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var i,r,a,o,u,c,y,g;this.endIndex=n;let x=this.getSlice(t,n);if(this.lowerCaseTagNames&&(x=x.toLowerCase()),this.htmlMode&&(Qr.has(x)||Xr.has(x))&&this.foreignContext.shift(),this.isVoidElement(x))this.htmlMode&&x==="br"&&((o=(a=this.cbs).onopentagname)===null||o===void 0||o.call(a,"br"),(c=(u=this.cbs).onopentag)===null||c===void 0||c.call(u,"br",{},!0),(g=(y=this.cbs).onclosetag)===null||g===void 0||g.call(y,"br",!1));else{const m=this.stack.indexOf(x);if(m!==-1)for(let V=0;V<=m;V++){const X=this.stack.shift();(r=(i=this.cbs).onclosetag)===null||r===void 0||r.call(i,X,V!==m)}else this.htmlMode&&x==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,i;const r=this.tagname;this.endOpenTag(t),this.stack[0]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.shift())}onattribname(t,n){this.startIndex=t;const i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=Or(t)}onattribend(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===Ft.Double?'"':t===Ft.Single?"'":t===Ft.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(Ol);let i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(i))}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(i))}this.startIndex=n+1}oncomment(t,n,i){var r,a,o,u;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=n+1}oncdata(t,n,i){var r,a,o,u,c,y,g,x,m,V;this.endIndex=n;const X=this.getSlice(t,n-i);!this.htmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,X),(y=(c=this.cbs).oncdataend)===null||y===void 0||y.call(c)):((x=(g=this.cbs).oncomment)===null||x===void 0||x.call(g,"[CDATA[".concat(X,"]]")),(V=(m=this.cbs).oncommentend)===null||V===void 0||V.call(m)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=0;i<this.stack.length;i++)this.cbs.onclosetag(this.stack[i],!0)}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};var De;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(De||(De={}));function Fl(e){return e.type===De.Tag||e.type===De.Script||e.type===De.Style}De.Root;De.Text;De.Directive;De.Comment;De.Script;De.Style;De.Tag;De.CDATA;De.Doctype;class ja{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Ka(this,t)}}class vr extends ja{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}let er=class extends vr{constructor(){super(...arguments),this.type=De.Text}get nodeType(){return 3}};class za extends vr{constructor(){super(...arguments),this.type=De.Comment}get nodeType(){return 8}}class Wa extends vr{constructor(t,n){super(n),this.name=t,this.type=De.Directive}get nodeType(){return 1}}class gr extends ja{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class Ha extends gr{constructor(){super(...arguments),this.type=De.CDATA}get nodeType(){return 4}}class tr extends gr{constructor(){super(...arguments),this.type=De.Root}get nodeType(){return 9}}class Ya extends gr{constructor(t,n,i=[],r=t==="script"?De.Script:t==="style"?De.Style:De.Tag){super(i),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,i;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[t]}})}}function _i(e){return Fl(e)}function ql(e){return e.type===De.CDATA}function nr(e){return e.type===De.Text}function jl(e){return e.type===De.Comment}function zl(e){return e.type===De.Directive}function Wl(e){return e.type===De.Root}function Hl(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Ka(e,t=!1){let n;if(nr(e))n=new er(e.data);else if(jl(e))n=new za(e.data);else if(_i(e)){const i=t?Ki(e.children):[],r=new Ya(e.name,{...e.attribs},i);i.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(ql(e)){const i=t?Ki(e.children):[],r=new Ha(i);i.forEach(a=>a.parent=r),n=r}else if(Wl(e)){const i=t?Ki(e.children):[],r=new tr(i);i.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(zl(e)){const i=new Wa(e.name,e.data);e["x-name"]!=null&&(i["x-name"]=e["x-name"],i["x-publicId"]=e["x-publicId"],i["x-systemId"]=e["x-systemId"]),n=i}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Ki(e){const t=e.map(n=>Ka(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const Zr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Yl{constructor(t,n,i){this.dom=[],this.root=new tr(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=Zr),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:Zr,this.elementCB=i!=null?i:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new tr(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const i=this.options.xmlMode?De.Tag:void 0,r=new Ya(t,n,void 0,i);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===De.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new er(t);this.addNode(i),this.lastNode=i}}oncomment(t){if(this.lastNode&&this.lastNode.type===De.Comment){this.lastNode.data+=t;return}const n=new za(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new er(""),n=new Ha([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const i=new Wa(t,n);this.addNode(i)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),i&&(t.prev=i,i.next=t),t.parent=n,this.lastNode=null}}function Ga(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function Kl(e,t,n=!0,i=1/0){return Gl(e,Array.isArray(t)?t:[t],n,i)}function Gl(e,t,n,i){const r=[],a=[t],o=[0];for(;;){if(o[0]>=a[0].length){if(o.length===1)return r;a.shift(),o.shift();continue}const u=a[0][o[0]++];if(e(u)&&(r.push(u),--i<=0))return r;n&&Hl(u)&&u.children.length>0&&(o.unshift(0),a.unshift(u.children))}}const Ql={tag_name(e){return typeof e=="function"?t=>_i(t)&&e(t.name):e==="*"?_i:t=>_i(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>nr(t)&&e(t.data):t=>nr(t)&&t.data===e}};function Qa(e,t,n=!0,i=1/0){return Kl(Ql.tag_name(e),t,n,i)}function Xa(e,t){const n=new Yl(void 0,t);return new Ul(n,t).end(e),n.root}var Za={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Sa,function(){return function(n,i,r){n=n||{};var a=i.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(y,g,x,m){return a.fromToBase(y,g,x,m)}r.en.relativeTime=o,a.fromToBase=function(y,g,x,m,V){for(var X,Q,ie,D=x.$locale().relativeTime||o,Z=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],F=Z.length,_=0;_<F;_+=1){var k=Z[_];k.d&&(X=m?r(y).diff(x,k.d,!0):x.diff(y,k.d,!0));var N=(n.rounding||Math.round)(Math.abs(X));if(ie=X>0,N<=k.r||!k.r){N<=1&&_>0&&(k=Z[_-1]);var E=D[k.l];V&&(N=V(""+N)),Q=typeof E=="string"?E.replace("%d",N):E(N,g,k.l,ie);break}}if(g)return Q;var R=ie?D.future:D.past;return typeof R=="function"?R(Q):R.replace("%s",Q)},a.to=function(y,g){return u(y,g,this,!0)},a.from=function(y,g){return u(y,g,this)};var c=function(y){return y.$u?r.utc():r()};a.toNow=function(y){return this.to(c(this),y)},a.fromNow=function(y){return this.from(c(this),y)}}})})(Za);var Xl=Za.exports;const Zl=co(Xl);var Jl={exports:{}};(function(e,t){(function(n,i){e.exports=i(po)})(Sa,function(n){function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var r=i(n),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,u){return u==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,u){var c=100*o+u;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return r.default.locale(a,null,!0),a})})(Jl);function zt(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const ei=Object.prototype.toString,eu=Object.prototype.hasOwnProperty;function ir(e){return e===void 0}function Dn(e){return e!==void 0}function Ja(e){return e==null}function Pt(e){return ei.call(e)==="[object Array]"}function nn(e){return ei.call(e)==="[object Object]"}function rn(e){return ei.call(e)==="[object Number]"}function tn(e){const t=ei.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function qt(e){return ei.call(e)==="[object String]"}function _n(e,t){return!Ja(e)&&eu.call(e,t)}function Mt(e,t){const n=br(t);let i;return ae(e,function(r,a){if(n(r,a))return i=r,!1}),i}function tu(e,t){const n=br(t);let i=Pt(e)?-1:void 0;return ae(e,function(r,a){if(n(r,a))return i=a,!1}),i}function Nn(e,t){const n=br(t);let i=[];return ae(e,function(r,a){n(r,a)&&i.push(r)}),i}function ae(e,t){let n,i;if(ir(e))return;const r=Pt(e)?ru:iu;for(let a in e)if(_n(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function Pn(e,t,n){return ae(e,function(i,r){n=t(n,i,r)}),n}function es(e,t){return!!Pn(e,function(n,i,r){return n&&t(i,r)},!0)}function ts(e,t){return!!Mt(e,t)}function nu(e,t){let n=[];return ae(e,function(i,r){n.push(t(i,r))}),n}function Jr(e){return function(t){return es(e,function(n,i){return t[i]===n})}}function br(e){return tn(e)?e:t=>t===e}function iu(e){return e}function ru(e){return Number(e)}function au(e,t){let n,i,r,a;function o(x){let m=Date.now(),V=x?0:a+t-m;if(V>0)return u(V);e.apply(r,i),c()}function u(x){n=setTimeout(o,x)}function c(){n&&clearTimeout(n),n=a=i=r=void 0}function y(){n&&o(!0),c()}function g(...x){a=Date.now(),i=x,r=this,n||u(t)}return g.flush=y,g.cancel=c,g}function an(e,t){return e.bind(t)}function de(e,...t){return Object.assign(e,...t)}function su(e,t,n){let i=e;return ae(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let o=t[a+1],u=i[r];Dn(o)&&Ja(u)&&(u=i[r]=isNaN(+o)?{}:[]),ir(o)?ir(n)?delete i[r]:i[r]=n:i=u}),e}function ou(e,t){let n={},i=Object(e);return ae(t,function(r){r in i&&(n[r]=e[r])}),n}function lu(e,t){let n={},i=Object(e);return ae(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}var uu=1e3;function Gt(e,t){var n=this;t=t||uu,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,o=r.element,u=r.gfx,c=r.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(u,o,c):n.drawConnection(u,o,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Gt.prototype.canRender=function(e){};Gt.prototype.drawShape=function(e,t){};Gt.prototype.drawConnection=function(e,t){};Gt.prototype.getShapePath=function(e){};Gt.prototype.getConnectionPath=function(e){};function ue(e,t){var n=je(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Ti(e,t){return ts(t,function(n){return ue(e,n)})}function je(e){return e&&e.businessObject||e}function vn(e){return e&&e.di}function hn(e,t){return ue(e,"bpmn:CallActivity")?!1:ue(e,"bpmn:SubProcess")?(t=t||vn(e),t&&ue(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):ue(e,"bpmn:Participant")?!!je(e).processRef:!0}function ea(e){if(!(!ue(e,"bpmn:Participant")&&!ue(e,"bpmn:Lane"))){var t=vn(e).isHorizontal;return t===void 0?!0:t}}function cu(e){return e&&!!je(e).triggeredByEvent}function du(e){return nn(e)&&_n(e,"waypoints")}function ns(e){return nn(e)&&_n(e,"labelTarget")}var Ci={width:90,height:20},ta=15;function pu(e){return ue(e,"bpmn:Event")||ue(e,"bpmn:Gateway")||ue(e,"bpmn:DataStoreReference")||ue(e,"bpmn:DataObjectReference")||ue(e,"bpmn:DataInput")||ue(e,"bpmn:DataOutput")||ue(e,"bpmn:SequenceFlow")||ue(e,"bpmn:MessageFlow")||ue(e,"bpmn:Group")}function fu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=mu(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),o=r.x,u=r.y;return Math.abs(a)<Math.PI/2?u-=ta:o+=ta,{x:o,y:u}}function mu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function hu(e){return e.waypoints?fu(e.waypoints):ue(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Ci.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Ci.height/2}}function yu(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max(Ci.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=hu(t),i=Ci),de({x:n.x-i.width/2,y:n.y-i.height/2},i)}function vu(e){if(ue(e,"bpmn:FlowElement")||ue(e,"bpmn:Participant")||ue(e,"bpmn:Lane")||ue(e,"bpmn:SequenceFlow")||ue(e,"bpmn:MessageFlow")||ue(e,"bpmn:DataInput")||ue(e,"bpmn:DataOutput"))return"name";if(ue(e,"bpmn:TextAnnotation"))return"text";if(ue(e,"bpmn:Group"))return"categoryValueRef"}function gu(e){var t=e.categoryValueRef;return t&&t.value||""}function Ri(e){var t=e.businessObject,n=vu(t);if(n)return n==="categoryValueRef"?gu(t):t[n]||""}function bu(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function _u(e,t){return t.appendChild(bu(e,t))}function ze(e,t){return _u(t,e),e}var rr=2,is={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":rr,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":rr,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function wu(e,t){return is[t]?e.style[t]:e.getAttributeNS(null,t)}function rs(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=is[i];r?(r===rr&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function xu(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)rs(e,r,t[r])}function Se(e,t,n){if(typeof t=="string")if(n!==void 0)rs(e,t,n);else return wu(e,t);else xu(e,t);return e}const Eu=Object.prototype.toString;function Tt(e){return new sn(e)}function sn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}sn.prototype.add=function(e){return this.list.add(e),this};sn.prototype.remove=function(e){return Eu.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};sn.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};sn.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};sn.prototype.array=function(){return Array.from(this.list)};sn.prototype.has=sn.prototype.contains=function(e){return this.list.contains(e)};function ku(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}var _r={svg:"http://www.w3.org/2000/svg"},na='<svg xmlns="'+_r.svg+'"';function Su(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(_r.svg)===-1&&(e=na+e.substring(4)):(e=na+">"+e+"</svg>",t=!0);var n=Au(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Au(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Ae(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=Su(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(_r.svg,e),t&&Se(n,t),n}var Gi=null;function as(){return Gi===null&&(Gi=Ae("svg")),Gi}function ia(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Tu(e,t,n,i,r,a){var o=as().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return ia(o,e);case 6:return ia(o,{a:e,b:t,c:n,d:i,e:r,f:a})}}function Kn(e){return as().createSVGTransform()}var ra=/([&<>]{1})/g,Cu=/([&<>\n\r"]{1})/g,Ru={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Qi(e,t){function n(i,r){return Ru[r]||r}return e.replace(t,n)}function ss(e,t){var n,i,r,a,o;switch(e.nodeType){case 3:t.push(Qi(e.textContent,ra));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',Qi(a.value,Cu),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,i=o.length;n<i;++n)ss(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Qi(e.nodeValue,ra),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Du(e){for(var t=e.firstChild,n=[];t;)ss(t,n),t=t.nextSibling;return n.join("")}function aa(e,t){return Du(e)}function ti(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Iu(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Nu(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Iu(e,i))}function Xn(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Nu(n,t)),n.consolidate()}function wn(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Pu(e){return["M",e.x,e.y]}function Xi(e){return["L",e.x,e.y]}function Mu(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function $u(e,t){const n=e.length,i=[Pu(e[0])];for(let r=1;r<n;r++){const a=e[r-1],o=e[r],u=e[r+1];if(!u||!t){i.push(Xi(o));continue}const c=Math.min(t,ar(o.x-a.x,o.y-a.y),ar(u.x-o.x,u.y-o.y));if(!c){i.push(Xi(o));continue}const y=fi(o,a,c),g=fi(o,a,c*.5),x=fi(o,u,c),m=fi(o,u,c*.5);i.push(Xi(y)),i.push(Mu(g,m,x))}return i}function fi(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=ar(i,r),o=n/a;return{x:e.x+i*o,y:e.y+r*o}}function ar(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function wr(e,t,n){rn(t)&&(n=t,t=null),t||(t={});const i=Ae("path",t);return rn(n)&&(i.dataset.cornerRadius=String(n)),os(i,e)}function os(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Se(e,{d:wn($u(t,n))}),e}var sr="hsl(225, 10%, 15%)",Vu="white";function Bt(e,t){return ts(e.eventDefinitions,function(n){return n.$type===t})}function Lu(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function Bu(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function we(e,t,n){var i=vn(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||Vu}function ee(e,t,n){var i=vn(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||sr}function Wn(e,t,n,i){var r=vn(e),a=r.get("label");return i||a&&a.get("color:color")||t||ee(e,n)}function Ou(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return wn(r)}function Uu(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,o=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return wn(o)}function Fu(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,o=n/2,u=[["M",i+a,r],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return wn(u)}function qu(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return wn(a)}function Hn(e,t={}){return{width:At(e,t),height:yt(e,t)}}function At(e,t={}){return _n(t,"width")?t.width:e.width}function yt(e,t={}){return _n(t,"height")?t.height:e.height}function ju(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const zu=Object.prototype.toString,Wu=Object.prototype.hasOwnProperty;function Hu(e){return e===void 0}function Yu(e){return zu.call(e)==="[object Array]"}function Ku(e,t){return Wu.call(e,t)}function sa(e,t){let n,i;if(Hu(e))return;const r=Yu(e)?Qu:Gu;for(let a in e)if(Ku(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function Gu(e){return e}function Qu(e){return Number(e)}function gt(e,...t){const n=e.style;return sa(t,function(i){i&&sa(i,function(r,a){n[a]=r})}),e}function Xu(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Zu=Object.prototype.toString;function Mi(e){return new on(e)}function on(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}on.prototype.add=function(e){return this.list.add(e),this};on.prototype.remove=function(e){return Zu.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};on.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};on.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};on.prototype.array=function(){return Array.from(this.list)};on.prototype.has=on.prototype.contains=function(e){return this.list.contains(e)};function ls(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Ju(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var Di={},Ii,or,xr;function us(){Ii=window.addEventListener?"addEventListener":"attachEvent",or=window.removeEventListener?"removeEventListener":"detachEvent",xr=Ii!=="addEventListener"?"on":""}var ec=Di.bind=function(e,t,n,i){return Ii||us(),e[Ii](xr+t,n,i||!1),n},tc=Di.unbind=function(e,t,n,i){return or||us(),e[or](xr+t,n,i||!1),n},Er=ju({__proto__:null,bind:ec,unbind:tc,default:Di},[Di]),cs=["focus","blur"];function nc(e,t,n,i,r){return cs.indexOf(n)!==-1&&(r=!0),Er.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=Ju(o,t,!0),a.delegateTarget&&i.call(e,a)},r)}function ic(e,t,n,i){return cs.indexOf(t)!==-1&&(i=!0),Er.unbind(e,t,n,i)}var lr={bind:nc,unbind:ic},rc=ac,ds=!1,mi;typeof document<"u"&&(mi=document.createElement("div"),mi.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',ds=!mi.getElementsByTagName("link").length,mi=void 0);var Ye={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:ds?[1,"X<div>","</div>"]:[0,"",""]};Ye.td=Ye.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ye.option=Ye.optgroup=[1,'<select multiple="multiple">',"</select>"];Ye.thead=Ye.tbody=Ye.colgroup=Ye.caption=Ye.tfoot=[1,"<table>","</table>"];Ye.polyline=Ye.ellipse=Ye.polygon=Ye.circle=Ye.text=Ye.line=Ye.path=Ye.rect=Ye.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function ac(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ye,i)?Ye[i]:Ye._default,a=r[0],o=r[1],u=r[2],c=t.createElement("div");for(c.innerHTML=o+e+u;a--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var y=t.createDocumentFragment();c.firstChild;)y.appendChild(c.removeChild(c.firstChild));return y}var jt=rc;function It(e,t){return t=t||document,t.querySelector(e)}function sc(e,t){return t=t||document,t.querySelectorAll(e)}function Ni(e){e.parentNode&&e.parentNode.removeChild(e)}function Zi(e,t,n,i,r){var a=Kn();a.setTranslate(t,n);var o=Kn();o.setRotate(i||0,0,0);var u=Kn();u.setScale(1,1),Xn(e,[a,o,u])}function ps(e,t,n){var i=Kn();i.setTranslate(t,n),Xn(e,i)}function oc(e,t){var n=Kn();n.setRotate(t,0,0),Xn(e,n)}function lc(e,t){return t={exports:{}},e(t,t.exports),t.exports}var uc=lc(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var o=r-Math.floor(r),u="",a=0;a<Math.floor(r);a++){var c=Math.floor(Math.random()*i).toString(i);u=c+u}if(o){var y=Math.pow(i,o),c=Math.floor(Math.random()*y).toString(i);u=c+u}var g=parseInt(u,i);return g!==1/0&&g>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,r){var a=function(u){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var y=t(n,i)}while(Object.hasOwnProperty.call(o,y));return o[y]=u,y},o=a.hats={};return a.get=function(u){return a.hats[u]},a.set=function(u,c){return a.hats[u]=c,a},a.bits=n||128,a.base=i||16,a}});function Kt(e){if(!(this instanceof Kt))return new Kt(e);e=e||[128,36,1],this._seed=e.length?uc.rack(e[0],e[1],e[2]):e}Kt.prototype.next=function(e){return this._seed(e||!0)};Kt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Kt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Kt.prototype.assigned=function(e){return this._seed.get(e)||!1};Kt.prototype.unclaim=function(e){delete this._seed.hats[e]};Kt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var cc=new Kt,dc=10,hi=3,pc=1.5,wi=10,Cn=.95,fc=1,mc=.25;function xn(e,t,n,i,r,a,o){Gt.call(this,t,o);var u=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,y=e&&e.defaultLabelColor;function g(f){return n.computeStyle(f,{strokeLinecap:"round",strokeLinejoin:"round",stroke:sr,strokeWidth:2,fill:"white"})}function x(f){return n.computeStyle(f,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:sr,strokeWidth:2})}function m(f,s){var{ref:l={x:0,y:0},scale:v=1,element:w,parentGfx:B=r._svg}=s,le=Ae("marker",{id:f,viewBox:"0 0 20 20",refX:l.x,refY:l.y,markerWidth:20*v,markerHeight:20*v,orient:"auto"});ze(le,w);var re=It(":scope > defs",B);re||(re=Ae("defs"),ze(B,re)),ze(re,le)}function V(f,s,l,v){var w=cc.nextPrefixed("marker-");return X(f,w,s,l,v),"url(#"+w+")"}function X(f,s,l,v,w){if(l==="sequenceflow-end"){var B=Ae("path",{d:"M 1 5 L 11 10 L 1 15 Z",...g({fill:w,stroke:w,strokeWidth:1})});m(s,{element:B,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(l==="messageflow-start"){var le=Ae("circle",{cx:6,cy:6,r:3.5,...g({fill:v,stroke:w,strokeWidth:1,strokeDasharray:[1e4,1]})});m(s,{element:le,ref:{x:6,y:6},parentGfx:f})}if(l==="messageflow-end"){var re=Ae("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...g({fill:v,stroke:w,strokeWidth:1,strokeDasharray:[1e4,1]})});m(s,{element:re,ref:{x:8.5,y:5},parentGfx:f})}if(l==="association-start"){var ye=Ae("path",{d:"M 11 5 L 1 10 L 11 15",...x({fill:"none",stroke:w,strokeWidth:1.5,strokeDasharray:[1e4,1]})});m(s,{element:ye,ref:{x:1,y:10},scale:.5,parentGfx:f})}if(l==="association-end"){var Oe=Ae("path",{d:"M 1 5 L 11 10 L 1 15",...x({fill:"none",stroke:w,strokeWidth:1.5,strokeDasharray:[1e4,1]})});m(s,{element:Oe,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(l==="conditional-flow-marker"){var ot=Ae("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...g({fill:v,stroke:w})});m(s,{element:ot,ref:{x:-1,y:10},scale:.5,parentGfx:f})}if(l==="conditional-default-flow-marker"){var Je=Ae("path",{d:"M 6 4 L 10 16",...g({stroke:w,fill:"none"})});m(s,{element:Je,ref:{x:0,y:10},scale:.5,parentGfx:f})}}function Q(f,s,l,v,w={}){nn(v)&&(w=v,v=0),v=v||0,w=g(w);var B=s/2,le=l/2,re=Ae("circle",{cx:B,cy:le,r:Math.round((s+l)/4-v),...w});return ze(f,re),re}function ie(f,s,l,v,w,B){nn(w)&&(B=w,w=0),w=w||0,B=g(B);var le=Ae("rect",{x:w,y:w,width:s-w*2,height:l-w*2,rx:v,ry:v,...B});return ze(f,le),le}function D(f,s,l,v){var w=s/2,B=l/2,le=[{x:w,y:0},{x:s,y:B},{x:w,y:l},{x:0,y:B}],re=le.map(function(Oe){return Oe.x+","+Oe.y}).join(" ");v=g(v);var ye=Ae("polygon",{...v,points:re});return ze(f,ye),ye}function Z(f,s,l,v){l=x(l);var w=wr(s,l,v);return ze(f,w),w}function F(f,s,l){return Z(f,s,l,5)}function _(f,s,l){l=x(l);var v=Ae("path",{...l,d:s});return ze(f,v),v}function k(f,s,l,v){return _(s,l,de({"data-marker":f},v))}function N(f){return Te[f]}function E(f){return function(s,l,v){return N(f)(s,l,v)}}var R={"bpmn:MessageEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.235,my:.315}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill),le=v?we(s,u,l.fill):ee(s,c,l.stroke),re=_(f,w,{fill:B,stroke:le,strokeWidth:1});return re},"bpmn:TimerEventDefinition":function(f,s,l={}){var v=Q(f,s.width,s.height,.2*s.height,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:2}),w=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}});_(f,w,{stroke:ee(s,c,l.stroke),strokeWidth:2});for(var B=0;B<12;B++){var le=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}}),re=s.width/2,ye=s.height/2;_(f,le,{strokeWidth:1,stroke:ee(s,c,l.stroke),transform:"rotate("+B*30+","+ye+","+re+")"})}return v},"bpmn:EscalationEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(f,s,l={}){var v=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.222}});return _(f,v,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.2,my:.722}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),B=v?ee(s,c,l.stroke):"none",le=_(f,w,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1});return oc(le,45),le},"bpmn:CompensateEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.22,my:.5}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{strokeWidth:1,fill:B,stroke:ee(s,c,l.stroke)})},"bpmn:MultipleEventDefinition":function(f,s,l={},v){var w=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.222,my:.36}}),B=v?ee(s,c,l.stroke):we(s,u,l.fill);return _(f,w,{fill:B,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(f,s,l={}){var v=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width,containerHeight:s.height,position:{mx:.458,my:.194}});return _(f,v,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(f,s,l={}){var v=Q(f,s.width,s.height,8,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:4});return v}};function $(f,s,l={}){var v=je(f),w=Lu(v);return v.get("eventDefinitions")&&v.get("eventDefinitions").length>1?v.get("parallelMultiple")?R["bpmn:ParallelMultipleEventDefinition"](s,f,l,w):R["bpmn:MultipleEventDefinition"](s,f,l,w):Bt(v,"bpmn:MessageEventDefinition")?R["bpmn:MessageEventDefinition"](s,f,l,w):Bt(v,"bpmn:TimerEventDefinition")?R["bpmn:TimerEventDefinition"](s,f,l,w):Bt(v,"bpmn:ConditionalEventDefinition")?R["bpmn:ConditionalEventDefinition"](s,f,l,w):Bt(v,"bpmn:SignalEventDefinition")?R["bpmn:SignalEventDefinition"](s,f,l,w):Bt(v,"bpmn:EscalationEventDefinition")?R["bpmn:EscalationEventDefinition"](s,f,l,w):Bt(v,"bpmn:LinkEventDefinition")?R["bpmn:LinkEventDefinition"](s,f,l,w):Bt(v,"bpmn:ErrorEventDefinition")?R["bpmn:ErrorEventDefinition"](s,f,l,w):Bt(v,"bpmn:CancelEventDefinition")?R["bpmn:CancelEventDefinition"](s,f,l,w):Bt(v,"bpmn:CompensateEventDefinition")?R["bpmn:CompensateEventDefinition"](s,f,l,w):Bt(v,"bpmn:TerminateEventDefinition")?R["bpmn:TerminateEventDefinition"](s,f,l,w):null}var P={ParticipantMultiplicityMarker:function(f,s,l={}){var v=At(s,l),w=yt(s,l),B=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:v,containerHeight:w,position:{mx:(v/2-6)/v,my:(w-15)/w}});k("participant-multiplicity",f,B,{strokeWidth:2,fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})},SubProcessMarker:function(f,s,l={}){var v=ie(f,14,14,0,{strokeWidth:1,fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)});ps(v,s.width/2-7.5,s.height-20);var w=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});k("sub-process",f,w,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})},ParallelMarker:function(f,s,l){var v=At(s,l),w=yt(s,l),B=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:v,containerHeight:w,position:{mx:(v/2+l.parallel)/v,my:(w-20)/w}});k("parallel",f,B,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})},SequentialMarker:function(f,s,l){var v=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+l.seq)/s.width,my:(s.height-19)/s.height}});k("sequential",f,v,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})},CompensationMarker:function(f,s,l){var v=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+l.compensation)/s.width,my:(s.height-13)/s.height}});k("compensation",f,v,{strokeWidth:1,fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})},LoopMarker:function(f,s,l){var v=At(s,l),w=yt(s,l),B=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:v,containerHeight:w,position:{mx:(v/2+l.loop)/v,my:(w-7)/w}});k("loop",f,B,{strokeWidth:1.5,fill:"none",stroke:ee(s,c,l.stroke),strokeMiterlimit:.5})},AdhocMarker:function(f,s,l){var v=At(s,l),w=yt(s,l),B=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:v,containerHeight:w,position:{mx:(v/2+l.adhoc)/v,my:(w-15)/w}});k("adhoc",f,B,{strokeWidth:1,fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke)})}};function Y(f,s,l,v){P[f](s,l,v)}function K(f,s,l,v={}){v={fill:v.fill,stroke:v.stroke,width:At(s,v),height:yt(s,v)};var w=je(s),B=l&&l.includes("SubProcessMarker");B?v={...v,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:v={...v,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},ae(l,function(ye){Y(ye,f,s,v)}),w.get("isForCompensation")&&Y("CompensationMarker",f,s,v),ue(w,"bpmn:AdHocSubProcess")&&Y("AdhocMarker",f,s,v);var le=w.get("loopCharacteristics"),re=le&&le.get("isSequential");le&&(re===void 0&&Y("LoopMarker",f,s,v),re===!1&&Y("ParallelMarker",f,s,v),re===!0&&Y("SequentialMarker",f,s,v))}function J(f,s,l={}){l=de({size:{width:100}},l);var v=a.createText(s||"",l);return Tt(v).add("djs-label"),ze(f,v),v}function ge(f,s,l,v={}){var w=je(s),B=Hn({width:s.width,height:s.height},v);return J(f,w.name,{align:l,box:B,padding:7,style:{fill:Wn(s,y,c,v.stroke)}})}function me(f,s,l={}){var v={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return J(f,Ri(s),{box:v,fitBox:!0,style:de({},a.getExternalStyle(),{fill:Wn(s,y,c,l.stroke)})})}function oe(f,s,l,v={}){var w=ea(l),B=J(f,s,{box:{height:30,width:w?yt(l,v):At(l,v)},align:"center-middle",style:{fill:Wn(l,y,c,v.stroke)}});if(w){var le=-1*yt(l,v);Zi(B,0,-le,270)}}function he(f,s,l={}){var{width:v,height:w}=Hn(s,l);return ie(f,v,w,wi,{...l,fill:we(s,u,l.fill),fillOpacity:Cn,stroke:ee(s,c,l.stroke)})}function ct(f,s,l={}){var v=je(s),w=we(s,u,l.fill),B=ee(s,c,l.stroke);return(v.get("associationDirection")==="One"||v.get("associationDirection")==="Both")&&(l.markerEnd=V(f,"association-end",w,B)),v.get("associationDirection")==="Both"&&(l.markerStart=V(f,"association-start",w,B)),l=xe(l,["markerStart","markerEnd"]),F(f,s.waypoints,{...l,stroke:B,strokeDasharray:"0, 5"})}function Ze(f,s,l={}){var v=we(s,u,l.fill),w=ee(s,c,l.stroke),B=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),le=_(f,B,{fill:v,fillOpacity:Cn,stroke:w}),re=je(s);if(Bu(re)){var ye=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:(s.height-18)/s.height}});_(f,ye,{strokeWidth:2,fill:v,stroke:w})}return le}function $e(f,s,l={}){return Q(f,s.width,s.height,{fillOpacity:Cn,...l,fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)})}function st(f,s,l={}){return D(f,s.width,s.height,{fill:we(s,u,l.fill),fillOpacity:Cn,stroke:ee(s,c,l.stroke)})}function U(f,s,l={}){var v=ie(f,At(s,l),yt(s,l),0,{fill:we(s,u,l.fill),fillOpacity:l.fillOpacity||Cn,stroke:ee(s,c,l.stroke),strokeWidth:1.5}),w=je(s);if(ue(w,"bpmn:Lane")){var B=w.get("name");oe(f,B,s,l)}return v}function L(f,s,l={}){var v=he(f,s,l);cu(s)&&Se(v,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var w=hn(s);return ge(f,s,w?"center-top":"center-middle",l),w?K(f,s,void 0,l):K(f,s,["SubProcessMarker"],l),v}function te(f,s,l={}){var v=he(f,s,l);return ge(f,s,"center-middle",l),K(f,s,void 0,l),v}var Te=this.handlers={"bpmn:AdHocSubProcess":function(f,s,l={}){return hn(s)?l=xe(l,["fill","stroke","width","height"]):l=xe(l,["fill","stroke"]),L(f,s,l)},"bpmn:Association":function(f,s,l={}){return l=xe(l,["fill","stroke"]),ct(f,s,l)},"bpmn:BoundaryEvent":function(f,s,l={}){var{renderIcon:v=!0}=l;l=xe(l,["fill","stroke"]);var w=je(s),B=w.get("cancelActivity");l={strokeWidth:1.5,fill:we(s,u,l.fill),fillOpacity:fc,stroke:ee(s,c,l.stroke)},B||(l.strokeDasharray="6");var le=$e(f,s,l);return Q(f,s.width,s.height,hi,{...l,fill:"none"}),v&&$(s,f,l),le},"bpmn:BusinessRuleTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l),w=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),B=_(f,w);Se(B,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1});var le=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),re=_(f,le);return Se(re,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:CallActivity":function(f,s,l={}){return l=xe(l,["fill","stroke"]),L(f,s,{strokeWidth:5,...l})},"bpmn:ComplexGateway":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=st(f,s,l),w=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return _(f,w,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:DataInput":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=i.getRawPath("DATA_ARROW"),w=Ze(f,s,l);return _(f,v,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1}),w},"bpmn:DataInputAssociation":function(f,s,l={}){return l=xe(l,["fill","stroke"]),ct(f,s,{...l,markerEnd:V(f,"association-end",we(s,u,l.fill),ee(s,c,l.stroke))})},"bpmn:DataObject":function(f,s,l={}){return l=xe(l,["fill","stroke"]),Ze(f,s,l)},"bpmn:DataObjectReference":E("bpmn:DataObject"),"bpmn:DataOutput":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=i.getRawPath("DATA_ARROW"),w=Ze(f,s,l);return _(f,v,{strokeWidth:1,fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke)}),w},"bpmn:DataOutputAssociation":function(f,s,l={}){return l=xe(l,["fill","stroke"]),ct(f,s,{...l,markerEnd:V(f,"association-end",we(s,u,l.fill),ee(s,c,l.stroke))})},"bpmn:DataStoreReference":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}});return _(f,v,{fill:we(s,u,l.fill),fillOpacity:Cn,stroke:ee(s,c,l.stroke),strokeWidth:2})},"bpmn:EndEvent":function(f,s,l={}){var{renderIcon:v=!0}=l;l=xe(l,["fill","stroke"]);var w=$e(f,s,{...l,strokeWidth:4});return v&&$(s,f,l),w},"bpmn:EventBasedGateway":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=je(s),w=st(f,s,l);Q(f,s.width,s.height,s.height*.2,{fill:we(s,"none",l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1});var B=v.get("eventGatewayType"),le=!!v.get("instantiate");function re(){var Oe=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});_(f,Oe,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:2})}if(B==="Parallel"){var ye=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});_(f,ye,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1})}else B==="Exclusive"&&(le||Q(f,s.width,s.height,s.height*.26,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1}),re());return w},"bpmn:ExclusiveGateway":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=st(f,s,l),w=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}}),B=vn(s);return B.get("isMarkerVisible")&&_(f,w,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:Gateway":function(f,s,l={}){return l=xe(l,["fill","stroke"]),st(f,s,l)},"bpmn:Group":function(f,s,l={}){return l=xe(l,["fill","stroke","width","height"]),ie(f,s.width,s.height,wi,{stroke:ee(s,c,l.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:At(s,l),height:yt(s,l)})},"bpmn:InclusiveGateway":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=st(f,s,l);return Q(f,s.width,s.height,s.height*.24,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:2.5}),v},"bpmn:IntermediateEvent":function(f,s,l={}){var{renderIcon:v=!0}=l;l=xe(l,["fill","stroke"]);var w=$e(f,s,{...l,strokeWidth:1.5});return Q(f,s.width,s.height,hi,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1.5}),v&&$(s,f,l),w},"bpmn:IntermediateCatchEvent":E("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":E("bpmn:IntermediateEvent"),"bpmn:Lane":function(f,s,l={}){return l=xe(l,["fill","stroke","width","height"]),U(f,s,{...l,fillOpacity:mc})},"bpmn:ManualTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l),w=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return _(f,w,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5}),v},"bpmn:MessageFlow":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=je(s),w=vn(s),B=we(s,u,l.fill),le=ee(s,c,l.stroke),re=F(f,s.waypoints,{markerEnd:V(f,"messageflow-end",B,le),markerStart:V(f,"messageflow-start",B,le),stroke:le,strokeDasharray:"10, 11",strokeWidth:1.5});if(v.get("messageRef")){var ye=re.getPointAtLength(re.getTotalLength()/2),Oe=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ye.x,y:ye.y}}),ot={strokeWidth:1};w.get("messageVisibleKind")==="initiating"?(ot.fill=B,ot.stroke=le):(ot.fill=le,ot.stroke=B);var Je=_(f,Oe,ot),Ce=v.get("messageRef"),et=Ce.get("name"),Ee=J(f,et,{align:"center-top",fitBox:!0,style:{fill:le}}),kt=Je.getBBox(),Vt=Ee.getBBox(),Ke=ye.x-Vt.width/2,se=ye.y+kt.height/2+dc;Zi(Ee,Ke,se,0)}return re},"bpmn:ParallelGateway":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=st(f,s,l),w=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return _(f,w,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:Participant":function(f,s,l={}){l=xe(l,["fill","stroke","width","height"]);var v=U(f,s,l),w=hn(s),B=ea(s),le=je(s),re=le.get("name");if(w){var ye=B?[{x:30,y:0},{x:30,y:yt(s,l)}]:[{x:0,y:30},{x:At(s,l),y:30}];Z(f,ye,{stroke:ee(s,c,l.stroke),strokeWidth:pc}),oe(f,re,s,l)}else{var Oe=Hn(s,l);B||(Oe.height=At(s,l),Oe.width=yt(s,l));var ot=J(f,re,{box:Oe,align:"center-middle",style:{fill:Wn(s,y,c,l.stroke)}});if(!B){var Je=-1*yt(s,l);Zi(ot,0,-Je,270)}}return le.get("participantMultiplicity")&&Y("ParticipantMultiplicityMarker",f,s,l),v},"bpmn:ReceiveTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=je(s),w=te(f,s,l),B;return v.get("instantiate")?(Q(f,28,28,20*.22,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),B=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):B=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),_(f,B,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),w},"bpmn:ScriptTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l),w=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return _(f,w,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:SendTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l),w=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return _(f,w,{fill:ee(s,c,l.stroke),stroke:we(s,u,l.fill),strokeWidth:1}),v},"bpmn:SequenceFlow":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=we(s,u,l.fill),w=ee(s,c,l.stroke),B=F(f,s.waypoints,{markerEnd:V(f,"sequenceflow-end",v,w),stroke:w}),le=je(s),{source:re}=s;if(re){var ye=je(re);le.get("conditionExpression")&&ue(ye,"bpmn:Activity")&&Se(B,{markerStart:V(f,"conditional-flow-marker",v,w)}),ye.get("default")&&(ue(ye,"bpmn:Gateway")||ue(ye,"bpmn:Activity"))&&ye.get("default")===le&&Se(B,{markerStart:V(f,"conditional-default-flow-marker",v,w)})}return B},"bpmn:ServiceTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l);Q(f,10,10,{fill:we(s,u,l.fill),stroke:"none",transform:"translate(6, 6)"});var w=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});_(f,w,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),Q(f,10,10,{fill:we(s,u,l.fill),stroke:"none",transform:"translate(11, 10)"});var B=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return _(f,B,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),v},"bpmn:StartEvent":function(f,s,l={}){var{renderIcon:v=!0}=l;l=xe(l,["fill","stroke"]);var w=je(s);w.get("isInterrupting")||(l={...l,strokeDasharray:"6"});var B=$e(f,s,l);return v&&$(s,f,l),B},"bpmn:SubProcess":function(f,s,l={}){return hn(s)?l=xe(l,["fill","stroke","width","height"]):l=xe(l,["fill","stroke"]),L(f,s,l)},"bpmn:Task":function(f,s,l={}){return l=xe(l,["fill","stroke"]),te(f,s,l)},"bpmn:TextAnnotation":function(f,s,l={}){l=xe(l,["fill","stroke","width","height"]);var{width:v,height:w}=Hn(s,l),B=ie(f,v,w,0,0,{fill:"none",stroke:"none"}),le=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:v,containerHeight:w,position:{mx:0,my:0}});_(f,le,{stroke:ee(s,c,l.stroke)});var re=je(s),ye=re.get("text")||"";return J(f,ye,{align:"left-top",box:Hn(s,l),padding:7,style:{fill:Wn(s,y,c,l.stroke)}}),B},"bpmn:Transaction":function(f,s,l={}){hn(s)?l=xe(l,["fill","stroke","width","height"]):l=xe(l,["fill","stroke"]);var v=L(f,s,{strokeWidth:1.5,...l}),w=n.style(["no-fill","no-events"],{stroke:ee(s,c,l.stroke),strokeWidth:1.5}),B=hn(s);return B||(l={}),ie(f,At(s,l),yt(s,l),wi-hi,hi,w),v},"bpmn:UserTask":function(f,s,l={}){l=xe(l,["fill","stroke"]);var v=te(f,s,l),w=15,B=12,le=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:w,y:B}});_(f,le,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5});var re=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:w,y:B}});_(f,re,{fill:we(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5});var ye=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:w,y:B}});return _(f,ye,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:.5}),v},label:function(f,s,l={}){return me(f,s,l)}};this._drawPath=_,this._renderer=N}zt(xn,Gt);xn.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];xn.prototype.canRender=function(e){return ue(e,"bpmn:BaseElement")};xn.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};xn.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};xn.prototype.getShapePath=function(e){return ue(e,"bpmn:Event")?Ou(e):ue(e,"bpmn:Activity")?Uu(e,wi):ue(e,"bpmn:Gateway")?Fu(e):qu(e)};function xe(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var hc=0,yc={width:150,height:50};function vc(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function gc(e){return nn(e)?de({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function bc(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(a){return{width:0,height:0}}}function _c(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=bc(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return wc(e,r,i,a);r=Ec(r,a.width,t)}}function wc(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var oa="­";function xc(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===oa)&&r.pop();break}var o=r[r.length-1];return o&&o===oa&&(r[r.length-1]="-"),r.join("")}function Ec(e,t,n){var i=Math.max(e.length*(n/t),1),r=xc(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function kc(){var e=document.getElementById("helper-svg");return e||(e=Ae("svg"),Se(e,{id:"helper-svg"}),gt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function $i(e){this._config=de({},{size:yc,padding:hc,style:{},align:"center-top"},e||{})}$i.prototype.createText=function(e,t){return this.layoutText(e,t).element};$i.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};$i.prototype.layoutText=function(e,t){var n=de({},this._config.size,t.box),i=de({},this._config.style,t.style),r=vc(t.align||this._config.align),a=gc(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,u=Sc(i),c=e.split(/\u00AD?\r?\n/),y=[],g=n.width-a.left-a.right,x=Ae("text");Se(x,{x:0,y:0}),Se(x,i);var m=kc();for(ze(m,x);c.length;)y.push(_c(c,g,x));r.vertical==="middle"&&(a.top=a.bottom=0);var V=Pn(y,function(Z,F,_){return Z+(u||F.height)},0)+a.top+a.bottom,X=Pn(y,function(Z,F,_){return F.width>Z?F.width:Z},0),Q=a.top;r.vertical==="middle"&&(Q+=(n.height-V)/2),Q-=(u||y[0].height)/4;var ie=Ae("text");Se(ie,i),ae(y,function(Z){var F;switch(Q+=u||Z.height,r.horizontal){case"left":F=a.left;break;case"right":F=(o?X:g)-a.right-Z.width;break;default:F=Math.max(((o?X:g)-Z.width)/2+a.left,0)}var _=Ae("tspan");Se(_,{x:F,y:Q}),_.textContent=Z.text,ze(ie,_)}),ti(x);var D={width:X,height:V};return{dimensions:D,element:ie}};function Sc(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var Ac=12,Tc=1.2,Cc=30;function fs(e){var t=de({fontFamily:"Arial, sans-serif",fontSize:Ac,fontWeight:"normal",lineHeight:Tc},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=de({},t,{fontSize:n},e&&e.externalStyle||{}),r=new $i({style:t});this.getExternalLabelBounds=function(a,o){var u=r.getDimensions(o,{box:{width:90,height:30},style:i});return{x:Math.round(a.x+a.width/2-u.width/2),y:Math.round(a.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(a,o){var u=r.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(Cc,Math.round(u.height))}},this.createText=function(a,o){return r.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}fs.$inject=["config.textRenderer"];function Rc(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,y=0;y<i.heightElements.length;y++)o["y"+y]=i.heightElements[y]*u;for(var g=0;g<i.widthElements.length;g++)o["x"+g]=i.widthElements[g]*c}var x=Pc(i.d,{mx:r,my:a,e:o});return x}}var Dc=/\{([^{}]+)\}/g,Ic=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Nc(e,t,n){var i=n;return t.replace(Ic,function(r,a,o,u,c){a=a||u,i&&(a in i&&(i=i[a]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Pc(e,t){return String(e).replace(Dc,function(n,i){return Nc(n,i,t)})}const Mc={__init__:["bpmnRenderer"],bpmnRenderer:["type",xn],textRenderer:["type",fs],pathMap:["type",Rc]};function $c(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const ms={translate:["value",$c]};function Vc(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function ur(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Lc(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Bc(e){return Vc({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Oc(e){for(var t=e.waypoints,n=t.reduce(function(y,g,x){var m=t[x-1];if(m){var V=y[y.length-1],X=V&&V.endLength||0,Q=Uc(m,g);y.push({start:m,end:g,startLength:X,endLength:X+Q,length:Q})}return y},[]),i=n.reduce(function(y,g){return y+g.length},0),r=i/2,a=0,o=n[a];o.endLength<r;)o=n[++a];var u=(r-o.startLength)/o.length,c={x:o.start.x+(o.end.x-o.start.x)*u,y:o.start.y+(o.end.y-o.start.y)*u};return c}function cr(e){return du(e)?Oc(e):Bc(e)}function Uc(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function at(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function xi(e,t,n){return de({id:e.id,type:e.$type,businessObject:e,di:t},n)}function Fc(e,t,n){var i=e.waypoint;return!i||i.length<2?[cr(t),cr(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function hs(e,t,n){return new Error("element ".concat(at(t)," referenced by ").concat(at(e),"#").concat(n," not yet drawn"))}function Qt(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}Qt.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Qt.prototype.add=function(e,t,n){var i,r,a;if(ue(t,"bpmndi:BPMNPlane")){var o=ue(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(xi(e,t,o)),this._canvas.addRootElement(i)}else if(ue(t,"bpmndi:BPMNShape")){var u=!hn(e,t),c=jc(e);r=n&&(n.hidden||n.collapsed);var y=t.bounds;i=this._elementFactory.createShape(xi(e,t,{collapsed:u,hidden:r,x:Math.round(y.x),y:Math.round(y.y),width:Math.round(y.width),height:Math.round(y.height),isFrame:c})),ue(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),ue(e,"bpmn:Lane")&&(a=0),ue(e,"bpmn:DataStoreReference")&&(qc(n,cr(y))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,a)}else if(ue(t,"bpmndi:BPMNEdge")){var g=this._getSource(e),x=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(xi(e,t,{hidden:r,source:g,target:x,waypoints:Fc(t,g,x)})),ue(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,a)}else throw new Error("unknown di ".concat(at(t)," for element ").concat(at(e)));return pu(e)&&Ri(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Qt.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error("missing ".concat(at(e),"#attachedToRef"));var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw hs(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};Qt.prototype.addLabel=function(e,t,n){var i,r,a;return i=yu(t,n),r=Ri(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(xi(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Ri(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Qt.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?hs(e,i,t+"Ref"):new Error("".concat(at(e),"#").concat(t," Ref not specified"))};Qt.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Qt.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Qt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function qc(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function jc(e){return ue(e,"bpmn:Group")}const zc={__depends__:[ms],bpmnImporter:["type",Qt]},Wc={__depends__:[Mc,zc]};function gn(e,t){t=!!t,Pt(e)||(e=[e]);var n,i,r,a;return ae(e,function(o){var u=o;o.waypoints&&!t&&(u=gn(o.waypoints,!0));var c=u.x,y=u.y,g=u.height||0,x=u.width||0;(c<n||n===void 0)&&(n=c),(y<i||i===void 0)&&(i=y),(c+x>r||r===void 0)&&(r=c+x),(y+g>a||a===void 0)&&(a=y+g)}),{x:n,y:i,height:a-i,width:r-n}}function ys(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function vs(e){return!!(e&&e.isFrame)}function gs(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}gs.prototype.next=function(){return this._prefix+ ++this._counter};var Hc=new gs("ov"),Yc=500;function Xe(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Hc,this._overlayDefaults=de({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Kc(n.getContainer()),this._init()}Xe.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Xe.prototype.get=function(e){if(qt(e)&&(e={id:e}),qt(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Nn(t.overlays,Jr({type:e.type})):t.overlays.slice():[]}else return e.type?Nn(this._overlays,Jr({type:e.type})):e.id?this._overlays[e.id]:null};Xe.prototype.add=function(e,t,n){if(nn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=de({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Xe.prototype.remove=function(e){var t=this.get(e)||[];Pt(t)||(t=[t]);var n=this;ae(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Ni(i.html),Ni(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};Xe.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Xe.prototype.show=function(){Vi(this._overlayRoot)};Xe.prototype.hide=function(){Vi(this._overlayRoot,!1)};Xe.prototype.clear=function(){this._overlays={},this._overlayContainers=[],ls(this._overlayRoot)};Xe.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=gn(t);i=a.x,r=a.y}bs(n,i,r),Xu(e.html,"data-container-id",t.id)};Xe.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var o;i.waypoints?o=gn(i).width:o=i.width,r=t.right*-1+o}if(t.bottom!==void 0){var u;i.waypoints?u=gn(i).height:u=i.height,a=t.bottom*-1+u}bs(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Xe.prototype._createOverlayContainer=function(e){var t=jt('<div class="djs-overlays" />');gt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Xe.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";_s(this._overlayRoot,n)};Xe.prototype._getOverlayContainer=function(e,t){var n=Mt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Xe.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),qt(i)&&(i=jt(i)),a=this._getOverlayContainer(n),r=jt('<div class="djs-overlay" data-overlay-id="'+t+'">'),gt(r,{position:"absolute"}),r.appendChild(i),e.type&&Mi(r).add("djs-overlay-"+e.type);var o=this._canvas.findRoot(n),u=this._canvas.getRootElement();Vi(r,o===u),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Xe.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,u=this._canvas.getRootElement(),c=!0;(i!==u||n&&(Dn(r)&&r>t.scale||Dn(a)&&a<t.scale))&&(c=!1),Vi(o,c),this._updateOverlayScale(e,t)};Xe.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,o,u="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Dn(i)&&t.scale<i&&(o=(1/t.scale||1)*i),Dn(r)&&t.scale>r&&(o=(1/t.scale||1)*r)),Dn(o)&&(u="scale("+o+","+o+")"),_s(a,u)};Xe.prototype._updateOverlaysVisibilty=function(e){var t=this;ae(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Xe.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});ae(a,function(c){t.remove(c.id)});var o=t._getOverlayContainer(r);if(o){Ni(o.html);var u=t._overlayContainers.indexOf(o);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",Yc,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(ae(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Mi(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function Kc(e){var t=jt('<div class="djs-overlay-container" />');return gt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function bs(e,t,n){gt(e,{left:t+"px",top:n+"px"})}function Vi(e,t){e.style.display=t===!1?"none":""}function _s(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const ws={__init__:["overlays"],overlays:["type",Xe]};function xs(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(ys(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}xs.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Gc={__init__:["changeSupport"],changeSupport:["type",xs]};var Qc=1e3;function ft(e){this._eventBus=e}ft.$inject=["eventBus"];function Xc(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}ft.prototype.on=function(e,t,n,i,r,a){if((tn(t)||rn(t))&&(a=r,r=i,i=n,n=t,t=null),tn(n)&&(a=r,r=i,i=n,n=Qc),nn(r)&&(a=r,r=!1),!tn(i))throw new Error("handlerFn must be a function");Pt(e)||(e=[e]);var o=this._eventBus;ae(e,function(u){var c=["commandStack",u,t].filter(function(y){return y}).join(".");o.on(c,n,r?Xc(i,a):i,a)})};ft.prototype.canExecute=Xt("canExecute");ft.prototype.preExecute=Xt("preExecute");ft.prototype.preExecuted=Xt("preExecuted");ft.prototype.execute=Xt("execute");ft.prototype.executed=Xt("executed");ft.prototype.postExecute=Xt("postExecute");ft.prototype.postExecuted=Xt("postExecuted");ft.prototype.revert=Xt("revert");ft.prototype.reverted=Xt("reverted");function Xt(e){return function(n,i,r,a,o){(tn(n)||rn(n))&&(o=a,a=r,r=i,i=n,n=null),this.on(n,e,i,r,a,o)}}function kr(e,t){t.invoke(ft,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}zt(kr,ft);kr.$inject=["canvas","injector"];const Zc={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",kr]};var Jc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ed(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return Jc[t]})}var td="_plane";function Sr(e){var t=e.id;return ue(e,"bpmn:SubProcess")?nd(t):t}function nd(e){return e+td}var id="bjs-breadcrumbs-shown";function Es(e,t,n){var i=jt('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),a=Mi(r);r.appendChild(i);var o=[];e.on("element.changed",function(c){var y=c.element,g=je(y),x=Mt(o,function(m){return m===g});x&&u()});function u(c){c&&(o=rd(c));var y=o.flatMap(function(x){var m=n.findRoot(Sr(x))||n.findRoot(x.id);if(!m&&ue(x,"bpmn:Process")){var V=t.find(function(ie){var D=je(ie);return D&&D.get("processRef")===x});m=V&&n.findRoot(V.id)}if(!m)return[];var X=ed(x.name||x.id),Q=jt('<li><span class="bjs-crumb"><a title="'+X+'">'+X+"</a></span></li>");return Q.addEventListener("click",function(){n.setRootElement(m)}),Q});i.innerHTML="";var g=y.length>1;a.toggle(id,g),y.forEach(function(x){i.appendChild(x)})}e.on("root.set",function(c){u(c.element)})}Es.$inject=["eventBus","elementRegistry","canvas"];function rd(e){for(var t=je(e),n=[],i=t;i;i=i.$parent)(ue(i,"bpmn:SubProcess")||ue(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function ks(e,t){var n=null,i=new ad;e.on("root.set",function(r){var a=r.element,o=t.viewbox(),u=i.get(a);if(i.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=a,!(!ue(a,"bpmn:SubProcess")&&!u)){u=u||{x:0,y:0,zoom:1};var c=(o.x-u.x)*o.scale,y=(o.y-u.y)*o.scale;(c!==0||y!==0)&&t.scroll({dx:c,dy:y}),u.zoom!==o.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}ks.$inject=["eventBus","canvas"];function ad(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var la={x:180,y:160};function En(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}En.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};En.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var o=a.bpmnElement;if(o){var u=o.$parent;ue(o,"bpmn:SubProcess")&&!a.isExpanded&&n.push(o),od(o,e)&&i.push({diElement:a,parent:u})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var o=t._createDiagram(a);t._processToDiagramMap[a.id]=o,r.push(o)}}),i.forEach(function(a){for(var o=a.diElement,u=a.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var c=t._processToDiagramMap[u.id];t._moveToDiPlane(o,c.plane)}}),r};En.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=sd(e),i={x:n.x-la.x,y:n.y-la.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};En.prototype._moveToDiPlane=function(e,t){var n=Ss(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};En.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};En.$inject=["eventBus","moddle"];function Ss(e){return ue(e,"bpmndi:BPMNDiagram")?e:Ss(e.$parent)}function sd(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=ur(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Lc(t)}function od(e,t){var n=e.$parent;return!(!ue(n,"bpmn:SubProcess")||n===t.bpmnElement||Ti(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var yi=250,ld='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',ud="bjs-drilldown-empty";function un(e,t,n,i,r){ft.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var a=this;this.executed("shape.toggleCollapse",yi,function(o){var u=o.shape;a._canDrillDown(u)?a._addOverlay(u):a._removeOverlay(u)},!0),this.reverted("shape.toggleCollapse",yi,function(o){var u=o.shape;a._canDrillDown(u)?a._addOverlay(u):a._removeOverlay(u)},!0),this.executed(["shape.create","shape.move","shape.delete"],yi,function(o){var u=o.oldParent,c=o.newParent||o.parent,y=o.shape;a._canDrillDown(y)&&a._addOverlay(y),a._updateDrilldownOverlay(u),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(y)},!0),this.reverted(["shape.create","shape.move","shape.delete"],yi,function(o){var u=o.oldParent,c=o.newParent||o.parent,y=o.shape;a._canDrillDown(y)&&a._addOverlay(y),a._updateDrilldownOverlay(u),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(y)},!0),t.on("import.render.complete",function(){n.filter(function(o){return a._canDrillDown(o)}).map(function(o){a._addOverlay(o)})})}zt(un,ft);un.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};un.prototype._canDrillDown=function(e){var t=this._canvas;return ue(e,"bpmn:SubProcess")&&t.findRoot(Sr(e))};un.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=je(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Mi(i.html).toggle(ud,!r)}};un.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=je(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var a=jt('<button type="button" class="bjs-drilldown">'+ld+"</button>"),o=i.get("name")||i.get("id"),u=this._translate("Open {element}",{element:o});a.setAttribute("title",u),a.addEventListener("click",function(){t.setRootElement(t.findRoot(Sr(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:a}),this._updateOverlayVisibility(e)};un.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};un.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const cd={__depends__:[ws,Gc,Zc],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Es],drilldownCentering:["type",ks],drilldownOverlayBehavior:["type",un],subprocessCompatibility:["type",En]};var dd=500,pd=1e3;function kn(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a){var o=Ae("rect");return Se(o,de({x:0,y:0,rx:4,width:100,height:100},n)),o}e.on(["shape.added","shape.changed"],dd,function(a){var o=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=i.getOutline(o)||r(),ze(u,c)),i.updateShapeOutline(c,o)}),e.on(["connection.added","connection.changed"],function(a){var o=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=r(),ze(u,c)),i.updateConnectionOutline(c,o)})}kn.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&ae(i,function(r){n=n||r.updateOutline(t,e)}),n||Se(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};kn.prototype.updateConnectionOutline=function(e,t){var n=gn(t);Se(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};kn.prototype.registerProvider=function(e,t){t||(t=e,e=pd),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};kn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};kn.prototype.getOutline=function(e){var t,n=this._getProviders();return ae(n,function(i){tn(i.getOutline)&&(t=t||i.getOutline(e))}),t};kn.$inject=["eventBus","styles","elementRegistry"];const As={__init__:["outline"],outline:["type",kn]},fd="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",md="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",hd={width:36,height:50},yd={width:50,height:50};function ua(e,t,n){return Ae("path",{d:e,strokeWidth:2,transform:"translate(".concat(t.x,", ").concat(t.y,")"),...n})}const en=5;function Li(e,t){this._styles=t,e.registerProvider(this)}Li.$inject=["outline","styles"];Li.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!ns(e))return ue(e,"bpmn:Gateway")?(n=Ae("rect"),de(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),Se(n,de({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Ti(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Ae("rect"),Se(n,de({x:-en,y:-en,rx:14,width:e.width+en*2,height:e.height+en*2},t))):ue(e,"bpmn:EndEvent")?(n=Ae("circle"),Se(n,de({cx:e.width/2,cy:e.height/2,r:e.width/2+en+1},t))):ue(e,"bpmn:Event")?(n=Ae("circle"),Se(n,de({cx:e.width/2,cy:e.height/2,r:e.width/2+en},t))):ue(e,"bpmn:DataObjectReference")&&ca(e,"bpmn:DataObjectReference")?n=ua(fd,{x:-6,y:-6},t):ue(e,"bpmn:DataStoreReference")&&ca(e,"bpmn:DataStoreReference")&&(n=ua(md,{x:-6,y:-6},t)),n};Li.prototype.updateOutline=function(e,t){if(!ns(e))return Ti(e,["bpmn:SubProcess","bpmn:Group"])?(Se(t,{width:e.width+en*2,height:e.height+en*2}),!0):!!Ti(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function ca(e,t){var n;return t==="bpmn:DataObjectReference"?n=hd:t==="bpmn:DataStoreReference"&&(n=yd),e.width===n.width&&e.height===n.height}const vd={__depends__:[As],__init__:["outlineProvider"],outlineProvider:["type",Li]};function Ts(e){return e.originalEvent||e.srcEvent}function Cs(e,t){return(Ts(e)||e).button===t}function Bi(e){return Cs(e,0)}function gd(e){return Cs(e,1)}function bd(e){var t=Ts(e)||e;return Bi(e)&&t.shiftKey}function _d(e){return!0}function vi(e){return Bi(e)||gd(e)}var da=500;function Rs(e,t,n){var i=this;function r(R,$,P){if(!u(R,$)){var Y,K,J;P?K=t.getGraphics(P):(Y=$.delegateTarget||$.target,Y&&(K=Y,P=t.get(K))),!(!K||!P)&&(J=e.fire(R,{element:P,gfx:K,originalEvent:$}),J===!1&&($.stopPropagation(),$.preventDefault()))}}var a={};function o(R){return a[R]}function u(R,$){var P=y[R]||Bi;return!P($)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},y={"element.contextmenu":_d,"element.mousedown":vi,"element.mouseup":vi,"element.click":vi,"element.dblclick":vi};function g(R,$,P){var Y=c[R];if(!Y)throw new Error("unmapped DOM event name <"+R+">");return r(Y,$,P)}var x="svg, .djs-element";function m(R,$,P,Y){var K=a[P]=function(J){r(P,J)};Y&&(y[P]=Y),K.$delegate=lr.bind(R,x,$,K)}function V(R,$,P){var Y=o(P);Y&&lr.unbind(R,$,Y.$delegate)}function X(R){ae(c,function($,P){m(R,P,$)})}function Q(R){ae(c,function($,P){V(R,P,$)})}e.on("canvas.destroy",function(R){Q(R.svg)}),e.on("canvas.init",function(R){X(R.svg)}),e.on(["shape.added","connection.added"],function(R){var $=R.element,P=R.gfx;e.fire("interactionEvents.createHit",{element:$,gfx:P})}),e.on(["shape.changed","connection.changed"],da,function(R){var $=R.element,P=R.gfx;e.fire("interactionEvents.updateHit",{element:$,gfx:P})}),e.on("interactionEvents.createHit",da,function(R){var $=R.element,P=R.gfx;i.createDefaultHit($,P)}),e.on("interactionEvents.updateHit",function(R){var $=R.element,P=R.gfx;i.updateDefaultHit($,P)});var ie=k("djs-hit djs-hit-stroke"),D=k("djs-hit djs-hit-click-stroke"),Z=k("djs-hit djs-hit-all"),F=k("djs-hit djs-hit-no-move"),_={all:Z,"click-stroke":D,stroke:ie,"no-move":F};function k(R,$){return $=de({stroke:"white",strokeWidth:15},$||{}),n.cls(R,["no-fill","no-border"],$)}function N(R,$){var P=_[$];if(!P)throw new Error("invalid hit type <"+$+">");return Se(R,P),R}function E(R,$){ze(R,$)}this.removeHits=function(R){var $=sc(".djs-hit",R);ae($,ti)},this.createDefaultHit=function(R,$){var P=R.waypoints,Y=R.isFrame,K;return P?this.createWaypointsHit($,P):(K=Y?"stroke":"all",this.createBoxHit($,K,{width:R.width,height:R.height}))},this.createWaypointsHit=function(R,$){var P=wr($);return N(P,"stroke"),E(R,P),P},this.createBoxHit=function(R,$,P){P=de({x:0,y:0},P);var Y=Ae("rect");return N(Y,$),Se(Y,P),E(R,Y),Y},this.updateDefaultHit=function(R,$){var P=It(".djs-hit",$);if(P)return R.waypoints?os(P,R.waypoints):Se(P,{width:R.width,height:R.height}),P},this.fire=r,this.triggerMouseEvent=g,this.mouseHandler=o,this.registerEvent=m,this.unregisterEvent=V}Rs.$inject=["eventBus","elementRegistry","styles"];const wd={__init__:["interactionEvents"],interactionEvents:["type",Rs]};function Ln(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Ln.$inject=["eventBus","canvas"];Ln.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Ln.prototype.get=function(){return this._selectedElements};Ln.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ln.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Pt(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(o){var u=r.findRoot(o);return a===u}),t?ae(e,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var pa="hover",fa="selected",gi=6;function Ar(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(o,u){e.addMarker(o,u)}function a(o,u){e.removeMarker(o,u)}t.on("element.hover",function(o){r(o.element,pa)}),t.on("element.out",function(o){a(o.element,pa)}),t.on("selection.changed",function(o){function u(x){a(x,fa)}function c(x){r(x,fa)}var y=o.oldSelection,g=o.newSelection;ae(y,function(x){g.indexOf(x)===-1&&u(x)}),ae(g,function(x){y.indexOf(x)===-1&&c(x)}),i._updateSelectionOutline(g)}),t.on("element.changed",function(o){n.isSelected(o.element)&&i._updateSelectionOutline(n.get())})}Ar.$inject=["canvas","eventBus","selection"];Ar.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");ku(t);var n=e.length>1,i=this._canvas.getContainer();if(Tt(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=xd(gn(e)),a=Ae("rect");Se(a,de({rx:3},r)),Tt(a).add("djs-selection-outline"),ze(t,a)}};function xd(e){return{x:e.x-gi,y:e.y-gi,width:e.width+gi*2,height:e.height+gi*2}}function Ds(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,o=a.canExecute,u=a.elements,c=a.hints||{},y=c.autoSelect;if(o){if(y===!1)return;Pt(y)?t.select(y):t.select(u.filter(Ed))}}),e.on("connect.end",500,function(r){var a=r.context,o=a.connection;o&&t.select(o)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],o=i.get(r.context.shape.id),u=Mt(a,function(c){return o.id===c.id});u||t.select(o)}),e.on("element.click",function(r){if(Bi(r)){var a=r.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),u=t.get().length>1,c=bd(r);if(o&&u)return c?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,c)}})}Ds.$inject=["eventBus","selection","canvas","elementRegistry"];function Ed(e){return!e.hidden}const kd={__init__:["selectionVisuals","selectionBehavior"],__depends__:[wd,As],selection:["type",Ln],selectionVisuals:["type",Ar],selectionBehavior:["type",Ds]},Sd=/^class[ {]/;function Ad(e){return Sd.test(e.toString())}function Tr(e){return Array.isArray(e)}function Ji(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ei(...e){e.length===1&&Tr(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Td=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Cd=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Rd=/\/\*([^*]*)\*\//m;function Dd(e){if(typeof e!="function")throw new Error('Cannot annotate "'.concat(e,'". Expected a function!'));const t=e.toString().match(Ad(e)?Td:Cd);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Rd);return(r&&r[1]||i).trim()})||[]}function Is(e,t){const n=t||{get:function(F,_){if(i.push(F),_===!1)return null;throw u('No provider for "'.concat(F,'"!'))}},i=[],r=this._providers=Object.create(n._providers||null),a=this._instances=Object.create(null),o=a.injector=this,u=function(F){const _=i.join(" -> ");return i.length=0,new Error(_?"".concat(F," (Resolving: ").concat(_,")"):F)};function c(F,_){if(!r[F]&&F.includes(".")){const k=F.split(".");let N=c(k.shift());for(;k.length;)N=N[k.shift()];return N}if(Ji(a,F))return a[F];if(Ji(r,F)){if(i.indexOf(F)!==-1)throw i.push(F),u("Cannot resolve circular dependency!");return i.push(F),a[F]=r[F][0](r[F][1]),i.pop(),a[F]}return n.get(F,_)}function y(F,_){if(typeof _>"u"&&(_={}),typeof F!="function")if(Tr(F))F=Ei(F.slice());else throw u('Cannot invoke "'.concat(F,'". Expected a function!'));const N=(F.$inject||Dd(F)).map(E=>Ji(_,E)?_[E]:c(E));return{fn:F,dependencies:N}}function g(F){const{fn:_,dependencies:k}=y(F),N=Function.prototype.bind.call(_,null,...k);return new N}function x(F,_,k){const{fn:N,dependencies:E}=y(F,k);return N.apply(_,E)}function m(F){return Ei(_=>F.get(_))}function V(F,_){if(_&&_.length){const k=Object.create(null),N=Object.create(null),E=[],R=[],$=[];let P,Y,K,J;for(let ge in r)P=r[ge],_.indexOf(ge)!==-1&&(P[2]==="private"?(Y=E.indexOf(P[3]),Y===-1?(K=P[3].createChild([],_),J=m(K),E.push(P[3]),R.push(K),$.push(J),k[ge]=[J,ge,"private",K]):k[ge]=[$[Y],ge,"private",R[Y]]):k[ge]=[P[2],P[1]],N[ge]=!0),(P[2]==="factory"||P[2]==="type")&&P[1].$scope&&_.forEach(me=>{P[1].$scope.indexOf(me)!==-1&&(k[ge]=[P[2],P[1]],N[me]=!0)});_.forEach(ge=>{if(!N[ge])throw new Error('No provider for "'+ge+'". Cannot use provider from the parent!')}),F.unshift(k)}return new Is(F,o)}const X={factory:x,type:g,value:function(F){return F}};function Q(F,_){const k=F.__init__||[];return function(){k.forEach(N=>{typeof N=="string"?_.get(N):_.invoke(N)})}}function ie(F){const _=F.__exports__;if(_){const k=F.__modules__,N=Object.keys(F).reduce((Y,K)=>(K!=="__exports__"&&K!=="__modules__"&&K!=="__init__"&&K!=="__depends__"&&(Y[K]=F[K]),Y),Object.create(null)),E=(k||[]).concat(N),R=V(E),$=Ei(function(Y){return R.get(Y)});_.forEach(function(Y){r[Y]=[$,Y,"private",R]});const P=(F.__init__||[]).slice();return P.unshift(function(){R.init()}),F=Object.assign({},F,{__init__:P}),Q(F,R)}return Object.keys(F).forEach(function(k){if(k==="__init__"||k==="__depends__")return;const N=F[k];if(N[2]==="private"){r[k]=N;return}const E=N[0],R=N[1];r[k]=[X[E],Id(E,R),E]}),Q(F,o)}function D(F,_){return F.indexOf(_)!==-1||(F=(_.__depends__||[]).reduce(D,F),F.indexOf(_)!==-1)?F:F.concat(_)}function Z(F){const _=F.reduce(D,[]).map(ie);let k=!1;return function(){k||(k=!0,_.forEach(N=>N()))}}this.get=c,this.invoke=x,this.instantiate=g,this.createChild=V,this.init=Z(e)}function Id(e,t){return e!=="value"&&Tr(t)&&(t=Ei(t.slice())),t}var Nd=1;function cn(e,t){Gt.call(this,e,Nd),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}zt(cn,Gt);cn.prototype.canRender=function(){return!0};cn.prototype.drawShape=function(t,n,i){var r=Ae("rect");return Se(r,{x:0,y:0,width:n.width||0,height:n.height||0}),vs(n)?Se(r,de({},this.FRAME_STYLE,i||{})):Se(r,de({},this.SHAPE_STYLE,i||{})),ze(t,r),r};cn.prototype.drawConnection=function(t,n,i){var r=wr(n.waypoints,de({},this.CONNECTION_STYLE,i||{}));return ze(t,r),r};cn.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,o=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return wn(o)};cn.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return wn(a)};cn.$inject=["eventBus","styles"];function Pd(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return de(a,{class:n})},this.style=function(n,i){!Pt(n)&&!i&&(i=n,n=[]);var r=Pn(n,function(a,o){return de(a,e[o]||{})},{});return i?de(r,i):r},this.computeStyle=function(n,i,r){return Pt(i)||(r=i,i=[]),t.style(i||[],de({},r,n||{}))}}const Md={__init__:["defaultRenderer"],defaultRenderer:["type",cn],styles:["type",Pd]};function $d(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Vd(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function ki(e,t){return Math.round(e*t)/t}function ma(e){return rn(e)?e+"px":e}function Ld(e){for(;e.parent;)e=e.parent;return e}function Bd(e){e=de({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),gt(n,{position:"relative",overflow:"hidden",width:ma(e.width),height:ma(e.height)}),t.appendChild(n),n}function Ns(e,t,n){const i=Ae("g");Tt(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const Od="base",Ps=0,Ud=1,Fd={shape:["x","y","width","height"],connection:["waypoints"]};function _e(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}_e.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];_e.prototype._init=function(e){const t=this._eventBus,n=this._container=Bd(e),i=this._svg=Ae("svg");Se(i,{width:"100%",height:"100%"}),ze(n,i);const r=this._viewport=Ns(i,"viewport");e.deferUpdate&&(this._viewboxChanged=au(an(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};_e.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};_e.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=ys(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};_e.prototype.getDefaultLayer=function(){return this.getLayer(Od,Ps)};_e.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};_e.prototype._getChildIndex=function(e){return Pn(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};_e.prototype._createLayer=function(e,t){typeof t>"u"&&(t=Ud);const n=this._getChildIndex(t);return{group:Ns(this._viewport,"layer-"+e,n),index:t,visible:!0}};_e.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};_e.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(ti(n),t.visible=!1),n};_e.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ti(t.group))};_e.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};_e.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(Ld(e))||{}).rootElement:void 0};_e.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};_e.prototype._findPlaneForRoot=function(e){return Mt(this._planes,function(t){return t.rootElement===e})};_e.prototype.getContainer=function(){return this._container};_e.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(ae([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Tt(r).add(t)):(e.markers.delete(t),Tt(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};_e.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};_e.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};_e.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};_e.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};_e.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};_e.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,Ps);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};_e.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};_e.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};_e.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};_e.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};_e.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};_e.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=Fd[e];if(!es(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};_e.prototype._setParent=function(e,t,n){Vd(t.children,e,n),e.parent=t};_e.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const o=a.create(e,t,i);return this._elementRegistry.add(t,o),a.update(e,t,o),r.fire(e+".added",{element:t,gfx:o}),t};_e.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};_e.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};_e.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),$d(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};_e.prototype.removeShape=function(e){return this._removeElement(e,"shape")};_e.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};_e.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};_e.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};_e.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};_e.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,a,o,u,c,y;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);const g=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);Xn(t,g)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},o=Xn(t),r=o?o.matrix:Tu(),u=ki(r.a,1e3),c=ki(-r.e||0,1e3),y=ki(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/u:0,y:y?y/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};_e.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=de({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Ms(t,n)}),{x:n.e,y:n.f}};_e.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=gn(e),a=ur(r),o=this.viewbox(),u=this.zoom();let c,y;o.y+=t.top/u,o.x+=t.left/u,o.width-=(t.right+t.left)/u,o.height-=(t.bottom+t.top)/u;const g=ur(o);if(!(r.width<o.width&&r.height<o.height))c=r.x-o.x,y=r.y-o.y;else{const m=Math.max(0,a.right-g.right),V=Math.min(0,a.left-g.left),X=Math.max(0,a.bottom-g.bottom),Q=Math.min(0,a.top-g.top);c=m||V,y=X||Q}this.scroll({dx:-c*u,dy:-y*u})};_e.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),ki(i.a,1e3)};function Ms(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}_e.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};_e.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let o,u,c,y,g;c=i.getCTM();const x=c.a;return t?(o=de(a,t),u=o.matrixTransform(c.inverse()),y=r.translate(u.x,u.y).scale(1/x*e).translate(-u.x,-u.y),g=c.multiply(y)):g=r.scale(e),Ms(this._viewport,g),g};_e.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};_e.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,o=n.height*t.scale;return{x:i,y:r,width:a,height:o}};_e.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Mn="data-element-id";function wt(e){this._elements={},this._eventBus=e}wt.$inject=["eventBus"];wt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),Se(t,Mn,i),n&&Se(n,Mn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};wt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(Se(i.gfx,Mn,""),i.secondaryGfx&&Se(i.secondaryGfx,Mn,""),delete t[n])};wt.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};wt.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&Se(t,Mn,i),t};wt.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&Se(e,Mn);var n=this._elements[t];return n&&n.element};wt.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};wt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],o=a.element,u=a.gfx;if(e(o,u))return o}};wt.prototype.getAll=function(){return this.filter(function(e){return e})};wt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};wt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};wt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function qd(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var u=this.indexOf(a);if(typeof o>"u"){if(u!==-1)return;o=this.length}u!==-1&&this.splice(u,1),this.splice(o,0,a),u===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function jd(e){return e.__refs_collection===!0}function zd(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function $s(e,t,n){var i=qd(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function Wd(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var o=r;r=null,o&&e.unset(o,i,n),r=a,e.set(r,i,n)}}})}function Ct(e,t){if(!(this instanceof Ct))return new Ct(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ct.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?$s(this,t,e):Wd(this,t,e)};Ct.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return jd(n)||$s(this,t,e),n};Ct.prototype.ensureBound=function(e,t){zd(e,t)||this.bind(e,t)};Ct.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Ct.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Cr=new Ct({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Vs=new Ct({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),ha=new Ct({name:"attachers",collection:!0},{name:"host"}),Ls=new Ct({name:"outgoing",collection:!0},{name:"source"}),Bs=new Ct({name:"incoming",collection:!0},{name:"target"});function ni(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Cr.bind(this,"parent"),Vs.bind(this,"labels"),Ls.bind(this,"outgoing"),Bs.bind(this,"incoming")}function ii(){ni.call(this),Cr.bind(this,"children"),ha.bind(this,"host"),ha.bind(this,"attachers")}zt(ii,ni);function Os(){ni.call(this),Cr.bind(this,"children")}zt(Os,ii);function Us(){ii.call(this),Vs.bind(this,"labelTarget")}zt(Us,ii);function Fs(){ni.call(this),Ls.bind(this,"source"),Bs.bind(this,"target")}zt(Fs,ni);var Hd={connection:Fs,shape:ii,label:Us,root:Os};function Yd(e,t){var n=Hd[e];if(!n)throw new Error("unknown type: <"+e+">");return de(new n,t)}function Bn(){this._uid=12}Bn.prototype.createRoot=function(e){return this.create("root",e)};Bn.prototype.createLabel=function(e){return this.create("label",e)};Bn.prototype.createShape=function(e){return this.create("shape",e)};Bn.prototype.createConnection=function(e){return this.create("connection",e)};Bn.prototype.create=function(e,t){return t=de({},t||{}),t.id||(t.id=e+"_"+this._uid++),Yd(e,t)};var Pi="__fn",qs=1e3,Kd=Array.prototype.slice;function bt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}bt.prototype.on=function(e,t,n,i){if(e=Pt(e)?e:[e],tn(t)&&(i=n,n=t,t=qs),!rn(t))throw new Error("priority must be a number");var r=n;i&&(r=an(n,i),r[Pi]=n[Pi]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:r,next:null})})};bt.prototype.once=function(e,t,n,i){var r=this;if(tn(t)&&(i=n,n=t,t=qs),!rn(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(i,arguments);return r.off(e,a),o}a[Pi]=n,this.on(e,t,a)};bt.prototype.off=function(e,t){e=Pt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};bt.prototype.createEvent=function(e){var t=new ri;return t.init(e),t};bt.prototype.fire=function(e,t){var n,i,r,a;if(a=Kd.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof ri?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==o&&(n.type=o)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};bt.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};bt.prototype._destroy=function(){this._listeners={}};bt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};bt.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=Gd(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};bt.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};bt.prototype._getListeners=function(e){return this._listeners[e]};bt.prototype._setListeners=function(e,t){this._listeners[e]=t};bt.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[Pi]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function ri(){}ri.prototype.stopPropagation=function(){this.cancelBubble=!0};ri.prototype.preventDefault=function(){this.defaultPrevented=!0};ri.prototype.init=function(e){de(this,e||{})};function Gd(e,t){return e.apply(null,t)}function Qd(e){return e.childNodes[0]}function Xd(e){return e.parentNode.childNodes[1]}function xt(e,t){this._eventBus=e,this._elementRegistry=t}xt.$inject=["eventBus","elementRegistry"];xt.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=Xd(t),n||(n=Ae("g"),Tt(n).add("djs-children"),ze(t.parentNode,n))):n=t,n};xt.prototype._clear=function(e){var t=Qd(e);return ls(t),t};xt.prototype._createContainer=function(e,t,n,i){var r=Ae("g");Tt(r).add("djs-group"),typeof n<"u"?js(r,t,t.childNodes[n]):ze(t,r);var a=Ae("g");Tt(a).add("djs-element"),Tt(a).add("djs-"+e),i&&Tt(a).add("djs-frame"),ze(r,a);var o=Ae("g");return Tt(o).add("djs-visual"),ze(a,o),a};xt.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,vs(t))};xt.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Pn(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),ae(i,function(r){var a=r.children;if(a){var o=t._getChildrenContainer(r);ae(a.slice().reverse(),function(u){var c=n.getGraphics(u);js(c.parentNode,o)})}})};xt.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};xt.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};xt.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};xt.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};xt.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),ps(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?Se(n,"display","none"):Se(n,"display","block")}};xt.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);ti(t.parentNode)};function js(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const Zd={__depends__:[Md],__init__:["canvas"],canvas:["type",_e],elementRegistry:["type",wt],elementFactory:["type",Bn],eventBus:["type",bt],graphicsFactory:["type",xt]};function Jd(e){var t=new Is(e);return t.init(),t}function ep(e){e=e||{};var t={config:["value",e]},n=[t,Zd].concat(e.modules||[]);return Jd(n)}function dn(e,t){this._injector=t||ep(e),this.get("eventBus").fire("diagram.init")}dn.prototype.get=function(e,t){return this._injector.get(e,t)};dn.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};dn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};dn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Rr(){}Rr.prototype.get=function(e){return this.$model.properties.get(this,e)};Rr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function zs(e,t){this.model=e,this.properties=t}zs.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Rr.prototype);ae(e.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(o){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ae(o,an(function(u,c){this.set(c,u)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var tp={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ws={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Dr(e,t){var n=Ws[e];return n?n(t):t}function dr(e){return!!tp[e]}function Hs(e){return!!Ws[e]}function lt(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function Et(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}Et.prototype.build=function(){return ou(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};Et.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};Et.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=r.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(u,1),this.addProperty(t,n?void 0:u,o),a[i.name]=a[i.localName]=t};Et.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=lt(r[0],i),o=lt(r[1],a.prefix).name,u=this.propertiesByName[o];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};Et.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};Et.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};Et.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};Et.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};Et.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error("cannot create <".concat(e.name,"> extending <").concat(e.extends,">"))};Et.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};Et.prototype.hasProperty=function(e){return this.propertiesByName[e]};Et.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ae(e.properties,an(function(a){a=de({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,u=a.redefines;o||u?this.redefineProperty(a,o||u,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function pn(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ae(e,an(this.registerPackage,this))}pn.prototype.getPackage=function(e){return this.packageMap[e]};pn.prototype.getPackages=function(){return this.packages};pn.prototype.registerPackage=function(e){e=de({},e);var t=this.packageMap;ya(t,e,"prefix"),ya(t,e,"uri"),ae(e.types,an(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};pn.prototype.registerType=function(e,t){e=de({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:de(e.meta||{})});var n=lt(e.name,t.prefix),i=n.name,r={};ae(e.properties,an(function(a){var o=lt(a.name,n.prefix),u=o.name;dr(a.type)||(a.type=lt(a.type,o.prefix).name),de(a,{ns:o,name:u}),r[u]=a},this)),de(e,{ns:n,name:i,propertiesByName:r}),ae(e.extends,an(function(a){var o=lt(a,n.prefix),u=this.typeMap[o.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};pn.prototype.mapTypes=function(e,t,n){var i=dr(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(c,y){var g=lt(c,dr(c)?"":e.prefix);r.mapTypes(g,t,y)}function o(c){return a(c,!0)}function u(c){return a(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ae(i.superClass,n?o:u),t(i,!n),ae(i.traits,o)};pn.prototype.getEffectiveDescriptor=function(e){var t=lt(e),n=new Et(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};pn.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function ya(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Sn(e){this.model=e}Sn.prototype.set=function(e,t,n){if(!qt(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;np(n)?i?delete e[r]:delete e.$attrs[pr(t)]:i?r in e?e[r]=n:Ys(e,i,n):e.$attrs[pr(t)]=n};Sn.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[pr(t)];var i=n.name;return!e[i]&&n.isMany&&Ys(e,n,[]),e[i]};Sn.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=de({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Sn.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Sn.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Sn.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError("unknown property <".concat(t,"> on <").concat(e.$type,">"));if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function np(e){return typeof e>"u"}function Ys(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function pr(e){return e.replace(/^:/,"")}function Rt(e,t={}){this.properties=new Sn(this),this.factory=new zs(this,this.properties),this.registry=new pn(e,this.properties),this.typeCache={},this.config=t}Rt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Rt.prototype.getType=function(e){var t=this.typeCache,n=qt(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Rt.prototype.createAny=function(e,t,n){var i=lt(e),r={$type:e,$instanceOf:function(o){return o===this.$type},get:function(o){return this[o]},set:function(o,u){su(this,[o],u)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ae(n,function(o,u){nn(o)&&o.value!==void 0?r[o.name]=o.value:r[u]=o}),r};Rt.prototype.getPackage=function(e){return this.registry.getPackage(e)};Rt.prototype.getPackages=function(){return this.registry.getPackages()};Rt.prototype.getElementDescriptor=function(e){return e.$descriptor};Rt.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Rt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Rt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var va=String.fromCharCode,ip=Object.prototype.hasOwnProperty,rp=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Gn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Gn).forEach(function(e){Gn[e.toUpperCase()]=Gn[e]});function ap(e,t,n,i){return i?ip.call(Gn,i)?Gn[i]:"&"+i+";":va(t||parseInt(n,16))}function mn(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(rp,ap):e}var sp="http://www.w3.org/2001/XMLSchema-instance",op="xsi",ga="xsi:type",ba="non-whitespace outside of root node";function Rn(e){return new Error(e)}function _a(e){return"missing namespace for prefix <"+e+">"}function bi(e){return{get:e,enumerable:!0}}function lp(e){var t={},n;for(n in e)t[n]=e[n];return t}function fr(e){return e+"$uri"}function up(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[fr(i)]=n;return t}function wa(){return{line:0,column:0}}function cp(e){throw e}function Ks(e){if(!this)return new Ks(e);var t=e&&e.proxy,n,i,r,a,o=cp,u,c,y,g,x=wa,m=!1,V=!1,X=null,Q=!1,ie;function D(_){_ instanceof Error||(_=Rn(_)),X=_,o(_,x)}function Z(_){u&&(_ instanceof Error||(_=Rn(_)),u(_,x))}this.on=function(_,k){if(typeof k!="function")throw Rn("required args <name, cb>");switch(_){case"openTag":i=k;break;case"text":n=k;break;case"closeTag":r=k;break;case"error":o=k;break;case"warn":u=k;break;case"cdata":a=k;break;case"attention":g=k;break;case"question":y=k;break;case"comment":c=k;break;default:throw Rn("unsupported event: "+_)}return this},this.ns=function(_){if(typeof _>"u"&&(_={}),typeof _!="object")throw Rn("required args <nsMap={}>");var k={},N;for(N in _)k[N]=_[N];return k[sp]=op,V=!0,ie=k,this},this.parse=function(_){if(typeof _!="string")throw Rn("required args <xml=string>");return X=null,F(_),x=wa,Q=!1,X},this.stop=function(){Q=!0};function F(_){var k=V?[]:null,N=V?up(ie):null,E,R=[],$=0,P=!1,Y=!1,K=0,J=0,ge,me,oe,he,ct,Ze,$e,st,U,L="",te=0,Te;function f(){if(Te!==null)return Te;var l,v,w,B=V&&N.xmlns,le=V&&m?[]:null,re=te,ye=L,Oe=ye.length,ot,Je,Ce,et,Ee,kt={},Vt={},Ke,se,h;e:for(;re<Oe;re++)if(Ke=!1,se=ye.charCodeAt(re),!(se===32||se<14&&se>8)){for((se<65||se>122||se>90&&se<97)&&se!==95&&se!==58&&(Z("illegal first char attribute name"),Ke=!0),h=re+1;h<Oe;h++)if(se=ye.charCodeAt(h),!(se>96&&se<123||se>64&&se<91||se>47&&se<59||se===46||se===45||se===95)){if(se===32||se<14&&se>8){Z("missing attribute value"),re=h;continue e}if(se===61)break;Z("illegal attribute name char"),Ke=!0}if(Ee=ye.substring(re,h),Ee==="xmlns:xmlns"&&(Z("illegal declaration of xmlns"),Ke=!0),se=ye.charCodeAt(h+1),se===34)h=ye.indexOf('"',re=h+2),h===-1&&(h=ye.indexOf("'",re),h!==-1&&(Z("attribute value quote missmatch"),Ke=!0));else if(se===39)h=ye.indexOf("'",re=h+2),h===-1&&(h=ye.indexOf('"',re),h!==-1&&(Z("attribute value quote missmatch"),Ke=!0));else for(Z("missing attribute value quotes"),Ke=!0,h=h+1;h<Oe&&(se=ye.charCodeAt(h+1),!(se===32||se<14&&se>8));h++);for(h===-1&&(Z("missing closing quotes"),h=Oe,Ke=!0),Ke||(Ce=ye.substring(re,h)),re=h;h+1<Oe&&(se=ye.charCodeAt(h+1),!(se===32||se<14&&se>8));h++)re===h&&(Z("illegal character after attribute end"),Ke=!0);if(re=h+1,Ke)continue e;if(Ee in Vt){Z("attribute <"+Ee+"> already defined");continue}if(Vt[Ee]=!0,!V){kt[Ee]=Ce;continue}if(m){if(Je=Ee==="xmlns"?"xmlns":Ee.charCodeAt(0)===120&&Ee.substr(0,6)==="xmlns:"?Ee.substr(6):null,Je!==null){if(l=mn(Ce),v=fr(Je),et=ie[l],!et){if(Je==="xmlns"||v in N&&N[v]!==l)do et="ns"+$++;while(typeof N[et]<"u");else et=Je;ie[l]=et}N[Je]!==et&&(ot||(N=lp(N),ot=!0),N[Je]=et,Je==="xmlns"&&(N[fr(et)]=l,B=et),N[v]=l),kt[Ee]=Ce;continue}le.push(Ee,Ce);continue}if(se=Ee.indexOf(":"),se===-1){kt[Ee]=Ce;continue}if(!(w=N[Ee.substring(0,se)])){Z(_a(Ee.substring(0,se)));continue}Ee=B===w?Ee.substr(se+1):w+Ee.substr(se),Ee===ga&&(se=Ce.indexOf(":"),se!==-1?(w=Ce.substring(0,se),w=N[w]||w,Ce=w+Ce.substring(se)):Ce=B+":"+Ce),kt[Ee]=Ce}if(m)for(re=0,Oe=le.length;re<Oe;re++){if(Ee=le[re++],Ce=le[re],se=Ee.indexOf(":"),se!==-1){if(!(w=N[Ee.substring(0,se)])){Z(_a(Ee.substring(0,se)));continue}Ee=B===w?Ee.substr(se+1):w+Ee.substr(se),Ee===ga&&(se=Ce.indexOf(":"),se!==-1?(w=Ce.substring(0,se),w=N[w]||w,Ce=w+Ce.substring(se)):Ce=B+":"+Ce)}kt[Ee]=Ce}return Te=kt}function s(){for(var l=/(\r\n|\r|\n)/g,v=0,w=0,B=0,le=J,re,ye;K>=B&&(re=l.exec(_),!(!re||(le=re[0].length+re.index,le>K)));)v+=1,B=le;return K==-1?(w=le,ye=_.substring(J)):J===0?ye=_.substring(J,K):(w=K-B,ye=J==-1?_.substring(K):_.substring(K,J+1)),{data:ye,line:v,column:w}}for(x=s,t&&(U=Object.create({},{name:bi(function(){return $e}),originalName:bi(function(){return st}),attrs:bi(f),ns:bi(function(){return N})}));J!==-1;){if(_.charCodeAt(J)===60?K=J:K=_.indexOf("<",J),K===-1){if(R.length)return D("unexpected end of file");if(J===0)return D("missing start tag");J<_.length&&_.substring(J).trim()&&Z(ba);return}if(J!==K){if(R.length){if(n&&(n(_.substring(J,K),mn,x),Q))return}else if(_.substring(J,K).trim()&&(Z(ba),Q))return}if(he=_.charCodeAt(K+1),he===33){if(oe=_.charCodeAt(K+2),oe===91&&_.substr(K+3,6)==="CDATA["){if(J=_.indexOf("]]>",K),J===-1)return D("unclosed cdata");if(a&&(a(_.substring(K+9,J),x),Q))return;J+=3;continue}if(oe===45&&_.charCodeAt(K+3)===45){if(J=_.indexOf("-->",K),J===-1)return D("unclosed comment");if(c&&(c(_.substring(K+4,J),mn,x),Q))return;J+=3;continue}}if(he===63){if(J=_.indexOf("?>",K),J===-1)return D("unclosed question");if(y&&(y(_.substring(K,J+2),x),Q))return;J+=2;continue}for(ge=K+1;;ge++){if(ct=_.charCodeAt(ge),isNaN(ct))return J=-1,D("unclosed tag");if(ct===34)oe=_.indexOf('"',ge+1),ge=oe!==-1?oe:ge;else if(ct===39)oe=_.indexOf("'",ge+1),ge=oe!==-1?oe:ge;else if(ct===62){J=ge;break}}if(he===33){if(g&&(g(_.substring(K,J+1),mn,x),Q))return;J+=1;continue}if(Te={},he===47){if(P=!1,Y=!0,!R.length)return D("missing open tag");if(ge=$e=R.pop(),oe=K+2+ge.length,_.substring(K+2,oe)!==ge)return D("closing tag mismatch");for(;oe<J;oe++)if(he=_.charCodeAt(oe),!(he===32||he>8&&he<14))return D("close tag")}else{if(_.charCodeAt(J-1)===47?(ge=$e=_.substring(K+1,J-1),P=!0,Y=!0):(ge=$e=_.substring(K+1,J),P=!0,Y=!1),!(he>96&&he<123||he>64&&he<91||he===95||he===58))return D("illegal first char nodeName");for(oe=1,me=ge.length;oe<me;oe++)if(he=ge.charCodeAt(oe),!(he>96&&he<123||he>64&&he<91||he>47&&he<59||he===45||he===95||he==46)){if(he===32||he<14&&he>8){$e=ge.substring(0,oe),Te=null;break}return D("invalid nodeName")}Y||R.push($e)}if(V){if(E=N,P&&(Y||k.push(E),Te===null&&(m=ge.indexOf("xmlns",oe)!==-1)&&(te=oe,L=ge,f(),m=!1)),st=$e,he=$e.indexOf(":"),he!==-1){if(Ze=N[$e.substring(0,he)],!Ze)return D("missing namespace on <"+st+">");$e=$e.substr(he+1)}else Ze=N.xmlns;Ze&&($e=Ze+":"+$e)}if(P&&(te=oe,L=ge,i&&(t?i(U,mn,Y,x):i($e,f,mn,Y,x),Q)))return;if(Y){if(r&&(r(t?U:$e,mn,P,x),Q))return;V&&(P?N=E:N=k.pop())}J+=1}}}function Gs(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var dp={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Oi="xsi:type";function Qs(e){return e.xml&&e.xml.serialize}function Xs(e){return Qs(e)===Oi}function pp(e){return Qs(e)==="property"}function fp(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Zs(e,t){return Gs(t)?e.prefix+":"+fp(e.localName):e.name}function mp(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function hp(e,t){var n=lt(e),i=t.getPackage(n.prefix);return mp(n,i)}function ln(e){return new Error(e)}function Yt(e){return e.$descriptor}function yp(e){de(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw ln("expected element");var n=this.elementsById,i=Yt(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw ln("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function ai(){}ai.prototype.handleEnd=function(){};ai.prototype.handleText=function(){};ai.prototype.handleNode=function(){};function Ir(){}Ir.prototype=Object.create(ai.prototype);Ir.prototype.handleNode=function(){return this};function On(){}On.prototype=Object.create(ai.prototype);On.prototype.handleText=function(e){this.body=(this.body||"")+e};function si(e,t){this.property=e,this.context=t}si.prototype=Object.create(On.prototype);si.prototype.handleNode=function(e){if(this.element)throw ln("expected no sub nodes");return this.element=this.createReference(e),this};si.prototype.handleEnd=function(){this.element.id=this.body};si.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Nr(e,t){this.element=t,this.propertyDesc=e}Nr.prototype=Object.create(On.prototype);Nr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Dr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Ui(){}Ui.prototype=Object.create(On.prototype);Ui.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function ut(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}ut.prototype=Object.create(Ui.prototype);ut.prototype.addReference=function(e){this.context.addReference(e)};ut.prototype.handleText=function(e){var t=this.element,n=Yt(t),i=n.bodyProperty;if(!i)throw ln("unexpected body text <"+e+">");On.prototype.handleText.call(this,e)};ut.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Yt(t),i=n.bodyProperty;i&&e!==void 0&&(e=Dr(i.type,e),t.set(i.name,e))};ut.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Yt(n),r=this.context,a=new n({}),o=this.model,u;return ae(t,function(c,y){var g=i.propertiesByName[y],x;g&&g.isReference?g.isMany?(x=c.split(" "),ae(x,function(m){r.addReference({element:a,property:g.ns.name,id:m})})):r.addReference({element:a,property:g.ns.name,id:c}):(g?c=Dr(g.type,c):y!=="xmlns"&&(u=lt(y,i.ns.prefix),o.getPackage(u.prefix)&&r.addWarning({message:"unknown attribute <"+y+">",element:a,property:y,value:c})),a.set(y,c))}),a};ut.prototype.getPropertyForNode=function(e){var t=e.name,n=lt(t),i=this.type,r=this.model,a=Yt(i),o=n.name,u=a.propertiesByName[o],c,y;if(u&&!u.isAttr)return Xs(u)&&(c=e.attributes[Oi],c)?(c=hp(c,r),y=r.getType(c),de({},u,{effectiveType:Yt(y).name})):u;var g=r.getPackage(n.prefix);if(g){if(c=Zs(n,g),y=r.getType(c),u=Mt(a.properties,function(x){return!x.isVirtual&&!x.isReference&&!x.isAttribute&&y.hasType(x.type)}),u)return de({},u,{effectiveType:Yt(y).name})}else if(u=Mt(a.properties,function(x){return!x.isReference&&!x.isAttribute&&x.type==="Element"}),u)return u;throw ln("unrecognized element <"+n.name+">")};ut.prototype.toString=function(){return"ElementDescriptor["+Yt(this.type).name+"]"};ut.prototype.valueHandler=function(e,t){return new Nr(e,t)};ut.prototype.referenceHandler=function(e){return new si(e,this.context)};ut.prototype.handler=function(e){return e==="Element"?new $n(this.model,e,this.context):new ut(this.model,e,this.context)};ut.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Hs(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(de(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function Pr(e,t,n){ut.call(this,e,t,n)}Pr.prototype=Object.create(ut.prototype);Pr.prototype.createElement=function(e){var t=e.name,n=lt(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),o=a&&Zs(n,a)||t;if(!r.hasType(o))throw ln("unexpected element <"+e.originalName+">");return ut.prototype.createElement.call(this,e)};function $n(e,t,n){this.model=e,this.context=n}$n.prototype=Object.create(Ui.prototype);$n.prototype.createElement=function(e){var t=e.name,n=lt(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};$n.prototype.handleChild=function(e){var t=new $n(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};$n.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Mr(e){e instanceof Rt&&(e={model:e}),de(this,{lax:!1},e)}Mr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof ut?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,o=new yp(de({},t,{rootHandler:i})),u=new Ks({proxy:!0}),c=vp();i.context=o,c.push(i);function y(k,N,E){var R=N(),$=R.line,P=R.column,Y=R.data;Y.charAt(0)==="<"&&Y.indexOf(" ")!==-1&&(Y=Y.slice(0,Y.indexOf(" "))+">");var K="unparsable content "+(Y?Y+" ":"")+"detected\n	line: "+$+"\n	column: "+P+"\n	nested error: "+k.message;if(E)return o.addWarning({message:K,error:k}),!0;throw ln(K)}function g(k,N){return y(k,N,!0)}function x(){var k=o.elementsById,N=o.references,E,R;for(E=0;R=N[E];E++){var $=R.element,P=k[R.id],Y=Yt($).propertiesByName[R.property];if(P||o.addWarning({message:"unresolved reference <"+R.id+">",element:R.element,property:R.property,value:R.id}),Y.isMany){var K=$.get(Y.name),J=K.indexOf(R);J===-1&&(J=K.length),P?K[J]=P:K.splice(J,1)}else $.set(Y.name,P)}}function m(){c.pop().handleEnd()}var V=/^<\?xml /i,X=/ encoding="([^"]+)"/i,Q=/^utf-8$/i;function ie(k){if(V.test(k)){var N=X.exec(k),E=N&&N[1];!E||Q.test(E)||o.addWarning({message:"unsupported document encoding <"+E+">, falling back to UTF-8"})}}function D(k,N){var E=c.peek();try{c.push(E.handleNode(k))}catch(R){y(R,N,a)&&c.push(new Ir)}}function Z(k,N){try{c.peek().handleText(k)}catch(E){g(E,N)}}function F(k,N){k.trim()&&Z(k,N)}var _=r.getPackages().reduce(function(k,N){return k[N.uri]=N.prefix,k},{"http://www.w3.org/XML/1998/namespace":"xml"});return u.ns(_).on("openTag",function(k,N,E,R){var $=k.attrs||{},P=Object.keys($).reduce(function(K,J){var ge=N($[J]);return K[J]=ge,K},{}),Y={name:k.name,originalName:k.originalName,attributes:P,ns:k.ns};D(Y,R)}).on("question",ie).on("closeTag",m).on("cdata",Z).on("text",function(k,N,E){F(N(k),E)}).on("error",y).on("warn",g),new Promise(function(k,N){var E;try{u.parse(e),x()}catch(K){E=K}var R=i.element;!E&&!R&&(E=ln("failed to parse document as <"+i.type.$descriptor.name+">"));var $=o.warnings,P=o.references,Y=o.elementsById;return E?(E.warnings=$,N(E)):k({rootElement:R,elementsById:Y,references:P,warnings:$})})};Mr.prototype.handler=function(e){return new Pr(this.model,e)};function vp(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var gp='<?xml version="1.0" encoding="UTF-8"?>\n',bp=/<|>|'|"|&|\n\r|\n/g,Js=/<|>|&/g;function _p(e){var t={},n={},i={},r=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,u){n[o.uri]=o,u?r.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,u){t[o||"xmlns"]=u},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var u=o.uri,c=this.getNSKey(o);i[c]=this.byUri(u),e&&e.logUsed(o)},this.getUsed=function(o){function u(g){var x=c.getNSKey(g);return i[x]}var c=this,y=[].concat(r,a);return y.filter(u)}}function wp(e){return e.charAt(0).toLowerCase()+e.slice(1)}function xp(e,t){return Gs(t)?wp(e):e}function eo(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function to(e){return qt(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Ep(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function kp(e,t){return t.isGeneric?de({localName:t.ns.localName},e):de({localName:xp(t.ns.localName,t.$pkg)},e)}function Sp(e,t){return de({localName:t.ns.localName},e)}function Ap(e){var t=e.$descriptor;return Nn(t.properties,function(n){var i=n.name;if(n.isVirtual||!_n(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var Tp={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Cp={"<":"lt",">":"gt","&":"amp"};function no(e,t,n){return e=qt(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function Rp(e){return no(e,bp,Tp)}function Dp(e){return no(e,Js,Cp)}function Ip(e){return Nn(e,function(t){return t.isAttr})}function Np(e){return Nn(e,function(t){return!t.isAttr})}function $r(e){this.tagName=e}$r.prototype.build=function(e){return this.element=e,this};$r.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function bn(){}bn.prototype.serializeValue=bn.prototype.serializeTo=function(e){e.append(this.escape?Dp(this.value):this.value)};bn.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Js)!==-1&&(this.escape=!0),this};function Vr(e){this.tagName=e}eo(Vr,bn);Vr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Be(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Be.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=Ap(e),this.parseAttributes(Ip(r)),this.parseContainments(Np(r))),this.parseGenericAttributes(e,i),this};Be.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return kp(t,e)};Be.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Sp(t,e)};Be.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Be.prototype.nsAttributeName=function(e){var t;if(qt(e)?t=lt(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:de({localName:t.localName},n)};Be.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ae(e,function(r,a){var o;a==="$body"?n.push(new bn().build({type:"String"},r)):a==="$children"?ae(r,function(u){n.push(new Be(t).build(u))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,r),o&&i.push({name:a,value:r}))}),i};Be.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=lt(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};Be.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ae(i,function(a,o){var u=n.parseNsAttribute(e,o,a);u&&r.push(u)}),r};Be.prototype.parseGenericAttributes=function(e,t){var n=this;ae(t,function(i){if(i.name!==Oi)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Be.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ae(e,function(r){var a=i.get(r.name),o=r.isReference,u=r.isMany;if(u||(a=[a]),r.isBody)n.push(new bn().build(r,a[0]));else if(Hs(r.type))ae(a,function(g){n.push(new Vr(t.addTagName(t.nsPropertyTagName(r))).build(r,g))});else if(o)ae(a,function(g){n.push(new $r(t.addTagName(t.nsPropertyTagName(r))).build(g))});else{var c=Xs(r),y=pp(r);ae(a,function(g){var x;c?x=new Fi(t,r):y?x=new Be(t,r):x=new Be(t),n.push(x.build(g))})}})};Be.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new _p(i):t=i),t};Be.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,o=i.byUri(r);return(!o||n)&&i.add(e,t),i.mapPrefix(a,r),e};Be.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,o=e.uri,u,c,y;if(!a&&!o)return{localName:e.localName};if(y=dp[a]||i&&(i.getPackage(a)||{}).uri,o=o||y||r.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(o),!e){for(u=a,c=1;r.uriByPrefix(u);)u=a+"_"+c++;e=this.logNamespace({prefix:u,uri:o},y===o)}return a&&r.mapPrefix(a,o),e};Be.prototype.parseAttributes=function(e){var t=this,n=this.element;ae(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];ae(r,function(o){a.push(o.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Be.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),to(e)};Be.prototype.addAttribute=function(e,t){var n=this.attrs;qt(t)&&(t=Rp(t));var i=tu(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Be.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Ep(n).concat(t)),ae(t,function(i){e.append(" ").append(to(i.name)).append('="').append(i.value).append('"')})};Be.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==bn;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ae(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Fi(e,t){Be.call(this,e,t)}eo(Fi,Be);Fi.prototype.parseNsAttributes=function(e){var t=Be.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Oi),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};Fi.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Pp(){this.value="",this.write=function(e){this.value+=e}}function Mp(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function $p(e){e=de({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Pp,a=new Mp(r,e.format);if(e.preamble&&a.append(gp),new Be().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function qi(e,t){Rt.call(this,e,t)}qi.prototype=Object.create(Rt.prototype);qi.prototype.fromXML=function(e,t,n){qt(t)||(n=t,t="bpmn:Definitions");var i=new Mr(de({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};qi.prototype.toXML=function(e,t){var n=new $p(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(o){return r(o)}})};var Vp="BPMN20",Lp="http://www.omg.org/spec/BPMN/20100524/MODEL",Bp="bpmn",Op=[],Up=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Fp=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],qp={tagAlias:"lowerCase",typePrefix:"t"},jp={name:Vp,uri:Lp,prefix:Bp,associations:Op,types:Up,enumerations:Fp,xml:qp},zp="BPMNDI",Wp="http://www.omg.org/spec/BPMN/20100524/DI",Hp="bpmndi",Yp=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],Kp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],Gp=[],Qp={name:zp,uri:Wp,prefix:Hp,types:Yp,enumerations:Kp,associations:Gp},Xp="DC",Zp="http://www.omg.org/spec/DD/20100524/DC",Jp="dc",ef=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],tf=[],nf={name:Xp,uri:Zp,prefix:Jp,types:ef,associations:tf},rf="DI",af="http://www.omg.org/spec/DD/20100524/DI",sf="di",of=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],lf=[],uf={tagAlias:"lowerCase"},cf={name:rf,uri:af,prefix:sf,types:of,associations:lf,xml:uf},df="bpmn.io colors for BPMN",pf="http://bpmn.io/schema/bpmn/biocolor/1.0",ff="bioc",mf=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],hf=[],yf=[],vf={name:df,uri:pf,prefix:ff,types:mf,enumerations:hf,associations:yf},gf="BPMN in Color",bf="http://www.omg.org/spec/BPMN/non-normative/color/1.0",_f="color",wf=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],xf=[],Ef=[],kf={name:gf,uri:bf,prefix:_f,types:wf,enumerations:xf,associations:Ef},Sf={bpmn:jp,bpmndi:Qp,dc:nf,di:cf,bioc:vf,color:kf};function Af(e,t){var n=de({},Sf,e);return new qi(n,t)}var Tf="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Cf(e){_n(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(Tf)}})}function dt(e,t){return e.$instanceOf(t)}function Rf(e){return Mt(e.rootElements,function(t){return dt(t,"bpmn:Process")||dt(t,"bpmn:Collaboration")})}function Df(e){var t={},n=[],i={};function r(U,L){return function(te){U(te,L)}}function a(U){t[U.id]=U}function o(U){return t[U.id]}function u(U,L){var te=U.gfx;if(te)throw new Error("already rendered ".concat(at(U)));return e.element(U,i[U.id],L)}function c(U,L){return e.root(U,i[U.id],L)}function y(U,L){try{var te=i[U.id]&&u(U,L);return a(U),te}catch(Te){g(Te.message,{element:U,error:Te}),console.error("failed to import ".concat(at(U)),Te)}}function g(U,L){e.error(U,L)}var x=this.registerDi=function(L){var te=L.bpmnElement;te?i[te.id]?g("multiple DI elements defined for ".concat(at(te)),{element:te}):(i[te.id]=L,Cf(te)):g("no bpmnElement referenced in ".concat(at(L)),{element:L})};function m(U){V(U.plane)}function V(U){x(U),ae(U.planeElement,X)}function X(U){x(U)}this.handleDefinitions=function(L,te){var Te=L.diagrams;if(te&&Te.indexOf(te)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!te&&Te&&Te.length&&(te=Te[0]),!te)throw new Error("no diagram to display");i={},m(te);var f=te.plane;if(!f)throw new Error("no plane for ".concat(at(te)));var s=f.bpmnElement;if(!s)if(s=Rf(L),s)g("correcting missing bpmnElement on ".concat(at(f)," to ").concat(at(s))),f.bpmnElement=s,x(f);else throw new Error("no process or collaboration to display");var l=c(s,f);if(dt(s,"bpmn:Process")||dt(s,"bpmn:SubProcess"))ie(s,l);else if(dt(s,"bpmn:Collaboration"))$e(s,l),D(L.rootElements,l);else throw new Error("unsupported bpmnElement for ".concat(at(f),": ").concat(at(s)));Q(n)};var Q=this.handleDeferred=function(){for(var L;n.length;)L=n.shift(),L()};function ie(U,L){he(U,L),$(U.ioSpecification,L),R(U.artifacts,L),a(U)}function D(U,L){var te=Nn(U,function(Te){return!o(Te)&&dt(Te,"bpmn:Process")&&Te.laneSets});te.forEach(r(ie,L))}function Z(U,L){y(U,L)}function F(U,L){ae(U,r(Z,L))}function _(U,L){y(U,L)}function k(U,L){y(U,L)}function N(U,L){y(U,L)}function E(U,L){y(U,L)}function R(U,L){ae(U,function(te){dt(te,"bpmn:Association")?n.push(function(){E(te,L)}):E(te,L)})}function $(U,L){U&&(ae(U.dataInputs,r(k,L)),ae(U.dataOutputs,r(N,L)))}var P=this.handleSubProcess=function(L,te){he(L,te),R(L.artifacts,te)};function Y(U,L){var te=y(U,L);dt(U,"bpmn:SubProcess")&&P(U,te||L),dt(U,"bpmn:Activity")&&$(U.ioSpecification,L),n.push(function(){ae(U.dataInputAssociations,r(_,L)),ae(U.dataOutputAssociations,r(_,L))})}function K(U,L){y(U,L)}function J(U,L){y(U,L)}function ge(U,L){n.push(function(){var te=y(U,L);U.childLaneSet&&me(U.childLaneSet,te||L),st(U)})}function me(U,L){ae(U.lanes,r(ge,L))}function oe(U,L){ae(U,r(me,L))}function he(U,L){ct(U.flowElements,L),U.laneSets&&oe(U.laneSets,L)}function ct(U,L){ae(U,function(te){dt(te,"bpmn:SequenceFlow")?n.push(function(){K(te,L)}):dt(te,"bpmn:BoundaryEvent")?n.unshift(function(){Y(te,L)}):dt(te,"bpmn:FlowNode")?Y(te,L):dt(te,"bpmn:DataObject")||(dt(te,"bpmn:DataStoreReference")||dt(te,"bpmn:DataObjectReference")?J(te,L):g("unrecognized flowElement ".concat(at(te)," in context ").concat(at(L&&L.businessObject)),{element:te,context:L}))})}function Ze(U,L){var te=y(U,L),Te=U.processRef;Te&&ie(Te,te||L)}function $e(U,L){ae(U.participants,r(Ze,L)),R(U.artifacts,L),n.push(function(){F(U.messageFlows,L)})}function st(U){ae(U.flowNodeRef,function(L){var te=L.get("lanes");te&&te.push(U)})}}function If(e,t,n){var i,r,a,o,u=[];function c(y,g){var x={root:function(Q,ie){return i.add(Q,ie)},element:function(Q,ie,D){return i.add(Q,ie,D)},error:function(Q,ie){u.push({message:Q,context:ie})}},m=new Df(x);g=g||y.diagrams&&y.diagrams[0];var V=Nf(y,g);if(!V)throw new Error("no diagram to display");ae(V,function(Q){m.handleDefinitions(y,Q)});var X=g.plane.bpmnElement.id;a.setRootElement(a.findRoot(X+"_plane")||a.findRoot(X))}return new Promise(function(y,g){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:o,warnings:u}),y({warnings:u})}catch(x){return x.warnings=u,g(x)}})}function Nf(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!ue(n,"bpmn:Process")&&!ue(n,"bpmn:Collaboration")&&(i=Pf(n));var r;ue(i,"bpmn:Collaboration")?r=i:r=Mt(e.rootElements,function(y){if(ue(y,"bpmn:Collaboration"))return Mt(y.participants,function(g){return g.processRef===i})});var a=[i];r&&(a=nu(r.participants,function(y){return y.processRef}),a.push(r));var o=io(a),u=[t],c=[n];return ae(e.diagrams,function(y){if(y.plane){var g=y.plane.bpmnElement;o.indexOf(g)!==-1&&c.indexOf(g)===-1&&(u.push(y),c.push(g))}}),u}}function io(e){var t=[];return ae(e,function(n){n&&(t.push(n),t=t.concat(io(n.flowElements)))}),t}function Pf(e){for(var t=e;t;){if(ue(t,"bpmn:Process"))return t;t=t.$parent}}var Mf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',ro=Mf,ao={verticalAlign:"middle"},so={color:"#404040"},$f={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},Vf={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},Lf={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},Bf='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+ro+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ot;function Of(){Ot=jt(Bf),gt(Ot,$f),gt(It("svg",Ot),ao),gt(It(".backdrop",Ot),Vf),gt(It(".notice",Ot),Lf),gt(It(".link",Ot),so,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function Uf(){Ot||(Of(),lr.bind(Ot,".backdrop","click",function(e){document.body.removeChild(Ot)})),document.body.appendChild(Ot)}function We(e){e=de({},qf,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),zf(this._container),this._init(this._container,this._moddle,e)}zt(We,dn);We.prototype.importXML=async function(t,n){const i=this;function r(o){return i.get("eventBus").createEvent(o)}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let o;try{o=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(m){throw this._emit("import.parse.complete",{error:m}),m}let u=o.rootElement;const c=o.references,y=o.warnings,g=o.elementsById;a=a.concat(y),u=this._emit("import.parse.complete",r({error:null,definitions:u,elementsById:g,references:c,warnings:a}))||u;const x=await this.importDefinitions(u,n);return a=a.concat(x.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(o){let u=o;throw a=a.concat(u.warnings||[]),Si(u,a),u=Ff(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}};We.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};We.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw Si(a,[]),a}if(typeof t=="string"&&(i=jf(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw Si(a,[]),a}try{this.clear()}catch(a){throw Si(a,[]),a}const{warnings:r}=await If(this,n,i);return{warnings:r}};We.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(o){i=o}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a};We.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),a=It(":scope > defs",i._svg),o=aa(r),u=a?"<defs>"+aa(a)+"</defs>":"",c=r.getBBox();t='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+u+o+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};We.prototype._setDefinitions=function(e){this._definitions=e};We.prototype.getModules=function(){return this._modules};We.prototype.clear=function(){this.getDefinitions()&&dn.prototype.clear.call(this)};We.prototype.destroy=function(){dn.prototype.destroy.call(this),Ni(this._container)};We.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};We.prototype.off=function(e,t){this.get("eventBus").off(e,t)};We.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=It(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};We.prototype.getDefinitions=function(){return this._definitions};We.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};We.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,i,r),u=de(lu(n,["additionalModules"]),{canvas:de({},n.canvas,{container:e}),modules:o});dn.call(this,u),n&&n.container&&this.attachTo(n.container)};We.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};We.prototype._createContainer=function(e){const t=jt('<div class="bjs-container"></div>');return gt(t,{width:xa(e.width),height:xa(e.height),position:e.position}),t};We.prototype._createModdle=function(e){const t=de({},this._moddleExtensions,e.moddleExtensions);return new Af(t)};We.prototype._modules=[];function Si(e,t){return e.warnings=t,e}function Ff(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const qf={width:"100%",height:"100%",position:"relative"};function xa(e){return e+(rn(e)?"px":"")}function jf(e,t){return t&&Mt(e.diagrams,function(n){return n.id===t})||null}function zf(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+ro+"</a>",i=jt(n);gt(It("svg",i),ao),gt(i,so,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),Er.bind(i,"click",function(r){Uf(),r.preventDefault()})}function ji(e){We.call(this,e)}zt(ji,We);ji.prototype._modules=[Wc,cd,vd,ws,kd,ms];ji.prototype._moddleExtensions={};function Wf(e,t,n){return'<?xml version="1.0" encoding="UTF-8"?>\n  <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"\n               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"\n               xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n               xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"\n               typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"\n               targetNamespace="'.concat(n,'">\n    <process id="').concat(e,'" name="').concat(t,'" isExecutable="true"></process>\n    <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n      </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n  </definitions>')}const Hf={class:"w-full m-1 border-collapse table-auto"},Yf={class:"p-2 font-bold border-b text-secondary"},Kf={class:"p-2 font-bold border-b text-secondary"},Gf={class:"p-2 font-bold border-b text-secondary"},Qf={class:"p-2 font-bold border-b text-secondary"},Xf={class:"p-2 font-bold border-b text-secondary"},Zf={class:"p-2 font-bold border-b text-secondary"},Jf={class:"p-2 font-bold border-b text-secondary"},em={class:"p-2 font-bold border-b text-secondary"},tm={class:"hover:bg-gray-50"},nm=["rowspan"],im=["rowspan"],rm=["rowspan"],am=["rowspan"],sm={class:"p-2 border-b"},om={class:"p-2 border-b"},lm={class:"p-2 border-b"},um={class:"p-2 border-b"},cm={key:0,class:"hover:bg-gray-50"},dm={class:"p-2 border-b"},pm={class:"p-2 border-b"},fm={class:"p-2 border-b"},mm={class:"p-2 border-b"},hm={class:"mt-4 text-lg"},ym=$t({__name:"ProcessTaskList",props:yn({modelValue:{type:Boolean,required:!0},instanceId:{type:String,default:null}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Vn(e,"modelValue"),n=e,{instanceId:i}=Zn(n);vt.extend(vl),vt.extend(Zl);const r=z([]),a=z([]),o=z(!1),u=z();let c;const y=async()=>{o.value=!0;try{if(!(i!=null&&i.value))return;const{xml:g,activities:x,tasks:m,processes:V}=await gl(i.value);r.value=m!=null?m:[],a.value=V!=null?V:[],c||(c=fo(new ji({container:u.value,height:200}))),await c.importXML(g!=null?g:Wf("none","none","none"));const X=c.get("canvas");X.zoom("fit-viewport"),x==null||x.forEach(({activityId:Q,endTime:ie,deleteReason:D})=>{let Z="highlight-curr";D&&(D.includes(":reject")||D.includes(":cancel"))?Z="highlight-reject":ie&&(Z="highlight"),X.addMarker(Q,Z)})}finally{o.value=!1}};return Nt(t,()=>{t.value?y():c.clear()}),(g,x)=>{const m=j("el-tag"),V=j("el-table-column"),X=j("el-table"),Q=j("el-dialog"),ie=Aa("loading");return T(),M(Q,{modelValue:t.value,"onUpdate:modelValue":x[0]||(x[0]=D=>t.value=D),title:g.$t("processInstance.op.task"),width:"98%",top:"5vh"},{default:d(()=>[pe("div",{ref_key:"bpmnContainer",ref:u,class:"w-full"},null,512),Ai((T(),ke("table",Hf,[pe("thead",null,[pe("tr",null,[pe("td",Yf,I(g.$t("processModel.name")),1),pe("td",Kf,I(g.$t("processTask.assignee")),1),pe("td",Gf,I(g.$t("processTask.created")),1),pe("td",Qf,I(g.$t("processTask.duration")),1),pe("td",Xf,I(g.$t("processTask.time")),1),pe("td",Zf,I(g.$t("processTask.user")),1),pe("td",Jf,I(g.$t("processTask.type")),1),pe("td",em,I(g.$t("processTask.opinion")),1)])]),pe("tbody",null,[(T(!0),ke(Le,null,Qe(r.value,D=>{var Z,F,_,k;return T(),ke(Le,{key:D.id},[pe("tr",tm,[pe("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.name),9,nm),pe("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.assigneeName),9,im),pe("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.created?C(vt)(D.created).format("YYYY-MM-DD HH:mm"):void 0),9,rm),pe("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.duration?C(vt).duration(D.duration).locale("zh-cn").humanize():void 0),9,am),pe("td",sm,I(D.commentList[0]?C(vt)(D.commentList[0].time).format("YYYY-MM-DD HH:mm"):void 0),1),pe("td",om,I((Z=D.commentList[0])==null?void 0:Z.userName),1),pe("td",lm,[((F=D.commentList[0])==null?void 0:F.type)==="pass"?(T(),M(m,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):((_=D.commentList[0])==null?void 0:_.type)==="reject"?(T(),M(m,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):D.commentList[0]?(T(),M(m,{key:2,size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):ne("",!0)]),pe("td",um,I((k=D.commentList[0])==null?void 0:k.fullMessage),1)]),(T(!0),ke(Le,null,Qe(D.commentList,(N,E)=>(T(),ke(Le,{key:N.id},[E>0?(T(),ke("tr",cm,[pe("td",dm,I(C(vt)(N.time).format("YYYY-MM-DD HH:mm")),1),pe("td",pm,I(N.userName),1),pe("td",fm,[N.type==="pass"?(T(),M(m,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(N.type))),1)]),_:2},1024)):N.type==="reject"?(T(),M(m,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(N.type))),1)]),_:2},1024)):(T(),M(m,{key:2,size:"small"},{default:d(()=>[O(I(g.$t("processTask.type.".concat(N.type))),1)]),_:2},1024))]),pe("td",mm,I(N.fullMessage),1)])):ne("",!0)],64))),128))],64)}),128))])])),[[ie,o.value]]),pe("p",hm,I(g.$t("processInstance.history")),1),Ai((T(),M(X,{data:a.value,class:"mt-1"},{default:d(()=>[p(V,{prop:"assignee",label:g.$t("processInstance.assignee")},null,8,["label"]),p(V,{prop:"status",label:g.$t("processInstance.status")},{default:d(({row:D})=>[D.status==="complete"?(T(),M(m,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="reject"?(T(),M(m,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="cancel"?(T(),M(m,{key:2,type:"info",size:"small"},{default:d(()=>[O(I(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):(T(),M(m,{key:3,type:"warning",size:"small"},{default:d(()=>[O(I(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(V,{prop:"opinion",label:g.$t("processInstance.opinion")},null,8,["label"]),p(V,{property:"started",label:g.$t("processInstance.started")},{default:d(({row:D})=>[O(I(C(vt)(D.started).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(V,{property:"ended",label:g.$t("processInstance.ended")},{default:d(({row:D})=>[O(I(D.ended?C(vt)(D.ended).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[ie,o.value]])]),_:1},8,["modelValue","title"])}}}),vm=mr(ym,[["__scopeId","data-v-f9850bbd"]]),gm={class:"el-upload-list__item is-success"},bm=["src"],_m={key:0,class:"ml-2"},wm={key:1,class:"el-upload--picture-card"},xm=["src"],Ea=300,ka=300,Em=$t({__name:"ImageListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},maxWidth:{type:Number,default:null},maxHeight:{type:Number,default:null},listType:{type:String,default:"pictureCard"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{modelValue:r,maxWidth:a,maxHeight:o,fileAccept:u,fileMaxSize:c}=Zn(n),{t:y}=Jn(),g=hr(),x=z(!1),m=z({}),V=z({}),X=z(!1),Q=z(!1),ie=z({src:"data:;base64,="}),D=pt({get:()=>r.value,set:$=>i("update:modelValue",$)}),{formItem:Z}=Ta();Nt(D,()=>{var $;($=Z==null?void 0:Z.validate)==null||$.call(Z,"change").catch(P=>{})},{deep:!0});const F=$=>{ie.value=$,X.value=!0},_=()=>{const $={isWatermark:!0,thumbnailWidth:Ea,thumbnailHeight:ka};return(a==null?void 0:a.value)!=null&&($.maxWidth=a.value),(o==null?void 0:o.value)!=null&&($.maxHeight=o.value),$},k=pt(()=>{var $;return($=u==null?void 0:u.value)!=null?$:g.upload.imageInputAccept}),N=pt(()=>{var $;return($=c==null?void 0:c.value)!=null?$:g.upload.imageLimitByte}),E=$=>N.value>0&&$.size>N.value?(Ut.error(y("error.fileMaxSize",{size:"".concat(N.value/1024/1024," MB")})),!1):!0,R=$=>{Pa(JSON.parse($.message))};return($,P)=>{const Y=j("el-icon"),K=j("el-input"),J=j("el-progress"),ge=j("el-upload"),me=j("el-dialog");return T(),ke("div",null,[p(C(Nl),{list:D.value,tag:"ul","item-key":"url",animation:250,class:Yn(["el-upload-list",[e.listType==="picture"?"el-upload-list--picture":"el-upload-list--picture-card",{"is-disabled":e.disabled}]]),onStart:P[1]||(P[1]=()=>x.value=!0),onEnd:P[2]||(P[2]=()=>x.value=!1)},{item:d(({element:oe})=>[pe("li",gm,[pe("div",{class:Yn([e.listType==="picture"?["w-32","h-32"]:["w-full","h-full"],"relative flex items-center justify-center bg-gray-50"])},[pe("img",{class:"block max-w-full max-h-full",src:oe.url,alt:""},null,8,bm),pe("div",{class:Yn(["absolute space-x-4 bg-black bg-opacity-50 rounded-md opacity-0 cursor-move full-flex-center",x.value?void 0:"hover:opacity-100"]),onClick:P[0]||(P[0]=In(()=>{},["stop"]))},[p(Y,{class:"image-action",title:$.$t("cropImage"),onClick:()=>(Q.value=!0,V.value=oe)},{default:d(()=>[p(C(mo))]),_:2},1032,["title","onClick"]),p(Y,{class:"image-action",title:$.$t("previewImage"),onClick:()=>F(oe)},{default:d(()=>[p(C(Ia))]),_:2},1032,["title","onClick"]),p(Y,{class:"image-action",title:$.$t("deleteImage"),onClick:()=>D.value.splice(D.value.indexOf(oe),1)},{default:d(()=>[p(C(Na))]),_:2},1032,["title","onClick"])],2)],2),e.listType==="picture"?(T(),ke("div",_m,[p(K,{modelValue:oe.url,"onUpdate:modelValue":he=>oe.url=he,placeholder:"URL",maxlength:"255"},{prepend:d(()=>P[9]||(P[9]=[O("URL")])),_:2},1032,["modelValue","onUpdate:modelValue"]),p(K,{modelValue:oe.name,"onUpdate:modelValue":he=>oe.name=he,placeholder:$.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O(I($.$t("article.imageList.name")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),p(K,{modelValue:oe.description,"onUpdate:modelValue":he=>oe.description=he,type:"textarea",rows:2,placeholder:$.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):ne("",!0)])]),footer:d(()=>[p(ge,{action:C(Wo),headers:{...C(Ra)(),...C(Ca)()},data:_(),accept:k.value,"before-upload":E,"on-success":(oe,he)=>D.value.push({name:oe.name,url:oe.url}),"on-progress":(oe,he)=>m.value=he,"on-error":R,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[m.value.status==="uploading"?(T(),M(J,{key:0,type:"circle",percentage:parseInt(m.value.percentage,10)},null,8,["percentage"])):(T(),ke("div",wm,[p(Y,null,{default:d(()=>[p(C(Da))]),_:1})]))]),_:1},8,["action","headers","data","accept","on-success","on-progress","disabled"])]),_:1},8,["list","class"]),pe("div",null,[p(me,{modelValue:X.value,"onUpdate:modelValue":P[6]||(P[6]=oe=>X.value=oe),top:"5vh",width:768},{default:d(()=>[p(K,{modelValue:ie.value.url,"onUpdate:modelValue":P[3]||(P[3]=oe=>ie.value.url=oe),maxlength:"255"},{prepend:d(()=>P[10]||(P[10]=[O("URL")])),_:1},8,["modelValue"]),e.listType!=="picture"?(T(),M(K,{key:0,modelValue:ie.value.name,"onUpdate:modelValue":P[4]||(P[4]=oe=>ie.value.name=oe),placeholder:$.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O(I($.$t("article.imageList.name")),1)]),_:1},8,["modelValue","placeholder"])):ne("",!0),e.listType!=="picture"?(T(),M(K,{key:1,modelValue:ie.value.description,"onUpdate:modelValue":P[5]||(P[5]=oe=>ie.value.description=oe),type:"textarea",rows:2,placeholder:$.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","placeholder"])):ne("",!0),pe("img",{src:ie.value.url,alt:"",class:"mt-1 border border-gray-300"},null,8,xm)]),_:1},8,["modelValue"])]),p(Dl,{modelValue:Q.value,"onUpdate:modelValue":P[7]||(P[7]=oe=>Q.value=oe),src:V.value.url,"thumbnail-width":Ea,"thumbnail-height":ka,onSuccess:P[8]||(P[8]=oe=>V.value.url=oe)},null,8,["modelValue","src"])])}}}),km=mr(Em,[["__scopeId","data-v-ebaf49e7"]]),Sm={class:"w-full"},Am=["onClick"],Tm={class:"el-upload-list__item-status-label"},Cm=$t({__name:"FileListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{fileAccept:r,fileMaxSize:a,modelValue:o}=Zn(n),{t:u}=Jn(),c=hr(),y=z({}),g=pt({get:()=>o.value,set:k=>i("update:modelValue",k)}),{formItem:x}=Ta();Nt(g,()=>{var k;(k=x==null?void 0:x.validate)==null||k.call(x,"change").catch(N=>{})},{deep:!0});const m=z(!1),V=z({}),X=z(),Q=k=>{V.value=k,m.value=!0},ie=()=>{X.value.validate(async k=>{k&&(m.value=!1)})},D=pt(()=>{var k;return(k=r==null?void 0:r.value)!=null?k:c.upload.fileInputAccept}),Z=pt(()=>{var k;return(k=a==null?void 0:a.value)!=null?k:c.upload.fileLimitByte}),F=k=>Z.value>0&&k.size>Z.value?(Ut.error(u("error.fileMaxSize",{size:"".concat(Z.value/1024/1024," MB")})),!1):!0,_=k=>{Pa(JSON.parse(k.message))};return(k,N)=>{const E=j("el-upload"),R=j("el-progress"),$=j("el-icon"),P=j("el-input"),Y=j("el-form-item"),K=j("el-button"),J=j("el-form"),ge=j("el-dialog");return T(),ke("div",Sm,[p(E,{action:C(Ho),headers:{...C(Ra)(),...C(Ca)()},accept:D.value,"before-upload":F,"on-success":me=>g.value.push({name:me.name,url:me.url,length:me.size}),"on-progress":(me,oe)=>y.value=oe,"on-error":_,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[O(I(k.$t("clickOrDragToUpload")),1)]),_:1},8,["action","headers","accept","on-success","on-progress","disabled"]),y.value.status==="uploading"?(T(),M(R,{key:0,percentage:parseInt(y.value.percentage,10)},null,8,["percentage"])):ne("",!0),p(vo,{tag:"ul",class:Yn(["el-upload-list","el-upload-list--text",{"is-disabled":e.disabled}]),name:"el-list"},{default:d(()=>[(T(!0),ke(Le,null,Qe(g.value,me=>(T(),ke("li",{key:me.url,class:"el-upload-list__item is-success"},[pe("a",{class:"el-upload-list__item-name",onClick:()=>Q(me)},[p($,{class:"el-icon--document"},{default:d(()=>[p(C(ho))]),_:1}),O(I(me.name),1)],8,Am),pe("label",Tm,[p($,{class:"el-icon--upload-success el-icon--circle-check"},{default:d(()=>[p(C(Ma))]),_:1})]),e.disabled?ne("",!0):(T(),M($,{key:0,class:"el-icon--close",onClick:()=>g.value.splice(g.value.indexOf(me),1)},{default:d(()=>[p(C(yo))]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["class"]),p(ge,{modelValue:m.value,"onUpdate:modelValue":N[4]||(N[4]=me=>m.value=me),title:k.$t("article.fileList.attribute"),top:"5vh",width:768,"append-to-body":""},{default:d(()=>[p(J,{ref_key:"form",ref:X,model:V.value,"label-width":"150px"},{default:d(()=>[p(Y,{prop:"name",label:k.$t("name"),rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.name,"onUpdate:modelValue":N[0]||(N[0]=me=>V.value.name=me),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","rules"]),p(Y,{prop:"length",label:k.$t("size"),rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.length,"onUpdate:modelValue":N[1]||(N[1]=me=>V.value.length=me),maxlength:"19"},{append:d(()=>N[5]||(N[5]=[O("Byte")])),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),p(Y,{prop:"url",label:"URL",rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.url,"onUpdate:modelValue":N[2]||(N[2]=me=>V.value.url=me),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"]),p(K,{type:"primary","native-type":"submit",onClick:N[3]||(N[3]=In(()=>ie(),["prevent"]))},{default:d(()=>[O(I(k.$t("save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Rm=mr(Cm,[["__scopeId","data-v-8f839ee5"]]),oo=(e,t,n)=>{if(e===0||e===1)window.open(t);else{n=n+"?preview=true";const i=n.lastIndexOf("/",n.lastIndexOf("/")-1),r="".concat(n.substring(0,i),"/auth/jwt/login?code=").concat(go(),"&redirectUri=").concat(encodeURIComponent(n));window.open(r)}},Dm={class:"flex justify-end mt-2"},Im=$t({__name:"ReviewFormProperties",props:yn({formProperties:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:yn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Vn(e,"modelValue"),i=e,r=t,a=z(),o=()=>{n.value=!1;const u=i.formProperties.reduce((c,{id:y,value:g})=>({...c,[y]:g}),{});r("finished",{properties:u,comment:a.value})};return Nt(n,()=>{n.value&&(a.value=void 0)}),(u,c)=>{const y=j("el-input"),g=j("el-switch"),x=j("el-option"),m=j("el-select"),V=j("el-form-item"),X=j("el-button"),Q=j("el-form"),ie=j("el-dialog");return T(),M(ie,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=D=>n.value=D),title:u.$t("flowable.pass"),width:"800","append-to-body":""},{default:d(()=>[p(Q,{"label-width":"120px"},{default:d(()=>[(T(!0),ke(Le,null,Qe(u.formProperties,D=>(T(),M(V,{key:D.id},{label:d(()=>[p(it,{label:D.name},null,8,["label"])]),default:d(()=>[D.type.name==="string"?(T(),M(y,{key:0,modelValue:D.value,"onUpdate:modelValue":Z=>D.value=Z},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="long"?(T(),M(y,{key:1,modelValue:D.value,"onUpdate:modelValue":Z=>D.value=Z},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="boolean"?(T(),M(g,{key:2,modelValue:D.value,"onUpdate:modelValue":Z=>D.value=Z},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="enum"?(T(),M(m,{key:3,modelValue:D.value,"onUpdate:modelValue":Z=>D.value=Z},{default:d(()=>[(T(!0),ke(Le,null,Qe(D.type.values,Z=>(T(),M(x,{key:Z.id,label:Z.name,value:Z.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):ne("",!0)]),_:2},1024))),128)),p(V,null,{label:d(()=>[p(it,{message:"flowable.opinion"})]),default:d(()=>[p(y,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=D=>a.value=D)},null,8,["modelValue"])]),_:1}),pe("div",Dm,[p(X,{type:"primary","native-type":"submit",onClick:In(o,["prevent"])},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","title"])}}}),lo=$t({__name:"UserSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Vn(e,"modelValue"),n=z({}),i=z(),r=z(!1),a=z(1),o=z(10),u=z(0),c=z([]),y=async()=>{r.value=!0;try{const{content:m,totalElements:V}=await Sl({Q_Contains_1_username:i.value,Q_Contains_1_realName:i.value,current:!0,page:a.value,pageSize:o.value});c.value=m,u.value=Number(V)}finally{r.value=!1}};$a(async()=>{t.value!=null&&(n.value=await kl(t.value))});const g=async m=>{i.value=m,y()},x=m=>{t.value=m};return(m,V)=>{const X=j("el-option"),Q=j("el-pagination"),ie=j("el-select");return T(),M(ie,{modelValue:n.value,"onUpdate:modelValue":V[4]||(V[4]=D=>n.value=D),filterable:"",remote:"","default-first-option":"","remote-method":g,loading:r.value,onChange:x},{footer:d(()=>[p(Q,{"current-page":a.value,"onUpdate:currentPage":V[0]||(V[0]=D=>a.value=D),pageSize:o.value,"onUpdate:pageSize":V[1]||(V[1]=D=>o.value=D),total:u.value,layout:"total, prev, pager, next",small:"",class:"px-3 py-2",onSizeChange:V[2]||(V[2]=()=>y()),onCurrentChange:V[3]||(V[3]=()=>y())},null,8,["current-page","pageSize","total"])]),default:d(()=>[(T(!0),ke(Le,null,Qe(c.value,D=>(T(),M(X,{key:D.id,label:"".concat(D.username).concat(D.realName?"(".concat(D.realName,")"):""," - [").concat(D.org.name,"]"),value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}}),Nm={class:"flex justify-end mt-2"},Pm=$t({__name:"ReviewDelegate",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:yn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Vn(e,"modelValue"),i=t,r=z(),a=z({}),o=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const y=j("el-form-item"),g=j("el-input"),x=j("el-form"),m=j("el-button"),V=j("el-dialog");return T(),M(V,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=X=>n.value=X),title:u.$t("flowable.delegate"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(y,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.delegateUser"})]),default:d(()=>[p(lo,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=X=>a.value.toUserId=X)},null,8,["modelValue"])]),_:1},8,["rules"]),p(y,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.delegateReason"})]),default:d(()=>[p(g,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=X=>a.value.comment=X)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),pe("div",Nm,[p(m,{type:"primary",onClick:o},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),Mm={class:"flex justify-end mt-2"},$m=$t({__name:"ReviewTransfer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:yn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Vn(e,"modelValue"),i=t,r=z(),a=z({}),o=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const y=j("el-form-item"),g=j("el-input"),x=j("el-form"),m=j("el-button"),V=j("el-dialog");return T(),M(V,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=X=>n.value=X),title:u.$t("flowable.transfer"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(y,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.transferUser"})]),default:d(()=>[p(lo,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=X=>a.value.toUserId=X)},null,8,["modelValue"])]),_:1},8,["rules"]),p(y,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.transferReason"})]),default:d(()=>[p(g,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=X=>a.value.comment=X)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),pe("div",Mm,[p(m,{type:"primary",onClick:o},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),Vm={class:"flex justify-end mt-2"},Lm=$t({__name:"ReviewBack",props:yn({taskId:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:yn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Vn(e,"modelValue"),i=e,r=t,a=z([]),o=z(),u=z({}),c=()=>{o.value.validate(async g=>{g&&(n.value=!1,r("finished",u.value))})},y=async()=>{a.value=await bl(i.taskId)};return Nt(n,()=>{n.value?(y(),u.value={}):a.value=[]}),(g,x)=>{const m=j("el-radio"),V=j("el-radio-group"),X=j("el-tag"),Q=j("el-form-item"),ie=j("el-input"),D=j("el-button"),Z=j("el-form"),F=j("el-dialog");return T(),M(F,{modelValue:n.value,"onUpdate:modelValue":x[2]||(x[2]=_=>n.value=_),title:g.$t("flowable.back"),width:"800","append-to-body":""},{default:d(()=>[p(Z,{ref_key:"form",ref:o,model:u.value,"label-width":"120px"},{default:d(()=>[p(Q,{prop:"activityId",rules:{required:!0,message:()=>g.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.backActivity"})]),default:d(()=>[a.value.length>0?(T(),M(V,{key:0,modelValue:u.value.activityId,"onUpdate:modelValue":x[0]||(x[0]=_=>u.value.activityId=_)},{default:d(()=>[(T(!0),ke(Le,null,Qe(a.value,_=>(T(),M(m,{key:_.id,label:_.activityName,value:_.activityId},{default:d(()=>[O(I(_.activityName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(T(),M(X,{key:1,type:"warning"},{default:d(()=>[O(I(g.$t("preview.noBackStep")),1)]),_:1}))]),_:1},8,["rules"]),p(Q,{prop:"comment",rules:{required:!0,message:()=>g.$t("v.required")}},{label:d(()=>[p(it,{message:"flowable.backReason"})]),default:d(()=>[p(ie,{modelValue:u.value.comment,"onUpdate:modelValue":x[1]||(x[1]=_=>u.value.comment=_)},null,8,["modelValue"])]),_:1},8,["rules"]),pe("div",Vm,[p(D,{type:"primary","native-type":"submit",disabled:a.value.length<=0,onClick:In(c,["prevent"])},{default:d(()=>[O(I(g.$t("ok")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Bm={key:0},Om={class:"w-full"},Um={class:"w-full"},Fm={key:1,class:"inline-flex mb-1"},qm={key:2,class:"inline-flex mb-1"},jm=$t({name:"ArticleForm",__name:"ArticleForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},action:{type:String,default:"edit"},channel:{type:Object,default:null},isReview:{type:Boolean,default:!1}},emits:{"update:modelValue":null,finished:null},setup(e){const t=e,{modelValue:n,channel:i}=Zn(t),{t:r}=Jn(),a=hr(),o=bo(),u=z(),c=z(!1),y=z(!1),g=z(!1),x=z(),m=z({}),V=z(),X=z(!1),Q=z([]),ie=z([]),D=z([]),Z=z([]),F=z([]),_=z([]),k=z(),N=pt(()=>F.value.find(h=>h.id===k.value)),E=pt(()=>{var h;return jr(zr(Wr().article.mains,(h=N.value)==null?void 0:h.mains,"article"))}),R=pt(()=>{var h;return jr(zr(Wr().article.asides,(h=N.value)==null?void 0:h.asides,"article"))}),$=pt(()=>{var h;return JSON.parse(((h=N.value)==null?void 0:h.customs)||"[]").filter(b=>b.type!=="tinyEditor")}),P=pt(()=>{var h;return JSON.parse(((h=N.value)==null?void 0:h.customs)||"[]").filter(b=>b.type==="tinyEditor")}),Y=z(!1),K=z([]),J=async h=>{Y.value=!0,K.value=await Xo({Q_Contains_name:h,Q_OrderBy:"refers_desc,id_desc",limit:20}),Y.value=!1};Nt(n,()=>{var h;n.value&&(k.value=(h=i==null?void 0:i.value)==null?void 0:h.articleModelId,oe(),he(),ct(),Ze(),ge())}),Nt($,()=>{$e(m.value.customs)});const ge=async()=>{Fe.epRank>0&&(X.value=await Go())},me=h=>el("sys_article_source",h),oe=async()=>{const h=await Al({current:!0});ie.value=h.map(b=>b.id),Q.value=Qn(h),Fe.dataScope!==1&&jo(Q.value,await Tl())},he=async()=>{Z.value=await yr({isArticlePermission:!0}),D.value=Qn(Z.value)},ct=async()=>{F.value=await Va({type:"article"}),k.value==null&&F.value.length>0&&(k.value=F.value[0].id)},Ze=async()=>{_.value=await Ko()},$e=h=>($.value.forEach(b=>{h[b.code]==null&&(h[b.code]=b.defaultValue,b.defaultValueKey!=null&&(h[b.code+"Key"]=b.defaultValueKey))}),h),st=async h=>{if(Fe.epRank<=1)return!1;const b=await wl({text:h.text});if(b.status===-1){if(h.editorType===1){const He=V.value.editor.plugins.searchreplace;He.find(b.result.name),He.done(),di.confirm(r("article.error.errorWord.confirm",{name:b.result.name,correct:b.result.correct}),{cancelButtonText:r("cancel"),confirmButtonText:r("ok"),type:"warning",callback:mt=>{mt==="confirm"&&(He.find(b.result.name),He.replace(b.result.correct,!1,!0),He.done(),m.value.text=V.value.editor.getContent())}})}else h.editorType===2&&di.alert(r("article.error.errorWord.alert.message",{name:b.result.name}),r("article.error.errorWord.alert.title"),{confirmButtonText:r("ok")});return!0}const Pe=await xl({text:h.text});if(Pe.status===-1){if(h.editorType===1){const He=V.value.editor.plugins.searchreplace;He.find(Pe.result.name),He.done()}return di.alert(r("article.error.sensitiveWord.alert.message",{name:Pe.result.name}),r("article.error.sensitiveWord.alert.title"),{confirmButtonText:r("ok")}),!0}return!1},U=()=>{u.value.submit(async(h,{focus:b,emit:Pe,props:He,form:mt})=>{var Ge;h.status=10,await Fr(h),(Ge=b==null?void 0:b.focus)==null||Ge.call(b),Pe("update:values",He.initValues(h.value)),mt.resetFields(),Ut.success(r("success"))})},L=z(""),te=z([]),Te=z(!1),f=z(!1),s=z(!1),l=z(!1),v=async h=>{L.value=h.taskId,te.value=await _l(h.taskId),Te.value=!0},w=async h=>{u.value.remove(async()=>{await rl(L.value,h.properties,h.comment)})},B=async h=>{L.value=h.taskId,s.value=!0},le=async h=>{u.value.remove(async()=>{await al(L.value,h.toUserId,h.comment)})},re=async h=>{L.value=h.taskId,l.value=!0},ye=async h=>{u.value.remove(async()=>{await sl(L.value,h.toUserId,h.comment)})},Oe=h=>{L.value=h.taskId,f.value=!0},ot=h=>{u.value.remove(async()=>{await ol(L.value,h.activityId,h.comment)})},Je=async h=>{try{const{value:b}=await di.prompt(r("review.rejectReason"),r("review.reject"),{confirmButtonText:r("submit"),cancelButtonText:r("cancel"),inputPattern:/\S+/,inputErrorMessage:r("v.required")});u.value.remove(async()=>{await tl([h.taskId],b)})}catch(b){}},Ce=(h,b)=>{u.value.submit(async(Pe,{loadBean:He})=>{if(h==="delete")await Ua([b]);else if(h==="submit")await La([b]);else if(h==="archive")await Fa([b]);else if(h==="offline")await qa([b]);else throw new Error("not support action: ".concat(h));He()})},et=z(!1),Ee=z([]),kt=()=>{var He,mt;et.value=!0;const h=Xa(m.value.text),Pe=Qa("img",h).map(Ge=>Ga(Ge,"src")).filter(Ge=>Ge==null?void 0:Ge.startsWith(a.base.uploadUrlPrefix));Ee.value=[...(mt=(He=m.value.imageList)==null?void 0:He.map(Ge=>Ge.url))!=null?mt:[],...Pe]},Vt=z(!1),Ke=z([]),se=async(h,b)=>{Ke.value=await Qo(.6,h,b),Ke.value.length>0?Vt.value=!0:Ut.success(r("article.success.titleSimilarity"))};return(h,b)=>{const Pe=j("el-button"),He=j("el-button-group"),mt=j("el-popconfirm"),Ge=j("el-tag"),S=j("el-input"),q=j("el-form-item"),ve=j("el-col"),ht=j("el-checkbox"),An=j("el-option"),fn=j("el-select"),Dt=j("el-row"),Wt=j("el-alert"),Un=j("el-radio"),St=j("el-radio-group"),oi=j("el-tree-select"),Ie=j("el-date-picker"),Fn=j("el-autocomplete"),zi=j("el-tooltip"),Lt=j("el-tab-pane"),qn=j("el-tabs"),_t=j("el-table-column"),Wi=j("el-table"),Hi=j("el-dialog");return T(),ke("div",null,[p(Cl,{ref_key:"dialog",ref:u,values:m.value,"onUpdate:values":b[52]||(b[52]=ce=>m.value=ce),name:h.$t("menu.content.article"),"query-bean":e.isReview?C(il):C(Oa),"create-bean":C(Fr),"update-bean":C(nl),"delete-bean":C(Ba),"bean-id":e.beanId,"bean-ids":e.beanIds,action:e.action,focus:x.value,"init-values":()=>{var ce,Ne;return k.value=(ce=C(i))==null?void 0:ce.articleModelId,{editorType:E.value.text.editorType,channelId:(Ne=C(i))==null?void 0:Ne.id,allowComment:!0,customs:{},fileList:[],imageList:[]}},"to-values":ce=>({...ce,tagNames:ce.tags.map(Ne=>Ne.name)}),perms:"article","model-value":e.modelValue,addable:!e.isReview,"disable-edit":ce=>ce.id!=null&&!ce.editable&&!C(Fe).allStatusPermission&&!e.isReview,"prevent-submit":st,"label-width":"140px",large:"","onUpdate:modelValue":b[53]||(b[53]=ce=>h.$emit("update:modelValue",ce)),onFinished:b[54]||(b[54]=()=>h.$emit("finished")),onBeanChange:b[55]||(b[55]=ce=>{var Ne,qe,G;c.value=!!ce.subtitle,y.value=!!ce.fullTitle,g.value=!!ce.linkUrl,k.value=(G=(Ne=ce.channel)==null?void 0:Ne.articleModelId)!=null?G:(qe=C(i))==null?void 0:qe.articleModelId})},{"header-action":d(({isEdit:ce,bean:Ne,unsaved:qe,handleDelete:G})=>[e.isReview?(T(),M(He,{key:0},{default:d(()=>[ce&&e.isReview?(T(),M(Pe,{key:0,disabled:C(Re)("articleReview:pass")||qe,type:"primary",icon:C(Ma),onClick:()=>v(Ne)},{default:d(()=>[O(I(h.$t("review.pass")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),p(Pe,{disabled:C(Re)("articleReview:reject")||qe,icon:C(Br),onClick:()=>Je(Ne)},{default:d(()=>[O(I(h.$t("review.reject")),1)]),_:2},1032,["disabled","icon","onClick"]),C(Fe).epRank>=3?(T(),M(Pe,{key:1,disabled:C(Re)("articleReview:back")||qe,icon:C(wo),onClick:()=>Oe(Ne)},{default:d(()=>[O(I(h.$t("review.back")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),C(Fe).epRank>=3?(T(),M(Pe,{key:2,disabled:C(Re)("articleReview:delegate")||qe,icon:C(xo),onClick:()=>B(Ne)},{default:d(()=>[O(I(h.$t("review.delegate")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),C(Fe).epRank>=3?(T(),M(Pe,{key:3,disabled:C(Re)("articleReview:transfer")||qe,icon:C(Eo),onClick:()=>re(Ne)},{default:d(()=>[O(I(h.$t("review.transfer")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0)]),_:2},1024)):ne("",!0),e.isReview?ne("",!0):(T(),M(He,{key:1},{default:d(()=>[ce?(T(),M(mt,{key:0,title:h.$t("confirmExecute"),onConfirm:()=>Ce("submit",Ne.id)},{reference:d(()=>[p(Pe,{disabled:[0,12].includes(Ne.status)||C(Re)("article:submit")||qe,icon:C(ko)},{default:d(()=>[O(I(h.$t("article.op.submit")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),ce?(T(),M(mt,{key:1,title:h.$t("confirmExecute"),onConfirm:()=>Ce("archive",Ne.id)},{reference:d(()=>[p(Pe,{disabled:![0].includes(Ne.status)||C(Re)("article:archive")||qe,icon:C(So)},{default:d(()=>[O(I(h.$t("article.op.archive")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),ce?(T(),M(mt,{key:2,title:h.$t("confirmExecute"),onConfirm:()=>Ce("offline",Ne.id)},{reference:d(()=>[p(Pe,{disabled:![0,1,5,11,12].includes(Ne.status)||C(Re)("article:offline")||qe,icon:C(Br)},{default:d(()=>[O(I(h.$t("article.op.offline")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0)]),_:2},1024)),ce?(T(),M(Pe,{key:2,icon:C(Ia),onClick:b[0]||(b[0]=()=>C(oo)(m.value.status,m.value.url,m.value.dynamicUrl))},{default:d(()=>[O(I(h.$t("article.op.preview")),1)]),_:1},8,["icon"])):ne("",!0),p(He,null,{default:d(()=>[ce&&!e.isReview?(T(),M(mt,{key:0,title:h.$t("confirmDelete"),onConfirm:()=>Ce("delete",Ne.id)},{reference:d(()=>[p(Pe,{disabled:C(Re)("article:delete")||qe,icon:C(Ao)},{default:d(()=>[O(I(h.$t("delete")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),ce?(T(),M(mt,{key:1,title:h.$t("confirmCompletelyDelete"),onConfirm:()=>G()},{reference:d(()=>[p(Pe,{disabled:C(Re)("article:completelyDelete"),icon:C(Na)},{default:d(()=>[O(I(h.$t("article.op.completelyDelete")),1)]),_:1},8,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0)]),_:2},1024)]),"header-status":d(({isEdit:ce})=>[ce?(T(),ke(Le,{key:0},[m.value.status!=null?(T(),ke("span",Bm,[m.value.status===0?(T(),M(Ge,{key:0,type:"success",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):m.value.status===1?(T(),M(Ge,{key:1,size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):m.value.status===20?(T(),M(Ge,{key:2,type:"danger",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):[21,22].includes(m.value.status)?(T(),M(Ge,{key:3,type:"warning",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):(T(),M(Ge,{key:4,type:"info",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(m.value.status))),1)]),_:1}))])):ne("",!0)],64)):ne("",!0)]),default:d(({bean:ce,isEdit:Ne,disabled:qe})=>[p(Dt,null,{default:d(()=>[p(ve,{span:18},{default:d(()=>[p(Dt,null,{default:d(()=>[m.value.src!=null?(T(),M(ve,{key:0,span:E.value.title.double?12:24},{default:d(()=>[p(q,{label:h.$t("article.src")},{default:d(()=>[p(S,{"model-value":m.value.src.title,disabled:""},{prepend:d(()=>[O(I(C(r)("article.type.".concat(m.value.type))),1)]),append:d(()=>[O(I(m.value.src.channel.paths.map(G=>G.name).join("/")),1)]),_:1},8,["model-value"])]),_:1},8,["label"])]),_:1},8,["span"])):ne("",!0),p(ve,{span:E.value.title.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"title",label:(G=E.value.title.name)!=null?G:h.$t("article.title"),rules:{required:!0,message:()=>h.$t("v.required")}},{default:d(()=>[p(S,{ref_key:"focus",ref:x,modelValue:m.value.title,"onUpdate:modelValue":b[1]||(b[1]=H=>m.value.title=H),maxlength:"150"},null,8,["modelValue"]),p(Pe,{disabled:!m.value.title,class:"mr-5",onClick:b[2]||(b[2]=()=>se(m.value.title,m.value.id))},{default:d(()=>[O(I(h.$t("article.op.titleSimilarity")),1)]),_:1},8,["disabled"]),E.value.subtitle.show&&!E.value.subtitle.required?(T(),M(ht,{key:0,modelValue:c.value,"onUpdate:modelValue":b[3]||(b[3]=H=>c.value=H),onClick:b[4]||(b[4]=()=>m.value.subtitle=void 0)},{default:d(()=>{var H;return[O(I((H=E.value.subtitle.name)!=null?H:h.$t("article.subtitle")),1)]}),_:1},8,["modelValue"])):ne("",!0),E.value.fullTitle.show&&!E.value.fullTitle.required?(T(),M(ht,{key:1,modelValue:y.value,"onUpdate:modelValue":b[5]||(b[5]=H=>y.value=H),onClick:b[6]||(b[6]=()=>m.value.fullTitle=void 0)},{default:d(()=>{var H;return[O(I((H=E.value.fullTitle.name)!=null?H:h.$t("article.fullTitle")),1)]}),_:1},8,["modelValue"])):ne("",!0),E.value.linkUrl.show&&!E.value.linkUrl.required?(T(),M(ht,{key:2,modelValue:g.value,"onUpdate:modelValue":b[7]||(b[7]=H=>g.value=H),onClick:b[8]||(b[8]=()=>(m.value.linkUrl=void 0,m.value.targetBlank=!1))},{default:d(()=>{var H;return[O(I((H=E.value.linkUrl.name)!=null?H:h.$t("article.linkUrl")),1)]}),_:1},8,["modelValue"])):ne("",!0)]),_:1},8,["label","rules"])]}),_:1},8,["span"]),(m.value.subtitle||c.value)&&E.value.subtitle.show||E.value.subtitle.show&&E.value.subtitle.required?(T(),M(ve,{key:1,span:E.value.subtitle.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"subtitle",label:(G=E.value.subtitle.name)!=null?G:h.$t("article.subtitle"),rules:E.value.subtitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(S,{modelValue:m.value.subtitle,"onUpdate:modelValue":b[9]||(b[9]=H=>m.value.subtitle=H),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),(m.value.fullTitle||y.value)&&E.value.fullTitle.show||E.value.fullTitle.show&&E.value.fullTitle.required?(T(),M(ve,{key:2,span:E.value.fullTitle.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"fullTitle",label:(G=E.value.fullTitle.name)!=null?G:h.$t("article.fullTitle"),rules:E.value.fullTitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(S,{modelValue:m.value.fullTitle,"onUpdate:modelValue":b[10]||(b[10]=H=>m.value.fullTitle=H),type:"textarea",rows:2,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),(m.value.linkUrl||g.value)&&E.value.linkUrl.show||E.value.linkUrl.show&&E.value.linkUrl.required?(T(),M(ve,{key:3,span:E.value.linkUrl.double?12:24},{default:d(()=>[p(q,{prop:"linkUrl",rules:E.value.linkUrl.required?[{required:!0,message:()=>h.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}},{label:d(()=>{var G;return[p(it,{label:(G=E.value.linkUrl.name)!=null?G:h.$t("article.linkUrl"),message:"article.linkUrl",help:""},null,8,["label"])]}),default:d(()=>[p(S,{modelValue:m.value.linkUrl,"onUpdate:modelValue":b[12]||(b[12]=G=>m.value.linkUrl=G),maxlength:"255",disabled:m.value.src!=null&&m.value.type===3},{append:d(()=>[p(ht,{modelValue:m.value.targetBlank,"onUpdate:modelValue":b[11]||(b[11]=G=>m.value.targetBlank=G)},{default:d(()=>[O(I(h.$t("article.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"])]),_:1},8,["rules"])]),_:1},8,["span"])):ne("",!0),E.value.tags.show?(T(),M(ve,{key:4,span:E.value.tags.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"tagNames",label:(G=E.value.tags.name)!=null?G:h.$t("article.tags"),rules:E.value.tags.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(fn,{modelValue:m.value.tagNames,"onUpdate:modelValue":b[13]||(b[13]=H=>m.value.tagNames=H),multiple:"",filterable:"",remote:"",clearable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,"remote-method":J,loading:Y.value,class:"w-full",onFocusOnce:b[14]||(b[14]=()=>J())},{default:d(()=>[(T(!0),ke(Le,null,Qe(K.value.map(H=>H.name),H=>(T(),M(An,{key:H,label:H,value:H},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),E.value.seoKeywords.show?(T(),M(ve,{key:5,span:E.value.seoKeywords.double?12:24},{default:d(()=>[p(q,{prop:"seoKeywords",rules:E.value.seoKeywords.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var G;return[p(it,{label:(G=E.value.seoKeywords.name)!=null?G:h.$t("article.seoKeywords"),message:"article.seoKeywords",help:""},null,8,["label"])]}),default:d(()=>[p(S,{modelValue:m.value.seoKeywords,"onUpdate:modelValue":b[15]||(b[15]=G=>m.value.seoKeywords=G),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):ne("",!0),E.value.seoDescription.show?(T(),M(ve,{key:6,span:E.value.seoDescription.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"seoDescription",label:(G=E.value.seoDescription.name)!=null?G:h.$t("article.seoDescription"),rules:E.value.seoDescription.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(S,{modelValue:m.value.seoDescription,"onUpdate:modelValue":b[16]||(b[16]=H=>m.value.seoDescription=H),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),E.value.author.show?(T(),M(ve,{key:7,span:E.value.author.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"author",label:(G=E.value.author.name)!=null?G:h.$t("article.author"),rules:E.value.author.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(S,{modelValue:m.value.author,"onUpdate:modelValue":b[17]||(b[17]=H=>m.value.author=H),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),E.value.editor.show?(T(),M(ve,{key:8,span:E.value.editor.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"editor",label:(G=E.value.editor.name)!=null?G:h.$t("article.editor"),rules:E.value.editor.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(S,{modelValue:m.value.editor,"onUpdate:modelValue":b[18]||(b[18]=H=>m.value.editor=H),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),E.value.image.show?(T(),M(ve,{key:9,span:E.value.image.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"image",label:(G=E.value.image.name)!=null?G:h.$t("article.image"),rules:E.value.image.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(C(Il),{modelValue:m.value.image,"onUpdate:modelValue":b[19]||(b[19]=H=>m.value.image=H),height:E.value.image.imageHeight,width:E.value.image.imageWidth,mode:E.value.image.imageMode,disabled:qe},null,8,["modelValue","height","width","mode","disabled"]),p(Pe,{class:"self-start ml-2",onClick:b[20]||(b[20]=()=>kt())},{default:d(()=>[O(I(h.$t("article.extractImage")),1)]),_:1})]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),(T(!0),ke(Le,null,Qe($.value,G=>(T(),M(ve,{key:G.code,span:G.double?12:24},{default:d(()=>[p(q,{prop:"customs.".concat(G.code),rules:G.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(it,{label:G.name},null,8,["label"])]),default:d(()=>[p(Hr,{modelValue:m.value.customs[G.code],"onUpdate:modelValue":H=>m.value.customs[G.code]=H,"model-key":m.value.customs[G.code+"Key"],"onUpdate:modelKey":H=>m.value.customs[G.code+"Key"]=H,field:G},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),E.value.file.show?(T(),M(ve,{key:10,span:E.value.file.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"file",label:(G=E.value.file.name)!=null?G:h.$t("article.file"),rules:E.value.file.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(S,{modelValue:m.value.fileName,"onUpdate:modelValue":b[21]||(b[21]=H=>m.value.fileName=H)},{prepend:d(()=>[O(I(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(S,{modelValue:m.value.fileLength,"onUpdate:modelValue":b[22]||(b[22]=H=>m.value.fileLength=H)},{prepend:d(()=>[O(I(h.$t("size")),1)]),append:d(()=>b[64]||(b[64]=[O("Byte")])),_:1},8,["modelValue"])]),_:1})]),_:1}),p(S,{modelValue:m.value.file,"onUpdate:modelValue":b[23]||(b[23]=H=>m.value.file=H)},{prepend:d(()=>b[65]||(b[65]=[O("URL")])),_:1},8,["modelValue"]),p(C(zn),{type:"file","on-success":H=>(m.value.file=H.url,m.value.fileName=H.name,m.value.fileLength=H.size),disabled:qe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.video.show?(T(),M(ve,{key:11,span:E.value.video.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"video",label:(G=E.value.video.name)!=null?G:h.$t("article.video"),rules:E.value.video.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(S,{modelValue:m.value.video,"onUpdate:modelValue":b[24]||(b[24]=H=>m.value.video=H),maxlength:"255"},{prepend:d(()=>b[66]||(b[66]=[O("URL")])),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(S,{modelValue:m.value.videoDuration,"onUpdate:modelValue":b[25]||(b[25]=H=>m.value.videoDuration=H),maxlength:"10"},{prepend:d(()=>[O(I(h.$t("article.videoDuration")),1)]),append:d(()=>[O(I(C(Lr)(m.value.videoDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(C(zn),{type:"video","on-success":H=>{m.value.video=H.url,m.value.videoDuration=H.duration,m.value.image||(m.value.image=H.image)},disabled:qe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.audio.show?(T(),M(ve,{key:12,span:E.value.audio.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"audio",label:(G=E.value.audio.name)!=null?G:h.$t("article.audio"),rules:E.value.audio.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(S,{modelValue:m.value.audio,"onUpdate:modelValue":b[26]||(b[26]=H=>m.value.audio=H),maxlength:"255"},{prepend:d(()=>b[67]||(b[67]=[O("URL")])),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(S,{modelValue:m.value.audioDuration,"onUpdate:modelValue":b[27]||(b[27]=H=>m.value.audioDuration=H),maxlength:"10"},{prepend:d(()=>[O(I(h.$t("article.audioDuration")),1)]),append:d(()=>[O(I(C(Lr)(m.value.audioDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(C(zn),{type:"audio","on-success":H=>{m.value.audio=H.url,m.value.audioDuration=H.duration},disabled:qe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.doc.show?(T(),M(ve,{key:13,span:E.value.doc.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"doc",label:(G=E.value.doc.name)!=null?G:h.$t("article.doc"),rules:E.value.doc.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[pe("div",Om,[p(Dt,null,{default:d(()=>[p(ve,{span:12},{default:d(()=>[p(S,{modelValue:m.value.docName,"onUpdate:modelValue":b[28]||(b[28]=H=>m.value.docName=H)},{prepend:d(()=>[O(I(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(ve,{span:12},{default:d(()=>[p(S,{modelValue:m.value.docLength,"onUpdate:modelValue":b[29]||(b[29]=H=>m.value.docLength=H)},{prepend:d(()=>[O(I(h.$t("size")),1)]),append:d(()=>b[68]||(b[68]=[O("Byte")])),_:1},8,["modelValue"])]),_:1})]),_:1}),p(S,{modelValue:m.value.doc,"onUpdate:modelValue":b[30]||(b[30]=H=>m.value.doc=H)},{prepend:d(()=>b[69]||(b[69]=[O("URL")])),_:1},8,["modelValue"]),p(S,{modelValue:m.value.docOrig,"onUpdate:modelValue":b[31]||(b[31]=H=>m.value.docOrig=H)},{prepend:d(()=>[O(I(h.$t("article.docOrig")),1)]),_:1},8,["modelValue"]),X.value&&C(Fe).epRank>0?(T(),M(C(zn),{key:0,type:"library",disabled:C(Re)("jodConvert:library")||qe,"upload-action":C(Zo),"on-success":H=>{m.value.doc=H.doc,m.value.docOrig=H.docOrig,m.value.docName=H.docName,m.value.docLength=H.docLength,m.value.image=H.docImage}},null,8,["disabled","upload-action","on-success"])):ne("",!0),!X.value&&C(Fe).epRank>0?(T(),M(Wt,{key:1,title:h.$t("error.jodConverterNotEnabled"),type:"error",closable:!1},null,8,["title"])):ne("",!0),C(Fe).epRank===0?(T(),M(Pe,{key:2,type:"primary",onClick:b[32]||(b[32]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O(I(h.$t("article.op.clickToUpload")),1)]),_:1})):ne("",!0)])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.imageList.show?(T(),M(ve,{key:14,span:E.value.imageList.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"imageList",label:(G=E.value.imageList.name)!=null?G:h.$t("article.imageList"),rules:E.value.imageList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(C(km),{modelValue:m.value.imageList,"onUpdate:modelValue":b[33]||(b[33]=H=>m.value.imageList=H),"max-height":E.value.imageList.imageMaxHeight,"max-width":E.value.imageList.imageMaxWidth,"list-type":E.value.imageList.imageListType,disabled:qe},null,8,["modelValue","max-height","max-width","list-type","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.fileList.show?(T(),M(ve,{key:15,span:E.value.fileList.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"fileList",label:(G=E.value.fileList.name)!=null?G:h.$t("article.fileList"),rules:E.value.fileList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(C(Rm),{modelValue:m.value.fileList,"onUpdate:modelValue":b[34]||(b[34]=H=>m.value.fileList=H),disabled:qe},null,8,["modelValue","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),E.value.text.show?(T(),M(ve,{key:16,span:E.value.text.double?12:24},{default:d(()=>{var G;return[p(q,{prop:"text",label:(G=E.value.text.name)!=null?G:h.$t("article.text"),rules:E.value.text.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>{var H;return[pe("div",Um,[E.value.text.editorSwitch?(T(),M(St,{key:0,modelValue:m.value.editorType,"onUpdate:modelValue":b[35]||(b[35]=tt=>m.value.editorType=tt),class:"mr-6",onChange:b[36]||(b[36]=()=>m.value.markdown="")},{default:d(()=>[(T(),ke(Le,null,Qe([1,2],tt=>p(Un,{key:tt,value:tt},{default:d(()=>[O(I(h.$t("model.field.editorType.".concat(tt))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):ne("",!0),m.value.editorType===1&&X.value&&C(Fe).epRank>0?(T(),ke("div",Fm,[p(C(zn),{type:"doc",disabled:C(Re)("jodConvert:doc"),"upload-action":C(Jo),"on-success":tt=>m.value.text=tt,button:h.$t("article.op.docImport")},null,8,["disabled","upload-action","on-success","button"])])):ne("",!0),C(Fe).epRank===0&&C(Fe).epDisplay?(T(),ke("div",qm,[p(Pe,{type:"primary",onClick:b[37]||(b[37]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O(I(h.$t("article.op.docImport")),1)]),_:1})])):ne("",!0),m.value.editorType===2?(T(),M(C(qo),{key:3,modelValue:m.value.markdown,"onUpdate:modelValue":b[38]||(b[38]=tt=>m.value.markdown=tt),html:m.value.text,"onUpdate:html":b[39]||(b[39]=tt=>m.value.text=tt),class:"leading-6"},null,8,["modelValue","html"])):(T(),M(C(Rl),{key:4,ref_key:"tinyText",ref:V,modelValue:m.value.text,"onUpdate:modelValue":b[40]||(b[40]=tt=>m.value.text=tt),disabled:qe,init:{typesetting_options:(H=C(o).currentSite.editor)==null?void 0:H.typesetting}},null,8,["modelValue","disabled","init"]))])]}),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),(T(!0),ke(Le,null,Qe(P.value,G=>(T(),M(ve,{key:G.code,span:G.double?12:24},{default:d(()=>[p(q,{prop:"customs.".concat(G.code),rules:G.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(it,{label:G.name},null,8,["label"])]),default:d(()=>[p(Hr,{modelValue:m.value.customs[G.code],"onUpdate:modelValue":H=>m.value.customs[G.code]=H,field:G},null,8,["modelValue","onUpdate:modelValue","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1024),p(ve,{span:6},{default:d(()=>[p(qn,{type:"border-card",class:"ml-5"},{default:d(()=>[p(Lt,{label:h.$t("article.tabs.setting")},{default:d(()=>{var G,H,tt,li,ui,ci,jn,A,Ve;return[p(q,{prop:"channelId",label:(G=R.value.channel.name)!=null?G:h.$t("article.channel"),rules:[{required:!0,message:()=>h.$t("v.required")},{validator:(fe,nt,Zt)=>{var Jt;if(((Jt=D.value.find(uo=>uo.id===nt))==null?void 0:Jt.children.length)>0){Zt(h.$t("article.error.leafChannelOnly"));return}Zt()}}],"label-position":"top"},{default:d(()=>{var fe;return[p(oi,{modelValue:m.value.channelId,"onUpdate:modelValue":b[41]||(b[41]=nt=>m.value.channelId=nt),data:D.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":(fe=ce.channel)==null?void 0:fe.paths.map(nt=>nt.id),class:"w-full",onChange:b[42]||(b[42]=nt=>{var Zt;k.value=(Zt=Z.value.find(Jt=>Jt.id===nt))==null?void 0:Zt.articleModelId})},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","rules"]),R.value.org.show?(T(),M(q,{key:0,label:(H=R.value.org.name)!=null?H:h.$t("article.org"),required:Ne,"label-position":"top"},{default:d(()=>{var fe,nt,Zt;return[p(oi,{modelValue:m.value.orgId,"onUpdate:modelValue":b[43]||(b[43]=Jt=>m.value.orgId=Jt),data:((fe=ce.org)==null?void 0:fe.id)!=null&&ie.value.indexOf(ce.org.id)===-1?[ce.org,...Q.value]:Q.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":((Zt=(nt=ce.org)==null?void 0:nt.paths)!=null?Zt:Q.value).map(Jt=>Jt.id),class:"w-full"},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","required"])):ne("",!0),R.value.publishDate.show?(T(),M(q,{key:1,prop:"publishDate",rules:Ne?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(it,{label:(fe=R.value.publishDate.name)!=null?fe:h.$t("article.publishDate"),message:"article.publishDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ie,{modelValue:m.value.publishDate,"onUpdate:modelValue":b[44]||(b[44]=fe=>m.value.publishDate=fe),type:"datetime",class:"w-full",onChange:b[45]||(b[45]=fe=>{fe===null&&(m.value.publishDate=void 0)})},null,8,["modelValue"])]),_:2},1032,["rules"])):ne("",!0),R.value.onlineDate.show?(T(),M(q,{key:2,prop:"onlineDate",rules:R.value.onlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(it,{label:(fe=R.value.onlineDate.name)!=null?fe:h.$t("article.onlineDate"),message:"article.onlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ie,{modelValue:m.value.onlineDate,"onUpdate:modelValue":b[46]||(b[46]=fe=>m.value.onlineDate=fe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ne("",!0),R.value.offlineDate.show?(T(),M(q,{key:3,prop:"offlineDate",rules:R.value.offlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(it,{label:(fe=R.value.offlineDate.name)!=null?fe:h.$t("article.offlineDate"),message:"article.offlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ie,{modelValue:m.value.offlineDate,"onUpdate:modelValue":b[47]||(b[47]=fe=>m.value.offlineDate=fe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ne("",!0),R.value.source.show?(T(),M(q,{key:4,prop:"source",label:(tt=R.value.source.name)!=null?tt:h.$t("article.source"),rules:R.value.source.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{default:d(()=>[p(Fn,{modelValue:m.value.source,"onUpdate:modelValue":b[48]||(b[48]=fe=>m.value.source=fe),"value-key":"name","fetch-suggestions":async(fe,nt)=>nt(await me(fe)),class:"w-full","highlight-first-item":"","hide-loading":"",clearable:"",onKeydown:b[49]||(b[49]=_o(In(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","fetch-suggestions"])]),_:1},8,["label","rules"])):ne("",!0),R.value.articleTemplate.show?(T(),M(q,{key:5,prop:"articleTemplate",label:(li=R.value.articleTemplate.name)!=null?li:h.$t("article.articleTemplate"),rules:R.value.articleTemplate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(it,{label:(fe=R.value.articleTemplate.name)!=null?fe:h.$t("article.articleTemplate"),message:"article.articleTemplate",help:""},null,8,["label"])]}),default:d(()=>[p(fn,{modelValue:m.value.articleTemplate,"onUpdate:modelValue":b[50]||(b[50]=fe=>m.value.articleTemplate=fe),clearable:"",class:"w-full"},{default:d(()=>[(T(!0),ke(Le,null,Qe(_.value,fe=>(T(),M(An,{key:fe,label:fe+".html",value:fe},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):ne("",!0),R.value.user.show?(T(),M(q,{key:6,label:(ui=R.value.user.name)!=null?ui:h.$t("article.user"),"label-position":"top"},{default:d(()=>{var fe;return[p(S,{"model-value":(fe=m.value.user)==null?void 0:fe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ne("",!0),R.value.created.show?(T(),M(q,{key:7,label:(ci=R.value.created.name)!=null?ci:h.$t("article.created"),"label-position":"top"},{default:d(()=>[p(Ie,{"model-value":m.value.created,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ne("",!0),R.value.modifiedUser.show?(T(),M(q,{key:8,label:(jn=R.value.modifiedUser.name)!=null?jn:h.$t("article.modifiedUser"),"label-position":"top"},{default:d(()=>{var fe;return[p(S,{"model-value":(fe=m.value.modifiedUser)==null?void 0:fe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ne("",!0),R.value.modified.show?(T(),M(q,{key:9,label:(A=R.value.modified.name)!=null?A:h.$t("article.modified"),"label-position":"top"},{default:d(()=>[p(Ie,{"model-value":m.value.modified,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ne("",!0),((Ve=m.value.destList)==null?void 0:Ve.length)>0?(T(),M(q,{key:10,label:h.$t("article.destList"),"label-position":"top"},{default:d(()=>[(T(!0),ke(Le,null,Qe(m.value.destList,fe=>(T(),M(zi,{key:fe.id,content:(fe.siteId!=m.value.siteId?"[".concat(fe.site.name,"] "):"")+fe.channel.paths.map(nt=>nt.name).join("/"),placement:"top-start"},{default:d(()=>[p(S,{"model-value":(fe.siteId!=m.value.siteId?"[".concat(fe.site.name,"] "):"")+fe.channel.paths.map(nt=>nt.name).join("/"),disabled:""},{append:d(()=>[O(I(C(r)("article.type.".concat(fe.type))),1)]),_:2},1032,["model-value"])]),_:2},1032,["content"]))),128))]),_:1},8,["label"])):ne("",!0)]}),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"footer-action":d(({isEdit:ce,handleSubmit:Ne})=>[p(Pe,{disabled:C(Re)(ce?"article:update":"article:create"),type:"primary","native-type":"submit",onClick:In(()=>Ne(),["prevent"])},{default:d(()=>[O(I(h.$t(ce?"save":"submit")),1)]),_:2},1032,["disabled","onClick"]),ce?ne("",!0):(T(),M(Pe,{key:0,onClick:b[51]||(b[51]=()=>U())},{default:d(()=>[O(I(h.$t("article.op.saveAsDraft")),1)]),_:1}))]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","action","focus","init-values","to-values","model-value","addable","disable-edit"]),p(Pl,{modelValue:et.value,"onUpdate:modelValue":b[56]||(b[56]=ce=>et.value=ce),urls:Ee.value,"append-to-body":!0,onFinished:b[57]||(b[57]=ce=>m.value.image=ce[0])},null,8,["modelValue","urls"]),p(Hi,{modelValue:Vt.value,"onUpdate:modelValue":b[58]||(b[58]=ce=>Vt.value=ce),title:h.$t("article.op.titleSimilarity"),width:"820px"},{default:d(()=>[p(Wi,{data:Ke.value},{default:d(()=>[p(_t,{property:"id",label:"ID",width:"170px"}),p(_t,{property:"title",label:h.$t("article.similarity.title"),"show-overflow-tooltip":""},null,8,["label"]),p(_t,{property:"channel.name",label:h.$t("article.channel"),formatter:ce=>ce.channel.paths.map(Ne=>Ne.name).join(" / "),width:"180px","show-overflow-tooltip":""},null,8,["label","formatter"]),p(_t,{property:"score",label:h.$t("article.similarity.score"),formatter:ce=>h.$n(ce.score,"percent",{minimumFractionDigits:0}),width:"100px"},null,8,["label","formatter"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),p(Im,{modelValue:Te.value,"onUpdate:modelValue":b[59]||(b[59]=ce=>Te.value=ce),"form-properties":te.value,"onUpdate:formProperties":b[60]||(b[60]=ce=>te.value=ce),onFinished:w},null,8,["modelValue","form-properties"]),p(Pm,{modelValue:s.value,"onUpdate:modelValue":b[61]||(b[61]=ce=>s.value=ce),onFinished:le},null,8,["modelValue"]),p($m,{modelValue:l.value,"onUpdate:modelValue":b[62]||(b[62]=ce=>l.value=ce),onFinished:ye},null,8,["modelValue"]),p(Lm,{modelValue:f.value,"onUpdate:modelValue":b[63]||(b[63]=ce=>f.value=ce),"task-id":L.value,onFinished:ot},null,8,["modelValue","task-id"])])}}}),zm={class:"flex items-center justify-between"},Wm=$t({name:"ArticleInternalPushForm",__name:"ArticlePushForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},type:{type:String,default:"external"}},emits:{"update:modelValue":null,finished:null},setup(e,{emit:t}){const n=e,i=t,{beanId:r,type:a,modelValue:o}=Zn(n),{t:u}=Jn(),c=z(),y=z({}),g=z({}),x=z(!1),m=z([]),V=z([]),X=z(),Q=async()=>{(r==null?void 0:r.value)!=null&&(y.value=await Oa(r.value))},ie=async _=>{const k=a.value==="internal"?{isArticlePermission:!0}:{siteId:_};V.value=zo(Qn(await yr(k))),V.value=Ur(V.value,[...y.value.destList.map(N=>N.channel.id),y.value.channel.id])},D=async()=>{m.value=await El(),m.value=Qn(m.value),m.value=Ur(m.value,[y.value.siteId])};Nt(o,async()=>{o.value&&(await Q(),a.value==="external"?D():ie(),g.value={ids:[y.value.id],type:3})});const Z=()=>{X.value!=null&&(g.value.channelIds=[...X.value.getCheckedNodes(),...X.value.getHalfCheckedNodes()].map(_=>_.id),c.value.validate())},F=()=>{c.value.validate(async _=>{if(_){x.value=!0;try{a.value==="internal"?await ll(g.value):await ul(g.value),i("finished"),i("update:modelValue",!1),Ut.success(u("success"))}finally{x.value=!1}}})};return(_,k)=>{const N=j("el-input"),E=j("el-form-item"),R=j("el-radio-button"),$=j("el-radio-group"),P=j("el-tree-select"),Y=j("el-tree"),K=j("el-form"),J=j("el-button"),ge=j("el-drawer");return T(),M(ge,{title:_.$t("article.op.".concat(C(a),"Push")),"model-value":e.modelValue,size:414,"onUpdate:modelValue":k[6]||(k[6]=me=>_.$emit("update:modelValue",me))},{default:d(()=>[p(K,{ref_key:"form",ref:c,model:g.value,"label-position":"top"},{default:d(()=>[p(E,null,{default:d(()=>[p(N,{"model-value":y.value.title,disabled:""},null,8,["model-value"])]),_:1}),p(E,{prop:"type"},{default:d(()=>[p($,{modelValue:g.value.type,"onUpdate:modelValue":k[0]||(k[0]=me=>g.value.type=me)},{default:d(()=>[(T(),ke(Le,null,Qe([1,3],me=>p(R,{key:me,value:me},{default:d(()=>[O(I(C(u)("article.type.".concat(me))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),C(a)==="external"?(T(),M(E,{key:0,prop:"siteId",rules:[{required:!0,message:()=>_.$t("v.required")}]},{default:d(()=>[p(P,{modelValue:g.value.siteId,"onUpdate:modelValue":k[1]||(k[1]=me=>g.value.siteId=me),data:m.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",class:"w-full",onChange:k[2]||(k[2]=me=>ie(me))},null,8,["modelValue","data"])]),_:1},8,["rules"])):ne("",!0),p(E,{prop:"channelIds",rules:[{required:!0,message:()=>_.$t("v.required")}]},{default:d(()=>[p(Y,{ref_key:"channelTree",ref:X,data:V.value,"node-key":"id",props:{label:"name"},class:"w-full border rounded","check-strictly":"","default-expand-all":"","show-checkbox":"","check-on-click-node":"",onCheck:k[3]||(k[3]=()=>Z())},null,8,["data"])]),_:1},8,["rules"])]),_:1},8,["model"])]),footer:d(()=>[pe("div",zm,[k[7]||(k[7]=pe("div",null,null,-1)),pe("div",null,[p(J,{onClick:k[4]||(k[4]=()=>_.$emit("update:modelValue",!1))},{default:d(()=>[O(I(_.$t("cancel")),1)]),_:1}),p(J,{type:"primary",loading:x.value,onClick:k[5]||(k[5]=()=>F())},{default:d(()=>[O(I(_.$t("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["title","model-value"])}}}),Hm={class:"mb-1 ml-2"},Ym={class:"mb-3"},Km={class:"app-block"},Gm={key:0},Qm={key:0},Xm=["title"],Zm={class:"text-xs"},Jm={class:"text-xs"},eh={class:"text-xs"},th={class:"text-xs"},nh={class:"text-xs"},ih={class:"text-xs"},rh={class:"text-xs"},ah={class:"text-xs"},Ch=$t({name:"ArticleList",__name:"ArticleList",setup(e){var Ge;const{t}=Jn(),n=z({}),i=z(),r=z(1),a=z(10),o=z(0),u=z(),c=z([]),y=z([]),g=z(!1),x=z(!1),m=z(),V=pt(()=>c.value.map(S=>S.id)),X=z(!1),Q=z("edit"),ie=z([]),D=z(!1),Z=z(),F=z(),_=z(),k=z(),N=z(),E=z(),R=z(),$=z([]),P=z(!1),Y=z(),K=z(),J=z(!1),ge=["completelyDelete","delete","submit","archive","offline"],me=z(ge[0]),oe=z(!1),he=z("internal"),ct=To(),Ze=z(Number((Ge=ct.query.status)!=null?Ge:"-1")),$e=z([]),st=pt(()=>$e.value.find(S=>{var q;return S.id===((q=Y.value)==null?void 0:q.articleModelId)})),U=pt(()=>{var S;return JSON.parse(((S=st.value)==null?void 0:S.customs)||"[]")}),L=z({});Nt(U,async()=>{L.value={},U.value.filter(S=>["radio","select","checkbox","multipleSelect"].indexOf(S.type)>=0).map(S=>S.dictTypeId).forEach(async S=>{L.value[S]=(await cl({typeId:S})).map(q=>({label:q.name,value:q.value}))})});const te=S=>me.value==="delete"?![20].includes(S.status):me.value==="submit"?![0,12].includes(S.status):me.value==="archive"?[0].includes(S.status):me.value==="offline"?[0,1,5,11,12].includes(S.status):(me.value==="completelyDelete",!0),Te=pt(()=>y.value.filter(S=>te(S)).map(S=>S.id)),f=async(S,q)=>{if(S==="delete")await Ua(q);else if(S==="submit")await La(q);else if(S==="archive")await Fa(q);else if(S==="offline")await qa(q);else if(S==="completelyDelete")await Ba(q);else throw new Error("not support action: ".concat(S));s(),Ut.success(t("success"))},s=async()=>{var S;g.value=!0;try{const{content:q,totalElements:ve}=await dl({...Co(n.value),Q_EQ_status_Short:Ze.value!==-1?Ze.value:void 0,subChannelId:(S=Y.value)==null?void 0:S.id,Q_OrderBy:i.value,page:r.value,pageSize:a.value});X.value=i.value!==void 0,c.value=q,o.value=Number(ve)}finally{g.value=!1}},l=async()=>{P.value=!0;try{$.value=Qn(await yr({isArticlePermission:!0}))}finally{P.value=!1}},v=async()=>{ie.value=await Yo()},w=async()=>{$e.value=await Va({type:"article"})};let B;const le=()=>{const S=document.querySelector("#dataTable .el-table__body-wrapper tbody");B=Bo.create(S,{handle:".drag-handle",animation:200,chosenClass:"sortable-chosen",onEnd:async function(q){const{oldIndex:ve,newIndex:ht}=q;ve!==ht&&(await pl(c.value[ve].id,c.value[ht].id),c.value.splice(ht,0,c.value.splice(ve,1)[0]),Ut.success(t("success")))}})};$a(()=>{s(),l(),v(),w(),le()}),Ro(()=>{B!==void 0&&B.destroy()});const re=({column:S,prop:q,order:ve})=>{var ht;q&&ve?i.value=((ht=S.sortBy)!=null?ht:q)+(ve==="descending"?"_desc":""):i.value=void 0,s()},ye=()=>{r.value=1,s()},Oe=()=>{u.value.clearSort(),Lo(n.value),i.value=void 0,r.value=1,s()},ot=()=>{Q.value="add",m.value=void 0,x.value=!0},Je=S=>{Q.value="copy",m.value=S,x.value=!0},Ce=S=>{Re("article:update")||(Q.value="edit",m.value=S,x.value=!0)},et=S=>{m.value=S,he.value="internal",oe.value=!0},Ee=S=>{m.value=S,he.value="external",oe.value=!0},kt=(S,q)=>{var fn,Dt;D.value=!0,Z.value=S,F.value=q.id,_.value=q.title,k.value=q.description,N.value=q.video;const ve=Xa(q.text),An=Qa("img",ve).map(Wt=>Ga(Wt,"src")).filter(Wt=>Wt!=null);E.value=[...(Dt=(fn=q.imageList)==null?void 0:fn.map(Wt=>Wt.url))!=null?Dt:[],...An],q.image&&E.value.push(q.image)},Vt=async S=>{await fl([S]),s(),Ut.success(t("success"))},Ke=S=>{K.value=S,J.value=!0},se=z(!1),h=z(),b=z({id:0,sticky:0,stickyDate:null}),Pe=(S,q,ve)=>{se.value=!0,b.value={id:S,sticky:q<1?1:q,stickyDate:ve}},He=async()=>{h.value.validate(async S=>{S&&(await qr([b.value.id],b.value.sticky,b.value.stickyDate),s(),se.value=!1,Ut.success(t("success")))})},mt=async S=>{await qr([S],0,void 0),s(),Ut.success(t("success"))};return(S,q)=>{const ve=j("el-button"),ht=j("el-tree"),An=j("el-scrollbar"),fn=j("el-aside"),Dt=j("el-option"),Wt=j("el-select"),Un=j("el-popconfirm"),St=j("el-radio-button"),oi=j("el-radio-group"),Ie=j("el-table-column"),Fn=j("el-icon"),zi=j("el-link"),Lt=j("el-tag"),qn=j("el-tooltip"),_t=j("el-dropdown-item"),Wi=j("el-dropdown-menu"),Hi=j("el-dropdown"),ce=j("el-table"),Ne=j("el-pagination"),qe=j("el-input-number"),G=j("el-form-item"),H=j("el-date-picker"),tt=j("el-form"),li=j("el-dialog"),ui=j("el-main"),ci=j("el-container"),jn=Aa("loading");return T(),M(ci,null,{default:d(()=>[p(fn,{width:"220px",class:"pr-3"},{default:d(()=>[p(An,{class:"p-2 bg-white rounded-sm"},{default:d(()=>[pe("div",Hm,[p(ve,{type:Y.value==null?"primary":void 0,link:"",onClick:q[0]||(q[0]=()=>{R.value.setCurrentKey(null),Y.value=void 0,ye()})},{default:d(()=>[O(I(S.$t("article.allChannel")),1)]),_:1},8,["type"])]),Ai(p(ht,{ref_key:"channelTree",ref:R,data:$.value,props:{label:"name"},"expand-on-click-node":!1,"node-key":"id","highlight-current":"",onNodeClick:q[1]||(q[1]=A=>{Y.value=A,ye()})},null,8,["data"]),[[jn,P.value]])]),_:1})]),_:1}),p(ui,{class:"p-0"},{default:d(()=>[pe("div",Ym,[p(C(ml),{params:n.value,onSearch:ye,onReset:Oe},{default:d(()=>[p(C(Ue),{label:S.$t("article.title"),name:"Q_Contains_@articleExt-title"},null,8,["label"]),p(C(Ue),{label:S.$t("article.text"),name:"Q_Contains_@articleExt-text"},null,8,["label"]),(T(!0),ke(Le,null,Qe(U.value.filter(A=>["imageUpload","videoUpload","audioUpload","fileUpload"].indexOf(A.type)===-1),A=>(T(),ke(Le,{key:A.code},[["number","slider"].indexOf(A.type)>=0?(T(),M(C(Ue),{key:0,label:A.name,name:"Q_GE_@articleExt-mainsJson$".concat(A.code,"_Int,Q_LE_@articleExt-mainsJson$").concat(A.code,"_Int"),type:"number"},null,8,["label","name"])):A.type==="date"&&A.dateType==="datetime"?(T(),M(C(Ue),{key:1,label:A.name,name:"Q_GE_@articleExt-mainsJson$".concat(A.code,"_DateTime,Q_LE_@articleExt-mainsJson$").concat(A.code,"_DateTime"),type:"datetime"},null,8,["label","name"])):A.type==="date"?(T(),M(C(Ue),{key:2,label:A.name,name:"Q_GE_@articleExt-mainsJson$".concat(A.code,"_Date,Q_LE_@articleExt-mainsJson$").concat(A.code,"_Date"),type:"date"},null,8,["label","name"])):A.type==="switch"?(T(),M(C(Ue),{key:3,label:A.name,name:"Q_EQ_@articleExt-mainsJson$".concat(A.code,"_Boolean"),options:[{label:S.$t("yes"),value:"true"},{label:S.$t("no"),value:"false"}],multiple:!1},null,8,["label","name","options"])):["radio","select"].indexOf(A.type)>=0?(T(),M(C(Ue),{key:4,label:A.name,name:"Q_In_@articleExt-mainsJson$".concat(A.code,"Key").concat(A.dataType==="number"?"_Int":""),options:L.value[A.dictTypeId]},null,8,["label","name","options"])):["checkbox","multipleSelect"].indexOf(A.type)>=0?(T(),M(C(Ue),{key:5,label:A.name,name:"Q_ArrayIn_@articleExt-mainsJson$".concat(A.code,"Key").concat(A.dataType==="number"?"_Int":""),options:L.value[A.dictTypeId]},null,8,["label","name","options"])):A.clob?(T(),M(C(Ue),{key:6,label:A.name,name:"Q_Contains_@articleExt-clobsJson$".concat(A.code)},null,8,["label","name"])):(T(),M(C(Ue),{key:7,label:A.name,name:"Q_Contains_@articleExt-mainsJson$".concat(A.code)},null,8,["label","name"]))],64))),128)),p(C(Ue),{label:S.$t("article.publishDate"),name:"Q_GE_publishDate_DateTime,Q_LE_publishDate_DateTime",type:"datetime"},null,8,["label"]),p(C(Ue),{label:S.$t("article.block"),name:"Q_In_@BlockItem-blockId_Long",options:ie.value.filter(A=>A.recommendable).map(A=>({label:A.name,value:A.id}))},null,8,["label","options"]),p(C(Ue),{label:S.$t("article.org"),name:"Q_Like_org-name"},null,8,["label"]),p(C(Ue),{label:S.$t("article.user"),name:"Q_Like_user-username"},null,8,["label"]),p(C(Ue),{label:S.$t("article.created"),name:"Q_GE_created_DateTime,Q_LE_created_DateTime",type:"datetime"},null,8,["label"]),p(C(Ue),{label:S.$t("article.modifiedUser"),name:"Q_Like_modifiedUser@user-username"},null,8,["label"]),p(C(Ue),{label:S.$t("article.modified"),name:"Q_GE_modified_DateTime,Q_LE_modified_DateTime",type:"datetime"},null,8,["label"]),p(C(Ue),{label:S.$t("article.author"),name:"Q_Contains_@articleExt-author"},null,8,["label"]),p(C(Ue),{label:S.$t("article.editor"),name:"Q_Contains_@articleExt-editor"},null,8,["label"]),p(C(Ue),{label:S.$t("article.source"),name:"Q_Contains_@articleExt-source"},null,8,["label"]),p(C(Ue),{label:S.$t("article.subtitle"),name:"Q_Contains_@articleExt-subtitle"},null,8,["label"]),p(C(Ue),{label:S.$t("article.fullTitle"),name:"Q_Contains_@articleExt-fullTitle"},null,8,["label"]),p(C(Ue),{label:S.$t("article.seoKeywords"),name:"Q_Contains_@articleExt-seoKeywords"},null,8,["label"]),p(C(Ue),{label:S.$t("article.seoDescription"),name:"Q_Contains_@articleExt-seoDescription"},null,8,["label"])]),_:1},8,["params"])]),pe("div",null,[p(ve,{type:"primary",disabled:C(Re)("article:create"),icon:C(Da),onClick:q[2]||(q[2]=()=>ot())},{default:d(()=>[O(I(S.$t("add")),1)]),_:1},8,["disabled","icon"]),p(Wt,{modelValue:me.value,"onUpdate:modelValue":q[3]||(q[3]=A=>me.value=A),class:"w-64 ml-2"},{prefix:d(()=>[O(I(S.$t("batchAction")+":"),1)]),default:d(()=>[(T(),ke(Le,null,Qe(ge,A=>p(Dt,{key:A,disabled:C(Re)("article:".concat(A)),value:A,label:S.$t("article.op.".concat(A))},null,8,["disabled","value","label"])),64))]),_:1},8,["modelValue"]),p(Un,{title:S.$t("confirmExecute"),onConfirm:q[4]||(q[4]=()=>f(me.value,Te.value))},{reference:d(()=>[p(ve,{disabled:Te.value.length<=0||C(Re)("article:".concat(me.value)),icon:C(Do)},{default:d(()=>[O(I(S.$t("execute")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),p(C(hl),{name:"article",class:"ml-2"})]),p(oi,{modelValue:Ze.value,"onUpdate:modelValue":q[5]||(q[5]=A=>Ze.value=A),class:"mt-3",onChange:q[6]||(q[6]=()=>s())},{default:d(()=>[p(St,{value:-1},{default:d(()=>[O(I(S.$t("all")),1)]),_:1}),p(St,{value:0},{default:d(()=>[O(I(S.$t("article.status.0")),1)]),_:1}),p(St,{value:1},{default:d(()=>[O(I(S.$t("article.status.1")),1)]),_:1}),p(St,{value:5},{default:d(()=>[O(I(S.$t("article.status.5")),1)]),_:1}),p(St,{value:10},{default:d(()=>[O(I(S.$t("article.status.10")),1)]),_:1}),p(St,{value:11},{default:d(()=>[O(I(S.$t("article.status.11")),1)]),_:1}),p(St,{value:12},{default:d(()=>[O(I(S.$t("article.status.12")),1)]),_:1}),p(St,{value:20},{default:d(()=>[O(I(S.$t("article.status.20")),1)]),_:1}),p(St,{value:21},{default:d(()=>[O(I(S.$t("article.status.21")),1)]),_:1}),p(St,{value:22},{default:d(()=>[O(I(S.$t("article.status.22")),1)]),_:1})]),_:1},8,["modelValue"]),pe("div",Km,[Ai((T(),M(ce,{id:"dataTable",ref_key:"table",ref:u,"row-key":"id",data:c.value,onSelectionChange:q[7]||(q[7]=A=>y.value=A),onRowDblclick:q[8]||(q[8]=A=>Ce(A.id)),onSortChange:re},{default:d(()=>[p(C(yl),{name:"article"},{default:d(()=>[p(Ie,{type:"selection",selectable:te,width:"38"}),p(Ie,{width:"42"},{default:d(()=>[p(Fn,{class:Yn(["text-lg align-middle",X.value||C(Re)("article:updateOrder")?["cursor-not-allowed","text-gray-disabled"]:["cursor-move","text-gray-secondary","drag-handle"]]),disalbed:""},{default:d(()=>[p(C(Io))]),_:1},8,["class"])]),_:1}),p(Ie,{property:"id",label:"ID",width:"170",sortable:"custom"}),p(Ie,{property:"title",label:S.$t("article.title"),"min-width":"280","sort-by":"@articleExt-title",sortable:"custom"},{default:d(({row:A})=>[p(zi,{href:"javascript:",underline:!1,onClick:()=>C(oo)(A.status,A.url,A.dynamicUrl)},{default:d(()=>[O(I(A.title),1)]),_:2},1032,["onClick"]),(T(!0),ke(Le,null,Qe(A.blockItemList,Ve=>(T(),M(Lt,{key:Ve.id,type:Ve.enabled?void 0:"info",size:"small",class:"ml-1",closable:C(No)("blockItem:delete"),onClose:()=>Vt(Ve.id)},{default:d(()=>[O(I(Ve.block.name),1)]),_:2},1032,["type","closable","onClose"]))),128)),A.sticky>0?(T(),M(qn,{key:0,placement:"top"},{content:d(()=>[O(I(S.$t("article.sticky"))+" ",1),A.stickyDate!=null?(T(),ke("span",Gm,I(C(vt)(A.stickyDate).format(" YYYY-MM-DD HH:mm:ss")),1)):ne("",!0)]),default:d(()=>[p(Lt,{type:"danger",class:"mx-1",effect:"light",size:"small",round:"",closable:!C(Re)("article:sticky"),onClose:()=>mt(A.id)},{default:d(()=>[O(I(A.sticky),1)]),_:2},1032,["closable","onClose"])]),_:2},1024)):ne("",!0),A.srcId!=null?(T(),M(qn,{key:1,placement:"top"},{content:d(()=>[O(I(C(t)("article.type.".concat(A.type)))+": ",1),A.siteId!==A.src.siteId?(T(),ke("span",Qm,"["+I(A.src.site.name)+"]",1)):ne("",!0),O(" "+I(A.src.channel.paths.map(Ve=>Ve.name).join(" / ")),1)]),default:d(()=>[p(Fn,{class:"ml-1 align-middle"},{default:d(()=>[p(C(Po))]),_:1})]),_:2},1024)):ne("",!0)]),_:1},8,["label"]),(T(!0),ke(Le,null,Qe(U.value.filter(A=>["text","textarea","number","date","color","slider","switch","radio","checkbox","select","multipleSelect"].includes(A.type)),A=>(T(),M(Ie,{key:A.code,property:"customs.".concat(A.code),label:A.name,"sort-by":"mainsJson$".concat(A.code).concat(A.dataType==="number"?"_Int":""),sortable:["checkbox","multipleSelect"].indexOf(A.type)===-1?"custom":void 0,display:A.showInList?void 0:"none","show-overflow-tooltip":""},{default:d(({row:Ve})=>[A.type==="date"&&A.dateType==="date"?(T(),ke(Le,{key:0},[O(I(C(vt)(Ve.customs[A.code]).format("YYYY-MM-DD")),1)],64)):A.type==="date"&&A.dateType==="datetime"?(T(),ke(Le,{key:1},[O(I(C(vt)(Ve.customs[A.code]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):A.type==="switch"?(T(),M(Lt,{key:2,type:Ve.customs[A.code]?"success":"info",size:"small"},{default:d(()=>[O(I(S.$t(Ve.customs[A.code]?"yes":"no")),1)]),_:2},1032,["type"])):ne("",!0)]),_:2},1032,["property","label","sort-by","sortable","display"]))),128)),p(Ie,{property:"channel.name",label:S.$t("article.channel"),"sort-by":"channel-name",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:A})=>[pe("span",{title:A.channel.paths.map(Ve=>Ve.name).join(" / ")},I(A.channel.name),9,Xm)]),_:1},8,["label"]),p(Ie,{property:"org.name",label:S.$t("article.org"),"sort-by":"org-name",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"author",label:S.$t("article.author"),"sort-by":"@articleExt-author",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"editor",label:S.$t("article.editor"),"sort-by":"@articleExt-editor",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"source",label:S.$t("article.source"),"sort-by":"@articleExt-source",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"user.username",label:S.$t("article.user"),"sort-by":"user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"created",label:S.$t("article.created"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:A})=>[O(I(C(vt)(A.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ie,{property:"modifiedUser.username",label:S.$t("article.modifiedUser"),"sort-by":"modifiedUser@user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"modified",label:S.$t("article.modified"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:A})=>[O(I(C(vt)(A.modified).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ie,{property:"publishDate",label:S.$t("article.publishDate"),"min-width":"120",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:A})=>[O(I(C(vt)(A.publishDate).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ie,{property:"views",label:S.$t("article.views"),"sort-by":"@articleExt-views",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"dayViews",label:S.$t("article.dayViews"),"sort-by":"@articleExt-dayViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"weekViews",label:S.$t("article.weekViews"),"sort-by":"@articleExt-weekViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"monthViews",label:S.$t("article.monthViews"),"sort-by":"@articleExt-monthViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"quarterViews",label:S.$t("article.quarterViews"),"sort-by":"@articleExt-quarterViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"yearViews",label:S.$t("article.yearViews"),"sort-by":"@articleExt-yearViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ie,{property:"status",label:S.$t("article.status"),sortable:"custom","show-overflow-tooltip":""},{default:d(({row:A})=>[A.status===0?(T(),M(Lt,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(S.$t("article.status.".concat(A.status))),1)]),_:2},1024)):A.status===1?(T(),M(Lt,{key:1,size:"small"},{default:d(()=>[O(I(S.$t("article.status.".concat(A.status))),1)]),_:2},1024)):A.status===20||A.status===21?(T(),M(Lt,{key:2,type:"warning",size:"small"},{default:d(()=>[O(I(S.$t("article.status.".concat(A.status))),1)]),_:2},1024)):A.status===22?(T(),M(qn,{key:3,content:A.rejectReason,placement:"top"},{default:d(()=>[p(Lt,{type:"danger",size:"small"},{default:d(()=>[O(I(S.$t("article.status.".concat(A.status))),1)]),_:2},1024)]),_:2},1032,["content"])):(T(),M(Lt,{key:4,type:"info",size:"small"},{default:d(()=>[O(I(S.$t("article.status.".concat(A.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(Ie,{label:S.$t("table.action"),width:"260"},{default:d(({row:A})=>[p(ve,{type:"primary",disabled:C(Re)("article:update"),size:"small",link:"",onClick:()=>Ce(A.id)},{default:d(()=>[O(I(S.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),C(Fe).epRank>0||C(Fe).epDisplay?(T(),M(ve,{key:0,type:"primary",disabled:!A.processInstanceId||C(Re)("processInstance:task")||C(Fe).epRank<1,size:"small",link:"",onClick:()=>Ke(A.processInstanceId)},{default:d(()=>[O(I(S.$t("processInstance.op.task")),1)]),_:2},1032,["disabled","onClick"])):ne("",!0),p(Un,{title:S.$t("confirmDelete"),onConfirm:()=>f("delete",[A.id])},{reference:d(()=>[p(ve,{type:"primary",disabled:C(Re)("article:delete")||[20].includes(A.status),size:"small",link:""},{default:d(()=>[O(I(S.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"]),p(Un,{title:S.$t("confirmCompletelyDelete"),onConfirm:()=>f("completelyDelete",[A.id])},{reference:d(()=>[p(ve,{type:"primary",disabled:C(Re)("article:completelyDelete"),size:"small",link:""},{default:d(()=>[O(I(S.$t("completelyDelete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"]),p(Hi,{class:"ml-2 align-middle"},{dropdown:d(()=>[pe("div",null,[p(Wi,null,{default:d(()=>[p(_t,{disabled:C(Re)("article:submit")||[0,12].includes(A.status),onClick:()=>f("submit",[A.id])},{default:d(()=>[pe("span",Zm,I(S.$t("article.op.submit")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:C(Re)("article:archive")||![0].includes(A.status),onClick:()=>f("archive",[A.id])},{default:d(()=>[pe("span",Jm,I(S.$t("article.op.archive")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:C(Re)("article:offline")||![0,1,5,11,12].includes(A.status),onClick:()=>f("offline",[A.id])},{default:d(()=>[pe("span",eh,I(S.$t("article.op.offline")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:C(Re)("article:create"),divided:"",onClick:()=>Je(A.id)},{default:d(()=>[pe("span",th,I(S.$t("copy")),1)]),_:2},1032,["disabled","onClick"]),C(Fe).epRank>=2||C(Fe).epDisplay?(T(),M(_t,{key:0,disabled:C(Re)("article:internalPush")||A.status!==0||A.srcId!=null||C(Fe).epRank<2,title:C(Fe).epRank<2?S.$t("error.enterprise.short"):void 0,onClick:()=>et(A.id)},{default:d(()=>[pe("span",nh,I(S.$t("article.op.internalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ne("",!0),C(Fe).epRank>=3||C(Fe).epDisplay?(T(),M(_t,{key:1,disabled:C(Re)("article:externalPush")||A.status!==0||A.srcId!=null||C(Fe).epRank<3,title:C(Fe).epRank<3?S.$t("error.enterprise.short"):void 0,onClick:()=>Ee(A.id)},{default:d(()=>[pe("span",ih,I(S.$t("article.op.externalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ne("",!0),p(_t,{disabled:C(Re)("article:sticky"),divided:"",onClick:()=>Pe(A.id,A.sticky,A.stickyDate)},{default:d(()=>[pe("span",rh,I(S.$t("article.op.sticky")),1)]),_:2},1032,["disabled","onClick"]),(T(!0),ke(Le,null,Qe(ie.value.filter(Ve=>Ve.enabled&&Ve.recommendable),(Ve,fe)=>(T(),M(_t,{key:Ve.id,disabled:C(Re)("blockItem:create")||A.blocks.findIndex(nt=>nt.id===Ve.id)>=0,divided:fe===0,onClick:()=>kt(Ve.id,A)},{default:d(()=>[pe("span",ah,I("".concat(S.$t("article.op.recommendTo"),": ").concat(Ve.name)),1)]),_:2},1032,["disabled","divided","onClick"]))),128))]),_:2},1024)])]),default:d(()=>[p(ve,{type:"primary",size:"small",link:""},{default:d(()=>[p(Fn,{class:"text-primary"},{default:d(()=>[p(C(Mo))]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[jn,g.value]]),p(Ne,{"current-page":r.value,"onUpdate:currentPage":q[9]||(q[9]=A=>r.value=A),pageSize:a.value,"onUpdate:pageSize":q[10]||(q[10]=A=>a.value=A),total:o.value,"page-sizes":C(Vo),layout:C($o),small:"",background:"",class:"justify-end px-3 py-2",onSizeChange:q[11]||(q[11]=()=>s()),onCurrentChange:q[12]||(q[12]=()=>s())},null,8,["current-page","pageSize","total","page-sizes","layout"])]),p(jm,{modelValue:x.value,"onUpdate:modelValue":q[13]||(q[13]=A=>x.value=A),action:Q.value,"bean-id":m.value,"bean-ids":V.value,channel:Y.value,onFinished:s},null,8,["modelValue","action","bean-id","bean-ids","channel"]),p(Wm,{modelValue:oe.value,"onUpdate:modelValue":q[14]||(q[14]=A=>oe.value=A),"bean-id":m.value,type:he.value,onFinished:s},null,8,["modelValue","bean-id","type"]),p(Ml,{modelValue:D.value,"onUpdate:modelValue":q[15]||(q[15]=A=>D.value=A),"bean-id":void 0,"bean-ids":[],"block-id":Z.value,"article-id":F.value,title:_.value,description:k.value,video:N.value,images:E.value,onFinished:s},null,8,["modelValue","block-id","article-id","title","description","video","images"]),p(vm,{modelValue:J.value,"onUpdate:modelValue":q[16]||(q[16]=A=>J.value=A),"instance-id":K.value},null,8,["modelValue","instance-id"]),p(li,{modelValue:se.value,"onUpdate:modelValue":q[20]||(q[20]=A=>se.value=A),title:S.$t("article.sticky"),width:768},{default:d(()=>[p(tt,{ref_key:"stickyForm",ref:h,model:b.value,"label-width":"150px"},{default:d(()=>[p(G,{prop:"sticky"},{label:d(()=>[p(it,{message:"article.sticky",help:""})]),default:d(()=>[p(qe,{modelValue:b.value.sticky,"onUpdate:modelValue":q[17]||(q[17]=A=>b.value.sticky=A),min:0,max:999},null,8,["modelValue"])]),_:1}),p(G,{prop:"stickyDate",rules:{validator:(A,Ve,fe)=>{if(Ve!=null&&Date.now()>new Date(Ve).getTime()){fe(S.$t("article.error.stickyDate.beforeCurrent"));return}fe()}}},{label:d(()=>[p(it,{message:"article.stickyDate",help:""})]),default:d(()=>[p(H,{modelValue:b.value.stickyDate,"onUpdate:modelValue":q[18]||(q[18]=A=>b.value.stickyDate=A),type:"datetime"},null,8,["modelValue"])]),_:1},8,["rules"]),p(ve,{type:"primary",onClick:q[19]||(q[19]=()=>He())},{default:d(()=>[O(I(S.$t("submit")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1})}}});export{Ch as default};
