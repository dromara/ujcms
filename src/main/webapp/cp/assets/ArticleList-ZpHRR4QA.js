import{ab as zo,ac as Ha,ad as ar,ae as mr,af as Ai,ag as Wo,ah as Ho,ai as Yo,aj as Ko,ak as na,al as Go,d as _t,am as Qo,an as Xo,ao as Zo,ap as Jo,r as q,aq as el,ar as Ze,as as tl,at as sr,au as nl,av as il,aw as Ya,o as Rr,b as T,c as $,w as d,l as ce,k as E,ax as ia,ay as Ht,h as p,j as Gt,az as rl,aA as Ln,n as an,aB as al,aC as Pn,aD as Ka,P as we,a3 as Fi,aE as sl,aF as Ve,aG as Ge,v as F,x as N,aH as Dr,aI as ol,aJ as ll,aK as Ga,aL as ul,aM as jn,A as ri,X as yt,B as Nt,aN as cl,e as Pi,aO as qi,g as ie,y as Qa,aP as Ir,aQ as Nr,z as Qt,aR as wn,_ as Pr,u as ai,a as Mr,aS as Xa,aT as Za,aU as Ja,aV as es,aW as ts,aX as dl,aY as ns,aZ as is,t as Ot,a_ as rs,a7 as pl,a$ as as,b0 as fl,b1 as ml,E as kn,i as pn,m as fn,b2 as hl,b3 as rt,b4 as yl,$ as Ue,b5 as Re,a6 as vl,a2 as gl,b6 as bl,b7 as ra,f as _l,b8 as wl,b9 as El,ba as xl,U as vi,bb as aa,bc as Sl,bd as kl,be as Al,bf as Tl,bg as Cl,bh as Rl,I as Dl,bi as Il,bj as Nl,bk as Pl,a5 as Ml,Z as $l,bl as Vl,bm as Ll,bn as Bl,bo as Ol,bp as Ul,bq as Fl,br as ql,bs as jl}from"./index-h6ykREjd.js";import{E as zl,a as Wl,b as Hl}from"./el-main-DEjj2E2n.js";import{E as ji,a as zi,b as ss,c as Yl}from"./el-select-CII8MHjy.js";import{E as os}from"./el-pagination-ADum4o6Q.js";import{E as Wi,a as ls,b as us}from"./el-radio-group-BVgMsQLX.js";/* empty css                        */import{E as cs}from"./el-popover-he2n_K5B.js";import{E as ds}from"./el-tree-BuW5ayCL.js";import{S as Kl}from"./sortable.esm-DEaZq8gs.js";import{E as Gl,x as Ql,h as Xl,D as or,f as sa,T as Zl}from"./TuiEditor-Bq3RZZ8r.js";import{t as ni,d as Jl,a as oa,b as eu}from"./tree-CFBn_SXc.js";import{i as tu,f as nu,q as ps,a as iu}from"./config-BwuLlFzA.js";import{d as $r,e as ru,f as au,g as la,h as su,i as ou,j as lu,k as uu,l as cu,r as du,s as fs,m as ms,u as pu,n as fu,o as hs,p as mu,t as hu,v as yu,w as vu,x as ys,y as vs,z as gs,A as gu,B as bu,C as _u,D as wu,E as Eu,F as xu,G as ua}from"./content-Dtgk8549.js";import{E as Su,_ as ku,a as Oe,b as Au,c as Tu}from"./QueryItem.vue_vue_type_script_setup_true_lang-CpEKmCQd.js";import{d as Cu}from"./duration-C6D-XFnw.js";import{q as Ru,a as Du,b as Iu,v as Nu,c as Pu,d as Mu}from"./system-BaWoGgC8.js";import{E as bs}from"./el-tree-select-mQAvzYPZ.js";/* empty css                 */import{q as $u,a as Vu,b as Lu,c as Bu}from"./user-CfxZpJNa.js";import{a as ca,m as da,g as pa}from"./data-CAVvZfPJ.js";import{_ as fa}from"./FieldItem.vue_vue_type_script_setup_true_lang-D3n1RMWA.js";import{_ as Ou}from"./DialogForm.vue_vue_type_script_setup_true_lang-VkF4P4E5.js";import{T as Uu}from"./Tinymce-D8ijbXHj.js";import{I as Fu,a as qu}from"./FileListUpload.vue_vue_type_style_index_0_scoped_b3a09e2e_lang--Da7uW5h.js";import{E as _s}from"./BaseUpload.vue_vue_type_style_index_0_scoped_248c0508_lang-9MAfZCLz.js";import{d as ju}from"./vuedraggable.umd-CvoTJp6c.js";import{B as Xn}from"./BaseUpload-Bi5ifoxP.js";import{_ as zu,a as Wu}from"./BlockItemForm.vue_vue_type_script_setup_true_lang-BHavs6bb.js";import{E as Hu}from"./el-switch-0dv2QGD4.js";import"./index-Vcq4gwWv.js";/* empty css                          */import"./position-Dk1gZ-XI.js";const Yu=Wo({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:na(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:na([Function,Array]),default:Ko},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Yo.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Ho(["ariaLabel"])}),Ku={[Ai]:e=>ar(e),[mr]:e=>ar(e),[Ha]:e=>ar(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>zo(e)},ws="ElAutocomplete",Gu=_t({name:ws,inheritAttrs:!1}),Qu=_t({...Gu,props:Yu,emits:Ku,setup(e,{expose:t,emit:n}){const i=e,r=Qo(),a=Xo(),o=Zo(),u=Jo("autocomplete"),c=q(),v=q(),g=q(),x=q();let m=!1,V=!1;const K=q([]),z=q(-1),te=q(""),D=q(!1),X=q(!1),L=q(!1),b=el(),k=Ze(()=>a.style),I=Ze(()=>(K.value.length>0||L.value)&&D.value),S=Ze(()=>!i.hideLoading&&L.value),R=Ze(()=>c.value?Array.from(c.value.$el.querySelectorAll("input")):[]),M=()=>{I.value&&(te.value="".concat(c.value.$el.offsetWidth,"px"))},P=()=>{z.value=-1},H=async s=>{if(X.value)return;const l=y=>{L.value=!1,!X.value&&(sr(y)?(K.value=y,z.value=i.highlightFirstItem?0:-1):nl(ws,"autocomplete suggestions must be an array"))};if(L.value=!0,sr(i.fetchSuggestions))l(i.fetchSuggestions);else{const y=await i.fetchSuggestions(s,l);sr(y)&&l(y)}},G=tl(H,i.debounce),Z=s=>{const l=!!s;if(n(mr,s),n(Ai,s),X.value=!1,D.value||(D.value=l),!i.triggerOnFocus&&!s){X.value=!0,K.value=[];return}G(s)},he=s=>{var l;o.value||(((l=s.target)==null?void 0:l.tagName)!=="INPUT"||R.value.includes(document.activeElement))&&(D.value=!0)},pe=s=>{n(Ha,s)},se=s=>{V?V=!1:(D.value=!0,n("focus",s),i.triggerOnFocus&&!m&&G(String(i.modelValue)))},me=s=>{setTimeout(()=>{var l;if((l=g.value)!=null&&l.isFocusInsideContent()){V=!0;return}D.value&&je(),n("blur",s)})},at=()=>{D.value=!1,n(Ai,""),n("clear")},He=async()=>{I.value&&z.value>=0&&z.value<K.value.length?J(K.value[z.value]):i.selectWhenUnmatched&&(n("select",{value:i.modelValue}),K.value=[],z.value=-1)},Ie=s=>{I.value&&(s.preventDefault(),s.stopPropagation(),je())},je=()=>{D.value=!1},U=()=>{var s;(s=c.value)==null||s.focus()},O=()=>{var s;(s=c.value)==null||s.blur()},J=async s=>{n(mr,s[i.valueKey]),n(Ai,s[i.valueKey]),n("select",s),K.value=[],z.value=-1},ke=s=>{if(!I.value||L.value)return;if(s<0){z.value=-1;return}s>=K.value.length&&(s=K.value.length-1);const l=v.value.querySelector(".".concat(u.be("suggestion","wrap"))),_=l.querySelectorAll(".".concat(u.be("suggestion","list")," li"))[s],B=l.scrollTop,{offsetTop:re,scrollHeight:ne}=_;re+ne>B+l.clientHeight&&(l.scrollTop+=ne),re<B&&(l.scrollTop-=ne),z.value=s,c.value.ref.setAttribute("aria-activedescendant","".concat(b.value,"-item-").concat(z.value))},f=il(x,()=>{I.value&&je()});return Ya(()=>{f==null||f()}),Rr(()=>{c.value.ref.setAttribute("role","textbox"),c.value.ref.setAttribute("aria-autocomplete","list"),c.value.ref.setAttribute("aria-controls","id"),c.value.ref.setAttribute("aria-activedescendant","".concat(b.value,"-item-").concat(z.value)),m=c.value.ref.hasAttribute("readonly")}),t({highlightedIndex:z,activated:D,loading:L,inputRef:c,popperRef:g,suggestions:K,handleSelect:J,handleKeyEnter:He,focus:U,blur:O,close:je,highlight:ke,getData:H}),(s,l)=>(T(),$(E(Dr),{ref_key:"popperRef",ref:g,visible:E(I),placement:s.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[E(u).e("popper"),s.popperClass],teleported:s.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:"".concat(E(u).namespace.value,"-zoom-in-top"),persistent:"",role:"listbox",onBeforeShow:M,onHide:P},{content:d(()=>[ce("div",{ref_key:"regionRef",ref:v,class:Ht([E(u).b("suggestion"),E(u).is("loading",E(S))]),style:ia({[s.fitInputWidth?"width":"minWidth"]:te.value,outline:"none"}),role:"region"},[p(E(Ka),{id:E(b),tag:"ul","wrap-class":E(u).be("suggestion","wrap"),"view-class":E(u).be("suggestion","list"),role:"listbox"},{default:d(()=>[E(S)?(T(),we("li",{key:0},[Pn(s.$slots,"loading",{},()=>[p(E(Fi),{class:Ht(E(u).is("loading"))},{default:d(()=>[p(E(sl))]),_:1},8,["class"])])])):(T(!0),we(Ve,{key:1},Ge(K.value,(y,_)=>(T(),we("li",{id:"".concat(E(b),"-item-").concat(_),key:_,class:Ht({highlighted:z.value===_}),role:"option","aria-selected":z.value===_,onClick:B=>J(y)},[Pn(s.$slots,"default",{item:y},()=>[F(N(y[s.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:d(()=>[ce("div",{ref_key:"listboxRef",ref:x,class:Ht([E(u).b(),s.$attrs.class]),style:ia(E(k)),role:"combobox","aria-haspopup":"listbox","aria-expanded":E(I),"aria-owns":E(b)},[p(E(Gt),rl({ref_key:"inputRef",ref:c},E(r),{clearable:s.clearable,disabled:E(o),name:s.name,"model-value":s.modelValue,"aria-label":s.ariaLabel,onInput:Z,onChange:pe,onFocus:se,onBlur:me,onClear:at,onKeydown:[Ln(an(y=>ke(z.value-1),["prevent"]),["up"]),Ln(an(y=>ke(z.value+1),["prevent"]),["down"]),Ln(He,["enter"]),Ln(je,["tab"]),Ln(Ie,["esc"])],onMousedown:he}),al({_:2},[s.$slots.prepend?{name:"prepend",fn:d(()=>[Pn(s.$slots,"prepend")])}:void 0,s.$slots.append?{name:"append",fn:d(()=>[Pn(s.$slots,"append")])}:void 0,s.$slots.prefix?{name:"prefix",fn:d(()=>[Pn(s.$slots,"prefix")])}:void 0,s.$slots.suffix?{name:"suffix",fn:d(()=>[Pn(s.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Xu=Go(Qu,[["__file","autocomplete.vue"]]);const Zu=ol(Xu);var ge;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(ge||(ge={}));var W;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(W||(W={}));function Wt(e){return e===ge.Space||e===ge.NewLine||e===ge.Tab||e===ge.FormFeed||e===ge.CarriageReturn}function gi(e){return e===ge.Slash||e===ge.Gt||Wt(e)}function Ju(e){return e>=ge.LowerA&&e<=ge.LowerZ||e>=ge.UpperA&&e<=ge.UpperZ}var Ut;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(Ut||(Ut={}));const st={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class ec{constructor({xmlMode:t=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=W.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=n,this.entityDecoder=new Gl(t?Ql:Xl,(r,a)=>this.emitCodePoint(r,a))}reset(){this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=W.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===ge.Lt||!this.decodeEntities&&this.fastForwardTo(ge.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=W.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===ge.Amp&&this.startEntity()}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?gi(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=W.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===ge.Gt||Wt(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===st.TitleEnd?this.decodeEntities&&t===ge.Amp&&this.startEntity():this.fastForwardTo(ge.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===ge.Lt)}stateCDATASequence(t){t===st.Cdata[this.sequenceIndex]?++this.sequenceIndex===st.Cdata.length&&(this.state=W.InCommentLike,this.currentSequence=st.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=W.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===st.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=W.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!gi(t):Ju(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=W.SpecialStartSequence}stateBeforeTagName(t){if(t===ge.ExclamationMark)this.state=W.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===ge.Questionmark)this.state=W.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,this.xmlMode?this.state=W.InTagName:n===st.ScriptEnd[2]?this.state=W.BeforeSpecialS:n===st.TitleEnd[2]?this.state=W.BeforeSpecialT:this.state=W.InTagName}else t===ge.Slash?this.state=W.BeforeClosingTagName:(this.state=W.Text,this.stateText(t))}stateInTagName(t){gi(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){Wt(t)||(t===ge.Gt?this.state=W.Text:(this.state=this.isTagStartChar(t)?W.InClosingTagName:W.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===ge.Gt||Wt(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===ge.Gt||this.fastForwardTo(ge.Gt))&&(this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===ge.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=W.InSpecialTag,this.sequenceIndex=0):this.state=W.Text,this.sectionStart=this.index+1):t===ge.Slash?this.state=W.InSelfClosingTag:Wt(t)||(this.state=W.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===ge.Gt?(this.cbs.onselfclosingtag(this.index),this.state=W.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Wt(t)||(this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===ge.Eq||gi(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=W.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===ge.Eq?this.state=W.BeforeAttributeValue:t===ge.Slash||t===ge.Gt?(this.cbs.onattribend(Ut.NoValue,this.sectionStart),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):Wt(t)||(this.cbs.onattribend(Ut.NoValue,this.sectionStart),this.state=W.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===ge.DoubleQuote?(this.state=W.InAttributeValueDq,this.sectionStart=this.index+1):t===ge.SingleQuote?(this.state=W.InAttributeValueSq,this.sectionStart=this.index+1):Wt(t)||(this.sectionStart=this.index,this.state=W.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ge.DoubleQuote?Ut.Double:Ut.Single,this.index+1),this.state=W.BeforeAttributeName):this.decodeEntities&&t===ge.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,ge.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,ge.SingleQuote)}stateInAttributeValueNoQuotes(t){Wt(t)||t===ge.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Ut.Unquoted,this.index),this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===ge.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===ge.OpeningSquareBracket?(this.state=W.CDATASequence,this.sequenceIndex=0):this.state=t===ge.Dash?W.BeforeComment:W.InDeclaration}stateInDeclaration(t){(t===ge.Gt||this.fastForwardTo(ge.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===ge.Gt||this.fastForwardTo(ge.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===ge.Dash?(this.state=W.InCommentLike,this.currentSequence=st.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=W.InDeclaration}stateInSpecialComment(t){(t===ge.Gt||this.fastForwardTo(ge.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===st.ScriptEnd[3]?this.startSpecial(st.ScriptEnd,4):n===st.StyleEnd[3]?this.startSpecial(st.StyleEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){const n=t|32;n===st.TitleEnd[3]?this.startSpecial(st.TitleEnd,4):n===st.TextareaEnd[3]?this.startSpecial(st.TextareaEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}startEntity(){this.baseState=this.state,this.state=W.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?or.Strict:this.baseState===W.Text||this.baseState===W.InSpecialTag?or.Legacy:or.Attribute)}stateInEntity(){const t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===W.Text||this.state===W.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===W.InAttributeValueDq||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case W.Text:{this.stateText(t);break}case W.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case W.InSpecialTag:{this.stateInSpecialTag(t);break}case W.CDATASequence:{this.stateCDATASequence(t);break}case W.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case W.InAttributeName:{this.stateInAttributeName(t);break}case W.InCommentLike:{this.stateInCommentLike(t);break}case W.InSpecialComment:{this.stateInSpecialComment(t);break}case W.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case W.InTagName:{this.stateInTagName(t);break}case W.InClosingTagName:{this.stateInClosingTagName(t);break}case W.BeforeTagName:{this.stateBeforeTagName(t);break}case W.AfterAttributeName:{this.stateAfterAttributeName(t);break}case W.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case W.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case W.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case W.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case W.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case W.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case W.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case W.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case W.InDeclaration:{this.stateInDeclaration(t);break}case W.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case W.BeforeComment:{this.stateBeforeComment(t);break}case W.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case W.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===W.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===W.InCommentLike?this.currentSequence===st.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===W.InTagName||this.state===W.BeforeAttributeName||this.state===W.BeforeAttributeValue||this.state===W.AfterAttributeName||this.state===W.InAttributeName||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueDq||this.state===W.InAttributeValueNq||this.state===W.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){this.baseState!==W.Text&&this.baseState!==W.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}}const Mn=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Me=new Set(["p"]),ma=new Set(["thead","tbody"]),ha=new Set(["dd","dt"]),ya=new Set(["rt","rp"]),tc=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Me],["h1",Me],["h2",Me],["h3",Me],["h4",Me],["h5",Me],["h6",Me],["select",Mn],["input",Mn],["output",Mn],["button",Mn],["datalist",Mn],["textarea",Mn],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ha],["dt",ha],["address",Me],["article",Me],["aside",Me],["blockquote",Me],["details",Me],["div",Me],["dl",Me],["fieldset",Me],["figcaption",Me],["figure",Me],["footer",Me],["form",Me],["header",Me],["hr",Me],["main",Me],["nav",Me],["ol",Me],["pre",Me],["section",Me],["table",Me],["ul",Me],["rt",ya],["rp",ya],["tbody",ma],["tfoot",ma]]),nc=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),va=new Set(["math","svg"]),ga=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),ic=/\s|\//;let rc=class{constructor(t,n={}){var i,r,a,o,u,c;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:this.htmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:this.htmlMode,this.recognizeSelfClosing=(a=n.recognizeSelfClosing)!==null&&a!==void 0?a:!this.htmlMode,this.tokenizer=new((o=n.Tokenizer)!==null&&o!==void 0?o:ec)(this.options,this),this.foreignContext=[!this.htmlMode],(c=(u=this.cbs).onparserinit)===null||c===void 0||c.call(u,this)}ontext(t,n){var i,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n}ontextentity(t,n){var i,r;this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,sa(t)),this.startIndex=n}isVoidElement(t){return this.htmlMode&&nc.has(t)}onopentagname(t,n){this.endIndex=n;let i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;const o=this.htmlMode&&tc.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){const u=this.stack.shift();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,u,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(va.has(t)?this.foreignContext.unshift(!0):ga.has(t)&&this.foreignContext.unshift(!1))),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var i,r,a,o,u,c,v,g;this.endIndex=n;let x=this.getSlice(t,n);if(this.lowerCaseTagNames&&(x=x.toLowerCase()),this.htmlMode&&(va.has(x)||ga.has(x))&&this.foreignContext.shift(),this.isVoidElement(x))this.htmlMode&&x==="br"&&((o=(a=this.cbs).onopentagname)===null||o===void 0||o.call(a,"br"),(c=(u=this.cbs).onopentag)===null||c===void 0||c.call(u,"br",{},!0),(g=(v=this.cbs).onclosetag)===null||g===void 0||g.call(v,"br",!1));else{const m=this.stack.indexOf(x);if(m!==-1)for(let V=0;V<=m;V++){const K=this.stack.shift();(r=(i=this.cbs).onclosetag)===null||r===void 0||r.call(i,K,V!==m)}else this.htmlMode&&x==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,i;const r=this.tagname;this.endOpenTag(t),this.stack[0]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.shift())}onattribname(t,n){this.startIndex=t;const i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=sa(t)}onattribend(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===Ut.Double?'"':t===Ut.Single?"'":t===Ut.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(ic);let i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(i))}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(i))}this.startIndex=n+1}oncomment(t,n,i){var r,a,o,u;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=n+1}oncdata(t,n,i){var r,a,o,u,c,v,g,x,m,V;this.endIndex=n;const K=this.getSlice(t,n-i);!this.htmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,K),(v=(c=this.cbs).oncdataend)===null||v===void 0||v.call(c)):((x=(g=this.cbs).oncomment)===null||x===void 0||x.call(g,"[CDATA[".concat(K,"]]")),(V=(m=this.cbs).oncommentend)===null||V===void 0||V.call(m)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=0;i<this.stack.length;i++)this.cbs.onclosetag(this.stack[i],!0)}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};var De;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(De||(De={}));function ac(e){return e.type===De.Tag||e.type===De.Script||e.type===De.Style}De.Root;De.Text;De.Directive;De.Comment;De.Script;De.Style;De.Tag;De.CDATA;De.Doctype;class Es{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Ts(this,t)}}class Vr extends Es{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}let hr=class extends Vr{constructor(){super(...arguments),this.type=De.Text}get nodeType(){return 3}};class xs extends Vr{constructor(){super(...arguments),this.type=De.Comment}get nodeType(){return 8}}class Ss extends Vr{constructor(t,n){super(n),this.name=t,this.type=De.Directive}get nodeType(){return 1}}class Lr extends Es{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class ks extends Lr{constructor(){super(...arguments),this.type=De.CDATA}get nodeType(){return 4}}class yr extends Lr{constructor(){super(...arguments),this.type=De.Root}get nodeType(){return 9}}class As extends Lr{constructor(t,n,i=[],r=t==="script"?De.Script:t==="style"?De.Style:De.Tag){super(i),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,i;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[t]}})}}function Ti(e){return ac(e)}function sc(e){return e.type===De.CDATA}function vr(e){return e.type===De.Text}function oc(e){return e.type===De.Comment}function lc(e){return e.type===De.Directive}function uc(e){return e.type===De.Root}function cc(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Ts(e,t=!1){let n;if(vr(e))n=new hr(e.data);else if(oc(e))n=new xs(e.data);else if(Ti(e)){const i=t?lr(e.children):[],r=new As(e.name,{...e.attribs},i);i.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(sc(e)){const i=t?lr(e.children):[],r=new ks(i);i.forEach(a=>a.parent=r),n=r}else if(uc(e)){const i=t?lr(e.children):[],r=new yr(i);i.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(lc(e)){const i=new Ss(e.name,e.data);e["x-name"]!=null&&(i["x-name"]=e["x-name"],i["x-publicId"]=e["x-publicId"],i["x-systemId"]=e["x-systemId"]),n=i}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function lr(e){const t=e.map(n=>Ts(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const ba={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class dc{constructor(t,n,i){this.dom=[],this.root=new yr(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=ba),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:ba,this.elementCB=i!=null?i:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new yr(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const i=this.options.xmlMode?De.Tag:void 0,r=new As(t,n,void 0,i);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===De.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new hr(t);this.addNode(i),this.lastNode=i}}oncomment(t){if(this.lastNode&&this.lastNode.type===De.Comment){this.lastNode.data+=t;return}const n=new xs(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new hr(""),n=new ks([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const i=new Ss(t,n);this.addNode(i)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),i&&(t.prev=i,i.next=t),t.parent=n,this.lastNode=null}}function Cs(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function pc(e,t,n=!0,i=1/0){return fc(e,Array.isArray(t)?t:[t],n,i)}function fc(e,t,n,i){const r=[],a=[t],o=[0];for(;;){if(o[0]>=a[0].length){if(o.length===1)return r;a.shift(),o.shift();continue}const u=a[0][o[0]++];if(e(u)&&(r.push(u),--i<=0))return r;n&&cc(u)&&u.children.length>0&&(o.unshift(0),a.unshift(u.children))}}const mc={tag_name(e){return typeof e=="function"?t=>Ti(t)&&e(t.name):e==="*"?Ti:t=>Ti(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>vr(t)&&e(t.data):t=>vr(t)&&t.data===e}};function Rs(e,t,n=!0,i=1/0){return pc(mc.tag_name(e),t,n,i)}function Ds(e,t){const n=new dc(void 0,t);return new rc(n,t).end(e),n.root}var Is={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ga,function(){return function(n,i,r){n=n||{};var a=i.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(v,g,x,m){return a.fromToBase(v,g,x,m)}r.en.relativeTime=o,a.fromToBase=function(v,g,x,m,V){for(var K,z,te,D=x.$locale().relativeTime||o,X=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],L=X.length,b=0;b<L;b+=1){var k=X[b];k.d&&(K=m?r(v).diff(x,k.d,!0):x.diff(v,k.d,!0));var I=(n.rounding||Math.round)(Math.abs(K));if(te=K>0,I<=k.r||!k.r){I<=1&&b>0&&(k=X[b-1]);var S=D[k.l];V&&(I=V(""+I)),z=typeof S=="string"?S.replace("%d",I):S(I,g,k.l,te);break}}if(g)return z;var R=te?D.future:D.past;return typeof R=="function"?R(z):R.replace("%s",z)},a.to=function(v,g){return u(v,g,this,!0)},a.from=function(v,g){return u(v,g,this)};var c=function(v){return v.$u?r.utc():r()};a.toNow=function(v){return this.to(c(this),v)},a.fromNow=function(v){return this.from(c(this),v)}}})})(Is);var hc=Is.exports;const yc=ll(hc);var vc={exports:{}};(function(e,t){(function(n,i){e.exports=i(ul)})(Ga,function(n){function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var r=i(n),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,u){return u==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,u){var c=100*o+u;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return r.default.locale(a,null,!0),a})})(vc);function jt(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const si=Object.prototype.toString,gc=Object.prototype.hasOwnProperty;function gr(e){return e===void 0}function Bn(e){return e!==void 0}function Ns(e){return e==null}function Pt(e){return si.call(e)==="[object Array]"}function sn(e){return si.call(e)==="[object Object]"}function on(e){return si.call(e)==="[object Number]"}function rn(e){const t=si.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Ft(e){return si.call(e)==="[object String]"}function An(e,t){return!Ns(e)&&gc.call(e,t)}function Mt(e,t){const n=Br(t);let i;return ae(e,function(r,a){if(n(r,a))return i=r,!1}),i}function bc(e,t){const n=Br(t);let i=Pt(e)?-1:void 0;return ae(e,function(r,a){if(n(r,a))return i=a,!1}),i}function On(e,t){const n=Br(t);let i=[];return ae(e,function(r,a){n(r,a)&&i.push(r)}),i}function ae(e,t){let n,i;if(gr(e))return;const r=Pt(e)?Ec:wc;for(let a in e)if(An(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function Un(e,t,n){return ae(e,function(i,r){n=t(n,i,r)}),n}function Ps(e,t){return!!Un(e,function(n,i,r){return n&&t(i,r)},!0)}function Ms(e,t){return!!Mt(e,t)}function _c(e,t){let n=[];return ae(e,function(i,r){n.push(t(i,r))}),n}function _a(e){return function(t){return Ps(e,function(n,i){return t[i]===n})}}function Br(e){return rn(e)?e:t=>t===e}function wc(e){return e}function Ec(e){return Number(e)}function xc(e,t){let n,i,r,a;function o(x){let m=Date.now(),V=x?0:a+t-m;if(V>0)return u(V);e.apply(r,i),c()}function u(x){n=setTimeout(o,x)}function c(){n&&clearTimeout(n),n=a=i=r=void 0}function v(){n&&o(!0),c()}function g(...x){a=Date.now(),i=x,r=this,n||u(t)}return g.flush=v,g.cancel=c,g}function ln(e,t){return e.bind(t)}function de(e,...t){return Object.assign(e,...t)}function Sc(e,t,n){let i=e;return ae(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let o=t[a+1],u=i[r];Bn(o)&&Ns(u)&&(u=i[r]=isNaN(+o)?{}:[]),gr(o)?gr(n)?delete i[r]:i[r]=n:i=u}),e}function kc(e,t){let n={},i=Object(e);return ae(t,function(r){r in i&&(n[r]=e[r])}),n}function Ac(e,t){let n={},i=Object(e);return ae(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}var Tc=1e3;function Xt(e,t){var n=this;t=t||Tc,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,o=r.element,u=r.gfx,c=r.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(u,o,c):n.drawConnection(u,o,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Xt.prototype.canRender=function(e){};Xt.prototype.drawShape=function(e,t){};Xt.prototype.drawConnection=function(e,t){};Xt.prototype.getShapePath=function(e){};Xt.prototype.getConnectionPath=function(e){};function le(e,t){var n=qe(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Mi(e,t){return Ms(t,function(n){return le(e,n)})}function qe(e){return e&&e.businessObject||e}function En(e){return e&&e.di}function _n(e,t){return le(e,"bpmn:CallActivity")?!1:le(e,"bpmn:SubProcess")?(t=t||En(e),t&&le(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):le(e,"bpmn:Participant")?!!qe(e).processRef:!0}function wa(e){if(!(!le(e,"bpmn:Participant")&&!le(e,"bpmn:Lane"))){var t=En(e).isHorizontal;return t===void 0?!0:t}}function Cc(e){return e&&!!qe(e).triggeredByEvent}function Rc(e){return sn(e)&&An(e,"waypoints")}function $s(e){return sn(e)&&An(e,"labelTarget")}var $i={width:90,height:20},Ea=15;function Dc(e){return le(e,"bpmn:Event")||le(e,"bpmn:Gateway")||le(e,"bpmn:DataStoreReference")||le(e,"bpmn:DataObjectReference")||le(e,"bpmn:DataInput")||le(e,"bpmn:DataOutput")||le(e,"bpmn:SequenceFlow")||le(e,"bpmn:MessageFlow")||le(e,"bpmn:Group")}function Ic(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=Nc(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),o=r.x,u=r.y;return Math.abs(a)<Math.PI/2?u-=Ea:o+=Ea,{x:o,y:u}}function Nc(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Pc(e){return e.waypoints?Ic(e.waypoints):le(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+$i.height/2}:{x:e.x+e.width/2,y:e.y+e.height+$i.height/2}}function Mc(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max($i.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Pc(t),i=$i),de({x:n.x-i.width/2,y:n.y-i.height/2},i)}function $c(e){if(le(e,"bpmn:FlowElement")||le(e,"bpmn:Participant")||le(e,"bpmn:Lane")||le(e,"bpmn:SequenceFlow")||le(e,"bpmn:MessageFlow")||le(e,"bpmn:DataInput")||le(e,"bpmn:DataOutput"))return"name";if(le(e,"bpmn:TextAnnotation"))return"text";if(le(e,"bpmn:Group"))return"categoryValueRef"}function Vc(e){var t=e.categoryValueRef;return t&&t.value||""}function Vi(e){var t=e.businessObject,n=$c(t);if(n)return n==="categoryValueRef"?Vc(t):t[n]||""}function Lc(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function Bc(e,t){return t.appendChild(Lc(e,t))}function ze(e,t){return Bc(t,e),e}var br=2,Vs={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":br,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":br,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Oc(e,t){return Vs[t]?e.style[t]:e.getAttributeNS(null,t)}function Ls(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Vs[i];r?(r===br&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Uc(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Ls(e,r,t[r])}function Se(e,t,n){if(typeof t=="string")if(n!==void 0)Ls(e,t,n);else return Oc(e,t);else Uc(e,t);return e}const Fc=Object.prototype.toString;function Tt(e){return new un(e)}function un(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}un.prototype.add=function(e){return this.list.add(e),this};un.prototype.remove=function(e){return Fc.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};un.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};un.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};un.prototype.array=function(){return Array.from(this.list)};un.prototype.has=un.prototype.contains=function(e){return this.list.contains(e)};function qc(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}var Or={svg:"http://www.w3.org/2000/svg"},xa='<svg xmlns="'+Or.svg+'"';function jc(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Or.svg)===-1&&(e=xa+e.substring(4)):(e=xa+">"+e+"</svg>",t=!0);var n=zc(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function zc(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Ae(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=jc(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Or.svg,e),t&&Se(n,t),n}var ur=null;function Bs(){return ur===null&&(ur=Ae("svg")),ur}function Sa(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Wc(e,t,n,i,r,a){var o=Bs().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return Sa(o,e);case 6:return Sa(o,{a:e,b:t,c:n,d:i,e:r,f:a})}}function ei(e){return Bs().createSVGTransform()}var ka=/([&<>]{1})/g,Hc=/([&<>\n\r"]{1})/g,Yc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function cr(e,t){function n(i,r){return Yc[r]||r}return e.replace(t,n)}function Os(e,t){var n,i,r,a,o;switch(e.nodeType){case 3:t.push(cr(e.textContent,ka));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',cr(a.value,Hc),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,i=o.length;n<i;++n)Os(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",cr(e.nodeValue,ka),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Kc(e){for(var t=e.firstChild,n=[];t;)Os(t,n),t=t.nextSibling;return n.join("")}function Aa(e,t){return Kc(e)}function oi(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Gc(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Qc(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Gc(e,i))}function ii(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Qc(n,t)),n.consolidate()}function Tn(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Xc(e){return["M",e.x,e.y]}function dr(e){return["L",e.x,e.y]}function Zc(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Jc(e,t){const n=e.length,i=[Xc(e[0])];for(let r=1;r<n;r++){const a=e[r-1],o=e[r],u=e[r+1];if(!u||!t){i.push(dr(o));continue}const c=Math.min(t,_r(o.x-a.x,o.y-a.y),_r(u.x-o.x,u.y-o.y));if(!c){i.push(dr(o));continue}const v=bi(o,a,c),g=bi(o,a,c*.5),x=bi(o,u,c),m=bi(o,u,c*.5);i.push(dr(v)),i.push(Zc(g,m,x))}return i}function bi(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=_r(i,r),o=n/a;return{x:e.x+i*o,y:e.y+r*o}}function _r(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Ur(e,t,n){on(t)&&(n=t,t=null),t||(t={});const i=Ae("path",t);return on(n)&&(i.dataset.cornerRadius=String(n)),Us(i,e)}function Us(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Se(e,{d:Tn(Jc(t,n))}),e}var wr="hsl(225, 10%, 15%)",ed="white";function Lt(e,t){return Ms(e.eventDefinitions,function(n){return n.$type===t})}function td(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function nd(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function _e(e,t,n){var i=En(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||ed}function ee(e,t,n){var i=En(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||wr}function Zn(e,t,n,i){var r=En(e),a=r.get("label");return i||a&&a.get("color:color")||t||ee(e,n)}function id(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Tn(r)}function rd(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,o=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return Tn(o)}function ad(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,o=n/2,u=[["M",i+a,r],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return Tn(u)}function sd(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Tn(a)}function Jn(e,t={}){return{width:At(e,t),height:ht(e,t)}}function At(e,t={}){return An(t,"width")?t.width:e.width}function ht(e,t={}){return An(t,"height")?t.height:e.height}function od(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const ld=Object.prototype.toString,ud=Object.prototype.hasOwnProperty;function cd(e){return e===void 0}function dd(e){return ld.call(e)==="[object Array]"}function pd(e,t){return ud.call(e,t)}function Ta(e,t){let n,i;if(cd(e))return;const r=dd(e)?md:fd;for(let a in e)if(pd(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function fd(e){return e}function md(e){return Number(e)}function vt(e,...t){const n=e.style;return Ta(t,function(i){i&&Ta(i,function(r,a){n[a]=r})}),e}function hd(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const yd=Object.prototype.toString;function Hi(e){return new cn(e)}function cn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}cn.prototype.add=function(e){return this.list.add(e),this};cn.prototype.remove=function(e){return yd.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};cn.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};cn.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};cn.prototype.array=function(){return Array.from(this.list)};cn.prototype.has=cn.prototype.contains=function(e){return this.list.contains(e)};function Fs(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function vd(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var Li={},Bi,Er,Fr;function qs(){Bi=window.addEventListener?"addEventListener":"attachEvent",Er=window.removeEventListener?"removeEventListener":"detachEvent",Fr=Bi!=="addEventListener"?"on":""}var gd=Li.bind=function(e,t,n,i){return Bi||qs(),e[Bi](Fr+t,n,i||!1),n},bd=Li.unbind=function(e,t,n,i){return Er||qs(),e[Er](Fr+t,n,i||!1),n},qr=od({__proto__:null,bind:gd,unbind:bd,default:Li},[Li]),js=["focus","blur"];function _d(e,t,n,i,r){return js.indexOf(n)!==-1&&(r=!0),qr.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=vd(o,t,!0),a.delegateTarget&&i.call(e,a)},r)}function wd(e,t,n,i){return js.indexOf(t)!==-1&&(i=!0),qr.unbind(e,t,n,i)}var xr={bind:_d,unbind:wd},Ed=xd,zs=!1,_i;typeof document<"u"&&(_i=document.createElement("div"),_i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',zs=!_i.getElementsByTagName("link").length,_i=void 0);var Ke={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:zs?[1,"X<div>","</div>"]:[0,"",""]};Ke.td=Ke.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ke.option=Ke.optgroup=[1,'<select multiple="multiple">',"</select>"];Ke.thead=Ke.tbody=Ke.colgroup=Ke.caption=Ke.tfoot=[1,"<table>","</table>"];Ke.polyline=Ke.ellipse=Ke.polygon=Ke.circle=Ke.text=Ke.line=Ke.path=Ke.rect=Ke.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function xd(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ke,i)?Ke[i]:Ke._default,a=r[0],o=r[1],u=r[2],c=t.createElement("div");for(c.innerHTML=o+e+u;a--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var v=t.createDocumentFragment();c.firstChild;)v.appendChild(c.removeChild(c.firstChild));return v}var qt=Ed;function It(e,t){return t=t||document,t.querySelector(e)}function Sd(e,t){return t=t||document,t.querySelectorAll(e)}function Oi(e){e.parentNode&&e.parentNode.removeChild(e)}function pr(e,t,n,i,r){var a=ei();a.setTranslate(t,n);var o=ei();o.setRotate(i||0,0,0);var u=ei();u.setScale(1,1),ii(e,[a,o,u])}function Ws(e,t,n){var i=ei();i.setTranslate(t,n),ii(e,i)}function kd(e,t){var n=ei();n.setRotate(t,0,0),ii(e,n)}function Ad(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Td=Ad(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var o=r-Math.floor(r),u="",a=0;a<Math.floor(r);a++){var c=Math.floor(Math.random()*i).toString(i);u=c+u}if(o){var v=Math.pow(i,o),c=Math.floor(Math.random()*v).toString(i);u=c+u}var g=parseInt(u,i);return g!==1/0&&g>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,r){var a=function(u){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var v=t(n,i)}while(Object.hasOwnProperty.call(o,v));return o[v]=u,v},o=a.hats={};return a.get=function(u){return a.hats[u]},a.set=function(u,c){return a.hats[u]=c,a},a.bits=n||128,a.base=i||16,a}});function Kt(e){if(!(this instanceof Kt))return new Kt(e);e=e||[128,36,1],this._seed=e.length?Td.rack(e[0],e[1],e[2]):e}Kt.prototype.next=function(e){return this._seed(e||!0)};Kt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Kt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Kt.prototype.assigned=function(e){return this._seed.get(e)||!1};Kt.prototype.unclaim=function(e){delete this._seed.hats[e]};Kt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Cd=new Kt,Rd=10,wi=3,Dd=1.5,Ci=10,$n=.95,Id=1,Nd=.25;function Cn(e,t,n,i,r,a,o){Xt.call(this,t,o);var u=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,v=e&&e.defaultLabelColor;function g(f){return n.computeStyle(f,{strokeLinecap:"round",strokeLinejoin:"round",stroke:wr,strokeWidth:2,fill:"white"})}function x(f){return n.computeStyle(f,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:wr,strokeWidth:2})}function m(f,s){var{ref:l={x:0,y:0},scale:y=1,element:_,parentGfx:B=r._svg}=s,re=Ae("marker",{id:f,viewBox:"0 0 20 20",refX:l.x,refY:l.y,markerWidth:20*y,markerHeight:20*y,orient:"auto"});ze(re,_);var ne=It(":scope > defs",B);ne||(ne=Ae("defs"),ze(B,ne)),ze(ne,re)}function V(f,s,l,y){var _=Cd.nextPrefixed("marker-");return K(f,_,s,l,y),"url(#"+_+")"}function K(f,s,l,y,_){if(l==="sequenceflow-end"){var B=Ae("path",{d:"M 1 5 L 11 10 L 1 15 Z",...g({fill:_,stroke:_,strokeWidth:1})});m(s,{element:B,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(l==="messageflow-start"){var re=Ae("circle",{cx:6,cy:6,r:3.5,...g({fill:y,stroke:_,strokeWidth:1,strokeDasharray:[1e4,1]})});m(s,{element:re,ref:{x:6,y:6},parentGfx:f})}if(l==="messageflow-end"){var ne=Ae("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...g({fill:y,stroke:_,strokeWidth:1,strokeDasharray:[1e4,1]})});m(s,{element:ne,ref:{x:8.5,y:5},parentGfx:f})}if(l==="association-start"){var ye=Ae("path",{d:"M 11 5 L 1 10 L 11 15",...x({fill:"none",stroke:_,strokeWidth:1.5,strokeDasharray:[1e4,1]})});m(s,{element:ye,ref:{x:1,y:10},scale:.5,parentGfx:f})}if(l==="association-end"){var Be=Ae("path",{d:"M 1 5 L 11 10 L 1 15",...x({fill:"none",stroke:_,strokeWidth:1.5,strokeDasharray:[1e4,1]})});m(s,{element:Be,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(l==="conditional-flow-marker"){var lt=Ae("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...g({fill:y,stroke:_})});m(s,{element:lt,ref:{x:-1,y:10},scale:.5,parentGfx:f})}if(l==="conditional-default-flow-marker"){var et=Ae("path",{d:"M 6 4 L 10 16",...g({stroke:_,fill:"none"})});m(s,{element:et,ref:{x:0,y:10},scale:.5,parentGfx:f})}}function z(f,s,l,y,_={}){sn(y)&&(_=y,y=0),y=y||0,_=g(_);var B=s/2,re=l/2,ne=Ae("circle",{cx:B,cy:re,r:Math.round((s+l)/4-y),..._});return ze(f,ne),ne}function te(f,s,l,y,_,B){sn(_)&&(B=_,_=0),_=_||0,B=g(B);var re=Ae("rect",{x:_,y:_,width:s-_*2,height:l-_*2,rx:y,ry:y,...B});return ze(f,re),re}function D(f,s,l,y){var _=s/2,B=l/2,re=[{x:_,y:0},{x:s,y:B},{x:_,y:l},{x:0,y:B}],ne=re.map(function(Be){return Be.x+","+Be.y}).join(" ");y=g(y);var ye=Ae("polygon",{...y,points:ne});return ze(f,ye),ye}function X(f,s,l,y){l=x(l);var _=Ur(s,l,y);return ze(f,_),_}function L(f,s,l){return X(f,s,l,5)}function b(f,s,l){l=x(l);var y=Ae("path",{...l,d:s});return ze(f,y),y}function k(f,s,l,y){return b(s,l,de({"data-marker":f},y))}function I(f){return ke[f]}function S(f){return function(s,l,y){return I(f)(s,l,y)}}var R={"bpmn:MessageEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.235,my:.315}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill),re=y?_e(s,u,l.fill):ee(s,c,l.stroke),ne=b(f,_,{fill:B,stroke:re,strokeWidth:1});return ne},"bpmn:TimerEventDefinition":function(f,s,l={}){var y=z(f,s.width,s.height,.2*s.height,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:2}),_=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}});b(f,_,{stroke:ee(s,c,l.stroke),strokeWidth:2});for(var B=0;B<12;B++){var re=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}}),ne=s.width/2,ye=s.height/2;b(f,re,{strokeWidth:1,stroke:ee(s,c,l.stroke),transform:"rotate("+B*30+","+ye+","+ne+")"})}return y},"bpmn:EscalationEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(f,s,l={}){var y=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.222}});return b(f,y,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.2,my:.722}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),B=y?ee(s,c,l.stroke):"none",re=b(f,_,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1});return kd(re,45),re},"bpmn:CompensateEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.22,my:.5}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{fill:B,stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{strokeWidth:1,fill:B,stroke:ee(s,c,l.stroke)})},"bpmn:MultipleEventDefinition":function(f,s,l={},y){var _=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.222,my:.36}}),B=y?ee(s,c,l.stroke):_e(s,u,l.fill);return b(f,_,{fill:B,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(f,s,l={}){var y=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width,containerHeight:s.height,position:{mx:.458,my:.194}});return b(f,y,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(f,s,l={}){var y=z(f,s.width,s.height,8,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:4});return y}};function M(f,s,l={}){var y=qe(f),_=td(y);return y.get("eventDefinitions")&&y.get("eventDefinitions").length>1?y.get("parallelMultiple")?R["bpmn:ParallelMultipleEventDefinition"](s,f,l,_):R["bpmn:MultipleEventDefinition"](s,f,l,_):Lt(y,"bpmn:MessageEventDefinition")?R["bpmn:MessageEventDefinition"](s,f,l,_):Lt(y,"bpmn:TimerEventDefinition")?R["bpmn:TimerEventDefinition"](s,f,l,_):Lt(y,"bpmn:ConditionalEventDefinition")?R["bpmn:ConditionalEventDefinition"](s,f,l,_):Lt(y,"bpmn:SignalEventDefinition")?R["bpmn:SignalEventDefinition"](s,f,l,_):Lt(y,"bpmn:EscalationEventDefinition")?R["bpmn:EscalationEventDefinition"](s,f,l,_):Lt(y,"bpmn:LinkEventDefinition")?R["bpmn:LinkEventDefinition"](s,f,l,_):Lt(y,"bpmn:ErrorEventDefinition")?R["bpmn:ErrorEventDefinition"](s,f,l,_):Lt(y,"bpmn:CancelEventDefinition")?R["bpmn:CancelEventDefinition"](s,f,l,_):Lt(y,"bpmn:CompensateEventDefinition")?R["bpmn:CompensateEventDefinition"](s,f,l,_):Lt(y,"bpmn:TerminateEventDefinition")?R["bpmn:TerminateEventDefinition"](s,f,l,_):null}var P={ParticipantMultiplicityMarker:function(f,s,l={}){var y=At(s,l),_=ht(s,l),B=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:_,position:{mx:(y/2-6)/y,my:(_-15)/_}});k("participant-multiplicity",f,B,{strokeWidth:2,fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})},SubProcessMarker:function(f,s,l={}){var y=te(f,14,14,0,{strokeWidth:1,fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)});Ws(y,s.width/2-7.5,s.height-20);var _=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});k("sub-process",f,_,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})},ParallelMarker:function(f,s,l){var y=At(s,l),_=ht(s,l),B=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:_,position:{mx:(y/2+l.parallel)/y,my:(_-20)/_}});k("parallel",f,B,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})},SequentialMarker:function(f,s,l){var y=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+l.seq)/s.width,my:(s.height-19)/s.height}});k("sequential",f,y,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})},CompensationMarker:function(f,s,l){var y=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+l.compensation)/s.width,my:(s.height-13)/s.height}});k("compensation",f,y,{strokeWidth:1,fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})},LoopMarker:function(f,s,l){var y=At(s,l),_=ht(s,l),B=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:_,position:{mx:(y/2+l.loop)/y,my:(_-7)/_}});k("loop",f,B,{strokeWidth:1.5,fill:"none",stroke:ee(s,c,l.stroke),strokeMiterlimit:.5})},AdhocMarker:function(f,s,l){var y=At(s,l),_=ht(s,l),B=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:_,position:{mx:(y/2+l.adhoc)/y,my:(_-15)/_}});k("adhoc",f,B,{strokeWidth:1,fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke)})}};function H(f,s,l,y){P[f](s,l,y)}function G(f,s,l,y={}){y={fill:y.fill,stroke:y.stroke,width:At(s,y),height:ht(s,y)};var _=qe(s),B=l&&l.includes("SubProcessMarker");B?y={...y,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:y={...y,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},ae(l,function(ye){H(ye,f,s,y)}),_.get("isForCompensation")&&H("CompensationMarker",f,s,y),le(_,"bpmn:AdHocSubProcess")&&H("AdhocMarker",f,s,y);var re=_.get("loopCharacteristics"),ne=re&&re.get("isSequential");re&&(ne===void 0&&H("LoopMarker",f,s,y),ne===!1&&H("ParallelMarker",f,s,y),ne===!0&&H("SequentialMarker",f,s,y))}function Z(f,s,l={}){l=de({size:{width:100}},l);var y=a.createText(s||"",l);return Tt(y).add("djs-label"),ze(f,y),y}function he(f,s,l,y={}){var _=qe(s),B=Jn({width:s.width,height:s.height},y);return Z(f,_.name,{align:l,box:B,padding:7,style:{fill:Zn(s,v,c,y.stroke)}})}function pe(f,s,l={}){var y={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return Z(f,Vi(s),{box:y,fitBox:!0,style:de({},a.getExternalStyle(),{fill:Zn(s,v,c,l.stroke)})})}function se(f,s,l,y={}){var _=wa(l),B=Z(f,s,{box:{height:30,width:_?ht(l,y):At(l,y)},align:"center-middle",style:{fill:Zn(l,v,c,y.stroke)}});if(_){var re=-1*ht(l,y);pr(B,0,-re,270)}}function me(f,s,l={}){var{width:y,height:_}=Jn(s,l);return te(f,y,_,Ci,{...l,fill:_e(s,u,l.fill),fillOpacity:$n,stroke:ee(s,c,l.stroke)})}function at(f,s,l={}){var y=qe(s),_=_e(s,u,l.fill),B=ee(s,c,l.stroke);return(y.get("associationDirection")==="One"||y.get("associationDirection")==="Both")&&(l.markerEnd=V(f,"association-end",_,B)),y.get("associationDirection")==="Both"&&(l.markerStart=V(f,"association-start",_,B)),l=Ee(l,["markerStart","markerEnd"]),L(f,s.waypoints,{...l,stroke:B,strokeDasharray:"0, 5"})}function He(f,s,l={}){var y=_e(s,u,l.fill),_=ee(s,c,l.stroke),B=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),re=b(f,B,{fill:y,fillOpacity:$n,stroke:_}),ne=qe(s);if(nd(ne)){var ye=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:(s.height-18)/s.height}});b(f,ye,{strokeWidth:2,fill:y,stroke:_})}return re}function Ie(f,s,l={}){return z(f,s.width,s.height,{fillOpacity:$n,...l,fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)})}function je(f,s,l={}){return D(f,s.width,s.height,{fill:_e(s,u,l.fill),fillOpacity:$n,stroke:ee(s,c,l.stroke)})}function U(f,s,l={}){var y=te(f,At(s,l),ht(s,l),0,{fill:_e(s,u,l.fill),fillOpacity:l.fillOpacity||$n,stroke:ee(s,c,l.stroke),strokeWidth:1.5}),_=qe(s);if(le(_,"bpmn:Lane")){var B=_.get("name");se(f,B,s,l)}return y}function O(f,s,l={}){var y=me(f,s,l);Cc(s)&&Se(y,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var _=_n(s);return he(f,s,_?"center-top":"center-middle",l),_?G(f,s,void 0,l):G(f,s,["SubProcessMarker"],l),y}function J(f,s,l={}){var y=me(f,s,l);return he(f,s,"center-middle",l),G(f,s,void 0,l),y}var ke=this.handlers={"bpmn:AdHocSubProcess":function(f,s,l={}){return _n(s)?l=Ee(l,["fill","stroke","width","height"]):l=Ee(l,["fill","stroke"]),O(f,s,l)},"bpmn:Association":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),at(f,s,l)},"bpmn:BoundaryEvent":function(f,s,l={}){var{renderIcon:y=!0}=l;l=Ee(l,["fill","stroke"]);var _=qe(s),B=_.get("cancelActivity");l={strokeWidth:1.5,fill:_e(s,u,l.fill),fillOpacity:Id,stroke:ee(s,c,l.stroke)},B||(l.strokeDasharray="6");var re=Ie(f,s,l);return z(f,s.width,s.height,wi,{...l,fill:"none"}),y&&M(s,f,l),re},"bpmn:BusinessRuleTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l),_=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),B=b(f,_);Se(B,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1});var re=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),ne=b(f,re);return Se(ne,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:CallActivity":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),O(f,s,{strokeWidth:5,...l})},"bpmn:ComplexGateway":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=je(f,s,l),_=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return b(f,_,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:DataInput":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=i.getRawPath("DATA_ARROW"),_=He(f,s,l);return b(f,y,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1}),_},"bpmn:DataInputAssociation":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),at(f,s,{...l,markerEnd:V(f,"association-end",_e(s,u,l.fill),ee(s,c,l.stroke))})},"bpmn:DataObject":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),He(f,s,l)},"bpmn:DataObjectReference":S("bpmn:DataObject"),"bpmn:DataOutput":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=i.getRawPath("DATA_ARROW"),_=He(f,s,l);return b(f,y,{strokeWidth:1,fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke)}),_},"bpmn:DataOutputAssociation":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),at(f,s,{...l,markerEnd:V(f,"association-end",_e(s,u,l.fill),ee(s,c,l.stroke))})},"bpmn:DataStoreReference":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}});return b(f,y,{fill:_e(s,u,l.fill),fillOpacity:$n,stroke:ee(s,c,l.stroke),strokeWidth:2})},"bpmn:EndEvent":function(f,s,l={}){var{renderIcon:y=!0}=l;l=Ee(l,["fill","stroke"]);var _=Ie(f,s,{...l,strokeWidth:4});return y&&M(s,f,l),_},"bpmn:EventBasedGateway":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=qe(s),_=je(f,s,l);z(f,s.width,s.height,s.height*.2,{fill:_e(s,"none",l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1});var B=y.get("eventGatewayType"),re=!!y.get("instantiate");function ne(){var Be=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});b(f,Be,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:2})}if(B==="Parallel"){var ye=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});b(f,ye,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1})}else B==="Exclusive"&&(re||z(f,s.width,s.height,s.height*.26,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1}),ne());return _},"bpmn:ExclusiveGateway":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=je(f,s,l),_=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}}),B=En(s);return B.get("isMarkerVisible")&&b(f,_,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:Gateway":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),je(f,s,l)},"bpmn:Group":function(f,s,l={}){return l=Ee(l,["fill","stroke","width","height"]),te(f,s.width,s.height,Ci,{stroke:ee(s,c,l.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:At(s,l),height:ht(s,l)})},"bpmn:InclusiveGateway":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=je(f,s,l);return z(f,s.width,s.height,s.height*.24,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:2.5}),y},"bpmn:IntermediateEvent":function(f,s,l={}){var{renderIcon:y=!0}=l;l=Ee(l,["fill","stroke"]);var _=Ie(f,s,{...l,strokeWidth:1.5});return z(f,s.width,s.height,wi,{fill:"none",stroke:ee(s,c,l.stroke),strokeWidth:1.5}),y&&M(s,f,l),_},"bpmn:IntermediateCatchEvent":S("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":S("bpmn:IntermediateEvent"),"bpmn:Lane":function(f,s,l={}){return l=Ee(l,["fill","stroke","width","height"]),U(f,s,{...l,fillOpacity:Nd})},"bpmn:ManualTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l),_=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return b(f,_,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5}),y},"bpmn:MessageFlow":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=qe(s),_=En(s),B=_e(s,u,l.fill),re=ee(s,c,l.stroke),ne=L(f,s.waypoints,{markerEnd:V(f,"messageflow-end",B,re),markerStart:V(f,"messageflow-start",B,re),stroke:re,strokeDasharray:"10, 11",strokeWidth:1.5});if(y.get("messageRef")){var ye=ne.getPointAtLength(ne.getTotalLength()/2),Be=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ye.x,y:ye.y}}),lt={strokeWidth:1};_.get("messageVisibleKind")==="initiating"?(lt.fill=B,lt.stroke=re):(lt.fill=re,lt.stroke=B);var et=b(f,Be,lt),Te=y.get("messageRef"),tt=Te.get("name"),xe=Z(f,tt,{align:"center-top",fitBox:!0,style:{fill:re}}),St=et.getBBox(),$t=xe.getBBox(),Qe=ye.x-$t.width/2,oe=ye.y+St.height/2+Rd;pr(xe,Qe,oe,0)}return ne},"bpmn:ParallelGateway":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=je(f,s,l),_=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return b(f,_,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:Participant":function(f,s,l={}){l=Ee(l,["fill","stroke","width","height"]);var y=U(f,s,l),_=_n(s),B=wa(s),re=qe(s),ne=re.get("name");if(_){var ye=B?[{x:30,y:0},{x:30,y:ht(s,l)}]:[{x:0,y:30},{x:At(s,l),y:30}];X(f,ye,{stroke:ee(s,c,l.stroke),strokeWidth:Dd}),se(f,ne,s,l)}else{var Be=Jn(s,l);B||(Be.height=At(s,l),Be.width=ht(s,l));var lt=Z(f,ne,{box:Be,align:"center-middle",style:{fill:Zn(s,v,c,l.stroke)}});if(!B){var et=-1*ht(s,l);pr(lt,0,-et,270)}}return re.get("participantMultiplicity")&&H("ParticipantMultiplicityMarker",f,s,l),y},"bpmn:ReceiveTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=qe(s),_=J(f,s,l),B;return y.get("instantiate")?(z(f,28,28,20*.22,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),B=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):B=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(f,B,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),_},"bpmn:ScriptTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l),_=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return b(f,_,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:SendTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l),_=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return b(f,_,{fill:ee(s,c,l.stroke),stroke:_e(s,u,l.fill),strokeWidth:1}),y},"bpmn:SequenceFlow":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=_e(s,u,l.fill),_=ee(s,c,l.stroke),B=L(f,s.waypoints,{markerEnd:V(f,"sequenceflow-end",y,_),stroke:_}),re=qe(s),{source:ne}=s;if(ne){var ye=qe(ne);re.get("conditionExpression")&&le(ye,"bpmn:Activity")&&Se(B,{markerStart:V(f,"conditional-flow-marker",y,_)}),ye.get("default")&&(le(ye,"bpmn:Gateway")||le(ye,"bpmn:Activity"))&&ye.get("default")===re&&Se(B,{markerStart:V(f,"conditional-default-flow-marker",y,_)})}return B},"bpmn:ServiceTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l);z(f,10,10,{fill:_e(s,u,l.fill),stroke:"none",transform:"translate(6, 6)"});var _=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});b(f,_,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),z(f,10,10,{fill:_e(s,u,l.fill),stroke:"none",transform:"translate(11, 10)"});var B=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return b(f,B,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:1}),y},"bpmn:StartEvent":function(f,s,l={}){var{renderIcon:y=!0}=l;l=Ee(l,["fill","stroke"]);var _=qe(s);_.get("isInterrupting")||(l={...l,strokeDasharray:"6"});var B=Ie(f,s,l);return y&&M(s,f,l),B},"bpmn:SubProcess":function(f,s,l={}){return _n(s)?l=Ee(l,["fill","stroke","width","height"]):l=Ee(l,["fill","stroke"]),O(f,s,l)},"bpmn:Task":function(f,s,l={}){return l=Ee(l,["fill","stroke"]),J(f,s,l)},"bpmn:TextAnnotation":function(f,s,l={}){l=Ee(l,["fill","stroke","width","height"]);var{width:y,height:_}=Jn(s,l),B=te(f,y,_,0,0,{fill:"none",stroke:"none"}),re=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:_,position:{mx:0,my:0}});b(f,re,{stroke:ee(s,c,l.stroke)});var ne=qe(s),ye=ne.get("text")||"";return Z(f,ye,{align:"left-top",box:Jn(s,l),padding:7,style:{fill:Zn(s,v,c,l.stroke)}}),B},"bpmn:Transaction":function(f,s,l={}){_n(s)?l=Ee(l,["fill","stroke","width","height"]):l=Ee(l,["fill","stroke"]);var y=O(f,s,{strokeWidth:1.5,...l}),_=n.style(["no-fill","no-events"],{stroke:ee(s,c,l.stroke),strokeWidth:1.5}),B=_n(s);return B||(l={}),te(f,At(s,l),ht(s,l),Ci-wi,wi,_),y},"bpmn:UserTask":function(f,s,l={}){l=Ee(l,["fill","stroke"]);var y=J(f,s,l),_=15,B=12,re=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:_,y:B}});b(f,re,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5});var ne=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:_,y:B}});b(f,ne,{fill:_e(s,u,l.fill),stroke:ee(s,c,l.stroke),strokeWidth:.5});var ye=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:_,y:B}});return b(f,ye,{fill:ee(s,c,l.stroke),stroke:ee(s,c,l.stroke),strokeWidth:.5}),y},label:function(f,s,l={}){return pe(f,s,l)}};this._drawPath=b,this._renderer=I}jt(Cn,Xt);Cn.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Cn.prototype.canRender=function(e){return le(e,"bpmn:BaseElement")};Cn.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Cn.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Cn.prototype.getShapePath=function(e){return le(e,"bpmn:Event")?id(e):le(e,"bpmn:Activity")?rd(e,Ci):le(e,"bpmn:Gateway")?ad(e):sd(e)};function Ee(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var Pd=0,Md={width:150,height:50};function $d(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function Vd(e){return sn(e)?de({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function Ld(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(a){return{width:0,height:0}}}function Bd(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=Ld(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return Od(e,r,i,a);r=Fd(r,a.width,t)}}function Od(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Ca="­";function Ud(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===Ca)&&r.pop();break}var o=r[r.length-1];return o&&o===Ca&&(r[r.length-1]="-"),r.join("")}function Fd(e,t,n){var i=Math.max(e.length*(n/t),1),r=Ud(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function qd(){var e=document.getElementById("helper-svg");return e||(e=Ae("svg"),Se(e,{id:"helper-svg"}),vt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Yi(e){this._config=de({},{size:Md,padding:Pd,style:{},align:"center-top"},e||{})}Yi.prototype.createText=function(e,t){return this.layoutText(e,t).element};Yi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Yi.prototype.layoutText=function(e,t){var n=de({},this._config.size,t.box),i=de({},this._config.style,t.style),r=$d(t.align||this._config.align),a=Vd(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,u=jd(i),c=e.split(/\u00AD?\r?\n/),v=[],g=n.width-a.left-a.right,x=Ae("text");Se(x,{x:0,y:0}),Se(x,i);var m=qd();for(ze(m,x);c.length;)v.push(Bd(c,g,x));r.vertical==="middle"&&(a.top=a.bottom=0);var V=Un(v,function(X,L,b){return X+(u||L.height)},0)+a.top+a.bottom,K=Un(v,function(X,L,b){return L.width>X?L.width:X},0),z=a.top;r.vertical==="middle"&&(z+=(n.height-V)/2),z-=(u||v[0].height)/4;var te=Ae("text");Se(te,i),ae(v,function(X){var L;switch(z+=u||X.height,r.horizontal){case"left":L=a.left;break;case"right":L=(o?K:g)-a.right-X.width;break;default:L=Math.max(((o?K:g)-X.width)/2+a.left,0)}var b=Ae("tspan");Se(b,{x:L,y:z}),b.textContent=X.text,ze(te,b)}),oi(x);var D={width:K,height:V};return{dimensions:D,element:te}};function jd(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var zd=12,Wd=1.2,Hd=30;function Hs(e){var t=de({fontFamily:"Arial, sans-serif",fontSize:zd,fontWeight:"normal",lineHeight:Wd},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=de({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Yi({style:t});this.getExternalLabelBounds=function(a,o){var u=r.getDimensions(o,{box:{width:90,height:30},style:i});return{x:Math.round(a.x+a.width/2-u.width/2),y:Math.round(a.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(a,o){var u=r.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(Hd,Math.round(u.height))}},this.createText=function(a,o){return r.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Hs.$inject=["config.textRenderer"];function Yd(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,v=0;v<i.heightElements.length;v++)o["y"+v]=i.heightElements[v]*u;for(var g=0;g<i.widthElements.length;g++)o["x"+g]=i.widthElements[g]*c}var x=Xd(i.d,{mx:r,my:a,e:o});return x}}var Kd=/\{([^{}]+)\}/g,Gd=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Qd(e,t,n){var i=n;return t.replace(Gd,function(r,a,o,u,c){a=a||u,i&&(a in i&&(i=i[a]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Xd(e,t){return String(e).replace(Kd,function(n,i){return Qd(n,i,t)})}const Zd={__init__:["bpmnRenderer"],bpmnRenderer:["type",Cn],textRenderer:["type",Hs],pathMap:["type",Yd]};function Jd(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Ys={translate:["value",Jd]};function ep(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Sr(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function tp(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function np(e){return ep({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function ip(e){for(var t=e.waypoints,n=t.reduce(function(v,g,x){var m=t[x-1];if(m){var V=v[v.length-1],K=V&&V.endLength||0,z=rp(m,g);v.push({start:m,end:g,startLength:K,endLength:K+z,length:z})}return v},[]),i=n.reduce(function(v,g){return v+g.length},0),r=i/2,a=0,o=n[a];o.endLength<r;)o=n[++a];var u=(r-o.startLength)/o.length,c={x:o.start.x+(o.end.x-o.start.x)*u,y:o.start.y+(o.end.y-o.start.y)*u};return c}function kr(e){return Rc(e)?ip(e):np(e)}function rp(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ot(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function Ri(e,t,n){return de({id:e.id,type:e.$type,businessObject:e,di:t},n)}function ap(e,t,n){var i=e.waypoint;return!i||i.length<2?[kr(t),kr(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Ks(e,t,n){return new Error("element ".concat(ot(t)," referenced by ").concat(ot(e),"#").concat(n," not yet drawn"))}function Zt(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}Zt.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Zt.prototype.add=function(e,t,n){var i,r,a;if(le(t,"bpmndi:BPMNPlane")){var o=le(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(Ri(e,t,o)),this._canvas.addRootElement(i)}else if(le(t,"bpmndi:BPMNShape")){var u=!_n(e,t),c=op(e);r=n&&(n.hidden||n.collapsed);var v=t.bounds;i=this._elementFactory.createShape(Ri(e,t,{collapsed:u,hidden:r,x:Math.round(v.x),y:Math.round(v.y),width:Math.round(v.width),height:Math.round(v.height),isFrame:c})),le(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),le(e,"bpmn:Lane")&&(a=0),le(e,"bpmn:DataStoreReference")&&(sp(n,kr(v))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,a)}else if(le(t,"bpmndi:BPMNEdge")){var g=this._getSource(e),x=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(Ri(e,t,{hidden:r,source:g,target:x,waypoints:ap(t,g,x)})),le(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,a)}else throw new Error("unknown di ".concat(ot(t)," for element ").concat(ot(e)));return Dc(e)&&Vi(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Zt.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error("missing ".concat(ot(e),"#attachedToRef"));var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw Ks(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};Zt.prototype.addLabel=function(e,t,n){var i,r,a;return i=Mc(t,n),r=Vi(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(Ri(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Vi(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Zt.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Ks(e,i,t+"Ref"):new Error("".concat(ot(e),"#").concat(t," Ref not specified"))};Zt.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Zt.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Zt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function sp(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function op(e){return le(e,"bpmn:Group")}const lp={__depends__:[Ys],bpmnImporter:["type",Zt]},up={__depends__:[Zd,lp]};function xn(e,t){t=!!t,Pt(e)||(e=[e]);var n,i,r,a;return ae(e,function(o){var u=o;o.waypoints&&!t&&(u=xn(o.waypoints,!0));var c=u.x,v=u.y,g=u.height||0,x=u.width||0;(c<n||n===void 0)&&(n=c),(v<i||i===void 0)&&(i=v),(c+x>r||r===void 0)&&(r=c+x),(v+g>a||a===void 0)&&(a=v+g)}),{x:n,y:i,height:a-i,width:r-n}}function Gs(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Qs(e){return!!(e&&e.isFrame)}function Xs(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Xs.prototype.next=function(){return this._prefix+ ++this._counter};var cp=new Xs("ov"),dp=500;function Je(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=cp,this._overlayDefaults=de({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=pp(n.getContainer()),this._init()}Je.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Je.prototype.get=function(e){if(Ft(e)&&(e={id:e}),Ft(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?On(t.overlays,_a({type:e.type})):t.overlays.slice():[]}else return e.type?On(this._overlays,_a({type:e.type})):e.id?this._overlays[e.id]:null};Je.prototype.add=function(e,t,n){if(sn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=de({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Je.prototype.remove=function(e){var t=this.get(e)||[];Pt(t)||(t=[t]);var n=this;ae(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Oi(i.html),Oi(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};Je.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Je.prototype.show=function(){Ki(this._overlayRoot)};Je.prototype.hide=function(){Ki(this._overlayRoot,!1)};Je.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Fs(this._overlayRoot)};Je.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=xn(t);i=a.x,r=a.y}Zs(n,i,r),hd(e.html,"data-container-id",t.id)};Je.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var o;i.waypoints?o=xn(i).width:o=i.width,r=t.right*-1+o}if(t.bottom!==void 0){var u;i.waypoints?u=xn(i).height:u=i.height,a=t.bottom*-1+u}Zs(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Je.prototype._createOverlayContainer=function(e){var t=qt('<div class="djs-overlays" />');vt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Je.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Js(this._overlayRoot,n)};Je.prototype._getOverlayContainer=function(e,t){var n=Mt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Je.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Ft(i)&&(i=qt(i)),a=this._getOverlayContainer(n),r=qt('<div class="djs-overlay" data-overlay-id="'+t+'">'),vt(r,{position:"absolute"}),r.appendChild(i),e.type&&Hi(r).add("djs-overlay-"+e.type);var o=this._canvas.findRoot(n),u=this._canvas.getRootElement();Ki(r,o===u),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Je.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,u=this._canvas.getRootElement(),c=!0;(i!==u||n&&(Bn(r)&&r>t.scale||Bn(a)&&a<t.scale))&&(c=!1),Ki(o,c),this._updateOverlayScale(e,t)};Je.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,o,u="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Bn(i)&&t.scale<i&&(o=(1/t.scale||1)*i),Bn(r)&&t.scale>r&&(o=(1/t.scale||1)*r)),Bn(o)&&(u="scale("+o+","+o+")"),Js(a,u)};Je.prototype._updateOverlaysVisibilty=function(e){var t=this;ae(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Je.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});ae(a,function(c){t.remove(c.id)});var o=t._getOverlayContainer(r);if(o){Oi(o.html);var u=t._overlayContainers.indexOf(o);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",dp,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(ae(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Hi(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function pp(e){var t=qt('<div class="djs-overlay-container" />');return vt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Zs(e,t,n){vt(e,{left:t+"px",top:n+"px"})}function Ki(e,t){e.style.display=t===!1?"none":""}function Js(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const eo={__init__:["overlays"],overlays:["type",Je]};function to(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(Gs(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}to.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const fp={__init__:["changeSupport"],changeSupport:["type",to]};var mp=1e3;function pt(e){this._eventBus=e}pt.$inject=["eventBus"];function hp(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}pt.prototype.on=function(e,t,n,i,r,a){if((rn(t)||on(t))&&(a=r,r=i,i=n,n=t,t=null),rn(n)&&(a=r,r=i,i=n,n=mp),sn(r)&&(a=r,r=!1),!rn(i))throw new Error("handlerFn must be a function");Pt(e)||(e=[e]);var o=this._eventBus;ae(e,function(u){var c=["commandStack",u,t].filter(function(v){return v}).join(".");o.on(c,n,r?hp(i,a):i,a)})};pt.prototype.canExecute=Jt("canExecute");pt.prototype.preExecute=Jt("preExecute");pt.prototype.preExecuted=Jt("preExecuted");pt.prototype.execute=Jt("execute");pt.prototype.executed=Jt("executed");pt.prototype.postExecute=Jt("postExecute");pt.prototype.postExecuted=Jt("postExecuted");pt.prototype.revert=Jt("revert");pt.prototype.reverted=Jt("reverted");function Jt(e){return function(n,i,r,a,o){(rn(n)||on(n))&&(o=a,a=r,r=i,i=n,n=null),this.on(n,e,i,r,a,o)}}function jr(e,t){t.invoke(pt,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}jt(jr,pt);jr.$inject=["canvas","injector"];const yp={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",jr]};var vp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function gp(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return vp[t]})}var bp="_plane";function zr(e){var t=e.id;return le(e,"bpmn:SubProcess")?_p(t):t}function _p(e){return e+bp}var wp="bjs-breadcrumbs-shown";function no(e,t,n){var i=qt('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),a=Hi(r);r.appendChild(i);var o=[];e.on("element.changed",function(c){var v=c.element,g=qe(v),x=Mt(o,function(m){return m===g});x&&u()});function u(c){c&&(o=Ep(c));var v=o.flatMap(function(x){var m=n.findRoot(zr(x))||n.findRoot(x.id);if(!m&&le(x,"bpmn:Process")){var V=t.find(function(te){var D=qe(te);return D&&D.get("processRef")===x});m=V&&n.findRoot(V.id)}if(!m)return[];var K=gp(x.name||x.id),z=qt('<li><span class="bjs-crumb"><a title="'+K+'">'+K+"</a></span></li>");return z.addEventListener("click",function(){n.setRootElement(m)}),z});i.innerHTML="";var g=v.length>1;a.toggle(wp,g),v.forEach(function(x){i.appendChild(x)})}e.on("root.set",function(c){u(c.element)})}no.$inject=["eventBus","elementRegistry","canvas"];function Ep(e){for(var t=qe(e),n=[],i=t;i;i=i.$parent)(le(i,"bpmn:SubProcess")||le(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function io(e,t){var n=null,i=new xp;e.on("root.set",function(r){var a=r.element,o=t.viewbox(),u=i.get(a);if(i.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=a,!(!le(a,"bpmn:SubProcess")&&!u)){u=u||{x:0,y:0,zoom:1};var c=(o.x-u.x)*o.scale,v=(o.y-u.y)*o.scale;(c!==0||v!==0)&&t.scroll({dx:c,dy:v}),u.zoom!==o.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}io.$inject=["eventBus","canvas"];function xp(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Ra={x:180,y:160};function Rn(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Rn.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Rn.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var o=a.bpmnElement;if(o){var u=o.$parent;le(o,"bpmn:SubProcess")&&!a.isExpanded&&n.push(o),kp(o,e)&&i.push({diElement:a,parent:u})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var o=t._createDiagram(a);t._processToDiagramMap[a.id]=o,r.push(o)}}),i.forEach(function(a){for(var o=a.diElement,u=a.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var c=t._processToDiagramMap[u.id];t._moveToDiPlane(o,c.plane)}}),r};Rn.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Sp(e),i={x:n.x-Ra.x,y:n.y-Ra.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Rn.prototype._moveToDiPlane=function(e,t){var n=ro(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Rn.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Rn.$inject=["eventBus","moddle"];function ro(e){return le(e,"bpmndi:BPMNDiagram")?e:ro(e.$parent)}function Sp(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Sr(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),tp(t)}function kp(e,t){var n=e.$parent;return!(!le(n,"bpmn:SubProcess")||n===t.bpmnElement||Mi(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Ei=250,Ap='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Tp="bjs-drilldown-empty";function mn(e,t,n,i,r){pt.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var a=this;this.executed("shape.toggleCollapse",Ei,function(o){var u=o.shape;a._canDrillDown(u)?a._addOverlay(u):a._removeOverlay(u)},!0),this.reverted("shape.toggleCollapse",Ei,function(o){var u=o.shape;a._canDrillDown(u)?a._addOverlay(u):a._removeOverlay(u)},!0),this.executed(["shape.create","shape.move","shape.delete"],Ei,function(o){var u=o.oldParent,c=o.newParent||o.parent,v=o.shape;a._canDrillDown(v)&&a._addOverlay(v),a._updateDrilldownOverlay(u),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(v)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Ei,function(o){var u=o.oldParent,c=o.newParent||o.parent,v=o.shape;a._canDrillDown(v)&&a._addOverlay(v),a._updateDrilldownOverlay(u),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(v)},!0),t.on("import.render.complete",function(){n.filter(function(o){return a._canDrillDown(o)}).map(function(o){a._addOverlay(o)})})}jt(mn,pt);mn.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};mn.prototype._canDrillDown=function(e){var t=this._canvas;return le(e,"bpmn:SubProcess")&&t.findRoot(zr(e))};mn.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=qe(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Hi(i.html).toggle(Tp,!r)}};mn.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=qe(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var a=qt('<button type="button" class="bjs-drilldown">'+Ap+"</button>"),o=i.get("name")||i.get("id"),u=this._translate("Open {element}",{element:o});a.setAttribute("title",u),a.addEventListener("click",function(){t.setRootElement(t.findRoot(zr(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:a}),this._updateOverlayVisibility(e)};mn.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};mn.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const Cp={__depends__:[eo,fp,yp],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",no],drilldownCentering:["type",io],drilldownOverlayBehavior:["type",mn],subprocessCompatibility:["type",Rn]};var Rp=500,Dp=1e3;function Dn(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a){var o=Ae("rect");return Se(o,de({x:0,y:0,rx:4,width:100,height:100},n)),o}e.on(["shape.added","shape.changed"],Rp,function(a){var o=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=i.getOutline(o)||r(),ze(u,c)),i.updateShapeOutline(c,o)}),e.on(["connection.added","connection.changed"],function(a){var o=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=r(),ze(u,c)),i.updateConnectionOutline(c,o)})}Dn.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&ae(i,function(r){n=n||r.updateOutline(t,e)}),n||Se(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Dn.prototype.updateConnectionOutline=function(e,t){var n=xn(t);Se(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Dn.prototype.registerProvider=function(e,t){t||(t=e,e=Dp),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Dn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Dn.prototype.getOutline=function(e){var t,n=this._getProviders();return ae(n,function(i){rn(i.getOutline)&&(t=t||i.getOutline(e))}),t};Dn.$inject=["eventBus","styles","elementRegistry"];const ao={__init__:["outline"],outline:["type",Dn]},Ip="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",Np="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",Pp={width:36,height:50},Mp={width:50,height:50};function Da(e,t,n){return Ae("path",{d:e,strokeWidth:2,transform:"translate(".concat(t.x,", ").concat(t.y,")"),...n})}const nn=5;function Gi(e,t){this._styles=t,e.registerProvider(this)}Gi.$inject=["outline","styles"];Gi.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!$s(e))return le(e,"bpmn:Gateway")?(n=Ae("rect"),de(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),Se(n,de({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Mi(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Ae("rect"),Se(n,de({x:-nn,y:-nn,rx:14,width:e.width+nn*2,height:e.height+nn*2},t))):le(e,"bpmn:EndEvent")?(n=Ae("circle"),Se(n,de({cx:e.width/2,cy:e.height/2,r:e.width/2+nn+1},t))):le(e,"bpmn:Event")?(n=Ae("circle"),Se(n,de({cx:e.width/2,cy:e.height/2,r:e.width/2+nn},t))):le(e,"bpmn:DataObjectReference")&&Ia(e,"bpmn:DataObjectReference")?n=Da(Ip,{x:-6,y:-6},t):le(e,"bpmn:DataStoreReference")&&Ia(e,"bpmn:DataStoreReference")&&(n=Da(Np,{x:-6,y:-6},t)),n};Gi.prototype.updateOutline=function(e,t){if(!$s(e))return Mi(e,["bpmn:SubProcess","bpmn:Group"])?(Se(t,{width:e.width+nn*2,height:e.height+nn*2}),!0):!!Mi(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function Ia(e,t){var n;return t==="bpmn:DataObjectReference"?n=Pp:t==="bpmn:DataStoreReference"&&(n=Mp),e.width===n.width&&e.height===n.height}const $p={__depends__:[ao],__init__:["outlineProvider"],outlineProvider:["type",Gi]};function so(e){return e.originalEvent||e.srcEvent}function oo(e,t){return(so(e)||e).button===t}function Qi(e){return oo(e,0)}function Vp(e){return oo(e,1)}function Lp(e){var t=so(e)||e;return Qi(e)&&t.shiftKey}function Bp(e){return!0}function xi(e){return Qi(e)||Vp(e)}var Na=500;function lo(e,t,n){var i=this;function r(R,M,P){if(!u(R,M)){var H,G,Z;P?G=t.getGraphics(P):(H=M.delegateTarget||M.target,H&&(G=H,P=t.get(G))),!(!G||!P)&&(Z=e.fire(R,{element:P,gfx:G,originalEvent:M}),Z===!1&&(M.stopPropagation(),M.preventDefault()))}}var a={};function o(R){return a[R]}function u(R,M){var P=v[R]||Qi;return!P(M)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},v={"element.contextmenu":Bp,"element.mousedown":xi,"element.mouseup":xi,"element.click":xi,"element.dblclick":xi};function g(R,M,P){var H=c[R];if(!H)throw new Error("unmapped DOM event name <"+R+">");return r(H,M,P)}var x="svg, .djs-element";function m(R,M,P,H){var G=a[P]=function(Z){r(P,Z)};H&&(v[P]=H),G.$delegate=xr.bind(R,x,M,G)}function V(R,M,P){var H=o(P);H&&xr.unbind(R,M,H.$delegate)}function K(R){ae(c,function(M,P){m(R,P,M)})}function z(R){ae(c,function(M,P){V(R,P,M)})}e.on("canvas.destroy",function(R){z(R.svg)}),e.on("canvas.init",function(R){K(R.svg)}),e.on(["shape.added","connection.added"],function(R){var M=R.element,P=R.gfx;e.fire("interactionEvents.createHit",{element:M,gfx:P})}),e.on(["shape.changed","connection.changed"],Na,function(R){var M=R.element,P=R.gfx;e.fire("interactionEvents.updateHit",{element:M,gfx:P})}),e.on("interactionEvents.createHit",Na,function(R){var M=R.element,P=R.gfx;i.createDefaultHit(M,P)}),e.on("interactionEvents.updateHit",function(R){var M=R.element,P=R.gfx;i.updateDefaultHit(M,P)});var te=k("djs-hit djs-hit-stroke"),D=k("djs-hit djs-hit-click-stroke"),X=k("djs-hit djs-hit-all"),L=k("djs-hit djs-hit-no-move"),b={all:X,"click-stroke":D,stroke:te,"no-move":L};function k(R,M){return M=de({stroke:"white",strokeWidth:15},M||{}),n.cls(R,["no-fill","no-border"],M)}function I(R,M){var P=b[M];if(!P)throw new Error("invalid hit type <"+M+">");return Se(R,P),R}function S(R,M){ze(R,M)}this.removeHits=function(R){var M=Sd(".djs-hit",R);ae(M,oi)},this.createDefaultHit=function(R,M){var P=R.waypoints,H=R.isFrame,G;return P?this.createWaypointsHit(M,P):(G=H?"stroke":"all",this.createBoxHit(M,G,{width:R.width,height:R.height}))},this.createWaypointsHit=function(R,M){var P=Ur(M);return I(P,"stroke"),S(R,P),P},this.createBoxHit=function(R,M,P){P=de({x:0,y:0},P);var H=Ae("rect");return I(H,M),Se(H,P),S(R,H),H},this.updateDefaultHit=function(R,M){var P=It(".djs-hit",M);if(P)return R.waypoints?Us(P,R.waypoints):Se(P,{width:R.width,height:R.height}),P},this.fire=r,this.triggerMouseEvent=g,this.mouseHandler=o,this.registerEvent=m,this.unregisterEvent=V}lo.$inject=["eventBus","elementRegistry","styles"];const Op={__init__:["interactionEvents"],interactionEvents:["type",lo]};function zn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}zn.$inject=["eventBus","canvas"];zn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};zn.prototype.get=function(){return this._selectedElements};zn.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};zn.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Pt(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(o){var u=r.findRoot(o);return a===u}),t?ae(e,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Pa="hover",Ma="selected",Si=6;function Wr(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(o,u){e.addMarker(o,u)}function a(o,u){e.removeMarker(o,u)}t.on("element.hover",function(o){r(o.element,Pa)}),t.on("element.out",function(o){a(o.element,Pa)}),t.on("selection.changed",function(o){function u(x){a(x,Ma)}function c(x){r(x,Ma)}var v=o.oldSelection,g=o.newSelection;ae(v,function(x){g.indexOf(x)===-1&&u(x)}),ae(g,function(x){v.indexOf(x)===-1&&c(x)}),i._updateSelectionOutline(g)}),t.on("element.changed",function(o){n.isSelected(o.element)&&i._updateSelectionOutline(n.get())})}Wr.$inject=["canvas","eventBus","selection"];Wr.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");qc(t);var n=e.length>1,i=this._canvas.getContainer();if(Tt(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=Up(xn(e)),a=Ae("rect");Se(a,de({rx:3},r)),Tt(a).add("djs-selection-outline"),ze(t,a)}};function Up(e){return{x:e.x-Si,y:e.y-Si,width:e.width+Si*2,height:e.height+Si*2}}function uo(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,o=a.canExecute,u=a.elements,c=a.hints||{},v=c.autoSelect;if(o){if(v===!1)return;Pt(v)?t.select(v):t.select(u.filter(Fp))}}),e.on("connect.end",500,function(r){var a=r.context,o=a.connection;o&&t.select(o)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],o=i.get(r.context.shape.id),u=Mt(a,function(c){return o.id===c.id});u||t.select(o)}),e.on("element.click",function(r){if(Qi(r)){var a=r.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),u=t.get().length>1,c=Lp(r);if(o&&u)return c?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,c)}})}uo.$inject=["eventBus","selection","canvas","elementRegistry"];function Fp(e){return!e.hidden}const qp={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Op,ao],selection:["type",zn],selectionVisuals:["type",Wr],selectionBehavior:["type",uo]},jp=/^class[ {]/;function zp(e){return jp.test(e.toString())}function Hr(e){return Array.isArray(e)}function fr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Di(...e){e.length===1&&Hr(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Wp=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Hp=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Yp=/\/\*([^*]*)\*\//m;function Kp(e){if(typeof e!="function")throw new Error('Cannot annotate "'.concat(e,'". Expected a function!'));const t=e.toString().match(zp(e)?Wp:Hp);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Yp);return(r&&r[1]||i).trim()})||[]}function co(e,t){const n=t||{get:function(L,b){if(i.push(L),b===!1)return null;throw u('No provider for "'.concat(L,'"!'))}},i=[],r=this._providers=Object.create(n._providers||null),a=this._instances=Object.create(null),o=a.injector=this,u=function(L){const b=i.join(" -> ");return i.length=0,new Error(b?"".concat(L," (Resolving: ").concat(b,")"):L)};function c(L,b){if(!r[L]&&L.includes(".")){const k=L.split(".");let I=c(k.shift());for(;k.length;)I=I[k.shift()];return I}if(fr(a,L))return a[L];if(fr(r,L)){if(i.indexOf(L)!==-1)throw i.push(L),u("Cannot resolve circular dependency!");return i.push(L),a[L]=r[L][0](r[L][1]),i.pop(),a[L]}return n.get(L,b)}function v(L,b){if(typeof b>"u"&&(b={}),typeof L!="function")if(Hr(L))L=Di(L.slice());else throw u('Cannot invoke "'.concat(L,'". Expected a function!'));const I=(L.$inject||Kp(L)).map(S=>fr(b,S)?b[S]:c(S));return{fn:L,dependencies:I}}function g(L){const{fn:b,dependencies:k}=v(L),I=Function.prototype.bind.call(b,null,...k);return new I}function x(L,b,k){const{fn:I,dependencies:S}=v(L,k);return I.apply(b,S)}function m(L){return Di(b=>L.get(b))}function V(L,b){if(b&&b.length){const k=Object.create(null),I=Object.create(null),S=[],R=[],M=[];let P,H,G,Z;for(let he in r)P=r[he],b.indexOf(he)!==-1&&(P[2]==="private"?(H=S.indexOf(P[3]),H===-1?(G=P[3].createChild([],b),Z=m(G),S.push(P[3]),R.push(G),M.push(Z),k[he]=[Z,he,"private",G]):k[he]=[M[H],he,"private",R[H]]):k[he]=[P[2],P[1]],I[he]=!0),(P[2]==="factory"||P[2]==="type")&&P[1].$scope&&b.forEach(pe=>{P[1].$scope.indexOf(pe)!==-1&&(k[he]=[P[2],P[1]],I[pe]=!0)});b.forEach(he=>{if(!I[he])throw new Error('No provider for "'+he+'". Cannot use provider from the parent!')}),L.unshift(k)}return new co(L,o)}const K={factory:x,type:g,value:function(L){return L}};function z(L,b){const k=L.__init__||[];return function(){k.forEach(I=>{typeof I=="string"?b.get(I):b.invoke(I)})}}function te(L){const b=L.__exports__;if(b){const k=L.__modules__,I=Object.keys(L).reduce((H,G)=>(G!=="__exports__"&&G!=="__modules__"&&G!=="__init__"&&G!=="__depends__"&&(H[G]=L[G]),H),Object.create(null)),S=(k||[]).concat(I),R=V(S),M=Di(function(H){return R.get(H)});b.forEach(function(H){r[H]=[M,H,"private",R]});const P=(L.__init__||[]).slice();return P.unshift(function(){R.init()}),L=Object.assign({},L,{__init__:P}),z(L,R)}return Object.keys(L).forEach(function(k){if(k==="__init__"||k==="__depends__")return;const I=L[k];if(I[2]==="private"){r[k]=I;return}const S=I[0],R=I[1];r[k]=[K[S],Gp(S,R),S]}),z(L,o)}function D(L,b){return L.indexOf(b)!==-1||(L=(b.__depends__||[]).reduce(D,L),L.indexOf(b)!==-1)?L:L.concat(b)}function X(L){const b=L.reduce(D,[]).map(te);let k=!1;return function(){k||(k=!0,b.forEach(I=>I()))}}this.get=c,this.invoke=x,this.instantiate=g,this.createChild=V,this.init=X(e)}function Gp(e,t){return e!=="value"&&Hr(t)&&(t=Di(t.slice())),t}var Qp=1;function hn(e,t){Xt.call(this,e,Qp),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}jt(hn,Xt);hn.prototype.canRender=function(){return!0};hn.prototype.drawShape=function(t,n,i){var r=Ae("rect");return Se(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Qs(n)?Se(r,de({},this.FRAME_STYLE,i||{})):Se(r,de({},this.SHAPE_STYLE,i||{})),ze(t,r),r};hn.prototype.drawConnection=function(t,n,i){var r=Ur(n.waypoints,de({},this.CONNECTION_STYLE,i||{}));return ze(t,r),r};hn.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,o=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return Tn(o)};hn.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return Tn(a)};hn.$inject=["eventBus","styles"];function Xp(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return de(a,{class:n})},this.style=function(n,i){!Pt(n)&&!i&&(i=n,n=[]);var r=Un(n,function(a,o){return de(a,e[o]||{})},{});return i?de(r,i):r},this.computeStyle=function(n,i,r){return Pt(i)||(r=i,i=[]),t.style(i||[],de({},r,n||{}))}}const Zp={__init__:["defaultRenderer"],defaultRenderer:["type",hn],styles:["type",Xp]};function Jp(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function ef(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Ii(e,t){return Math.round(e*t)/t}function $a(e){return on(e)?e+"px":e}function tf(e){for(;e.parent;)e=e.parent;return e}function nf(e){e=de({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),vt(n,{position:"relative",overflow:"hidden",width:$a(e.width),height:$a(e.height)}),t.appendChild(n),n}function po(e,t,n){const i=Ae("g");Tt(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const rf="base",fo=0,af=1,sf={shape:["x","y","width","height"],connection:["waypoints"]};function be(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}be.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];be.prototype._init=function(e){const t=this._eventBus,n=this._container=nf(e),i=this._svg=Ae("svg");Se(i,{width:"100%",height:"100%"}),ze(n,i);const r=this._viewport=po(i,"viewport");e.deferUpdate&&(this._viewboxChanged=xc(ln(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};be.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};be.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=Gs(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};be.prototype.getDefaultLayer=function(){return this.getLayer(rf,fo)};be.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};be.prototype._getChildIndex=function(e){return Un(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};be.prototype._createLayer=function(e,t){typeof t>"u"&&(t=af);const n=this._getChildIndex(t);return{group:po(this._viewport,"layer-"+e,n),index:t,visible:!0}};be.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};be.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(oi(n),t.visible=!1),n};be.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],oi(t.group))};be.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};be.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(tf(e))||{}).rootElement:void 0};be.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};be.prototype._findPlaneForRoot=function(e){return Mt(this._planes,function(t){return t.rootElement===e})};be.prototype.getContainer=function(){return this._container};be.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(ae([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Tt(r).add(t)):(e.markers.delete(t),Tt(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};be.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};be.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};be.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};be.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};be.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};be.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,fo);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};be.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};be.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};be.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};be.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};be.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};be.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=sf[e];if(!Ps(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};be.prototype._setParent=function(e,t,n){ef(t.children,e,n),e.parent=t};be.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const o=a.create(e,t,i);return this._elementRegistry.add(t,o),a.update(e,t,o),r.fire(e+".added",{element:t,gfx:o}),t};be.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};be.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};be.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Jp(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};be.prototype.removeShape=function(e){return this._removeElement(e,"shape")};be.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};be.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};be.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};be.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};be.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,a,o,u,c,v;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);const g=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);ii(t,g)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},o=ii(t),r=o?o.matrix:Wc(),u=Ii(r.a,1e3),c=Ii(-r.e||0,1e3),v=Ii(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/u:0,y:v?v/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};be.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=de({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),mo(t,n)}),{x:n.e,y:n.f}};be.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=xn(e),a=Sr(r),o=this.viewbox(),u=this.zoom();let c,v;o.y+=t.top/u,o.x+=t.left/u,o.width-=(t.right+t.left)/u,o.height-=(t.bottom+t.top)/u;const g=Sr(o);if(!(r.width<o.width&&r.height<o.height))c=r.x-o.x,v=r.y-o.y;else{const m=Math.max(0,a.right-g.right),V=Math.min(0,a.left-g.left),K=Math.max(0,a.bottom-g.bottom),z=Math.min(0,a.top-g.top);c=m||V,v=K||z}this.scroll({dx:-c*u,dy:-v*u})};be.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Ii(i.a,1e3)};function mo(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}be.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};be.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let o,u,c,v,g;c=i.getCTM();const x=c.a;return t?(o=de(a,t),u=o.matrixTransform(c.inverse()),v=r.translate(u.x,u.y).scale(1/x*e).translate(-u.x,-u.y),g=c.multiply(v)):g=r.scale(e),mo(this._viewport,g),g};be.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};be.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,o=n.height*t.scale;return{x:i,y:r,width:a,height:o}};be.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Fn="data-element-id";function wt(e){this._elements={},this._eventBus=e}wt.$inject=["eventBus"];wt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),Se(t,Fn,i),n&&Se(n,Fn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};wt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(Se(i.gfx,Fn,""),i.secondaryGfx&&Se(i.secondaryGfx,Fn,""),delete t[n])};wt.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};wt.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&Se(t,Fn,i),t};wt.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&Se(e,Fn);var n=this._elements[t];return n&&n.element};wt.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};wt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],o=a.element,u=a.gfx;if(e(o,u))return o}};wt.prototype.getAll=function(){return this.filter(function(e){return e})};wt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};wt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};wt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function of(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var u=this.indexOf(a);if(typeof o>"u"){if(u!==-1)return;o=this.length}u!==-1&&this.splice(u,1),this.splice(o,0,a),u===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function lf(e){return e.__refs_collection===!0}function uf(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function ho(e,t,n){var i=of(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function cf(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var o=r;r=null,o&&e.unset(o,i,n),r=a,e.set(r,i,n)}}})}function Ct(e,t){if(!(this instanceof Ct))return new Ct(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ct.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?ho(this,t,e):cf(this,t,e)};Ct.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return lf(n)||ho(this,t,e),n};Ct.prototype.ensureBound=function(e,t){uf(e,t)||this.bind(e,t)};Ct.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Ct.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Yr=new Ct({name:"children",enumerable:!0,collection:!0},{name:"parent"}),yo=new Ct({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Va=new Ct({name:"attachers",collection:!0},{name:"host"}),vo=new Ct({name:"outgoing",collection:!0},{name:"source"}),go=new Ct({name:"incoming",collection:!0},{name:"target"});function li(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Yr.bind(this,"parent"),yo.bind(this,"labels"),vo.bind(this,"outgoing"),go.bind(this,"incoming")}function ui(){li.call(this),Yr.bind(this,"children"),Va.bind(this,"host"),Va.bind(this,"attachers")}jt(ui,li);function bo(){li.call(this),Yr.bind(this,"children")}jt(bo,ui);function _o(){ui.call(this),yo.bind(this,"labelTarget")}jt(_o,ui);function wo(){li.call(this),vo.bind(this,"source"),go.bind(this,"target")}jt(wo,li);var df={connection:wo,shape:ui,label:_o,root:bo};function pf(e,t){var n=df[e];if(!n)throw new Error("unknown type: <"+e+">");return de(new n,t)}function Wn(){this._uid=12}Wn.prototype.createRoot=function(e){return this.create("root",e)};Wn.prototype.createLabel=function(e){return this.create("label",e)};Wn.prototype.createShape=function(e){return this.create("shape",e)};Wn.prototype.createConnection=function(e){return this.create("connection",e)};Wn.prototype.create=function(e,t){return t=de({},t||{}),t.id||(t.id=e+"_"+this._uid++),pf(e,t)};var Ui="__fn",Eo=1e3,ff=Array.prototype.slice;function gt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}gt.prototype.on=function(e,t,n,i){if(e=Pt(e)?e:[e],rn(t)&&(i=n,n=t,t=Eo),!on(t))throw new Error("priority must be a number");var r=n;i&&(r=ln(n,i),r[Ui]=n[Ui]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:r,next:null})})};gt.prototype.once=function(e,t,n,i){var r=this;if(rn(t)&&(i=n,n=t,t=Eo),!on(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(i,arguments);return r.off(e,a),o}a[Ui]=n,this.on(e,t,a)};gt.prototype.off=function(e,t){e=Pt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};gt.prototype.createEvent=function(e){var t=new ci;return t.init(e),t};gt.prototype.fire=function(e,t){var n,i,r,a;if(a=ff.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof ci?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==o&&(n.type=o)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};gt.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};gt.prototype._destroy=function(){this._listeners={}};gt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};gt.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=mf(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};gt.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};gt.prototype._getListeners=function(e){return this._listeners[e]};gt.prototype._setListeners=function(e,t){this._listeners[e]=t};gt.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[Ui]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function ci(){}ci.prototype.stopPropagation=function(){this.cancelBubble=!0};ci.prototype.preventDefault=function(){this.defaultPrevented=!0};ci.prototype.init=function(e){de(this,e||{})};function mf(e,t){return e.apply(null,t)}function hf(e){return e.childNodes[0]}function yf(e){return e.parentNode.childNodes[1]}function Et(e,t){this._eventBus=e,this._elementRegistry=t}Et.$inject=["eventBus","elementRegistry"];Et.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=yf(t),n||(n=Ae("g"),Tt(n).add("djs-children"),ze(t.parentNode,n))):n=t,n};Et.prototype._clear=function(e){var t=hf(e);return Fs(t),t};Et.prototype._createContainer=function(e,t,n,i){var r=Ae("g");Tt(r).add("djs-group"),typeof n<"u"?xo(r,t,t.childNodes[n]):ze(t,r);var a=Ae("g");Tt(a).add("djs-element"),Tt(a).add("djs-"+e),i&&Tt(a).add("djs-frame"),ze(r,a);var o=Ae("g");return Tt(o).add("djs-visual"),ze(a,o),a};Et.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Qs(t))};Et.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Un(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),ae(i,function(r){var a=r.children;if(a){var o=t._getChildrenContainer(r);ae(a.slice().reverse(),function(u){var c=n.getGraphics(u);xo(c.parentNode,o)})}})};Et.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};Et.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Et.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};Et.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Et.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Ws(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?Se(n,"display","none"):Se(n,"display","block")}};Et.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);oi(t.parentNode)};function xo(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const vf={__depends__:[Zp],__init__:["canvas"],canvas:["type",be],elementRegistry:["type",wt],elementFactory:["type",Wn],eventBus:["type",gt],graphicsFactory:["type",Et]};function gf(e){var t=new co(e);return t.init(),t}function bf(e){e=e||{};var t={config:["value",e]},n=[t,vf].concat(e.modules||[]);return gf(n)}function yn(e,t){this._injector=t||bf(e),this.get("eventBus").fire("diagram.init")}yn.prototype.get=function(e,t){return this._injector.get(e,t)};yn.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};yn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};yn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Kr(){}Kr.prototype.get=function(e){return this.$model.properties.get(this,e)};Kr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function So(e,t){this.model=e,this.properties=t}So.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Kr.prototype);ae(e.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(o){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ae(o,ln(function(u,c){this.set(c,u)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var _f={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},ko={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Gr(e,t){var n=ko[e];return n?n(t):t}function Ar(e){return!!_f[e]}function Ao(e){return!!ko[e]}function ut(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function xt(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}xt.prototype.build=function(){return kc(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};xt.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};xt.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=r.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(u,1),this.addProperty(t,n?void 0:u,o),a[i.name]=a[i.localName]=t};xt.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=ut(r[0],i),o=ut(r[1],a.prefix).name,u=this.propertiesByName[o];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};xt.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};xt.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};xt.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};xt.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};xt.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error("cannot create <".concat(e.name,"> extending <").concat(e.extends,">"))};xt.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};xt.prototype.hasProperty=function(e){return this.propertiesByName[e]};xt.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ae(e.properties,ln(function(a){a=de({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,u=a.redefines;o||u?this.redefineProperty(a,o||u,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function vn(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ae(e,ln(this.registerPackage,this))}vn.prototype.getPackage=function(e){return this.packageMap[e]};vn.prototype.getPackages=function(){return this.packages};vn.prototype.registerPackage=function(e){e=de({},e);var t=this.packageMap;La(t,e,"prefix"),La(t,e,"uri"),ae(e.types,ln(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};vn.prototype.registerType=function(e,t){e=de({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:de(e.meta||{})});var n=ut(e.name,t.prefix),i=n.name,r={};ae(e.properties,ln(function(a){var o=ut(a.name,n.prefix),u=o.name;Ar(a.type)||(a.type=ut(a.type,o.prefix).name),de(a,{ns:o,name:u}),r[u]=a},this)),de(e,{ns:n,name:i,propertiesByName:r}),ae(e.extends,ln(function(a){var o=ut(a,n.prefix),u=this.typeMap[o.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};vn.prototype.mapTypes=function(e,t,n){var i=Ar(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(c,v){var g=ut(c,Ar(c)?"":e.prefix);r.mapTypes(g,t,v)}function o(c){return a(c,!0)}function u(c){return a(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ae(i.superClass,n?o:u),t(i,!n),ae(i.traits,o)};vn.prototype.getEffectiveDescriptor=function(e){var t=ut(e),n=new xt(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};vn.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function La(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function In(e){this.model=e}In.prototype.set=function(e,t,n){if(!Ft(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;wf(n)?i?delete e[r]:delete e.$attrs[Tr(t)]:i?r in e?e[r]=n:To(e,i,n):e.$attrs[Tr(t)]=n};In.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Tr(t)];var i=n.name;return!e[i]&&n.isMany&&To(e,n,[]),e[i]};In.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=de({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};In.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};In.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};In.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError("unknown property <".concat(t,"> on <").concat(e.$type,">"));if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function wf(e){return typeof e>"u"}function To(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Tr(e){return e.replace(/^:/,"")}function Rt(e,t={}){this.properties=new In(this),this.factory=new So(this,this.properties),this.registry=new vn(e,this.properties),this.typeCache={},this.config=t}Rt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Rt.prototype.getType=function(e){var t=this.typeCache,n=Ft(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Rt.prototype.createAny=function(e,t,n){var i=ut(e),r={$type:e,$instanceOf:function(o){return o===this.$type},get:function(o){return this[o]},set:function(o,u){Sc(this,[o],u)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ae(n,function(o,u){sn(o)&&o.value!==void 0?r[o.name]=o.value:r[u]=o}),r};Rt.prototype.getPackage=function(e){return this.registry.getPackage(e)};Rt.prototype.getPackages=function(){return this.registry.getPackages()};Rt.prototype.getElementDescriptor=function(e){return e.$descriptor};Rt.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Rt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Rt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Ba=String.fromCharCode,Ef=Object.prototype.hasOwnProperty,xf=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,ti={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(ti).forEach(function(e){ti[e.toUpperCase()]=ti[e]});function Sf(e,t,n,i){return i?Ef.call(ti,i)?ti[i]:"&"+i+";":Ba(t||parseInt(n,16))}function bn(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(xf,Sf):e}var kf="http://www.w3.org/2001/XMLSchema-instance",Af="xsi",Oa="xsi:type",Ua="non-whitespace outside of root node";function Vn(e){return new Error(e)}function Fa(e){return"missing namespace for prefix <"+e+">"}function ki(e){return{get:e,enumerable:!0}}function Tf(e){var t={},n;for(n in e)t[n]=e[n];return t}function Cr(e){return e+"$uri"}function Cf(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Cr(i)]=n;return t}function qa(){return{line:0,column:0}}function Rf(e){throw e}function Co(e){if(!this)return new Co(e);var t=e&&e.proxy,n,i,r,a,o=Rf,u,c,v,g,x=qa,m=!1,V=!1,K=null,z=!1,te;function D(b){b instanceof Error||(b=Vn(b)),K=b,o(b,x)}function X(b){u&&(b instanceof Error||(b=Vn(b)),u(b,x))}this.on=function(b,k){if(typeof k!="function")throw Vn("required args <name, cb>");switch(b){case"openTag":i=k;break;case"text":n=k;break;case"closeTag":r=k;break;case"error":o=k;break;case"warn":u=k;break;case"cdata":a=k;break;case"attention":g=k;break;case"question":v=k;break;case"comment":c=k;break;default:throw Vn("unsupported event: "+b)}return this},this.ns=function(b){if(typeof b>"u"&&(b={}),typeof b!="object")throw Vn("required args <nsMap={}>");var k={},I;for(I in b)k[I]=b[I];return k[kf]=Af,V=!0,te=k,this},this.parse=function(b){if(typeof b!="string")throw Vn("required args <xml=string>");return K=null,L(b),x=qa,z=!1,K},this.stop=function(){z=!0};function L(b){var k=V?[]:null,I=V?Cf(te):null,S,R=[],M=0,P=!1,H=!1,G=0,Z=0,he,pe,se,me,at,He,Ie,je,U,O="",J=0,ke;function f(){if(ke!==null)return ke;var l,y,_,B=V&&I.xmlns,re=V&&m?[]:null,ne=J,ye=O,Be=ye.length,lt,et,Te,tt,xe,St={},$t={},Qe,oe,h;e:for(;ne<Be;ne++)if(Qe=!1,oe=ye.charCodeAt(ne),!(oe===32||oe<14&&oe>8)){for((oe<65||oe>122||oe>90&&oe<97)&&oe!==95&&oe!==58&&(X("illegal first char attribute name"),Qe=!0),h=ne+1;h<Be;h++)if(oe=ye.charCodeAt(h),!(oe>96&&oe<123||oe>64&&oe<91||oe>47&&oe<59||oe===46||oe===45||oe===95)){if(oe===32||oe<14&&oe>8){X("missing attribute value"),ne=h;continue e}if(oe===61)break;X("illegal attribute name char"),Qe=!0}if(xe=ye.substring(ne,h),xe==="xmlns:xmlns"&&(X("illegal declaration of xmlns"),Qe=!0),oe=ye.charCodeAt(h+1),oe===34)h=ye.indexOf('"',ne=h+2),h===-1&&(h=ye.indexOf("'",ne),h!==-1&&(X("attribute value quote missmatch"),Qe=!0));else if(oe===39)h=ye.indexOf("'",ne=h+2),h===-1&&(h=ye.indexOf('"',ne),h!==-1&&(X("attribute value quote missmatch"),Qe=!0));else for(X("missing attribute value quotes"),Qe=!0,h=h+1;h<Be&&(oe=ye.charCodeAt(h+1),!(oe===32||oe<14&&oe>8));h++);for(h===-1&&(X("missing closing quotes"),h=Be,Qe=!0),Qe||(Te=ye.substring(ne,h)),ne=h;h+1<Be&&(oe=ye.charCodeAt(h+1),!(oe===32||oe<14&&oe>8));h++)ne===h&&(X("illegal character after attribute end"),Qe=!0);if(ne=h+1,Qe)continue e;if(xe in $t){X("attribute <"+xe+"> already defined");continue}if($t[xe]=!0,!V){St[xe]=Te;continue}if(m){if(et=xe==="xmlns"?"xmlns":xe.charCodeAt(0)===120&&xe.substr(0,6)==="xmlns:"?xe.substr(6):null,et!==null){if(l=bn(Te),y=Cr(et),tt=te[l],!tt){if(et==="xmlns"||y in I&&I[y]!==l)do tt="ns"+M++;while(typeof I[tt]<"u");else tt=et;te[l]=tt}I[et]!==tt&&(lt||(I=Tf(I),lt=!0),I[et]=tt,et==="xmlns"&&(I[Cr(tt)]=l,B=tt),I[y]=l),St[xe]=Te;continue}re.push(xe,Te);continue}if(oe=xe.indexOf(":"),oe===-1){St[xe]=Te;continue}if(!(_=I[xe.substring(0,oe)])){X(Fa(xe.substring(0,oe)));continue}xe=B===_?xe.substr(oe+1):_+xe.substr(oe),xe===Oa&&(oe=Te.indexOf(":"),oe!==-1?(_=Te.substring(0,oe),_=I[_]||_,Te=_+Te.substring(oe)):Te=B+":"+Te),St[xe]=Te}if(m)for(ne=0,Be=re.length;ne<Be;ne++){if(xe=re[ne++],Te=re[ne],oe=xe.indexOf(":"),oe!==-1){if(!(_=I[xe.substring(0,oe)])){X(Fa(xe.substring(0,oe)));continue}xe=B===_?xe.substr(oe+1):_+xe.substr(oe),xe===Oa&&(oe=Te.indexOf(":"),oe!==-1?(_=Te.substring(0,oe),_=I[_]||_,Te=_+Te.substring(oe)):Te=B+":"+Te)}St[xe]=Te}return ke=St}function s(){for(var l=/(\r\n|\r|\n)/g,y=0,_=0,B=0,re=Z,ne,ye;G>=B&&(ne=l.exec(b),!(!ne||(re=ne[0].length+ne.index,re>G)));)y+=1,B=re;return G==-1?(_=re,ye=b.substring(Z)):Z===0?ye=b.substring(Z,G):(_=G-B,ye=Z==-1?b.substring(G):b.substring(G,Z+1)),{data:ye,line:y,column:_}}for(x=s,t&&(U=Object.create({},{name:ki(function(){return Ie}),originalName:ki(function(){return je}),attrs:ki(f),ns:ki(function(){return I})}));Z!==-1;){if(b.charCodeAt(Z)===60?G=Z:G=b.indexOf("<",Z),G===-1){if(R.length)return D("unexpected end of file");if(Z===0)return D("missing start tag");Z<b.length&&b.substring(Z).trim()&&X(Ua);return}if(Z!==G){if(R.length){if(n&&(n(b.substring(Z,G),bn,x),z))return}else if(b.substring(Z,G).trim()&&(X(Ua),z))return}if(me=b.charCodeAt(G+1),me===33){if(se=b.charCodeAt(G+2),se===91&&b.substr(G+3,6)==="CDATA["){if(Z=b.indexOf("]]>",G),Z===-1)return D("unclosed cdata");if(a&&(a(b.substring(G+9,Z),x),z))return;Z+=3;continue}if(se===45&&b.charCodeAt(G+3)===45){if(Z=b.indexOf("-->",G),Z===-1)return D("unclosed comment");if(c&&(c(b.substring(G+4,Z),bn,x),z))return;Z+=3;continue}}if(me===63){if(Z=b.indexOf("?>",G),Z===-1)return D("unclosed question");if(v&&(v(b.substring(G,Z+2),x),z))return;Z+=2;continue}for(he=G+1;;he++){if(at=b.charCodeAt(he),isNaN(at))return Z=-1,D("unclosed tag");if(at===34)se=b.indexOf('"',he+1),he=se!==-1?se:he;else if(at===39)se=b.indexOf("'",he+1),he=se!==-1?se:he;else if(at===62){Z=he;break}}if(me===33){if(g&&(g(b.substring(G,Z+1),bn,x),z))return;Z+=1;continue}if(ke={},me===47){if(P=!1,H=!0,!R.length)return D("missing open tag");if(he=Ie=R.pop(),se=G+2+he.length,b.substring(G+2,se)!==he)return D("closing tag mismatch");for(;se<Z;se++)if(me=b.charCodeAt(se),!(me===32||me>8&&me<14))return D("close tag")}else{if(b.charCodeAt(Z-1)===47?(he=Ie=b.substring(G+1,Z-1),P=!0,H=!0):(he=Ie=b.substring(G+1,Z),P=!0,H=!1),!(me>96&&me<123||me>64&&me<91||me===95||me===58))return D("illegal first char nodeName");for(se=1,pe=he.length;se<pe;se++)if(me=he.charCodeAt(se),!(me>96&&me<123||me>64&&me<91||me>47&&me<59||me===45||me===95||me==46)){if(me===32||me<14&&me>8){Ie=he.substring(0,se),ke=null;break}return D("invalid nodeName")}H||R.push(Ie)}if(V){if(S=I,P&&(H||k.push(S),ke===null&&(m=he.indexOf("xmlns",se)!==-1)&&(J=se,O=he,f(),m=!1)),je=Ie,me=Ie.indexOf(":"),me!==-1){if(He=I[Ie.substring(0,me)],!He)return D("missing namespace on <"+je+">");Ie=Ie.substr(me+1)}else He=I.xmlns;He&&(Ie=He+":"+Ie)}if(P&&(J=se,O=he,i&&(t?i(U,bn,H,x):i(Ie,f,bn,H,x),z)))return;if(H){if(r&&(r(t?U:Ie,bn,P,x),z))return;V&&(P?I=S:I=k.pop())}Z+=1}}}function Ro(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Df={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Xi="xsi:type";function Do(e){return e.xml&&e.xml.serialize}function Io(e){return Do(e)===Xi}function If(e){return Do(e)==="property"}function Nf(e){return e.charAt(0).toUpperCase()+e.slice(1)}function No(e,t){return Ro(t)?e.prefix+":"+Nf(e.localName):e.name}function Pf(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function Mf(e,t){var n=ut(e),i=t.getPackage(n.prefix);return Pf(n,i)}function dn(e){return new Error(e)}function Yt(e){return e.$descriptor}function $f(e){de(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw dn("expected element");var n=this.elementsById,i=Yt(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw dn("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function di(){}di.prototype.handleEnd=function(){};di.prototype.handleText=function(){};di.prototype.handleNode=function(){};function Qr(){}Qr.prototype=Object.create(di.prototype);Qr.prototype.handleNode=function(){return this};function Hn(){}Hn.prototype=Object.create(di.prototype);Hn.prototype.handleText=function(e){this.body=(this.body||"")+e};function pi(e,t){this.property=e,this.context=t}pi.prototype=Object.create(Hn.prototype);pi.prototype.handleNode=function(e){if(this.element)throw dn("expected no sub nodes");return this.element=this.createReference(e),this};pi.prototype.handleEnd=function(){this.element.id=this.body};pi.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Xr(e,t){this.element=t,this.propertyDesc=e}Xr.prototype=Object.create(Hn.prototype);Xr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Gr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Zi(){}Zi.prototype=Object.create(Hn.prototype);Zi.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function ct(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}ct.prototype=Object.create(Zi.prototype);ct.prototype.addReference=function(e){this.context.addReference(e)};ct.prototype.handleText=function(e){var t=this.element,n=Yt(t),i=n.bodyProperty;if(!i)throw dn("unexpected body text <"+e+">");Hn.prototype.handleText.call(this,e)};ct.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Yt(t),i=n.bodyProperty;i&&e!==void 0&&(e=Gr(i.type,e),t.set(i.name,e))};ct.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Yt(n),r=this.context,a=new n({}),o=this.model,u;return ae(t,function(c,v){var g=i.propertiesByName[v],x;g&&g.isReference?g.isMany?(x=c.split(" "),ae(x,function(m){r.addReference({element:a,property:g.ns.name,id:m})})):r.addReference({element:a,property:g.ns.name,id:c}):(g?c=Gr(g.type,c):v!=="xmlns"&&(u=ut(v,i.ns.prefix),o.getPackage(u.prefix)&&r.addWarning({message:"unknown attribute <"+v+">",element:a,property:v,value:c})),a.set(v,c))}),a};ct.prototype.getPropertyForNode=function(e){var t=e.name,n=ut(t),i=this.type,r=this.model,a=Yt(i),o=n.name,u=a.propertiesByName[o],c,v;if(u&&!u.isAttr)return Io(u)&&(c=e.attributes[Xi],c)?(c=Mf(c,r),v=r.getType(c),de({},u,{effectiveType:Yt(v).name})):u;var g=r.getPackage(n.prefix);if(g){if(c=No(n,g),v=r.getType(c),u=Mt(a.properties,function(x){return!x.isVirtual&&!x.isReference&&!x.isAttribute&&v.hasType(x.type)}),u)return de({},u,{effectiveType:Yt(v).name})}else if(u=Mt(a.properties,function(x){return!x.isReference&&!x.isAttribute&&x.type==="Element"}),u)return u;throw dn("unrecognized element <"+n.name+">")};ct.prototype.toString=function(){return"ElementDescriptor["+Yt(this.type).name+"]"};ct.prototype.valueHandler=function(e,t){return new Xr(e,t)};ct.prototype.referenceHandler=function(e){return new pi(e,this.context)};ct.prototype.handler=function(e){return e==="Element"?new qn(this.model,e,this.context):new ct(this.model,e,this.context)};ct.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Ao(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(de(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function Zr(e,t,n){ct.call(this,e,t,n)}Zr.prototype=Object.create(ct.prototype);Zr.prototype.createElement=function(e){var t=e.name,n=ut(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),o=a&&No(n,a)||t;if(!r.hasType(o))throw dn("unexpected element <"+e.originalName+">");return ct.prototype.createElement.call(this,e)};function qn(e,t,n){this.model=e,this.context=n}qn.prototype=Object.create(Zi.prototype);qn.prototype.createElement=function(e){var t=e.name,n=ut(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};qn.prototype.handleChild=function(e){var t=new qn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};qn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Jr(e){e instanceof Rt&&(e={model:e}),de(this,{lax:!1},e)}Jr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof ct?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,o=new $f(de({},t,{rootHandler:i})),u=new Co({proxy:!0}),c=Vf();i.context=o,c.push(i);function v(k,I,S){var R=I(),M=R.line,P=R.column,H=R.data;H.charAt(0)==="<"&&H.indexOf(" ")!==-1&&(H=H.slice(0,H.indexOf(" "))+">");var G="unparsable content "+(H?H+" ":"")+"detected\n	line: "+M+"\n	column: "+P+"\n	nested error: "+k.message;if(S)return o.addWarning({message:G,error:k}),!0;throw dn(G)}function g(k,I){return v(k,I,!0)}function x(){var k=o.elementsById,I=o.references,S,R;for(S=0;R=I[S];S++){var M=R.element,P=k[R.id],H=Yt(M).propertiesByName[R.property];if(P||o.addWarning({message:"unresolved reference <"+R.id+">",element:R.element,property:R.property,value:R.id}),H.isMany){var G=M.get(H.name),Z=G.indexOf(R);Z===-1&&(Z=G.length),P?G[Z]=P:G.splice(Z,1)}else M.set(H.name,P)}}function m(){c.pop().handleEnd()}var V=/^<\?xml /i,K=/ encoding="([^"]+)"/i,z=/^utf-8$/i;function te(k){if(V.test(k)){var I=K.exec(k),S=I&&I[1];!S||z.test(S)||o.addWarning({message:"unsupported document encoding <"+S+">, falling back to UTF-8"})}}function D(k,I){var S=c.peek();try{c.push(S.handleNode(k))}catch(R){v(R,I,a)&&c.push(new Qr)}}function X(k,I){try{c.peek().handleText(k)}catch(S){g(S,I)}}function L(k,I){k.trim()&&X(k,I)}var b=r.getPackages().reduce(function(k,I){return k[I.uri]=I.prefix,k},{"http://www.w3.org/XML/1998/namespace":"xml"});return u.ns(b).on("openTag",function(k,I,S,R){var M=k.attrs||{},P=Object.keys(M).reduce(function(G,Z){var he=I(M[Z]);return G[Z]=he,G},{}),H={name:k.name,originalName:k.originalName,attributes:P,ns:k.ns};D(H,R)}).on("question",te).on("closeTag",m).on("cdata",X).on("text",function(k,I,S){L(I(k),S)}).on("error",v).on("warn",g),new Promise(function(k,I){var S;try{u.parse(e),x()}catch(G){S=G}var R=i.element;!S&&!R&&(S=dn("failed to parse document as <"+i.type.$descriptor.name+">"));var M=o.warnings,P=o.references,H=o.elementsById;return S?(S.warnings=M,I(S)):k({rootElement:R,elementsById:H,references:P,warnings:M})})};Jr.prototype.handler=function(e){return new Zr(this.model,e)};function Vf(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Lf='<?xml version="1.0" encoding="UTF-8"?>\n',Bf=/<|>|'|"|&|\n\r|\n/g,Po=/<|>|&/g;function Of(e){var t={},n={},i={},r=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,u){n[o.uri]=o,u?r.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,u){t[o||"xmlns"]=u},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var u=o.uri,c=this.getNSKey(o);i[c]=this.byUri(u),e&&e.logUsed(o)},this.getUsed=function(o){function u(g){var x=c.getNSKey(g);return i[x]}var c=this,v=[].concat(r,a);return v.filter(u)}}function Uf(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Ff(e,t){return Ro(t)?Uf(e):e}function Mo(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function $o(e){return Ft(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function qf(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function jf(e,t){return t.isGeneric?de({localName:t.ns.localName},e):de({localName:Ff(t.ns.localName,t.$pkg)},e)}function zf(e,t){return de({localName:t.ns.localName},e)}function Wf(e){var t=e.$descriptor;return On(t.properties,function(n){var i=n.name;if(n.isVirtual||!An(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var Hf={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Yf={"<":"lt",">":"gt","&":"amp"};function Vo(e,t,n){return e=Ft(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function Kf(e){return Vo(e,Bf,Hf)}function Gf(e){return Vo(e,Po,Yf)}function Qf(e){return On(e,function(t){return t.isAttr})}function Xf(e){return On(e,function(t){return!t.isAttr})}function ea(e){this.tagName=e}ea.prototype.build=function(e){return this.element=e,this};ea.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Sn(){}Sn.prototype.serializeValue=Sn.prototype.serializeTo=function(e){e.append(this.escape?Gf(this.value):this.value)};Sn.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Po)!==-1&&(this.escape=!0),this};function ta(e){this.tagName=e}Mo(ta,Sn);ta.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Le(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Le.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=Wf(e),this.parseAttributes(Qf(r)),this.parseContainments(Xf(r))),this.parseGenericAttributes(e,i),this};Le.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return jf(t,e)};Le.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return zf(t,e)};Le.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Le.prototype.nsAttributeName=function(e){var t;if(Ft(e)?t=ut(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:de({localName:t.localName},n)};Le.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ae(e,function(r,a){var o;a==="$body"?n.push(new Sn().build({type:"String"},r)):a==="$children"?ae(r,function(u){n.push(new Le(t).build(u))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,r),o&&i.push({name:a,value:r}))}),i};Le.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=ut(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};Le.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ae(i,function(a,o){var u=n.parseNsAttribute(e,o,a);u&&r.push(u)}),r};Le.prototype.parseGenericAttributes=function(e,t){var n=this;ae(t,function(i){if(i.name!==Xi)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Le.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ae(e,function(r){var a=i.get(r.name),o=r.isReference,u=r.isMany;if(u||(a=[a]),r.isBody)n.push(new Sn().build(r,a[0]));else if(Ao(r.type))ae(a,function(g){n.push(new ta(t.addTagName(t.nsPropertyTagName(r))).build(r,g))});else if(o)ae(a,function(g){n.push(new ea(t.addTagName(t.nsPropertyTagName(r))).build(g))});else{var c=Io(r),v=If(r);ae(a,function(g){var x;c?x=new Ji(t,r):v?x=new Le(t,r):x=new Le(t),n.push(x.build(g))})}})};Le.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new Of(i):t=i),t};Le.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,o=i.byUri(r);return(!o||n)&&i.add(e,t),i.mapPrefix(a,r),e};Le.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,o=e.uri,u,c,v;if(!a&&!o)return{localName:e.localName};if(v=Df[a]||i&&(i.getPackage(a)||{}).uri,o=o||v||r.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(o),!e){for(u=a,c=1;r.uriByPrefix(u);)u=a+"_"+c++;e=this.logNamespace({prefix:u,uri:o},v===o)}return a&&r.mapPrefix(a,o),e};Le.prototype.parseAttributes=function(e){var t=this,n=this.element;ae(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];ae(r,function(o){a.push(o.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Le.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),$o(e)};Le.prototype.addAttribute=function(e,t){var n=this.attrs;Ft(t)&&(t=Kf(t));var i=bc(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Le.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=qf(n).concat(t)),ae(t,function(i){e.append(" ").append($o(i.name)).append('="').append(i.value).append('"')})};Le.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Sn;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ae(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Ji(e,t){Le.call(this,e,t)}Mo(Ji,Le);Ji.prototype.parseNsAttributes=function(e){var t=Le.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Xi),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};Ji.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Zf(){this.value="",this.write=function(e){this.value+=e}}function Jf(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function em(e){e=de({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Zf,a=new Jf(r,e.format);if(e.preamble&&a.append(Lf),new Le().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function er(e,t){Rt.call(this,e,t)}er.prototype=Object.create(Rt.prototype);er.prototype.fromXML=function(e,t,n){Ft(t)||(n=t,t="bpmn:Definitions");var i=new Jr(de({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};er.prototype.toXML=function(e,t){var n=new em(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(o){return r(o)}})};var tm="BPMN20",nm="http://www.omg.org/spec/BPMN/20100524/MODEL",im="bpmn",rm=[],am=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],sm=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],om={tagAlias:"lowerCase",typePrefix:"t"},lm={name:tm,uri:nm,prefix:im,associations:rm,types:am,enumerations:sm,xml:om},um="BPMNDI",cm="http://www.omg.org/spec/BPMN/20100524/DI",dm="bpmndi",pm=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],fm=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],mm=[],hm={name:um,uri:cm,prefix:dm,types:pm,enumerations:fm,associations:mm},ym="DC",vm="http://www.omg.org/spec/DD/20100524/DC",gm="dc",bm=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],_m=[],wm={name:ym,uri:vm,prefix:gm,types:bm,associations:_m},Em="DI",xm="http://www.omg.org/spec/DD/20100524/DI",Sm="di",km=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Am=[],Tm={tagAlias:"lowerCase"},Cm={name:Em,uri:xm,prefix:Sm,types:km,associations:Am,xml:Tm},Rm="bpmn.io colors for BPMN",Dm="http://bpmn.io/schema/bpmn/biocolor/1.0",Im="bioc",Nm=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Pm=[],Mm=[],$m={name:Rm,uri:Dm,prefix:Im,types:Nm,enumerations:Pm,associations:Mm},Vm="BPMN in Color",Lm="http://www.omg.org/spec/BPMN/non-normative/color/1.0",Bm="color",Om=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Um=[],Fm=[],qm={name:Vm,uri:Lm,prefix:Bm,types:Om,enumerations:Um,associations:Fm},jm={bpmn:lm,bpmndi:hm,dc:wm,di:Cm,bioc:$m,color:qm};function zm(e,t){var n=de({},jm,e);return new er(n,t)}var Wm="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Hm(e){An(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(Wm)}})}function dt(e,t){return e.$instanceOf(t)}function Ym(e){return Mt(e.rootElements,function(t){return dt(t,"bpmn:Process")||dt(t,"bpmn:Collaboration")})}function Km(e){var t={},n=[],i={};function r(U,O){return function(J){U(J,O)}}function a(U){t[U.id]=U}function o(U){return t[U.id]}function u(U,O){var J=U.gfx;if(J)throw new Error("already rendered ".concat(ot(U)));return e.element(U,i[U.id],O)}function c(U,O){return e.root(U,i[U.id],O)}function v(U,O){try{var J=i[U.id]&&u(U,O);return a(U),J}catch(ke){g(ke.message,{element:U,error:ke}),console.error("failed to import ".concat(ot(U)),ke)}}function g(U,O){e.error(U,O)}var x=this.registerDi=function(O){var J=O.bpmnElement;J?i[J.id]?g("multiple DI elements defined for ".concat(ot(J)),{element:J}):(i[J.id]=O,Hm(J)):g("no bpmnElement referenced in ".concat(ot(O)),{element:O})};function m(U){V(U.plane)}function V(U){x(U),ae(U.planeElement,K)}function K(U){x(U)}this.handleDefinitions=function(O,J){var ke=O.diagrams;if(J&&ke.indexOf(J)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!J&&ke&&ke.length&&(J=ke[0]),!J)throw new Error("no diagram to display");i={},m(J);var f=J.plane;if(!f)throw new Error("no plane for ".concat(ot(J)));var s=f.bpmnElement;if(!s)if(s=Ym(O),s)g("correcting missing bpmnElement on ".concat(ot(f)," to ").concat(ot(s))),f.bpmnElement=s,x(f);else throw new Error("no process or collaboration to display");var l=c(s,f);if(dt(s,"bpmn:Process")||dt(s,"bpmn:SubProcess"))te(s,l);else if(dt(s,"bpmn:Collaboration"))Ie(s,l),D(O.rootElements,l);else throw new Error("unsupported bpmnElement for ".concat(ot(f),": ").concat(ot(s)));z(n)};var z=this.handleDeferred=function(){for(var O;n.length;)O=n.shift(),O()};function te(U,O){me(U,O),M(U.ioSpecification,O),R(U.artifacts,O),a(U)}function D(U,O){var J=On(U,function(ke){return!o(ke)&&dt(ke,"bpmn:Process")&&ke.laneSets});J.forEach(r(te,O))}function X(U,O){v(U,O)}function L(U,O){ae(U,r(X,O))}function b(U,O){v(U,O)}function k(U,O){v(U,O)}function I(U,O){v(U,O)}function S(U,O){v(U,O)}function R(U,O){ae(U,function(J){dt(J,"bpmn:Association")?n.push(function(){S(J,O)}):S(J,O)})}function M(U,O){U&&(ae(U.dataInputs,r(k,O)),ae(U.dataOutputs,r(I,O)))}var P=this.handleSubProcess=function(O,J){me(O,J),R(O.artifacts,J)};function H(U,O){var J=v(U,O);dt(U,"bpmn:SubProcess")&&P(U,J||O),dt(U,"bpmn:Activity")&&M(U.ioSpecification,O),n.push(function(){ae(U.dataInputAssociations,r(b,O)),ae(U.dataOutputAssociations,r(b,O))})}function G(U,O){v(U,O)}function Z(U,O){v(U,O)}function he(U,O){n.push(function(){var J=v(U,O);U.childLaneSet&&pe(U.childLaneSet,J||O),je(U)})}function pe(U,O){ae(U.lanes,r(he,O))}function se(U,O){ae(U,r(pe,O))}function me(U,O){at(U.flowElements,O),U.laneSets&&se(U.laneSets,O)}function at(U,O){ae(U,function(J){dt(J,"bpmn:SequenceFlow")?n.push(function(){G(J,O)}):dt(J,"bpmn:BoundaryEvent")?n.unshift(function(){H(J,O)}):dt(J,"bpmn:FlowNode")?H(J,O):dt(J,"bpmn:DataObject")||(dt(J,"bpmn:DataStoreReference")||dt(J,"bpmn:DataObjectReference")?Z(J,O):g("unrecognized flowElement ".concat(ot(J)," in context ").concat(ot(O&&O.businessObject)),{element:J,context:O}))})}function He(U,O){var J=v(U,O),ke=U.processRef;ke&&te(ke,J||O)}function Ie(U,O){ae(U.participants,r(He,O)),R(U.artifacts,O),n.push(function(){L(U.messageFlows,O)})}function je(U){ae(U.flowNodeRef,function(O){var J=O.get("lanes");J&&J.push(U)})}}function Gm(e,t,n){var i,r,a,o,u=[];function c(v,g){var x={root:function(z,te){return i.add(z,te)},element:function(z,te,D){return i.add(z,te,D)},error:function(z,te){u.push({message:z,context:te})}},m=new Km(x);g=g||v.diagrams&&v.diagrams[0];var V=Qm(v,g);if(!V)throw new Error("no diagram to display");ae(V,function(z){m.handleDefinitions(v,z)});var K=g.plane.bpmnElement.id;a.setRootElement(a.findRoot(K+"_plane")||a.findRoot(K))}return new Promise(function(v,g){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:o,warnings:u}),v({warnings:u})}catch(x){return x.warnings=u,g(x)}})}function Qm(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!le(n,"bpmn:Process")&&!le(n,"bpmn:Collaboration")&&(i=Xm(n));var r;le(i,"bpmn:Collaboration")?r=i:r=Mt(e.rootElements,function(v){if(le(v,"bpmn:Collaboration"))return Mt(v.participants,function(g){return g.processRef===i})});var a=[i];r&&(a=_c(r.participants,function(v){return v.processRef}),a.push(r));var o=Lo(a),u=[t],c=[n];return ae(e.diagrams,function(v){if(v.plane){var g=v.plane.bpmnElement;o.indexOf(g)!==-1&&c.indexOf(g)===-1&&(u.push(v),c.push(g))}}),u}}function Lo(e){var t=[];return ae(e,function(n){n&&(t.push(n),t=t.concat(Lo(n.flowElements)))}),t}function Xm(e){for(var t=e;t;){if(le(t,"bpmn:Process"))return t;t=t.$parent}}var Zm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Bo=Zm,Oo={verticalAlign:"middle"},Uo={color:"#404040"},Jm={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},eh={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},th={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},nh='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Bo+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Bt;function ih(){Bt=qt(nh),vt(Bt,Jm),vt(It("svg",Bt),Oo),vt(It(".backdrop",Bt),eh),vt(It(".notice",Bt),th),vt(It(".link",Bt),Uo,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function rh(){Bt||(ih(),xr.bind(Bt,".backdrop","click",function(e){document.body.removeChild(Bt)})),document.body.appendChild(Bt)}function We(e){e=de({},sh,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),lh(this._container),this._init(this._container,this._moddle,e)}jt(We,yn);We.prototype.importXML=async function(t,n){const i=this;function r(o){return i.get("eventBus").createEvent(o)}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let o;try{o=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(m){throw this._emit("import.parse.complete",{error:m}),m}let u=o.rootElement;const c=o.references,v=o.warnings,g=o.elementsById;a=a.concat(v),u=this._emit("import.parse.complete",r({error:null,definitions:u,elementsById:g,references:c,warnings:a}))||u;const x=await this.importDefinitions(u,n);return a=a.concat(x.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(o){let u=o;throw a=a.concat(u.warnings||[]),Ni(u,a),u=ah(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}};We.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};We.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw Ni(a,[]),a}if(typeof t=="string"&&(i=oh(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw Ni(a,[]),a}try{this.clear()}catch(a){throw Ni(a,[]),a}const{warnings:r}=await Gm(this,n,i);return{warnings:r}};We.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(o){i=o}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a};We.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),a=It(":scope > defs",i._svg),o=Aa(r),u=a?"<defs>"+Aa(a)+"</defs>":"",c=r.getBBox();t='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+u+o+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};We.prototype._setDefinitions=function(e){this._definitions=e};We.prototype.getModules=function(){return this._modules};We.prototype.clear=function(){this.getDefinitions()&&yn.prototype.clear.call(this)};We.prototype.destroy=function(){yn.prototype.destroy.call(this),Oi(this._container)};We.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};We.prototype.off=function(e,t){this.get("eventBus").off(e,t)};We.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=It(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};We.prototype.getDefinitions=function(){return this._definitions};We.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};We.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,i,r),u=de(Ac(n,["additionalModules"]),{canvas:de({},n.canvas,{container:e}),modules:o});yn.call(this,u),n&&n.container&&this.attachTo(n.container)};We.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};We.prototype._createContainer=function(e){const t=qt('<div class="bjs-container"></div>');return vt(t,{width:ja(e.width),height:ja(e.height),position:e.position}),t};We.prototype._createModdle=function(e){const t=de({},this._moddleExtensions,e.moddleExtensions);return new zm(t)};We.prototype._modules=[];function Ni(e,t){return e.warnings=t,e}function ah(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const sh={width:"100%",height:"100%",position:"relative"};function ja(e){return e+(on(e)?"px":"")}function oh(e,t){return t&&Mt(e.diagrams,function(n){return n.id===t})||null}function lh(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Bo+"</a>",i=qt(n);vt(It("svg",i),Oo),vt(i,Uo,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),qr.bind(i,"click",function(r){rh(),r.preventDefault()})}function tr(e){We.call(this,e)}jt(tr,We);tr.prototype._modules=[up,Cp,$p,eo,qp,Ys];tr.prototype._moddleExtensions={};function uh(e,t,n){return'<?xml version="1.0" encoding="UTF-8"?>\n  <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"\n               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"\n               xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n               xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"\n               typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"\n               targetNamespace="'.concat(n,'">\n    <process id="').concat(e,'" name="').concat(t,'" isExecutable="true"></process>\n    <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n      </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n  </definitions>')}const ch={class:"w-full m-1 border-collapse table-auto"},dh={class:"p-2 font-bold border-b text-secondary"},ph={class:"p-2 font-bold border-b text-secondary"},fh={class:"p-2 font-bold border-b text-secondary"},mh={class:"p-2 font-bold border-b text-secondary"},hh={class:"p-2 font-bold border-b text-secondary"},yh={class:"p-2 font-bold border-b text-secondary"},vh={class:"p-2 font-bold border-b text-secondary"},gh={class:"p-2 font-bold border-b text-secondary"},bh={class:"hover:bg-gray-50"},_h=["rowspan"],wh=["rowspan"],Eh=["rowspan"],xh=["rowspan"],Sh={class:"p-2 border-b"},kh={class:"p-2 border-b"},Ah={class:"p-2 border-b"},Th={class:"p-2 border-b"},Ch={key:0,class:"hover:bg-gray-50"},Rh={class:"p-2 border-b"},Dh={class:"p-2 border-b"},Ih={class:"p-2 border-b"},Nh={class:"p-2 border-b"},Ph={class:"mt-4 text-lg"},Mh=_t({__name:"ProcessTaskList",props:wn({modelValue:{type:Boolean,required:!0},instanceId:{type:String,default:null}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=jn(e,"modelValue"),n=e,{instanceId:i}=ri(n);yt.extend(Cu),yt.extend(yc);const r=q([]),a=q([]),o=q(!1),u=q();let c;const v=async()=>{o.value=!0;try{if(!(i!=null&&i.value))return;const{xml:g,activities:x,tasks:m,processes:V}=await Ru(i.value);r.value=m!=null?m:[],a.value=V!=null?V:[],c||(c=cl(new tr({container:u.value,height:200}))),await c.importXML(g!=null?g:uh("none","none","none"));const K=c.get("canvas");K.zoom("fit-viewport"),x==null||x.forEach(({activityId:z,endTime:te,deleteReason:D})=>{let X="highlight-curr";D&&(D.includes(":reject")||D.includes(":cancel"))?X="highlight-reject":te&&(X="highlight"),K.addMarker(z,X)})}finally{o.value=!1}};return Nt(t,()=>{t.value?v():c.clear()}),(g,x)=>{const m=qi,V=Nr,K=Ir,z=Qt,te=Qa;return T(),$(z,{modelValue:t.value,"onUpdate:modelValue":x[0]||(x[0]=D=>t.value=D),title:g.$t("processInstance.op.task"),width:"98%",top:"5vh"},{default:d(()=>[ce("div",{ref_key:"bpmnContainer",ref:u,class:"w-full"},null,512),Pi((T(),we("table",ch,[ce("thead",null,[ce("tr",null,[ce("td",dh,N(g.$t("processModel.name")),1),ce("td",ph,N(g.$t("processTask.assignee")),1),ce("td",fh,N(g.$t("processTask.created")),1),ce("td",mh,N(g.$t("processTask.duration")),1),ce("td",hh,N(g.$t("processTask.time")),1),ce("td",yh,N(g.$t("processTask.user")),1),ce("td",vh,N(g.$t("processTask.type")),1),ce("td",gh,N(g.$t("processTask.opinion")),1)])]),ce("tbody",null,[(T(!0),we(Ve,null,Ge(r.value,D=>{var X,L,b,k;return T(),we(Ve,{key:D.id},[ce("tr",bh,[ce("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},N(D.name),9,_h),ce("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},N(D.assigneeName),9,wh),ce("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},N(D.created?E(yt)(D.created).format("YYYY-MM-DD HH:mm"):void 0),9,Eh),ce("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},N(D.duration?E(yt).duration(D.duration).locale("zh-cn").humanize():void 0),9,xh),ce("td",Sh,N(D.commentList[0]?E(yt)(D.commentList[0].time).format("YYYY-MM-DD HH:mm"):void 0),1),ce("td",kh,N((X=D.commentList[0])==null?void 0:X.userName),1),ce("td",Ah,[((L=D.commentList[0])==null?void 0:L.type)==="pass"?(T(),$(m,{key:0,type:"success",size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):((b=D.commentList[0])==null?void 0:b.type)==="reject"?(T(),$(m,{key:1,type:"danger",size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):D.commentList[0]?(T(),$(m,{key:2,size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):ie("",!0)]),ce("td",Th,N((k=D.commentList[0])==null?void 0:k.fullMessage),1)]),(T(!0),we(Ve,null,Ge(D.commentList,(I,S)=>(T(),we(Ve,{key:I.id},[S>0?(T(),we("tr",Ch,[ce("td",Rh,N(E(yt)(I.time).format("YYYY-MM-DD HH:mm")),1),ce("td",Dh,N(I.userName),1),ce("td",Ih,[I.type==="pass"?(T(),$(m,{key:0,type:"success",size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(I.type))),1)]),_:2},1024)):I.type==="reject"?(T(),$(m,{key:1,type:"danger",size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(I.type))),1)]),_:2},1024)):(T(),$(m,{key:2,size:"small"},{default:d(()=>[F(N(g.$t("processTask.type.".concat(I.type))),1)]),_:2},1024))]),ce("td",Nh,N(I.fullMessage),1)])):ie("",!0)],64))),128))],64)}),128))])])),[[te,o.value]]),ce("p",Ph,N(g.$t("processInstance.history")),1),Pi((T(),$(K,{data:a.value,class:"mt-1"},{default:d(()=>[p(V,{prop:"assignee",label:g.$t("processInstance.assignee")},null,8,["label"]),p(V,{prop:"status",label:g.$t("processInstance.status")},{default:d(({row:D})=>[D.status==="complete"?(T(),$(m,{key:0,type:"success",size:"small"},{default:d(()=>[F(N(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="reject"?(T(),$(m,{key:1,type:"danger",size:"small"},{default:d(()=>[F(N(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="cancel"?(T(),$(m,{key:2,type:"info",size:"small"},{default:d(()=>[F(N(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):(T(),$(m,{key:3,type:"warning",size:"small"},{default:d(()=>[F(N(g.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(V,{prop:"opinion",label:g.$t("processInstance.opinion")},null,8,["label"]),p(V,{property:"started",label:g.$t("processInstance.started")},{default:d(({row:D})=>[F(N(E(yt)(D.started).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(V,{property:"ended",label:g.$t("processInstance.ended")},{default:d(({row:D})=>[F(N(D.ended?E(yt)(D.ended).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[te,o.value]])]),_:1},8,["modelValue","title"])}}}),$h=Pr(Mh,[["__scopeId","data-v-f9850bbd"]]),Vh={class:"el-upload-list__item is-success"},Lh=["src"],Bh={key:0,class:"ml-2"},Oh={key:1,class:"el-upload--picture-card"},Uh=["src"],za=300,Wa=300,Fh=_t({__name:"ImageListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},maxWidth:{type:Number,default:null},maxHeight:{type:Number,default:null},listType:{type:String,default:"pictureCard"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{modelValue:r,maxWidth:a,maxHeight:o,fileAccept:u,fileMaxSize:c}=ri(n),{t:v}=ai(),g=Mr(),x=q(!1),m=q({}),V=q({}),K=q(!1),z=q(!1),te=q({src:"data:;base64,="}),D=Ze({get:()=>r.value,set:M=>i("update:modelValue",M)}),{formItem:X}=Xa();Nt(D,()=>{var M;(M=X==null?void 0:X.validate)==null||M.call(X,"change").catch(P=>{})},{deep:!0});const L=M=>{te.value=M,K.value=!0},b=()=>{const M={isWatermark:!0,thumbnailWidth:za,thumbnailHeight:Wa};return(a==null?void 0:a.value)!=null&&(M.maxWidth=a.value),(o==null?void 0:o.value)!=null&&(M.maxHeight=o.value),M},k=Ze(()=>{var M;return(M=u==null?void 0:u.value)!=null?M:g.upload.imageInputAccept}),I=Ze(()=>{var M;return(M=c==null?void 0:c.value)!=null?M:g.upload.imageLimitByte}),S=M=>I.value>0&&M.size>I.value?(Ot.error(v("error.fileMaxSize",{size:"".concat(I.value/1024/1024," MB")})),!1):!0,R=M=>{rs(JSON.parse(M.message))};return(M,P)=>{const H=Fi,G=Gt,Z=es,he=_s,pe=Qt;return T(),we("div",null,[p(E(ju),{list:D.value,tag:"ul","item-key":"url",animation:250,class:Ht(["el-upload-list",[e.listType==="picture"?"el-upload-list--picture":"el-upload-list--picture-card",{"is-disabled":e.disabled}]]),onStart:P[1]||(P[1]=()=>x.value=!0),onEnd:P[2]||(P[2]=()=>x.value=!1)},{item:d(({element:se})=>[ce("li",Vh,[ce("div",{class:Ht([e.listType==="picture"?["w-32","h-32"]:["w-full","h-full"],"relative flex items-center justify-center bg-gray-50"])},[ce("img",{class:"block max-w-full max-h-full",src:se.url,alt:""},null,8,Lh),ce("div",{class:Ht(["absolute space-x-4 bg-black bg-opacity-50 rounded-md opacity-0 cursor-move full-flex-center",x.value?void 0:"hover:opacity-100"]),onClick:P[0]||(P[0]=an(()=>{},["stop"]))},[p(H,{class:"image-action",title:M.$t("cropImage"),onClick:()=>(z.value=!0,V.value=se)},{default:d(()=>[p(E(dl))]),_:2},1032,["title","onClick"]),p(H,{class:"image-action",title:M.$t("previewImage"),onClick:()=>L(se)},{default:d(()=>[p(E(ns))]),_:2},1032,["title","onClick"]),p(H,{class:"image-action",title:M.$t("deleteImage"),onClick:()=>D.value.splice(D.value.indexOf(se),1)},{default:d(()=>[p(E(is))]),_:2},1032,["title","onClick"])],2)],2),e.listType==="picture"?(T(),we("div",Bh,[p(G,{modelValue:se.url,"onUpdate:modelValue":me=>se.url=me,placeholder:"URL",maxlength:"255"},{prepend:d(()=>P[9]||(P[9]=[F("URL")])),_:2},1032,["modelValue","onUpdate:modelValue"]),p(G,{modelValue:se.name,"onUpdate:modelValue":me=>se.name=me,placeholder:M.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[F(N(M.$t("article.imageList.name")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),p(G,{modelValue:se.description,"onUpdate:modelValue":me=>se.description=me,type:"textarea",rows:2,placeholder:M.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):ie("",!0)])]),footer:d(()=>[p(he,{action:E(tu),headers:{...E(Ja)(),...E(Za)()},data:b(),accept:k.value,"before-upload":S,"on-success":(se,me)=>D.value.push({name:se.name,url:se.url}),"on-progress":(se,me)=>m.value=me,"on-error":R,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[m.value.status==="uploading"?(T(),$(Z,{key:0,type:"circle",percentage:parseInt(m.value.percentage,10)},null,8,["percentage"])):(T(),we("div",Oh,[p(H,null,{default:d(()=>[p(E(ts))]),_:1})]))]),_:1},8,["action","headers","data","accept","on-success","on-progress","disabled"])]),_:1},8,["list","class"]),ce("div",null,[p(pe,{modelValue:K.value,"onUpdate:modelValue":P[6]||(P[6]=se=>K.value=se),top:"5vh",width:768},{default:d(()=>[p(G,{modelValue:te.value.url,"onUpdate:modelValue":P[3]||(P[3]=se=>te.value.url=se),maxlength:"255"},{prepend:d(()=>P[10]||(P[10]=[F("URL")])),_:1},8,["modelValue"]),e.listType!=="picture"?(T(),$(G,{key:0,modelValue:te.value.name,"onUpdate:modelValue":P[4]||(P[4]=se=>te.value.name=se),placeholder:M.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[F(N(M.$t("article.imageList.name")),1)]),_:1},8,["modelValue","placeholder"])):ie("",!0),e.listType!=="picture"?(T(),$(G,{key:1,modelValue:te.value.description,"onUpdate:modelValue":P[5]||(P[5]=se=>te.value.description=se),type:"textarea",rows:2,placeholder:M.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","placeholder"])):ie("",!0),ce("img",{src:te.value.url,alt:"",class:"mt-1 border border-gray-300"},null,8,Uh)]),_:1},8,["modelValue"])]),p(Fu,{modelValue:z.value,"onUpdate:modelValue":P[7]||(P[7]=se=>z.value=se),src:V.value.url,"thumbnail-width":za,"thumbnail-height":Wa,onSuccess:P[8]||(P[8]=se=>V.value.url=se)},null,8,["modelValue","src"])])}}}),qh=Pr(Fh,[["__scopeId","data-v-401ca87f"]]),jh={class:"w-full"},zh=["onClick"],Wh={class:"el-upload-list__item-status-label"},Hh=_t({__name:"FileListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{fileAccept:r,fileMaxSize:a,modelValue:o}=ri(n),{t:u}=ai(),c=Mr(),v=q({}),g=Ze({get:()=>o.value,set:k=>i("update:modelValue",k)}),{formItem:x}=Xa();Nt(g,()=>{var k;(k=x==null?void 0:x.validate)==null||k.call(x,"change").catch(I=>{})},{deep:!0});const m=q(!1),V=q({}),K=q(),z=k=>{V.value=k,m.value=!0},te=()=>{K.value.validate(async k=>{k&&(m.value=!1)})},D=Ze(()=>{var k;return(k=r==null?void 0:r.value)!=null?k:c.upload.fileInputAccept}),X=Ze(()=>{var k;return(k=a==null?void 0:a.value)!=null?k:c.upload.fileLimitByte}),L=k=>X.value>0&&k.size>X.value?(Ot.error(u("error.fileMaxSize",{size:"".concat(X.value/1024/1024," MB")})),!1):!0,b=k=>{rs(JSON.parse(k.message))};return(k,I)=>{const S=_s,R=es,M=Fi,P=Gt,H=pn,G=fn,Z=kn,he=Qt;return T(),we("div",jh,[p(S,{action:E(nu),headers:{...E(Ja)(),...E(Za)()},accept:D.value,"before-upload":L,"on-success":pe=>g.value.push({name:pe.name,url:pe.url,length:pe.size}),"on-progress":(pe,se)=>v.value=se,"on-error":b,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[F(N(k.$t("clickOrDragToUpload")),1)]),_:1},8,["action","headers","accept","on-success","on-progress","disabled"]),v.value.status==="uploading"?(T(),$(R,{key:0,percentage:parseInt(v.value.percentage,10)},null,8,["percentage"])):ie("",!0),p(ml,{tag:"ul",class:Ht(["el-upload-list","el-upload-list--text",{"is-disabled":e.disabled}]),name:"el-list"},{default:d(()=>[(T(!0),we(Ve,null,Ge(g.value,pe=>(T(),we("li",{key:pe.url,class:"el-upload-list__item is-success"},[ce("a",{class:"el-upload-list__item-name",onClick:()=>z(pe)},[p(M,{class:"el-icon--document"},{default:d(()=>[p(E(pl))]),_:1}),F(N(pe.name),1)],8,zh),ce("label",Wh,[p(M,{class:"el-icon--upload-success el-icon--circle-check"},{default:d(()=>[p(E(as))]),_:1})]),e.disabled?ie("",!0):(T(),$(M,{key:0,class:"el-icon--close",onClick:()=>g.value.splice(g.value.indexOf(pe),1)},{default:d(()=>[p(E(fl))]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["class"]),p(he,{modelValue:m.value,"onUpdate:modelValue":I[4]||(I[4]=pe=>m.value=pe),title:k.$t("article.fileList.attribute"),top:"5vh",width:768,"append-to-body":""},{default:d(()=>[p(Z,{ref_key:"form",ref:K,model:V.value,"label-width":"150px"},{default:d(()=>[p(H,{prop:"name",label:k.$t("name"),rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.name,"onUpdate:modelValue":I[0]||(I[0]=pe=>V.value.name=pe),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","rules"]),p(H,{prop:"length",label:k.$t("size"),rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.length,"onUpdate:modelValue":I[1]||(I[1]=pe=>V.value.length=pe),maxlength:"19"},{append:d(()=>I[5]||(I[5]=[F("Byte")])),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),p(H,{prop:"url",label:"URL",rules:{required:!0,message:()=>k.$t("v.required")}},{default:d(()=>[p(P,{modelValue:V.value.url,"onUpdate:modelValue":I[2]||(I[2]=pe=>V.value.url=pe),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"]),p(G,{type:"primary","native-type":"submit",onClick:I[3]||(I[3]=an(()=>te(),["prevent"]))},{default:d(()=>[F(N(k.$t("save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Yh=Pr(Hh,[["__scopeId","data-v-b3a09e2e"]]),Fo=(e,t,n)=>{if(e===0||e===1)window.open(t);else{n=n+"?preview=true";const i=n.lastIndexOf("/",n.lastIndexOf("/")-1),r="".concat(n.substring(0,i),"/auth/jwt/login?code=").concat(hl(),"&redirectUri=").concat(encodeURIComponent(n));window.open(r)}},Kh={class:"flex justify-end mt-2"},Gh=_t({__name:"ReviewFormProperties",props:wn({formProperties:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:wn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=jn(e,"modelValue"),i=e,r=t,a=q(),o=()=>{n.value=!1;const u=i.formProperties.reduce((c,{id:v,value:g})=>({...c,[v]:g}),{});r("finished",{properties:u,comment:a.value})};return Nt(n,()=>{n.value&&(a.value=void 0)}),(u,c)=>{const v=Gt,g=Hu,x=zi,m=ji,V=pn,K=fn,z=kn,te=Qt;return T(),$(te,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=D=>n.value=D),title:u.$t("flowable.pass"),width:"800","append-to-body":""},{default:d(()=>[p(z,{"label-width":"120px"},{default:d(()=>[(T(!0),we(Ve,null,Ge(u.formProperties,D=>(T(),$(V,{key:D.id},{label:d(()=>[p(rt,{label:D.name},null,8,["label"])]),default:d(()=>[D.type.name==="string"?(T(),$(v,{key:0,modelValue:D.value,"onUpdate:modelValue":X=>D.value=X},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),D.type.name==="long"?(T(),$(v,{key:1,modelValue:D.value,"onUpdate:modelValue":X=>D.value=X},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),D.type.name==="boolean"?(T(),$(g,{key:2,modelValue:D.value,"onUpdate:modelValue":X=>D.value=X},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),D.type.name==="enum"?(T(),$(m,{key:3,modelValue:D.value,"onUpdate:modelValue":X=>D.value=X},{default:d(()=>[(T(!0),we(Ve,null,Ge(D.type.values,X=>(T(),$(x,{key:X.id,label:X.name,value:X.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):ie("",!0)]),_:2},1024))),128)),p(V,null,{label:d(()=>[p(rt,{message:"flowable.opinion"})]),default:d(()=>[p(v,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=D=>a.value=D)},null,8,["modelValue"])]),_:1}),ce("div",Kh,[p(K,{type:"primary","native-type":"submit",onClick:an(o,["prevent"])},{default:d(()=>[F(N(u.$t("ok")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","title"])}}}),qo=_t({__name:"UserSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=jn(e,"modelValue"),n=q({}),i=q(),r=q(!1),a=q(1),o=q(10),u=q(0),c=q([]),v=async()=>{r.value=!0;try{const{content:m,totalElements:V}=await Vu({Q_Contains_1_username:i.value,Q_Contains_1_realName:i.value,current:!0,page:a.value,pageSize:o.value});c.value=m,u.value=Number(V)}finally{r.value=!1}};Rr(async()=>{t.value!=null&&(n.value=await $u(t.value))});const g=async m=>{i.value=m,v()},x=m=>{t.value=m};return(m,V)=>{const K=zi,z=os,te=ji;return T(),$(te,{modelValue:n.value,"onUpdate:modelValue":V[4]||(V[4]=D=>n.value=D),filterable:"",remote:"","default-first-option":"","remote-method":g,loading:r.value,onChange:x},{footer:d(()=>[p(z,{"current-page":a.value,"onUpdate:currentPage":V[0]||(V[0]=D=>a.value=D),"page-size":o.value,"onUpdate:pageSize":V[1]||(V[1]=D=>o.value=D),total:u.value,layout:"total, prev, pager, next",size:"small",class:"px-3 py-2",onSizeChange:V[2]||(V[2]=()=>v()),onCurrentChange:V[3]||(V[3]=()=>v())},null,8,["current-page","page-size","total"])]),default:d(()=>[(T(!0),we(Ve,null,Ge(c.value,D=>(T(),$(K,{key:D.id,label:"".concat(D.username).concat(D.realName?"(".concat(D.realName,")"):""," - [").concat(D.org.name,"]"),value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}}),Qh={class:"flex justify-end mt-2"},Xh=_t({__name:"ReviewDelegate",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:wn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=jn(e,"modelValue"),i=t,r=q(),a=q({}),o=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const v=pn,g=Gt,x=kn,m=fn,V=Qt;return T(),$(V,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=K=>n.value=K),title:u.$t("flowable.delegate"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(v,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.delegateUser"})]),default:d(()=>[p(qo,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=K=>a.value.toUserId=K)},null,8,["modelValue"])]),_:1},8,["rules"]),p(v,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.delegateReason"})]),default:d(()=>[p(g,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=K=>a.value.comment=K)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),ce("div",Qh,[p(m,{type:"primary",onClick:o},{default:d(()=>[F(N(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),Zh={class:"flex justify-end mt-2"},Jh=_t({__name:"ReviewTransfer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:wn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=jn(e,"modelValue"),i=t,r=q(),a=q({}),o=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const v=pn,g=Gt,x=kn,m=fn,V=Qt;return T(),$(V,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=K=>n.value=K),title:u.$t("flowable.transfer"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(v,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.transferUser"})]),default:d(()=>[p(qo,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=K=>a.value.toUserId=K)},null,8,["modelValue"])]),_:1},8,["rules"]),p(v,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.transferReason"})]),default:d(()=>[p(g,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=K=>a.value.comment=K)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),ce("div",Zh,[p(m,{type:"primary",onClick:o},{default:d(()=>[F(N(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),ey={class:"flex justify-end mt-2"},ty=_t({__name:"ReviewBack",props:wn({taskId:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:wn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=jn(e,"modelValue"),i=e,r=t,a=q([]),o=q(),u=q({}),c=()=>{o.value.validate(async g=>{g&&(n.value=!1,r("finished",u.value))})},v=async()=>{a.value=await Du(i.taskId)};return Nt(n,()=>{n.value?(v(),u.value={}):a.value=[]}),(g,x)=>{const m=ls,V=Wi,K=qi,z=pn,te=Gt,D=fn,X=kn,L=Qt;return T(),$(L,{modelValue:n.value,"onUpdate:modelValue":x[2]||(x[2]=b=>n.value=b),title:g.$t("flowable.back"),width:"800","append-to-body":""},{default:d(()=>[p(X,{ref_key:"form",ref:o,model:u.value,"label-width":"120px"},{default:d(()=>[p(z,{prop:"activityId",rules:{required:!0,message:()=>g.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.backActivity"})]),default:d(()=>[a.value.length>0?(T(),$(V,{key:0,modelValue:u.value.activityId,"onUpdate:modelValue":x[0]||(x[0]=b=>u.value.activityId=b)},{default:d(()=>[(T(!0),we(Ve,null,Ge(a.value,b=>(T(),$(m,{key:b.id,label:b.activityName,value:b.activityId},{default:d(()=>[F(N(b.activityName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(T(),$(K,{key:1,type:"warning"},{default:d(()=>[F(N(g.$t("preview.noBackStep")),1)]),_:1}))]),_:1},8,["rules"]),p(z,{prop:"comment",rules:{required:!0,message:()=>g.$t("v.required")}},{label:d(()=>[p(rt,{message:"flowable.backReason"})]),default:d(()=>[p(te,{modelValue:u.value.comment,"onUpdate:modelValue":x[1]||(x[1]=b=>u.value.comment=b)},null,8,["modelValue"])]),_:1},8,["rules"]),ce("div",ey,[p(D,{type:"primary","native-type":"submit",disabled:a.value.length<=0,onClick:an(c,["prevent"])},{default:d(()=>[F(N(g.$t("ok")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),ny={key:0},iy={class:"w-full"},ry={class:"w-full"},ay={key:1,class:"inline-flex mb-1"},sy={key:2,class:"inline-flex mb-1"},oy=_t({name:"ArticleForm",__name:"ArticleForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},action:{type:String,default:"edit"},channel:{type:Object,default:null},isReview:{type:Boolean,default:!1}},emits:{"update:modelValue":null,finished:null},setup(e){const t=e,{modelValue:n,channel:i}=ri(t),{t:r}=ai(),a=Mr(),o=yl(),u=q(),c=q(!1),v=q(!1),g=q(!1),x=q(),m=q({}),V=q(),K=q(!1),z=q([]),te=q([]),D=q([]),X=q([]),L=q([]),b=q([]),k=q(),I=Ze(()=>L.value.find(h=>h.id===k.value)),S=Ze(()=>{var h;return ca(da(pa().article.mains,(h=I.value)==null?void 0:h.mains,"article"))}),R=Ze(()=>{var h;return ca(da(pa().article.asides,(h=I.value)==null?void 0:h.asides,"article"))}),M=Ze(()=>{var h;return JSON.parse(((h=I.value)==null?void 0:h.customs)||"[]").filter(w=>w.type!=="tinyEditor")}),P=Ze(()=>{var h;return JSON.parse(((h=I.value)==null?void 0:h.customs)||"[]").filter(w=>w.type==="tinyEditor")}),H=q(!1),G=q([]),Z=async h=>{H.value=!0,G.value=await ou({Q_Contains_name:h,Q_OrderBy:"refers_desc,id_desc",limit:20}),H.value=!1};Nt(n,()=>{var h;n.value&&(k.value=(h=i==null?void 0:i.value)==null?void 0:h.articleModelId,se(),me(),at(),He(),he())}),Nt(M,()=>{Ie(m.value.customs)});const he=async()=>{Ue.epRank>0&&(K.value=await au())},pe=h=>cu("sys_article_source",h),se=async()=>{const h=await Lu({current:!0});te.value=h.map(w=>w.id),z.value=ni(h),Ue.dataScope!==1&&Jl(z.value,await Bu())},me=async()=>{X.value=await $r({isArticlePermission:!0}),D.value=ni(X.value)},at=async()=>{L.value=await ps({type:"article"}),k.value==null&&L.value.length>0&&(k.value=L.value[0].id)},He=async()=>{b.value=await ru()},Ie=h=>(M.value.forEach(w=>{h[w.code]==null&&(h[w.code]=w.defaultValue,w.defaultValueKey!=null&&(h[w.code+"Key"]=w.defaultValueKey))}),h),je=async h=>{if(Ue.epRank<=1)return!1;const w=await Nu({text:h.text});if(w.status===-1){if(h.editorType===1){const Ye=V.value.editor.plugins.searchreplace;Ye.find(w.result.name),Ye.done(),vi.confirm(r("article.error.errorWord.confirm",{name:w.result.name,correct:w.result.correct}),{cancelButtonText:r("cancel"),confirmButtonText:r("ok"),type:"warning",callback:ft=>{ft==="confirm"&&(Ye.find(w.result.name),Ye.replace(w.result.correct,!1,!0),Ye.done(),m.value.text=V.value.editor.getContent())}})}else h.editorType===2&&vi.alert(r("article.error.errorWord.alert.message",{name:w.result.name}),r("article.error.errorWord.alert.title"),{confirmButtonText:r("ok")});return!0}const Pe=await Pu({text:h.text});if(Pe.status===-1){if(h.editorType===1){const Ye=V.value.editor.plugins.searchreplace;Ye.find(Pe.result.name),Ye.done()}return vi.alert(r("article.error.sensitiveWord.alert.message",{name:Pe.result.name}),r("article.error.sensitiveWord.alert.title"),{confirmButtonText:r("ok")}),!0}return!1},U=()=>{u.value.submit(async(h,{focus:w,emit:Pe,props:Ye,form:ft})=>{var Xe;h.status=10,await la(h),(Xe=w==null?void 0:w.focus)==null||Xe.call(w),Pe("update:values",Ye.initValues(h.value)),ft.resetFields(),Ot.success(r("success"))})},O=q(""),J=q([]),ke=q(!1),f=q(!1),s=q(!1),l=q(!1),y=async h=>{O.value=h.taskId,J.value=await Iu(h.taskId),ke.value=!0},_=async h=>{u.value.remove(async()=>{await mu(O.value,h.properties,h.comment)})},B=async h=>{O.value=h.taskId,s.value=!0},re=async h=>{u.value.remove(async()=>{await hu(O.value,h.toUserId,h.comment)})},ne=async h=>{O.value=h.taskId,l.value=!0},ye=async h=>{u.value.remove(async()=>{await yu(O.value,h.toUserId,h.comment)})},Be=h=>{O.value=h.taskId,f.value=!0},lt=h=>{u.value.remove(async()=>{await vu(O.value,h.activityId,h.comment)})},et=async h=>{try{const{value:w}=await vi.prompt(r("review.rejectReason"),r("review.reject"),{confirmButtonText:r("submit"),cancelButtonText:r("cancel"),inputPattern:/\S+/,inputErrorMessage:r("v.required")});u.value.remove(async()=>{await du([h.taskId],w)})}catch(w){}},Te=(h,w)=>{u.value.submit(async(Pe,{loadBean:Ye})=>{if(h==="delete")await ys([w]);else if(h==="submit")await fs([w]);else if(h==="archive")await vs([w]);else if(h==="offline")await gs([w]);else throw new Error("not support action: ".concat(h));Ye()})},tt=q(!1),xe=q([]),St=()=>{var Ye,ft;tt.value=!0;const h=Ds(m.value.text),Pe=Rs("img",h).map(Xe=>Cs(Xe,"src")).filter(Xe=>Xe==null?void 0:Xe.startsWith(a.base.uploadUrlPrefix));xe.value=[...(ft=(Ye=m.value.imageList)==null?void 0:Ye.map(Xe=>Xe.url))!=null?ft:[],...Pe]},$t=q(!1),Qe=q([]),oe=async(h,w)=>{Qe.value=await su(.6,h,w),Qe.value.length>0?$t.value=!0:Ot.success(r("article.success.titleSimilarity"))};return(h,w)=>{const Pe=fn,Ye=xl,ft=cs,Xe=qi,A=Gt,j=pn,ve=gl,mt=bl,Nn=zi,gn=ji,Dt=vl,zt=_l,Yn=ls,kt=Wi,fi=bs,Ce=ss,Kn=Zu,nr=Dr,Vt=El,Gn=wl,bt=Nr,ir=Ir,rr=Qt;return T(),we("div",null,[p(Ou,{ref_key:"dialog",ref:u,values:m.value,"onUpdate:values":w[52]||(w[52]=ue=>m.value=ue),name:h.$t("menu.content.article"),"query-bean":e.isReview?E(fu):E(hs),"create-bean":E(la),"update-bean":E(pu),"delete-bean":E(ms),"bean-id":e.beanId,"bean-ids":e.beanIds,action:e.action,focus:x.value,"init-values":()=>{var ue,Ne;return k.value=(ue=E(i))==null?void 0:ue.articleModelId,{editorType:S.value.text.editorType,channelId:(Ne=E(i))==null?void 0:Ne.id,allowComment:!0,customs:{},fileList:[],imageList:[]}},"to-values":ue=>({...ue,tagNames:ue.tags.map(Ne=>Ne.name)}),perms:"article","model-value":e.modelValue,addable:!e.isReview,"disable-edit":ue=>ue.id!=null&&!ue.editable&&!E(Ue).allStatusPermission&&!e.isReview,"prevent-submit":je,"label-width":"140px",large:"","onUpdate:modelValue":w[53]||(w[53]=ue=>h.$emit("update:modelValue",ue)),onFinished:w[54]||(w[54]=()=>h.$emit("finished")),onBeanChange:w[55]||(w[55]=ue=>{var Ne,Fe,Q;c.value=!!ue.subtitle,v.value=!!ue.fullTitle,g.value=!!ue.linkUrl,k.value=(Q=(Ne=ue.channel)==null?void 0:Ne.articleModelId)!=null?Q:(Fe=E(i))==null?void 0:Fe.articleModelId})},{"header-action":d(({isEdit:ue,bean:Ne,unsaved:Fe,handleDelete:Q})=>[e.isReview?(T(),$(Ye,{key:0},{default:d(()=>[ue&&e.isReview?(T(),$(Pe,{key:0,disabled:E(Re)("articleReview:pass")||Fe,type:"primary",icon:E(as),onClick:()=>y(Ne)},{default:d(()=>[F(N(h.$t("review.pass")),1)]),_:2},1032,["disabled","icon","onClick"])):ie("",!0),p(Pe,{disabled:E(Re)("articleReview:reject")||Fe,icon:E(aa),onClick:()=>et(Ne)},{default:d(()=>[F(N(h.$t("review.reject")),1)]),_:2},1032,["disabled","icon","onClick"]),E(Ue).epRank>=3?(T(),$(Pe,{key:1,disabled:E(Re)("articleReview:back")||Fe,icon:E(Sl),onClick:()=>Be(Ne)},{default:d(()=>[F(N(h.$t("review.back")),1)]),_:2},1032,["disabled","icon","onClick"])):ie("",!0),E(Ue).epRank>=3?(T(),$(Pe,{key:2,disabled:E(Re)("articleReview:delegate")||Fe,icon:E(kl),onClick:()=>B(Ne)},{default:d(()=>[F(N(h.$t("review.delegate")),1)]),_:2},1032,["disabled","icon","onClick"])):ie("",!0),E(Ue).epRank>=3?(T(),$(Pe,{key:3,disabled:E(Re)("articleReview:transfer")||Fe,icon:E(Al),onClick:()=>ne(Ne)},{default:d(()=>[F(N(h.$t("review.transfer")),1)]),_:2},1032,["disabled","icon","onClick"])):ie("",!0)]),_:2},1024)):ie("",!0),e.isReview?ie("",!0):(T(),$(Ye,{key:1},{default:d(()=>[ue?(T(),$(ft,{key:0,title:h.$t("confirmExecute"),onConfirm:()=>Te("submit",Ne.id)},{reference:d(()=>[p(Pe,{disabled:[0,12].includes(Ne.status)||E(Re)("article:submit")||Fe,icon:E(Tl)},{default:d(()=>[F(N(h.$t("article.op.submit")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ie("",!0),ue?(T(),$(ft,{key:1,title:h.$t("confirmExecute"),onConfirm:()=>Te("archive",Ne.id)},{reference:d(()=>[p(Pe,{disabled:![0].includes(Ne.status)||E(Re)("article:archive")||Fe,icon:E(Cl)},{default:d(()=>[F(N(h.$t("article.op.archive")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ie("",!0),ue?(T(),$(ft,{key:2,title:h.$t("confirmExecute"),onConfirm:()=>Te("offline",Ne.id)},{reference:d(()=>[p(Pe,{disabled:![0,1,5,11,12].includes(Ne.status)||E(Re)("article:offline")||Fe,icon:E(aa)},{default:d(()=>[F(N(h.$t("article.op.offline")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ie("",!0)]),_:2},1024)),ue?(T(),$(Pe,{key:2,icon:E(ns),onClick:w[0]||(w[0]=()=>E(Fo)(m.value.status,m.value.url,m.value.dynamicUrl))},{default:d(()=>[F(N(h.$t("article.op.preview")),1)]),_:1},8,["icon"])):ie("",!0),p(Ye,null,{default:d(()=>[ue&&!e.isReview?(T(),$(ft,{key:0,title:h.$t("confirmDelete"),onConfirm:()=>Te("delete",Ne.id)},{reference:d(()=>[p(Pe,{disabled:E(Re)("article:delete")||Fe,icon:E(Rl)},{default:d(()=>[F(N(h.$t("delete")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ie("",!0),ue?(T(),$(ft,{key:1,title:h.$t("confirmCompletelyDelete"),onConfirm:()=>Q()},{reference:d(()=>[p(Pe,{disabled:E(Re)("article:completelyDelete"),icon:E(is)},{default:d(()=>[F(N(h.$t("article.op.completelyDelete")),1)]),_:1},8,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ie("",!0)]),_:2},1024)]),"header-status":d(({isEdit:ue})=>[ue?(T(),we(Ve,{key:0},[m.value.status!=null?(T(),we("span",ny,[m.value.status===0?(T(),$(Xe,{key:0,type:"success",size:"small","disable-transitions":""},{default:d(()=>[F(N(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):m.value.status===1?(T(),$(Xe,{key:1,size:"small","disable-transitions":""},{default:d(()=>[F(N(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):m.value.status===20?(T(),$(Xe,{key:2,type:"danger",size:"small","disable-transitions":""},{default:d(()=>[F(N(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):[21,22].includes(m.value.status)?(T(),$(Xe,{key:3,type:"warning",size:"small","disable-transitions":""},{default:d(()=>[F(N(h.$t("article.status.".concat(m.value.status))),1)]),_:1})):(T(),$(Xe,{key:4,type:"info",size:"small","disable-transitions":""},{default:d(()=>[F(N(h.$t("article.status.".concat(m.value.status))),1)]),_:1}))])):ie("",!0)],64)):ie("",!0)]),default:d(({bean:ue,isEdit:Ne,disabled:Fe})=>[p(Dt,null,{default:d(()=>[p(ve,{span:18},{default:d(()=>[p(Dt,null,{default:d(()=>[m.value.src!=null?(T(),$(ve,{key:0,span:S.value.title.double?12:24},{default:d(()=>[p(j,{label:h.$t("article.src")},{default:d(()=>[p(A,{"model-value":m.value.src.title,disabled:""},{prepend:d(()=>[F(N(E(r)("article.type.".concat(m.value.type))),1)]),append:d(()=>[F(N(m.value.src.channel.paths.map(Q=>Q.name).join("/")),1)]),_:1},8,["model-value"])]),_:1},8,["label"])]),_:1},8,["span"])):ie("",!0),p(ve,{span:S.value.title.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"title",label:(Q=S.value.title.name)!=null?Q:h.$t("article.title"),rules:{required:!0,message:()=>h.$t("v.required")}},{default:d(()=>[p(A,{ref_key:"focus",ref:x,modelValue:m.value.title,"onUpdate:modelValue":w[1]||(w[1]=Y=>m.value.title=Y),maxlength:"150"},null,8,["modelValue"]),p(Pe,{disabled:!m.value.title,class:"mr-5",onClick:w[2]||(w[2]=()=>oe(m.value.title,m.value.id))},{default:d(()=>[F(N(h.$t("article.op.titleSimilarity")),1)]),_:1},8,["disabled"]),S.value.subtitle.show&&!S.value.subtitle.required?(T(),$(mt,{key:0,modelValue:c.value,"onUpdate:modelValue":w[3]||(w[3]=Y=>c.value=Y),onClick:w[4]||(w[4]=()=>m.value.subtitle=void 0)},{default:d(()=>{var Y;return[F(N((Y=S.value.subtitle.name)!=null?Y:h.$t("article.subtitle")),1)]}),_:1},8,["modelValue"])):ie("",!0),S.value.fullTitle.show&&!S.value.fullTitle.required?(T(),$(mt,{key:1,modelValue:v.value,"onUpdate:modelValue":w[5]||(w[5]=Y=>v.value=Y),onClick:w[6]||(w[6]=()=>m.value.fullTitle=void 0)},{default:d(()=>{var Y;return[F(N((Y=S.value.fullTitle.name)!=null?Y:h.$t("article.fullTitle")),1)]}),_:1},8,["modelValue"])):ie("",!0),S.value.linkUrl.show&&!S.value.linkUrl.required?(T(),$(mt,{key:2,modelValue:g.value,"onUpdate:modelValue":w[7]||(w[7]=Y=>g.value=Y),onClick:w[8]||(w[8]=()=>(m.value.linkUrl=void 0,m.value.targetBlank=!1))},{default:d(()=>{var Y;return[F(N((Y=S.value.linkUrl.name)!=null?Y:h.$t("article.linkUrl")),1)]}),_:1},8,["modelValue"])):ie("",!0)]),_:1},8,["label","rules"])]}),_:1},8,["span"]),(m.value.subtitle||c.value)&&S.value.subtitle.show||S.value.subtitle.show&&S.value.subtitle.required?(T(),$(ve,{key:1,span:S.value.subtitle.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"subtitle",label:(Q=S.value.subtitle.name)!=null?Q:h.$t("article.subtitle"),rules:S.value.subtitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(A,{modelValue:m.value.subtitle,"onUpdate:modelValue":w[9]||(w[9]=Y=>m.value.subtitle=Y),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),(m.value.fullTitle||v.value)&&S.value.fullTitle.show||S.value.fullTitle.show&&S.value.fullTitle.required?(T(),$(ve,{key:2,span:S.value.fullTitle.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"fullTitle",label:(Q=S.value.fullTitle.name)!=null?Q:h.$t("article.fullTitle"),rules:S.value.fullTitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(A,{modelValue:m.value.fullTitle,"onUpdate:modelValue":w[10]||(w[10]=Y=>m.value.fullTitle=Y),type:"textarea",rows:2,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),(m.value.linkUrl||g.value)&&S.value.linkUrl.show||S.value.linkUrl.show&&S.value.linkUrl.required?(T(),$(ve,{key:3,span:S.value.linkUrl.double?12:24},{default:d(()=>[p(j,{prop:"linkUrl",rules:S.value.linkUrl.required?[{required:!0,message:()=>h.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}},{label:d(()=>{var Q;return[p(rt,{label:(Q=S.value.linkUrl.name)!=null?Q:h.$t("article.linkUrl"),message:"article.linkUrl",help:""},null,8,["label"])]}),default:d(()=>[p(A,{modelValue:m.value.linkUrl,"onUpdate:modelValue":w[12]||(w[12]=Q=>m.value.linkUrl=Q),maxlength:"255",disabled:m.value.src!=null&&m.value.type===3},{append:d(()=>[p(mt,{modelValue:m.value.targetBlank,"onUpdate:modelValue":w[11]||(w[11]=Q=>m.value.targetBlank=Q)},{default:d(()=>[F(N(h.$t("article.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"])]),_:1},8,["rules"])]),_:1},8,["span"])):ie("",!0),S.value.tags.show?(T(),$(ve,{key:4,span:S.value.tags.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"tagNames",label:(Q=S.value.tags.name)!=null?Q:h.$t("article.tags"),rules:S.value.tags.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(gn,{modelValue:m.value.tagNames,"onUpdate:modelValue":w[13]||(w[13]=Y=>m.value.tagNames=Y),multiple:"",filterable:"",remote:"",clearable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,"remote-method":Z,loading:H.value,class:"w-full",onFocusOnce:w[14]||(w[14]=()=>Z())},{default:d(()=>[(T(!0),we(Ve,null,Ge(G.value.map(Y=>Y.name),Y=>(T(),$(Nn,{key:Y,label:Y,value:Y},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),S.value.seoKeywords.show?(T(),$(ve,{key:5,span:S.value.seoKeywords.double?12:24},{default:d(()=>[p(j,{prop:"seoKeywords",rules:S.value.seoKeywords.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var Q;return[p(rt,{label:(Q=S.value.seoKeywords.name)!=null?Q:h.$t("article.seoKeywords"),message:"article.seoKeywords",help:""},null,8,["label"])]}),default:d(()=>[p(A,{modelValue:m.value.seoKeywords,"onUpdate:modelValue":w[15]||(w[15]=Q=>m.value.seoKeywords=Q),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):ie("",!0),S.value.seoDescription.show?(T(),$(ve,{key:6,span:S.value.seoDescription.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"seoDescription",label:(Q=S.value.seoDescription.name)!=null?Q:h.$t("article.seoDescription"),rules:S.value.seoDescription.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(A,{modelValue:m.value.seoDescription,"onUpdate:modelValue":w[16]||(w[16]=Y=>m.value.seoDescription=Y),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),S.value.author.show?(T(),$(ve,{key:7,span:S.value.author.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"author",label:(Q=S.value.author.name)!=null?Q:h.$t("article.author"),rules:S.value.author.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(A,{modelValue:m.value.author,"onUpdate:modelValue":w[17]||(w[17]=Y=>m.value.author=Y),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),S.value.editor.show?(T(),$(ve,{key:8,span:S.value.editor.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"editor",label:(Q=S.value.editor.name)!=null?Q:h.$t("article.editor"),rules:S.value.editor.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(A,{modelValue:m.value.editor,"onUpdate:modelValue":w[18]||(w[18]=Y=>m.value.editor=Y),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ie("",!0),S.value.image.show?(T(),$(ve,{key:9,span:S.value.image.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"image",label:(Q=S.value.image.name)!=null?Q:h.$t("article.image"),rules:S.value.image.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E(qu),{modelValue:m.value.image,"onUpdate:modelValue":w[19]||(w[19]=Y=>m.value.image=Y),height:S.value.image.imageHeight,width:S.value.image.imageWidth,mode:S.value.image.imageMode,disabled:Fe},null,8,["modelValue","height","width","mode","disabled"]),p(Pe,{class:"self-start ml-2",onClick:w[20]||(w[20]=()=>St())},{default:d(()=>[F(N(h.$t("article.extractImage")),1)]),_:1})]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),(T(!0),we(Ve,null,Ge(M.value,Q=>(T(),$(ve,{key:Q.code,span:Q.double?12:24},{default:d(()=>[p(j,{prop:"customs.".concat(Q.code),rules:Q.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(rt,{label:Q.name},null,8,["label"])]),default:d(()=>[p(fa,{modelValue:m.value.customs[Q.code],"onUpdate:modelValue":Y=>m.value.customs[Q.code]=Y,"model-key":m.value.customs[Q.code+"Key"],"onUpdate:modelKey":Y=>m.value.customs[Q.code+"Key"]=Y,field:Q},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),S.value.file.show?(T(),$(ve,{key:10,span:S.value.file.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"file",label:(Q=S.value.file.name)!=null?Q:h.$t("article.file"),rules:S.value.file.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(A,{modelValue:m.value.fileName,"onUpdate:modelValue":w[21]||(w[21]=Y=>m.value.fileName=Y)},{prepend:d(()=>[F(N(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(A,{modelValue:m.value.fileLength,"onUpdate:modelValue":w[22]||(w[22]=Y=>m.value.fileLength=Y)},{prepend:d(()=>[F(N(h.$t("size")),1)]),append:d(()=>w[64]||(w[64]=[F("Byte")])),_:1},8,["modelValue"])]),_:1})]),_:1}),p(A,{modelValue:m.value.file,"onUpdate:modelValue":w[23]||(w[23]=Y=>m.value.file=Y)},{prepend:d(()=>w[65]||(w[65]=[F("URL")])),_:1},8,["modelValue"]),p(E(Xn),{type:"file","on-success":Y=>(m.value.file=Y.url,m.value.fileName=Y.name,m.value.fileLength=Y.size),disabled:Fe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.video.show?(T(),$(ve,{key:11,span:S.value.video.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"video",label:(Q=S.value.video.name)!=null?Q:h.$t("article.video"),rules:S.value.video.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(A,{modelValue:m.value.video,"onUpdate:modelValue":w[24]||(w[24]=Y=>m.value.video=Y),maxlength:"255"},{prepend:d(()=>w[66]||(w[66]=[F("URL")])),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(A,{modelValue:m.value.videoDuration,"onUpdate:modelValue":w[25]||(w[25]=Y=>m.value.videoDuration=Y),maxlength:"10"},{prepend:d(()=>[F(N(h.$t("article.videoDuration")),1)]),append:d(()=>[F(N(E(ra)(m.value.videoDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(E(Xn),{type:"video","on-success":Y=>{m.value.video=Y.url,m.value.videoDuration=Y.duration,m.value.image||(m.value.image=Y.image)},disabled:Fe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.audio.show?(T(),$(ve,{key:12,span:S.value.audio.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"audio",label:(Q=S.value.audio.name)!=null?Q:h.$t("article.audio"),rules:S.value.audio.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(ve,{span:16},{default:d(()=>[p(A,{modelValue:m.value.audio,"onUpdate:modelValue":w[26]||(w[26]=Y=>m.value.audio=Y),maxlength:"255"},{prepend:d(()=>w[67]||(w[67]=[F("URL")])),_:1},8,["modelValue"])]),_:1}),p(ve,{span:8},{default:d(()=>[p(A,{modelValue:m.value.audioDuration,"onUpdate:modelValue":w[27]||(w[27]=Y=>m.value.audioDuration=Y),maxlength:"10"},{prepend:d(()=>[F(N(h.$t("article.audioDuration")),1)]),append:d(()=>[F(N(E(ra)(m.value.audioDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(E(Xn),{type:"audio","on-success":Y=>{m.value.audio=Y.url,m.value.audioDuration=Y.duration},disabled:Fe},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.doc.show?(T(),$(ve,{key:13,span:S.value.doc.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"doc",label:(Q=S.value.doc.name)!=null?Q:h.$t("article.doc"),rules:S.value.doc.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[ce("div",iy,[p(Dt,null,{default:d(()=>[p(ve,{span:12},{default:d(()=>[p(A,{modelValue:m.value.docName,"onUpdate:modelValue":w[28]||(w[28]=Y=>m.value.docName=Y)},{prepend:d(()=>[F(N(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(ve,{span:12},{default:d(()=>[p(A,{modelValue:m.value.docLength,"onUpdate:modelValue":w[29]||(w[29]=Y=>m.value.docLength=Y)},{prepend:d(()=>[F(N(h.$t("size")),1)]),append:d(()=>w[68]||(w[68]=[F("Byte")])),_:1},8,["modelValue"])]),_:1})]),_:1}),p(A,{modelValue:m.value.doc,"onUpdate:modelValue":w[30]||(w[30]=Y=>m.value.doc=Y)},{prepend:d(()=>w[69]||(w[69]=[F("URL")])),_:1},8,["modelValue"]),p(A,{modelValue:m.value.docOrig,"onUpdate:modelValue":w[31]||(w[31]=Y=>m.value.docOrig=Y)},{prepend:d(()=>[F(N(h.$t("article.docOrig")),1)]),_:1},8,["modelValue"]),K.value&&E(Ue).epRank>0?(T(),$(E(Xn),{key:0,type:"library",disabled:E(Re)("jodConvert:library")||Fe,"upload-action":E(lu),"on-success":Y=>{m.value.doc=Y.doc,m.value.docOrig=Y.docOrig,m.value.docName=Y.docName,m.value.docLength=Y.docLength,m.value.image=Y.docImage}},null,8,["disabled","upload-action","on-success"])):ie("",!0),!K.value&&E(Ue).epRank>0?(T(),$(zt,{key:1,title:h.$t("error.jodConverterNotEnabled"),type:"error",closable:!1},null,8,["title"])):ie("",!0),E(Ue).epRank===0?(T(),$(Pe,{key:2,type:"primary",onClick:w[32]||(w[32]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[F(N(h.$t("article.op.clickToUpload")),1)]),_:1})):ie("",!0)])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.imageList.show?(T(),$(ve,{key:14,span:S.value.imageList.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"imageList",label:(Q=S.value.imageList.name)!=null?Q:h.$t("article.imageList"),rules:S.value.imageList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E(qh),{modelValue:m.value.imageList,"onUpdate:modelValue":w[33]||(w[33]=Y=>m.value.imageList=Y),"max-height":S.value.imageList.imageMaxHeight,"max-width":S.value.imageList.imageMaxWidth,"list-type":S.value.imageList.imageListType,disabled:Fe},null,8,["modelValue","max-height","max-width","list-type","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.fileList.show?(T(),$(ve,{key:15,span:S.value.fileList.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"fileList",label:(Q=S.value.fileList.name)!=null?Q:h.$t("article.fileList"),rules:S.value.fileList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E(Yh),{modelValue:m.value.fileList,"onUpdate:modelValue":w[34]||(w[34]=Y=>m.value.fileList=Y),disabled:Fe},null,8,["modelValue","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),S.value.text.show?(T(),$(ve,{key:16,span:S.value.text.double?12:24},{default:d(()=>{var Q;return[p(j,{prop:"text",label:(Q=S.value.text.name)!=null?Q:h.$t("article.text"),rules:S.value.text.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>{var Y;return[ce("div",ry,[S.value.text.editorSwitch?(T(),$(kt,{key:0,modelValue:m.value.editorType,"onUpdate:modelValue":w[35]||(w[35]=nt=>m.value.editorType=nt),class:"mr-6",onChange:w[36]||(w[36]=()=>m.value.markdown="")},{default:d(()=>[(T(),we(Ve,null,Ge([1,2],nt=>p(Yn,{key:nt,value:nt},{default:d(()=>[F(N(h.$t("model.field.editorType.".concat(nt))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):ie("",!0),m.value.editorType===1&&K.value&&E(Ue).epRank>0?(T(),we("div",ay,[p(E(Xn),{type:"doc",disabled:E(Re)("jodConvert:doc"),"upload-action":E(uu),"on-success":nt=>m.value.text=nt,button:h.$t("article.op.docImport")},null,8,["disabled","upload-action","on-success","button"])])):ie("",!0),E(Ue).epRank===0&&E(Ue).epDisplay?(T(),we("div",sy,[p(Pe,{type:"primary",onClick:w[37]||(w[37]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[F(N(h.$t("article.op.docImport")),1)]),_:1})])):ie("",!0),m.value.editorType===2?(T(),$(E(Zl),{key:3,modelValue:m.value.markdown,"onUpdate:modelValue":w[38]||(w[38]=nt=>m.value.markdown=nt),html:m.value.text,"onUpdate:html":w[39]||(w[39]=nt=>m.value.text=nt),class:"leading-6"},null,8,["modelValue","html"])):(T(),$(E(Uu),{key:4,ref_key:"tinyText",ref:V,modelValue:m.value.text,"onUpdate:modelValue":w[40]||(w[40]=nt=>m.value.text=nt),disabled:Fe,init:{typesetting_options:(Y=E(o).currentSite.editor)==null?void 0:Y.typesetting}},null,8,["modelValue","disabled","init"]))])]}),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ie("",!0),(T(!0),we(Ve,null,Ge(P.value,Q=>(T(),$(ve,{key:Q.code,span:Q.double?12:24},{default:d(()=>[p(j,{prop:"customs.".concat(Q.code),rules:Q.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(rt,{label:Q.name},null,8,["label"])]),default:d(()=>[p(fa,{modelValue:m.value.customs[Q.code],"onUpdate:modelValue":Y=>m.value.customs[Q.code]=Y,field:Q},null,8,["modelValue","onUpdate:modelValue","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1024),p(ve,{span:6},{default:d(()=>[p(Gn,{type:"border-card",class:"ml-5"},{default:d(()=>[p(Vt,{label:h.$t("article.tabs.setting")},{default:d(()=>{var Q,Y,nt,mi,hi,yi,Qn,C,$e;return[p(j,{prop:"channelId",label:(Q=R.value.channel.name)!=null?Q:h.$t("article.channel"),rules:[{required:!0,message:()=>h.$t("v.required")},{validator:(fe,it,en)=>{var tn;if(((tn=D.value.find(jo=>jo.id===it))==null?void 0:tn.children.length)>0){en(h.$t("article.error.leafChannelOnly"));return}en()}}],"label-position":"top"},{default:d(()=>{var fe;return[p(fi,{modelValue:m.value.channelId,"onUpdate:modelValue":w[41]||(w[41]=it=>m.value.channelId=it),data:D.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":(fe=ue.channel)==null?void 0:fe.paths.map(it=>it.id),class:"w-full",onChange:w[42]||(w[42]=it=>{var en;k.value=(en=X.value.find(tn=>tn.id===it))==null?void 0:en.articleModelId})},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","rules"]),R.value.org.show?(T(),$(j,{key:0,label:(Y=R.value.org.name)!=null?Y:h.$t("article.org"),required:Ne,"label-position":"top"},{default:d(()=>{var fe,it,en;return[p(fi,{modelValue:m.value.orgId,"onUpdate:modelValue":w[43]||(w[43]=tn=>m.value.orgId=tn),data:((fe=ue.org)==null?void 0:fe.id)!=null&&te.value.indexOf(ue.org.id)===-1?[ue.org,...z.value]:z.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":((en=(it=ue.org)==null?void 0:it.paths)!=null?en:z.value).map(tn=>tn.id),class:"w-full"},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","required"])):ie("",!0),R.value.publishDate.show?(T(),$(j,{key:1,prop:"publishDate",rules:Ne?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(rt,{label:(fe=R.value.publishDate.name)!=null?fe:h.$t("article.publishDate"),message:"article.publishDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ce,{modelValue:m.value.publishDate,"onUpdate:modelValue":w[44]||(w[44]=fe=>m.value.publishDate=fe),type:"datetime",class:"w-full",onChange:w[45]||(w[45]=fe=>{fe===null&&(m.value.publishDate=void 0)})},null,8,["modelValue"])]),_:2},1032,["rules"])):ie("",!0),R.value.onlineDate.show?(T(),$(j,{key:2,prop:"onlineDate",rules:R.value.onlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(rt,{label:(fe=R.value.onlineDate.name)!=null?fe:h.$t("article.onlineDate"),message:"article.onlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ce,{modelValue:m.value.onlineDate,"onUpdate:modelValue":w[46]||(w[46]=fe=>m.value.onlineDate=fe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ie("",!0),R.value.offlineDate.show?(T(),$(j,{key:3,prop:"offlineDate",rules:R.value.offlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(rt,{label:(fe=R.value.offlineDate.name)!=null?fe:h.$t("article.offlineDate"),message:"article.offlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Ce,{modelValue:m.value.offlineDate,"onUpdate:modelValue":w[47]||(w[47]=fe=>m.value.offlineDate=fe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ie("",!0),R.value.source.show?(T(),$(j,{key:4,prop:"source",label:(nt=R.value.source.name)!=null?nt:h.$t("article.source"),rules:R.value.source.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{default:d(()=>[p(Kn,{modelValue:m.value.source,"onUpdate:modelValue":w[48]||(w[48]=fe=>m.value.source=fe),"value-key":"name","fetch-suggestions":async(fe,it)=>it(await pe(fe)),class:"w-full","highlight-first-item":"","hide-loading":"",clearable:"",onKeydown:w[49]||(w[49]=Ln(an(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","fetch-suggestions"])]),_:1},8,["label","rules"])):ie("",!0),R.value.articleTemplate.show?(T(),$(j,{key:5,prop:"articleTemplate",label:(mi=R.value.articleTemplate.name)!=null?mi:h.$t("article.articleTemplate"),rules:R.value.articleTemplate.required?{required:!0,message:()=>h.$t("v.required")}:void 0,"label-position":"top"},{label:d(()=>{var fe;return[p(rt,{label:(fe=R.value.articleTemplate.name)!=null?fe:h.$t("article.articleTemplate"),message:"article.articleTemplate",help:""},null,8,["label"])]}),default:d(()=>[p(gn,{modelValue:m.value.articleTemplate,"onUpdate:modelValue":w[50]||(w[50]=fe=>m.value.articleTemplate=fe),clearable:"",class:"w-full"},{default:d(()=>[(T(!0),we(Ve,null,Ge(b.value,fe=>(T(),$(Nn,{key:fe,label:fe+".html",value:fe},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):ie("",!0),R.value.user.show?(T(),$(j,{key:6,label:(hi=R.value.user.name)!=null?hi:h.$t("article.user"),"label-position":"top"},{default:d(()=>{var fe;return[p(A,{"model-value":(fe=m.value.user)==null?void 0:fe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ie("",!0),R.value.created.show?(T(),$(j,{key:7,label:(yi=R.value.created.name)!=null?yi:h.$t("article.created"),"label-position":"top"},{default:d(()=>[p(Ce,{"model-value":m.value.created,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ie("",!0),R.value.modifiedUser.show?(T(),$(j,{key:8,label:(Qn=R.value.modifiedUser.name)!=null?Qn:h.$t("article.modifiedUser"),"label-position":"top"},{default:d(()=>{var fe;return[p(A,{"model-value":(fe=m.value.modifiedUser)==null?void 0:fe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ie("",!0),R.value.modified.show?(T(),$(j,{key:9,label:(C=R.value.modified.name)!=null?C:h.$t("article.modified"),"label-position":"top"},{default:d(()=>[p(Ce,{"model-value":m.value.modified,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ie("",!0),(($e=m.value.destList)==null?void 0:$e.length)>0?(T(),$(j,{key:10,label:h.$t("article.destList"),"label-position":"top"},{default:d(()=>[(T(!0),we(Ve,null,Ge(m.value.destList,fe=>(T(),$(nr,{key:fe.id,content:(fe.siteId!=m.value.siteId?"[".concat(fe.site.name,"] "):"")+fe.channel.paths.map(it=>it.name).join("/"),placement:"top-start"},{default:d(()=>[p(A,{"model-value":(fe.siteId!=m.value.siteId?"[".concat(fe.site.name,"] "):"")+fe.channel.paths.map(it=>it.name).join("/"),disabled:""},{append:d(()=>[F(N(E(r)("article.type.".concat(fe.type))),1)]),_:2},1032,["model-value"])]),_:2},1032,["content"]))),128))]),_:1},8,["label"])):ie("",!0)]}),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"footer-action":d(({isEdit:ue,handleSubmit:Ne})=>[p(Pe,{disabled:E(Re)(ue?"article:update":"article:create"),type:"primary","native-type":"submit",onClick:an(()=>Ne(),["prevent"])},{default:d(()=>[F(N(h.$t(ue?"save":"submit")),1)]),_:2},1032,["disabled","onClick"]),ue?ie("",!0):(T(),$(Pe,{key:0,onClick:w[51]||(w[51]=()=>U())},{default:d(()=>[F(N(h.$t("article.op.saveAsDraft")),1)]),_:1}))]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","action","focus","init-values","to-values","model-value","addable","disable-edit"]),p(zu,{modelValue:tt.value,"onUpdate:modelValue":w[56]||(w[56]=ue=>tt.value=ue),urls:xe.value,"append-to-body":!0,onFinished:w[57]||(w[57]=ue=>m.value.image=ue[0])},null,8,["modelValue","urls"]),p(rr,{modelValue:$t.value,"onUpdate:modelValue":w[58]||(w[58]=ue=>$t.value=ue),title:h.$t("article.op.titleSimilarity"),width:"820px"},{default:d(()=>[p(ir,{data:Qe.value},{default:d(()=>[p(bt,{property:"id",label:"ID",width:"170px"}),p(bt,{property:"title",label:h.$t("article.similarity.title"),"show-overflow-tooltip":""},null,8,["label"]),p(bt,{property:"channel.name",label:h.$t("article.channel"),formatter:ue=>ue.channel.paths.map(Ne=>Ne.name).join(" / "),width:"180px","show-overflow-tooltip":""},null,8,["label","formatter"]),p(bt,{property:"score",label:h.$t("article.similarity.score"),formatter:ue=>h.$n(ue.score,"percent",{minimumFractionDigits:0}),width:"100px"},null,8,["label","formatter"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),p(Gh,{modelValue:ke.value,"onUpdate:modelValue":w[59]||(w[59]=ue=>ke.value=ue),"form-properties":J.value,"onUpdate:formProperties":w[60]||(w[60]=ue=>J.value=ue),onFinished:_},null,8,["modelValue","form-properties"]),p(Xh,{modelValue:s.value,"onUpdate:modelValue":w[61]||(w[61]=ue=>s.value=ue),onFinished:re},null,8,["modelValue"]),p(Jh,{modelValue:l.value,"onUpdate:modelValue":w[62]||(w[62]=ue=>l.value=ue),onFinished:ye},null,8,["modelValue"]),p(ty,{modelValue:f.value,"onUpdate:modelValue":w[63]||(w[63]=ue=>f.value=ue),"task-id":O.value,onFinished:lt},null,8,["modelValue","task-id"])])}}}),ly={class:"flex items-center justify-between"},uy=_t({name:"ArticleInternalPushForm",__name:"ArticlePushForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},type:{type:String,default:"external"}},emits:{"update:modelValue":null,finished:null},setup(e,{emit:t}){const n=e,i=t,{beanId:r,type:a,modelValue:o}=ri(n),{t:u}=ai(),c=q(),v=q({}),g=q({}),x=q(!1),m=q([]),V=q([]),K=q(),z=async()=>{(r==null?void 0:r.value)!=null&&(v.value=await hs(r.value))},te=async b=>{const k=a.value==="internal"?{isArticlePermission:!0}:{siteId:b};V.value=eu(ni(await $r(k))),V.value=oa(V.value,[...v.value.destList.map(I=>I.channel.id),v.value.channel.id])},D=async()=>{m.value=await Mu(),m.value=ni(m.value),m.value=oa(m.value,[v.value.siteId])};Nt(o,async()=>{o.value&&(await z(),a.value==="external"?D():te(),g.value={ids:[v.value.id],type:3})});const X=()=>{K.value!=null&&(g.value.channelIds=[...K.value.getCheckedNodes(),...K.value.getHalfCheckedNodes()].map(b=>b.id),c.value.validate())},L=()=>{c.value.validate(async b=>{if(b){x.value=!0;try{a.value==="internal"?await gu(g.value):await bu(g.value),i("finished"),i("update:modelValue",!1),Ot.success(u("success"))}finally{x.value=!1}}})};return(b,k)=>{const I=Gt,S=pn,R=us,M=Wi,P=bs,H=ds,G=kn,Z=fn,he=Su;return T(),$(he,{title:b.$t("article.op.".concat(E(a),"Push")),"model-value":e.modelValue,size:414,"onUpdate:modelValue":k[6]||(k[6]=pe=>b.$emit("update:modelValue",pe))},{default:d(()=>[p(G,{ref_key:"form",ref:c,model:g.value,"label-position":"top"},{default:d(()=>[p(S,null,{default:d(()=>[p(I,{"model-value":v.value.title,disabled:""},null,8,["model-value"])]),_:1}),p(S,{prop:"type"},{default:d(()=>[p(M,{modelValue:g.value.type,"onUpdate:modelValue":k[0]||(k[0]=pe=>g.value.type=pe)},{default:d(()=>[(T(),we(Ve,null,Ge([1,3],pe=>p(R,{key:pe,value:pe},{default:d(()=>[F(N(E(u)("article.type.".concat(pe))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),E(a)==="external"?(T(),$(S,{key:0,prop:"siteId",rules:[{required:!0,message:()=>b.$t("v.required")}]},{default:d(()=>[p(P,{modelValue:g.value.siteId,"onUpdate:modelValue":k[1]||(k[1]=pe=>g.value.siteId=pe),data:m.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",class:"w-full",onChange:k[2]||(k[2]=pe=>te(pe))},null,8,["modelValue","data"])]),_:1},8,["rules"])):ie("",!0),p(S,{prop:"channelIds",rules:[{required:!0,message:()=>b.$t("v.required")}]},{default:d(()=>[p(H,{ref_key:"channelTree",ref:K,data:V.value,"node-key":"id",props:{label:"name"},class:"w-full border rounded","check-strictly":"","default-expand-all":"","show-checkbox":"","check-on-click-node":"",onCheck:k[3]||(k[3]=()=>X())},null,8,["data"])]),_:1},8,["rules"])]),_:1},8,["model"])]),footer:d(()=>[ce("div",ly,[k[7]||(k[7]=ce("div",null,null,-1)),ce("div",null,[p(Z,{onClick:k[4]||(k[4]=()=>b.$emit("update:modelValue",!1))},{default:d(()=>[F(N(b.$t("cancel")),1)]),_:1}),p(Z,{type:"primary",loading:x.value,onClick:k[5]||(k[5]=()=>L())},{default:d(()=>[F(N(b.$t("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["title","model-value"])}}}),cy={class:"mb-1 ml-2"},dy={class:"mb-3"},py={class:"app-block"},fy={key:0},my={key:0},hy=["title"],yy={class:"text-xs"},vy={class:"text-xs"},gy={class:"text-xs"},by={class:"text-xs"},_y={class:"text-xs"},wy={class:"text-xs"},Ey={class:"text-xs"},xy={class:"text-xs"},rv=_t({name:"ArticleList",__name:"ArticleList",setup(e){var Xe;const{t}=ai(),n=q({}),i=q(),r=q(1),a=q(10),o=q(0),u=q(),c=q([]),v=q([]),g=q(!1),x=q(!1),m=q(),V=Ze(()=>c.value.map(A=>A.id)),K=q(!1),z=q("edit"),te=q([]),D=q(!1),X=q(),L=q(),b=q(),k=q(),I=q(),S=q(),R=q(),M=q([]),P=q(!1),H=q(),G=q(),Z=q(!1),he=["completelyDelete","delete","submit","archive","offline"],pe=q(he[0]),se=q(!1),me=q("internal"),at=Dl(),He=q(Number((Xe=at.query.status)!=null?Xe:"-1")),Ie=q([]),je=Ze(()=>Ie.value.find(A=>{var j;return A.id===((j=H.value)==null?void 0:j.articleModelId)})),U=Ze(()=>{var A;return JSON.parse(((A=je.value)==null?void 0:A.customs)||"[]")}),O=q({});Nt(U,async()=>{O.value={},U.value.filter(A=>["radio","select","checkbox","multipleSelect"].indexOf(A.type)>=0).map(A=>A.dictTypeId).forEach(async A=>{O.value[A]=(await _u({typeId:A})).map(j=>({label:j.name,value:j.value}))})});const J=A=>pe.value==="delete"?![20].includes(A.status):pe.value==="submit"?![0,12].includes(A.status):pe.value==="archive"?[0].includes(A.status):pe.value==="offline"?[0,1,5,11,12].includes(A.status):(pe.value==="completelyDelete",!0),ke=Ze(()=>v.value.filter(A=>J(A)).map(A=>A.id)),f=async(A,j)=>{if(A==="delete")await ys(j);else if(A==="submit")await fs(j);else if(A==="archive")await vs(j);else if(A==="offline")await gs(j);else if(A==="completelyDelete")await ms(j);else throw new Error("not support action: ".concat(A));s(),Ot.success(t("success"))},s=async()=>{var A;g.value=!0;try{const{content:j,totalElements:ve}=await wu({...Il(n.value),Q_EQ_status_Short:He.value!==-1?He.value:void 0,subChannelId:(A=H.value)==null?void 0:A.id,Q_OrderBy:i.value,page:r.value,pageSize:a.value});K.value=i.value!==void 0,c.value=j,o.value=Number(ve)}finally{g.value=!1}},l=async()=>{P.value=!0;try{M.value=ni(await $r({isArticlePermission:!0}))}finally{P.value=!1}},y=async()=>{te.value=await iu()},_=async()=>{Ie.value=await ps({type:"article"})};let B;const re=()=>{const A=document.querySelector("#dataTable .el-table__body-wrapper tbody");B=Kl.create(A,{handle:".drag-handle",animation:200,chosenClass:"sortable-chosen",onEnd:async function(j){const{oldIndex:ve,newIndex:mt}=j;ve!==mt&&(await Eu(c.value[ve].id,c.value[mt].id),c.value.splice(mt,0,c.value.splice(ve,1)[0]),Ot.success(t("success")))}})};Rr(()=>{s(),l(),y(),_(),re()}),Ya(()=>{B!==void 0&&B.destroy()});const ne=({column:A,prop:j,order:ve})=>{var mt;j&&ve?i.value=((mt=A.sortBy)!=null?mt:j)+(ve==="descending"?"_desc":""):i.value=void 0,s()},ye=()=>{r.value=1,s()},Be=()=>{u.value.clearSort(),jl(n.value),i.value=void 0,r.value=1,s()},lt=()=>{z.value="add",m.value=void 0,x.value=!0},et=A=>{z.value="copy",m.value=A,x.value=!0},Te=A=>{Re("article:update")||(z.value="edit",m.value=A,x.value=!0)},tt=A=>{m.value=A,me.value="internal",se.value=!0},xe=A=>{m.value=A,me.value="external",se.value=!0},St=(A,j)=>{var gn,Dt;D.value=!0,X.value=A,L.value=j.id,b.value=j.title,k.value=j.description,I.value=j.video;const ve=Ds(j.text),Nn=Rs("img",ve).map(zt=>Cs(zt,"src")).filter(zt=>zt!=null);S.value=[...(Dt=(gn=j.imageList)==null?void 0:gn.map(zt=>zt.url))!=null?Dt:[],...Nn],j.image&&S.value.push(j.image)},$t=async A=>{await xu([A]),s(),Ot.success(t("success"))},Qe=A=>{G.value=A,Z.value=!0},oe=q(!1),h=q(),w=q({id:0,sticky:0,stickyDate:null}),Pe=(A,j,ve)=>{oe.value=!0,w.value={id:A,sticky:j<1?1:j,stickyDate:ve}},Ye=async()=>{h.value.validate(async A=>{A&&(await ua([w.value.id],w.value.sticky,w.value.stickyDate),s(),oe.value=!1,Ot.success(t("success")))})},ft=async A=>{await ua([A],0,void 0),s(),Ot.success(t("success"))};return(A,j)=>{const ve=fn,mt=ds,Nn=Ka,gn=zl,Dt=zi,zt=ji,Yn=cs,kt=us,fi=Wi,Ce=Nr,Kn=Fi,nr=Ml,Vt=qi,Gn=Dr,bt=Ul,ir=Ol,rr=Ll,ue=Ir,Ne=os,Fe=Yl,Q=pn,Y=ss,nt=kn,mi=Qt,hi=Wl,yi=Hl,Qn=Qa;return T(),$(yi,null,{default:d(()=>[p(gn,{width:"220px",class:"pr-3"},{default:d(()=>[p(Nn,{class:"p-2 bg-white rounded-sm"},{default:d(()=>[ce("div",cy,[p(ve,{type:H.value==null?"primary":void 0,link:"",onClick:j[0]||(j[0]=()=>{R.value.setCurrentKey(null),H.value=void 0,ye()})},{default:d(()=>[F(N(A.$t("article.allChannel")),1)]),_:1},8,["type"])]),Pi(p(mt,{ref_key:"channelTree",ref:R,data:M.value,props:{label:"name"},"expand-on-click-node":!1,"node-key":"id","highlight-current":"",onNodeClick:j[1]||(j[1]=C=>{H.value=C,ye()})},null,8,["data"]),[[Qn,P.value]])]),_:1})]),_:1}),p(hi,{class:"p-0"},{default:d(()=>[ce("div",dy,[p(E(ku),{params:n.value,onSearch:ye,onReset:Be},{default:d(()=>[p(E(Oe),{label:A.$t("article.title"),name:"Q_Contains_@articleExt-title"},null,8,["label"]),p(E(Oe),{label:A.$t("article.text"),name:"Q_Contains_@articleExt-text"},null,8,["label"]),(T(!0),we(Ve,null,Ge(U.value.filter(C=>["imageUpload","videoUpload","audioUpload","fileUpload"].indexOf(C.type)===-1),C=>(T(),we(Ve,{key:C.code},[["number","slider"].indexOf(C.type)>=0?(T(),$(E(Oe),{key:0,label:C.name,name:"Q_GE_@articleExt-mainsJson$".concat(C.code,"_Int,Q_LE_@articleExt-mainsJson$").concat(C.code,"_Int"),type:"number"},null,8,["label","name"])):C.type==="date"&&C.dateType==="datetime"?(T(),$(E(Oe),{key:1,label:C.name,name:"Q_GE_@articleExt-mainsJson$".concat(C.code,"_DateTime,Q_LE_@articleExt-mainsJson$").concat(C.code,"_DateTime"),type:"datetime"},null,8,["label","name"])):C.type==="date"?(T(),$(E(Oe),{key:2,label:C.name,name:"Q_GE_@articleExt-mainsJson$".concat(C.code,"_Date,Q_LE_@articleExt-mainsJson$").concat(C.code,"_Date"),type:"date"},null,8,["label","name"])):C.type==="switch"?(T(),$(E(Oe),{key:3,label:C.name,name:"Q_EQ_@articleExt-mainsJson$".concat(C.code,"_Boolean"),options:[{label:A.$t("yes"),value:"true"},{label:A.$t("no"),value:"false"}],multiple:!1},null,8,["label","name","options"])):["radio","select"].indexOf(C.type)>=0?(T(),$(E(Oe),{key:4,label:C.name,name:"Q_In_@articleExt-mainsJson$".concat(C.code,"Key").concat(C.dataType==="number"?"_Int":""),options:O.value[C.dictTypeId]},null,8,["label","name","options"])):["checkbox","multipleSelect"].indexOf(C.type)>=0?(T(),$(E(Oe),{key:5,label:C.name,name:"Q_ArrayIn_@articleExt-mainsJson$".concat(C.code,"Key").concat(C.dataType==="number"?"_Int":""),options:O.value[C.dictTypeId]},null,8,["label","name","options"])):C.clob?(T(),$(E(Oe),{key:6,label:C.name,name:"Q_Contains_@articleExt-clobsJson$".concat(C.code)},null,8,["label","name"])):(T(),$(E(Oe),{key:7,label:C.name,name:"Q_Contains_@articleExt-mainsJson$".concat(C.code)},null,8,["label","name"]))],64))),128)),p(E(Oe),{label:A.$t("article.publishDate"),name:"Q_GE_publishDate_DateTime,Q_LE_publishDate_DateTime",type:"datetime"},null,8,["label"]),p(E(Oe),{label:A.$t("article.block"),name:"Q_In_@BlockItem-blockId_Long",options:te.value.filter(C=>C.recommendable).map(C=>({label:C.name,value:C.id}))},null,8,["label","options"]),p(E(Oe),{label:A.$t("article.org"),name:"Q_Like_org-name"},null,8,["label"]),p(E(Oe),{label:A.$t("article.user"),name:"Q_Like_user-username"},null,8,["label"]),p(E(Oe),{label:A.$t("article.created"),name:"Q_GE_created_DateTime,Q_LE_created_DateTime",type:"datetime"},null,8,["label"]),p(E(Oe),{label:A.$t("article.modifiedUser"),name:"Q_Like_modifiedUser@user-username"},null,8,["label"]),p(E(Oe),{label:A.$t("article.modified"),name:"Q_GE_modified_DateTime,Q_LE_modified_DateTime",type:"datetime"},null,8,["label"]),p(E(Oe),{label:A.$t("article.author"),name:"Q_Contains_@articleExt-author"},null,8,["label"]),p(E(Oe),{label:A.$t("article.editor"),name:"Q_Contains_@articleExt-editor"},null,8,["label"]),p(E(Oe),{label:A.$t("article.source"),name:"Q_Contains_@articleExt-source"},null,8,["label"]),p(E(Oe),{label:A.$t("article.subtitle"),name:"Q_Contains_@articleExt-subtitle"},null,8,["label"]),p(E(Oe),{label:A.$t("article.fullTitle"),name:"Q_Contains_@articleExt-fullTitle"},null,8,["label"]),p(E(Oe),{label:A.$t("article.seoKeywords"),name:"Q_Contains_@articleExt-seoKeywords"},null,8,["label"]),p(E(Oe),{label:A.$t("article.seoDescription"),name:"Q_Contains_@articleExt-seoDescription"},null,8,["label"])]),_:1},8,["params"])]),ce("div",null,[p(ve,{type:"primary",disabled:E(Re)("article:create"),icon:E(ts),onClick:j[2]||(j[2]=()=>lt())},{default:d(()=>[F(N(A.$t("add")),1)]),_:1},8,["disabled","icon"]),p(zt,{modelValue:pe.value,"onUpdate:modelValue":j[3]||(j[3]=C=>pe.value=C),class:"w-64 ml-2"},{prefix:d(()=>[F(N(A.$t("batchAction")+":"),1)]),default:d(()=>[(T(),we(Ve,null,Ge(he,C=>p(Dt,{key:C,disabled:E(Re)("article:".concat(C)),value:C,label:A.$t("article.op.".concat(C))},null,8,["disabled","value","label"])),64))]),_:1},8,["modelValue"]),p(Yn,{title:A.$t("confirmExecute"),onConfirm:j[4]||(j[4]=()=>f(pe.value,ke.value))},{reference:d(()=>[p(ve,{disabled:ke.value.length<=0||E(Re)("article:".concat(pe.value)),icon:E(Nl)},{default:d(()=>[F(N(A.$t("execute")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),p(E(Au),{name:"article",class:"ml-2"})]),p(fi,{modelValue:He.value,"onUpdate:modelValue":j[5]||(j[5]=C=>He.value=C),class:"mt-3",onChange:j[6]||(j[6]=()=>s())},{default:d(()=>[p(kt,{value:-1},{default:d(()=>[F(N(A.$t("all")),1)]),_:1}),p(kt,{value:0},{default:d(()=>[F(N(A.$t("article.status.0")),1)]),_:1}),p(kt,{value:1},{default:d(()=>[F(N(A.$t("article.status.1")),1)]),_:1}),p(kt,{value:5},{default:d(()=>[F(N(A.$t("article.status.5")),1)]),_:1}),p(kt,{value:10},{default:d(()=>[F(N(A.$t("article.status.10")),1)]),_:1}),p(kt,{value:11},{default:d(()=>[F(N(A.$t("article.status.11")),1)]),_:1}),p(kt,{value:12},{default:d(()=>[F(N(A.$t("article.status.12")),1)]),_:1}),p(kt,{value:20},{default:d(()=>[F(N(A.$t("article.status.20")),1)]),_:1}),p(kt,{value:21},{default:d(()=>[F(N(A.$t("article.status.21")),1)]),_:1}),p(kt,{value:22},{default:d(()=>[F(N(A.$t("article.status.22")),1)]),_:1})]),_:1},8,["modelValue"]),ce("div",py,[Pi((T(),$(ue,{id:"dataTable",ref_key:"table",ref:u,"row-key":"id",data:c.value,onSelectionChange:j[7]||(j[7]=C=>v.value=C),onRowDblclick:j[8]||(j[8]=C=>Te(C.id)),onSortChange:ne},{default:d(()=>[p(E(Tu),{name:"article"},{default:d(()=>[p(Ce,{type:"selection",selectable:J,width:"38"}),p(Ce,{width:"42"},{default:d(()=>[p(Kn,{class:Ht(["text-lg align-middle",K.value||E(Re)("article:updateOrder")?["cursor-not-allowed","text-gray-disabled"]:["cursor-move","text-gray-secondary","drag-handle"]]),disalbed:""},{default:d(()=>[p(E(Pl))]),_:1},8,["class"])]),_:1}),p(Ce,{property:"id",label:"ID",width:"170",sortable:"custom"}),p(Ce,{property:"title",label:A.$t("article.title"),"min-width":"280","sort-by":"@articleExt-title",sortable:"custom"},{default:d(({row:C})=>[p(nr,{href:"javascript:",underline:!1,onClick:()=>E(Fo)(C.status,C.url,C.dynamicUrl)},{default:d(()=>[F(N(C.title),1)]),_:2},1032,["onClick"]),(T(!0),we(Ve,null,Ge(C.blockItemList,$e=>(T(),$(Vt,{key:$e.id,type:$e.enabled?void 0:"info",size:"small",class:"ml-1",closable:E($l)("blockItem:delete"),onClose:()=>$t($e.id)},{default:d(()=>[F(N($e.block.name),1)]),_:2},1032,["type","closable","onClose"]))),128)),C.sticky>0?(T(),$(Gn,{key:0,placement:"top"},{content:d(()=>[F(N(A.$t("article.sticky"))+" ",1),C.stickyDate!=null?(T(),we("span",fy,N(E(yt)(C.stickyDate).format(" YYYY-MM-DD HH:mm:ss")),1)):ie("",!0)]),default:d(()=>[p(Vt,{type:"danger",class:"mx-1",effect:"light",size:"small",round:"",closable:!E(Re)("article:sticky"),onClose:()=>ft(C.id)},{default:d(()=>[F(N(C.sticky),1)]),_:2},1032,["closable","onClose"])]),_:2},1024)):ie("",!0),C.srcId!=null?(T(),$(Gn,{key:1,placement:"top"},{content:d(()=>[F(N(E(t)("article.type.".concat(C.type)))+": ",1),C.siteId!==C.src.siteId?(T(),we("span",my,"["+N(C.src.site.name)+"]",1)):ie("",!0),F(" "+N(C.src.channel.paths.map($e=>$e.name).join(" / ")),1)]),default:d(()=>[p(Kn,{class:"ml-1 align-middle"},{default:d(()=>[p(E(Vl))]),_:1})]),_:2},1024)):ie("",!0)]),_:1},8,["label"]),(T(!0),we(Ve,null,Ge(U.value.filter(C=>["text","textarea","number","date","color","slider","switch","radio","checkbox","select","multipleSelect"].includes(C.type)),C=>(T(),$(Ce,{key:C.code,property:"customs.".concat(C.code),label:C.name,"sort-by":"mainsJson$".concat(C.code).concat(C.dataType==="number"?"_Int":""),sortable:["checkbox","multipleSelect"].indexOf(C.type)===-1?"custom":void 0,display:C.showInList?void 0:"none","show-overflow-tooltip":""},{default:d(({row:$e})=>[C.type==="date"&&C.dateType==="date"?(T(),we(Ve,{key:0},[F(N(E(yt)($e.customs[C.code]).format("YYYY-MM-DD")),1)],64)):C.type==="date"&&C.dateType==="datetime"?(T(),we(Ve,{key:1},[F(N(E(yt)($e.customs[C.code]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):C.type==="switch"?(T(),$(Vt,{key:2,type:$e.customs[C.code]?"success":"info",size:"small"},{default:d(()=>[F(N(A.$t($e.customs[C.code]?"yes":"no")),1)]),_:2},1032,["type"])):ie("",!0)]),_:2},1032,["property","label","sort-by","sortable","display"]))),128)),p(Ce,{property:"channel.name",label:A.$t("article.channel"),"sort-by":"channel-name",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:C})=>[ce("span",{title:C.channel.paths.map($e=>$e.name).join(" / ")},N(C.channel.name),9,hy)]),_:1},8,["label"]),p(Ce,{property:"org.name",label:A.$t("article.org"),"sort-by":"org-name",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"author",label:A.$t("article.author"),"sort-by":"@articleExt-author",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"editor",label:A.$t("article.editor"),"sort-by":"@articleExt-editor",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"source",label:A.$t("article.source"),"sort-by":"@articleExt-source",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"user.username",label:A.$t("article.user"),"sort-by":"user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"created",label:A.$t("article.created"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:C})=>[F(N(E(yt)(C.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ce,{property:"modifiedUser.username",label:A.$t("article.modifiedUser"),"sort-by":"modifiedUser@user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"modified",label:A.$t("article.modified"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:C})=>[F(N(E(yt)(C.modified).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ce,{property:"publishDate",label:A.$t("article.publishDate"),"min-width":"120",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:C})=>[F(N(E(yt)(C.publishDate).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Ce,{property:"views",label:A.$t("article.views"),"sort-by":"@articleExt-views",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"dayViews",label:A.$t("article.dayViews"),"sort-by":"@articleExt-dayViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"weekViews",label:A.$t("article.weekViews"),"sort-by":"@articleExt-weekViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"monthViews",label:A.$t("article.monthViews"),"sort-by":"@articleExt-monthViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"quarterViews",label:A.$t("article.quarterViews"),"sort-by":"@articleExt-quarterViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"yearViews",label:A.$t("article.yearViews"),"sort-by":"@articleExt-yearViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"ups",label:A.$t("article.ups"),"sort-by":"@articleExt-ups",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"downs",label:A.$t("article.downs"),"sort-by":"@articleExt-downs",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Ce,{property:"status",label:A.$t("article.status"),sortable:"custom","show-overflow-tooltip":""},{default:d(({row:C})=>[C.status===0?(T(),$(Vt,{key:0,type:"success",size:"small"},{default:d(()=>[F(N(A.$t("article.status.".concat(C.status))),1)]),_:2},1024)):C.status===1?(T(),$(Vt,{key:1,size:"small"},{default:d(()=>[F(N(A.$t("article.status.".concat(C.status))),1)]),_:2},1024)):C.status===20||C.status===21?(T(),$(Vt,{key:2,type:"warning",size:"small"},{default:d(()=>[F(N(A.$t("article.status.".concat(C.status))),1)]),_:2},1024)):C.status===22?(T(),$(Gn,{key:3,content:C.rejectReason,placement:"top"},{default:d(()=>[p(Vt,{type:"danger",size:"small"},{default:d(()=>[F(N(A.$t("article.status.".concat(C.status))),1)]),_:2},1024)]),_:2},1032,["content"])):(T(),$(Vt,{key:4,type:"info",size:"small"},{default:d(()=>[F(N(A.$t("article.status.".concat(C.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(Ce,{label:A.$t("table.action"),width:"260"},{default:d(({row:C})=>[p(ve,{type:"primary",disabled:E(Re)("article:update"),size:"small",link:"",onClick:()=>Te(C.id)},{default:d(()=>[F(N(A.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),E(Ue).epRank>0||E(Ue).epDisplay?(T(),$(ve,{key:0,type:"primary",disabled:!C.processInstanceId||E(Re)("processInstance:task")||E(Ue).epRank<1,size:"small",link:"",onClick:()=>Qe(C.processInstanceId)},{default:d(()=>[F(N(A.$t("processInstance.op.task")),1)]),_:2},1032,["disabled","onClick"])):ie("",!0),p(Yn,{title:A.$t("confirmDelete"),onConfirm:()=>f("delete",[C.id])},{reference:d(()=>[p(ve,{type:"primary",disabled:E(Re)("article:delete")||[20].includes(C.status),size:"small",link:""},{default:d(()=>[F(N(A.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"]),p(Yn,{title:A.$t("confirmCompletelyDelete"),onConfirm:()=>f("completelyDelete",[C.id])},{reference:d(()=>[p(ve,{type:"primary",disabled:E(Re)("article:completelyDelete"),size:"small",link:""},{default:d(()=>[F(N(A.$t("completelyDelete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"]),p(rr,{class:"ml-2 align-middle"},{dropdown:d(()=>[ce("div",null,[p(ir,null,{default:d(()=>[p(bt,{disabled:E(Re)("article:submit")||[0,12].includes(C.status),onClick:()=>f("submit",[C.id])},{default:d(()=>[ce("span",yy,N(A.$t("article.op.submit")),1)]),_:2},1032,["disabled","onClick"]),p(bt,{disabled:E(Re)("article:archive")||![0].includes(C.status),onClick:()=>f("archive",[C.id])},{default:d(()=>[ce("span",vy,N(A.$t("article.op.archive")),1)]),_:2},1032,["disabled","onClick"]),p(bt,{disabled:E(Re)("article:offline")||![0,1,5,11,12].includes(C.status),onClick:()=>f("offline",[C.id])},{default:d(()=>[ce("span",gy,N(A.$t("article.op.offline")),1)]),_:2},1032,["disabled","onClick"]),p(bt,{disabled:E(Re)("article:create"),divided:"",onClick:()=>et(C.id)},{default:d(()=>[ce("span",by,N(A.$t("copy")),1)]),_:2},1032,["disabled","onClick"]),E(Ue).epRank>=2||E(Ue).epDisplay?(T(),$(bt,{key:0,disabled:E(Re)("article:internalPush")||C.status!==0||C.srcId!=null||E(Ue).epRank<2,title:E(Ue).epRank<2?A.$t("error.enterprise.short"):void 0,onClick:()=>tt(C.id)},{default:d(()=>[ce("span",_y,N(A.$t("article.op.internalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ie("",!0),E(Ue).epRank>=3||E(Ue).epDisplay?(T(),$(bt,{key:1,disabled:E(Re)("article:externalPush")||C.status!==0||C.srcId!=null||E(Ue).epRank<3,title:E(Ue).epRank<3?A.$t("error.enterprise.short"):void 0,onClick:()=>xe(C.id)},{default:d(()=>[ce("span",wy,N(A.$t("article.op.externalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ie("",!0),p(bt,{disabled:E(Re)("article:sticky"),divided:"",onClick:()=>Pe(C.id,C.sticky,C.stickyDate)},{default:d(()=>[ce("span",Ey,N(A.$t("article.op.sticky")),1)]),_:2},1032,["disabled","onClick"]),(T(!0),we(Ve,null,Ge(te.value.filter($e=>$e.enabled&&$e.recommendable),($e,fe)=>(T(),$(bt,{key:$e.id,disabled:E(Re)("blockItem:create")||C.blocks.findIndex(it=>it.id===$e.id)>=0,divided:fe===0,onClick:()=>St($e.id,C)},{default:d(()=>[ce("span",xy,N("".concat(A.$t("article.op.recommendTo"),": ").concat($e.name)),1)]),_:2},1032,["disabled","divided","onClick"]))),128))]),_:2},1024)])]),default:d(()=>[p(ve,{type:"primary",size:"small",link:""},{default:d(()=>[p(Kn,{class:"text-primary"},{default:d(()=>[p(E(Bl))]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[Qn,g.value]]),p(Ne,{"current-page":r.value,"onUpdate:currentPage":j[9]||(j[9]=C=>r.value=C),"page-size":a.value,"onUpdate:pageSize":j[10]||(j[10]=C=>a.value=C),total:o.value,"page-sizes":E(ql),layout:E(Fl),size:"small",background:"",class:"justify-end px-3 py-2",onSizeChange:j[11]||(j[11]=()=>s()),onCurrentChange:j[12]||(j[12]=()=>s())},null,8,["current-page","page-size","total","page-sizes","layout"])]),p(oy,{modelValue:x.value,"onUpdate:modelValue":j[13]||(j[13]=C=>x.value=C),action:z.value,"bean-id":m.value,"bean-ids":V.value,channel:H.value,onFinished:s},null,8,["modelValue","action","bean-id","bean-ids","channel"]),p(uy,{modelValue:se.value,"onUpdate:modelValue":j[14]||(j[14]=C=>se.value=C),"bean-id":m.value,type:me.value,onFinished:s},null,8,["modelValue","bean-id","type"]),p(Wu,{modelValue:D.value,"onUpdate:modelValue":j[15]||(j[15]=C=>D.value=C),"bean-id":void 0,"bean-ids":[],"block-id":X.value,"article-id":L.value,title:b.value,description:k.value,video:I.value,images:S.value,onFinished:s},null,8,["modelValue","block-id","article-id","title","description","video","images"]),p($h,{modelValue:Z.value,"onUpdate:modelValue":j[16]||(j[16]=C=>Z.value=C),"instance-id":G.value},null,8,["modelValue","instance-id"]),p(mi,{modelValue:oe.value,"onUpdate:modelValue":j[20]||(j[20]=C=>oe.value=C),title:A.$t("article.sticky"),width:768},{default:d(()=>[p(nt,{ref_key:"stickyForm",ref:h,model:w.value,"label-width":"150px"},{default:d(()=>[p(Q,{prop:"sticky"},{label:d(()=>[p(rt,{message:"article.sticky",help:""})]),default:d(()=>[p(Fe,{modelValue:w.value.sticky,"onUpdate:modelValue":j[17]||(j[17]=C=>w.value.sticky=C),min:0,max:999},null,8,["modelValue"])]),_:1}),p(Q,{prop:"stickyDate",rules:{validator:(C,$e,fe)=>{if($e!=null&&Date.now()>new Date($e).getTime()){fe(A.$t("article.error.stickyDate.beforeCurrent"));return}fe()}}},{label:d(()=>[p(rt,{message:"article.stickyDate",help:""})]),default:d(()=>[p(Y,{modelValue:w.value.stickyDate,"onUpdate:modelValue":j[18]||(j[18]=C=>w.value.stickyDate=C),type:"datetime"},null,8,["modelValue"])]),_:1},8,["rules"]),p(ve,{type:"primary",onClick:j[19]||(j[19]=()=>Ye())},{default:d(()=>[F(N(A.$t("submit")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1})}}});export{rv as default};
