import{d as x,S as p,r as h,o as w,b as m,e as l,K as i,k as d,i as t,w as e,a7 as N,a8 as B,n as r,t as s,j as y,a1 as b}from"./index-B6OoDg6B.js";import{d as j}from"./duration-Bs6V08tO.js";import{b as R}from"./stat-CFOZ0IOn.js";const S={class:"p-3 mt-3 app-block"},H={class:"flex p-3 mt-3 justify-evenly app-block"},E={class:"h-64 w-60 text-primary"},P={class:"mt-2 text-center"},U={class:"flex items-center justify-center mt-2"},q={class:"text-3xl"},F={key:0},K={key:1},L={class:"mt-4 space-y-2 text-sm"},T={key:0},z={key:1},A={key:0},G={key:1},I={key:0},J={key:1},O={class:"h-64 w-60 text-gray-secondary"},Q={class:"mt-2 text-center"},W={class:"flex items-center justify-center mt-2"},X={class:"text-3xl"},Z={key:0},tt={key:1},et={class:"mt-4 space-y-2 text-sm"},at={key:0},st={key:1},ot={key:0},nt={key:1},ut={key:0},lt={key:1},_t=x({__name:"VisitVisitor",setup(it){p.extend(j);const C=h("last30day"),$=a=>{switch(a){case"today":return p().format("YYYY-MM-DD");case"yesterday":return p().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return p().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return p().subtract(29,"day").format("YYYY-MM-DD");case"lastYear":return p().subtract(1,"year").format("YYYY-MM-DD");default:return}},D=a=>a==="yesterday"?p().subtract(1,"day").format("YYYY-MM-DD"):p().format("YYYY-MM-DD"),o=h({}),n=h({}),g=async a=>{const v=await R({begin:$(a),end:D(a)});o.value=v.newVisitor,n.value=v.oldVisitor,o.value.pvCount=Number(o.value.pvCount),n.value.pvCount=Number(n.value.pvCount),o.value.uvCount=Number(o.value.uvCount),n.value.uvCount=Number(n.value.uvCount);const f=o.value.uvCount+n.value.uvCount;f>0?(o.value.proportion=o.value.uvCount*100/f,n.value.proportion=n.value.uvCount*100/f):(o.value.proportion=50,n.value.proportion=50)};return w(async()=>{g(C.value)}),(a,v)=>{var k,V;const f=m("el-radio-button"),M=m("el-radio-group"),Y=m("el-icon"),u=m("el-col"),_=m("el-row");return l(),i("div",null,[d("div",S,[d("div",null,[t(M,{modelValue:C.value,"onUpdate:modelValue":v[0]||(v[0]=c=>C.value=c),onChange:v[1]||(v[1]=c=>g(c))},{default:e(()=>[(l(),i(N,null,B(["today","yesterday","last7day","last30day","lastYear","all"],c=>t(f,{key:c,value:c},{default:e(()=>[r(s(a.$t("visit.".concat(c))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),d("div",H,[d("div",E,[d("div",P,s(a.$t("visitVisitor.newVisitor")),1),d("div",U,[t(Y,{class:"text-5xl"},{default:e(()=>[t(y(b))]),_:1}),d("span",q,[o.value.uvCount>0?(l(),i("span",F,s(a.$n((k=o.value.proportion)!=null?k:0,"decimal")),1)):(l(),i("span",K,"0")),v[2]||(v[2]=r("% "))])]),d("div",L,[t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(o.value.pvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(o.value.uvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",T,s(a.$n(o.value.bounceCount*100/o.value.uvCount,"decimal"))+"%",1)):(l(),i("span",z,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",A,s(y(p).duration(o.value.duration/o.value.uvCount,"seconds").format("HH:mm:ss")),1)):(l(),i("span",G,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",I,s(a.$n(o.value.pvCount/o.value.uvCount,"decimal")),1)):(l(),i("span",J,"-"))]),_:1})]),_:1})])]),d("div",O,[d("div",Q,s(a.$t("visitVisitor.oldVisitor")),1),d("div",W,[t(Y,{class:"text-5xl"},{default:e(()=>[t(y(b))]),_:1}),d("span",X,[n.value.uvCount>0?(l(),i("span",Z,s(a.$n((V=n.value.proportion)!=null?V:0,"decimal")),1)):(l(),i("span",tt,"0")),v[3]||(v[3]=r("% "))])]),d("div",et,[t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(n.value.pvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(n.value.uvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(u,{span:12},{default:e(()=>[n.value.uvCount>0?(l(),i("span",at,s(a.$n(n.value.bounceCount*100/n.value.uvCount,"decimal"))+"%",1)):(l(),i("span",st,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",ot,s(y(p).duration(n.value.duration/n.value.uvCount,"seconds").format("HH:mm:ss")),1)):(l(),i("span",nt,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[n.value.uvCount>0?(l(),i("span",ut,s(a.$n(n.value.pvCount/n.value.uvCount,"decimal")),1)):(l(),i("span",lt,"-"))]),_:1})]),_:1})])])])])])}}});export{_t as default};
