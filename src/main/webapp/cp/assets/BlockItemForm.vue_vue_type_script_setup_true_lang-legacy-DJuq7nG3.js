System.register(["./index-legacy-Dn378GZk.js","./el-switch-legacy-CJu_GaeZ.js","./el-select-legacy-BR_8Webd.js","./config-legacy-DvEG9oKg.js","./content-legacy-mGlTTE-V.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-CIId0m1t.js","./FileListUpload.vue_vue_type_style_index_0_scoped_b3a09e2e_lang-legacy-rgJAACf3.js","./BaseUpload.vue_vue_type_style_index_0_scoped_248c0508_lang-legacy-CKxOBGSm.js","./vuedraggable.umd-legacy-ISFTCR-2.js","./BaseUpload-legacy-BZSNhk5x.js"],(function(e,l){"use strict";var a,t,u,d,i,o,r,n,m,s,c,v,b,p,g,k,y,h,V,I,_,f,$,q,U,x,w,B,j,F,S,C,R,T,E,A,W;return{setters:[e=>{a=e.d,t=e.A,u=e.r,d=e.B,i=e.bH,o=e.b,r=e.c,n=e.w,m=e.h,s=e.a6,c=e.P,v=e.aF,b=e.aG,p=e.a2,g=e.l,k=e.ay,y=e.m,h=e.v,V=e.x,I=e.z,_=e.ar,f=e.o,$=e.i,q=e.g,U=e.j,x=e.k},e=>{w=e.E},e=>{B=e.E,j=e.a},e=>{F=e.a},e=>{S=e.F,C=e.W,R=e.X,T=e.Y},e=>{E=e._},e=>{A=e.a},null,null,e=>{W=e.B}],execute:function(){const l=["onClick"],H=["src"],L=e("_",a({__name:"ImageExtractor",props:{modelValue:{type:Boolean,required:!0},urls:{type:Array,default:()=>[]},min:{type:Number,default:1},max:{type:Number,default:1},appendToBody:{type:Boolean}},emits:["update:modelValue","finished"],setup(e,{emit:a}){const _=e,f=a,{urls:$,max:q,modelValue:U}=t(_),x=u();return d(U,(()=>{U.value&&(x.value=i.uniq($.value).map((e=>({url:e,checked:!1}))))})),(a,t)=>{const u=p,d=s,i=y,_=I;return o(),r(_,{"model-value":e.modelValue,title:a.$t("article.extractImage"),width:768,"append-to-body":e.appendToBody,"onUpdate:modelValue":t[1]||(t[1]=e=>a.$emit("update:modelValue",e))},{footer:n((()=>[m(i,{type:"primary",disabled:x.value.filter((e=>e.checked)).length<e.min,onClick:t[0]||(t[0]=()=>(f("finished",x.value.filter((e=>e.checked)).map((e=>e.url))),void f("update:modelValue",!1)))},{default:n((()=>[h(V(a.$t("ok")),1)])),_:1},8,["disabled"])])),default:n((()=>[m(d,{gutter:16},{default:n((()=>[(o(!0),c(v,null,b(x.value,(e=>(o(),r(u,{key:e.url,src:e,span:8,class:"mt-2"},{default:n((()=>[g("div",{class:k(["p-1 border-2 rounded cursor-pointer text-center",{"border-primary":e.checked,"border-2":e.checked}]),onClick:()=>(e=>{if(e.checked)return void(e.checked=!e.checked);let l=0;x.value.forEach((e=>{e.checked&&(l+=1),l>=q.value&&(e.checked=!1)})),e.checked=!0})(e)},[g("img",{src:e.url,class:"max-h-36 inline"},null,8,H)],10,l)])),_:2},1032,["src"])))),128))])),_:1})])),_:1},8,["model-value","title","append-to-body"])}}}));e("a",a({name:"BlockItemForm",__name:"BlockItemForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},blockId:{type:String,default:null},articleId:{type:String,default:null},title:{type:String,default:null},description:{type:String,default:null},video:{type:String,default:null},images:{type:Array,default:()=>[]}},emits:{"update:modelValue":null,finished:null},setup(e){const l=e,{blockId:a}=t(l),d=u(),i=u(),s=u({}),p=u([]),g=_((()=>p.value.find((e=>e.id===(d.value??a?.value)))));f((async()=>{p.value=await F()}));const k=u(!1);return(l,t)=>{const u=j,I=B,_=$,f=U,F=y,H=w;return o(),c("div",null,[m(E,{values:s.value,"onUpdate:values":t[14]||(t[14]=e=>s.value=e),name:l.$t("menu.content.blockItem"),"query-bean":x(T),"create-bean":x(R),"update-bean":x(C),"delete-bean":x(S),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:i.value,"init-values":()=>({blockId:x(a),articleId:e.articleId,title:e.title,description:e.description,video:e.video,enabled:!0}),"to-values":e=>({...e,articleTitle:e.article?.title,articleId:e.article?.id}),addable:g.value?.enabled,perms:"blockItem","model-value":e.modelValue,"onUpdate:modelValue":t[15]||(t[15]=e=>l.$emit("update:modelValue",e)),onFinished:t[16]||(t[16]=()=>l.$emit("finished")),onBeanChange:t[17]||(t[17]=e=>d.value=e.blockId)},{default:n((({isEdit:a})=>[m(_,{prop:"blockId",label:l.$t("blockItem.block"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n((()=>[m(I,{modelValue:s.value.blockId,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.blockId=e),class:"w-full",disabled:"",onChange:t[1]||(t[1]=e=>d.value=e)},{default:n((()=>[(o(!0),c(v,null,b(p.value,(e=>(o(),c(v,{key:e.id},[a||e.enabled?(o(),r(u,{key:0,label:e.name,value:e.id,disabled:!e.enabled},null,8,["label","value","disabled"])):q("",!0)],64)))),128))])),_:2},1032,["modelValue"])])),_:2},1032,["label","rules"]),a&&null!=s.value.articleId?(o(),r(_,{key:0,label:l.$t("blockItem.articleId")},{default:n((()=>[m(f,{modelValue:s.value.articleId,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.articleId=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):q("",!0),a&&null!=s.value.articleTitle?(o(),r(_,{key:1,label:l.$t("blockItem.articleTitle")},{default:n((()=>[m(f,{modelValue:s.value.articleTitle,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.articleTitle=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):q("",!0),m(_,{prop:"title",label:l.$t("blockItem.title"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n((()=>[m(f,{ref_key:"focus",ref:i,modelValue:s.value.title,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value.title=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"]),null==s.value.articleId&&g.value?.withLinkUrl?(o(),r(_,{key:2,prop:"linkUrl",label:l.$t("blockItem.linkUrl"),rules:g.value?.linkUrlRequired?[{required:!0,message:()=>l.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}},{default:n((()=>[m(f,{modelValue:s.value.linkUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value.linkUrl=e),maxlength:"255"},null,8,["modelValue"])])),_:1},8,["label","rules"])):q("",!0),g.value?.withSubtitle?(o(),r(_,{key:3,prop:"subtitle",label:l.$t("blockItem.subtitle"),rules:{required:g.value?.subtitleRequired,message:()=>l.$t("v.required")}},{default:n((()=>[m(f,{modelValue:s.value.subtitle,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value.subtitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"])):q("",!0),g.value?.withDescription?(o(),r(_,{key:4,prop:"description",label:l.$t("blockItem.description"),rules:{required:g.value?.descriptionRequired,message:()=>l.$t("v.required")}},{default:n((()=>[m(f,{modelValue:s.value.description,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.description=e),type:"textarea",rows:5,maxlength:"1000"},null,8,["modelValue"])])),_:1},8,["label","rules"])):q("",!0),g.value?.withImage?(o(),r(_,{key:5,prop:"image",label:l.$t("blockItem.image"),rules:{required:g.value?.imageRequired,message:()=>l.$t("v.required")}},{default:n((()=>[m(x(A),{modelValue:s.value.image,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.image=e),width:g.value.imageWidth,height:g.value.imageHeight,mode:"manual"},null,8,["modelValue","width","height"]),e.images.length>0?(o(),r(F,{key:0,class:"self-start ml-2",onClick:t[9]||(t[9]=()=>k.value=!0)},{default:n((()=>[h(V(l.$t("article.extractImage")),1)])),_:1})):q("",!0)])),_:1},8,["label","rules"])):q("",!0),g.value?.withMobileImage?(o(),r(_,{key:6,prop:"mobileImage",label:l.$t("blockItem.mobileImage"),rules:{required:g.value?.mobileImageRequired,message:()=>l.$t("v.required")}},{default:n((()=>[m(x(A),{modelValue:s.value.mobileImage,"onUpdate:modelValue":t[10]||(t[10]=e=>s.value.mobileImage=e),width:g.value.mobileImageWidth,height:g.value.mobileImageHeight,mode:"manual"},null,8,["modelValue","width","height"])])),_:1},8,["label","rules"])):q("",!0),g.value?.withVideo?(o(),r(_,{key:7,prop:"video",label:l.$t("blockItem.video"),rules:{required:g.value?.videoRequired,message:()=>l.$t("v.required")}},{default:n((()=>[m(f,{modelValue:s.value.video,"onUpdate:modelValue":t[11]||(t[11]=e=>s.value.video=e),maxlength:"255"},{prepend:n((()=>t[20]||(t[20]=[h("URL")]))),_:1},8,["modelValue"]),m(x(W),{type:"video","on-success":e=>s.value.video=e.url},null,8,["on-success"])])),_:1},8,["label","rules"])):q("",!0),m(_,{prop:"targetBlank",label:l.$t("blockItem.targetBlank")},{default:n((()=>[m(H,{modelValue:s.value.targetBlank,"onUpdate:modelValue":t[12]||(t[12]=e=>s.value.targetBlank=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(_,{prop:"enabled",label:l.$t("blockItem.enabled")},{default:n((()=>[m(H,{modelValue:s.value.enabled,"onUpdate:modelValue":t[13]||(t[13]=e=>s.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","addable","model-value"]),m(L,{modelValue:k.value,"onUpdate:modelValue":t[18]||(t[18]=e=>k.value=e),urls:e.images,"append-to-body":!0,onFinished:t[19]||(t[19]=e=>s.value.image=e[0])},null,8,["modelValue","urls"])])}}}))}}}));
