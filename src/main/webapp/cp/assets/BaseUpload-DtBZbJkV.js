import{d as w,A as E,u as I,a as A,r as _,ar as i,b as d,P as k,h as C,w as L,aC as x,l as N,x as T,a_ as V,t as $,k as p,aT as z,aU as M,c as O,aV as D,g as F,_ as H}from"./index-__TSAjOL.js";import{E as P}from"./BaseUpload.vue_vue_type_style_index_0_scoped_248c0508_lang-XLXSgCOW.js";import{f as j,T as f,U as J,V as R,i as q}from"./config-BS48XX7b.js";const G=w({__name:"BaseUpload",props:{type:{type:String,default:"file",validator:a=>["image","video","audio","library","doc","file","any"].includes(a)},button:{type:String,default:null},data:{type:Object,default:null},uploadAction:{type:String,default:null},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},multiple:{type:Boolean},disabled:{type:Boolean,default:!1},onSuccess:{type:Function,default:null}},setup(a){const m=a,{type:r,uploadAction:l,fileAccept:o,fileMaxSize:s}=E(m),{t:v}=I(),e=A(),u=_({}),y=i(()=>{if((l==null?void 0:l.value)!=null)return l.value;switch(r.value){case"image":return q;case"video":return R;case"audio":return J;case"library":return f;case"doc":return f;case"file":return j;default:throw new Error("Type not support: ".concat(r.value))}}),g=i(()=>{if((o==null?void 0:o.value)!=null)return o.value;switch(r.value){case"image":return e.upload.imageInputAccept;case"video":return e.upload.videoInputAccept;case"audio":return e.upload.audioInputAccept;case"library":return e.upload.libraryInputAccept;case"doc":return e.upload.docInputAccept;case"file":return e.upload.fileInputAccept;case"any":return;default:throw new Error("Type not support: ".concat(r.value))}}),n=i(()=>{if((s==null?void 0:s.value)!=null)return s.value;switch(r.value){case"image":return e.upload.imageLimitByte;case"video":return e.upload.videoLimitByte;case"audio":return e.upload.audioLimitByte;case"library":return e.upload.libraryLimitByte;case"doc":return e.upload.docLimitByte;case"file":return e.upload.fileLimitByte;default:return 0}}),b=t=>n.value>0&&t.size>n.value?($.error(v("error.fileMaxSize",{size:"".concat(n.value/1024/1024," MB")})),!1):!0,U=t=>{V(JSON.parse(t.message))};return(t,K)=>{const B=P,S=D;return d(),k("div",null,[C(B,{action:y.value,headers:{...p(M)(),...p(z)()},data:a.data,accept:g.value,"before-upload":b,"on-success":a.onSuccess,"on-progress":(c,h)=>u.value=h,"on-error":U,"show-file-list":!1,disabled:a.disabled,multiple:a.multiple,drag:""},{default:L(()=>[x(t.$slots,"default",{},()=>{var c;return[N("span",null,T((c=a.button)!=null?c:t.$t("clickOrDragToUpload")),1)]},!0)]),_:3},8,["action","headers","data","accept","on-success","on-progress","disabled","multiple"]),u.value.status==="uploading"?(d(),O(S,{key:0,percentage:parseInt(u.value.percentage,10)},null,8,["percentage"])):F("",!0)])}}}),Y=H(G,[["__scopeId","data-v-248c0508"]]);export{Y as B};
