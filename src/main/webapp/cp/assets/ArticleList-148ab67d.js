import{a4 as Hs,d as vn,p as Dn,r as X,b as G,c as ua,e as M,f as U,w as d,k as Te,g as ai,i as c,l as O,t as $,j as C,U as Lt,a5 as Ys,_ as hi,u as Pn,a as Ki,a6 as at,a7 as ca,v as Nn,I as Be,a8 as Tn,m as si,a9 as Gs,aa as da,ab as pa,h as re,ac as fa,ad as ha,ae as ma,E as xt,af as ya,ag as ct,ah as mt,Y as Ks,ai as va,aj as Xs,ak as Qs,al as Zs,am as Js,an as Ne,ao as Er,ap as eo,aq as to,ar as no,as as wt,at as xr,a3 as qe,au as io,P as Wn,C as ro,o as ao,av as so,aw as oo,ax as lo,ay as uo,az as co,aA as po,aB as fo,aC as ho,aD as mo}from"./index-53093fce.js";import{S as yo}from"./sortable.esm-c0d7cc14.js";import{x as vo,h as go,d as bo,B as Ti,r as wo,f as _r,T as Eo}from"./TuiEditor-d48935a3.js";import{t as oi,d as xo,a as Sr}from"./tree-e8204b87.js";import{i as _o,f as So,q as Ao,a as ko}from"./config-61e6aebd.js";import{j as To,b as Co,c as ga,d as Ar,u as Ro,e as ba,f as No,g as Io,h as Do,i as Xi,k as Po,p as Mo,r as Lo,l as wa,s as Ea,m as xa,o as _a,n as Bo,t as $o,v as Oo,w as Vo,x as Fo,y as Uo,z as kr}from"./content-428531a8.js";import{_ as qo,a as Ye,b as jo,c as zo}from"./QueryItem.vue_vue_type_script_setup_true_lang-94058d51.js";import{q as Wo,v as Ho,a as Yo,b as Go}from"./system-737fc114.js";import{a as Tr,m as Cr,g as Rr}from"./data-619fd67e.js";import{_ as Nr}from"./FieldItem.vue_vue_type_script_setup_true_lang-8a53b42b.js";import{_ as Ko}from"./DialogForm.vue_vue_type_script_setup_true_lang-8e1e8f21.js";import{T as Xo}from"./Tinymce-683f8417.js";import{I as Qo,a as Zo}from"./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-ab60634e.js";import{d as Jo}from"./vuedraggable.umd-6a21d6e3.js";import{B as Sn}from"./BaseUpload-a59ce225.js";import{_ as el,a as tl}from"./BlockItemForm.vue_vue_type_script_setup_true_lang-9adabd6c.js";import"./index-aa008802.js";/* empty css                                                                   */var ee;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(ee||(ee={}));var P;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"})(P||(P={}));function Rt(e){return e===ee.Space||e===ee.NewLine||e===ee.Tab||e===ee.FormFeed||e===ee.CarriageReturn}function Hn(e){return e===ee.Slash||e===ee.Gt||Rt(e)}function Ir(e){return e>=ee.Zero&&e<=ee.Nine}function nl(e){return e>=ee.LowerA&&e<=ee.LowerZ||e>=ee.UpperA&&e<=ee.UpperZ}function il(e){return e>=ee.UpperA&&e<=ee.UpperF||e>=ee.LowerA&&e<=ee.LowerF}var _t;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(_t||(_t={}));const et={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class rl{constructor({xmlMode:t=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=P.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=P.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=t,this.decodeEntities=n,this.entityTrie=t?vo:go}reset(){this.state=P.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=P.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(t){t===ee.Lt||!this.decodeEntities&&this.fastForwardTo(ee.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=P.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===ee.Amp&&(this.state=P.BeforeEntity)}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?Hn(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=P.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===ee.Gt||Rt(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===et.TitleEnd?this.decodeEntities&&t===ee.Amp&&(this.state=P.BeforeEntity):this.fastForwardTo(ee.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===ee.Lt)}stateCDATASequence(t){t===et.Cdata[this.sequenceIndex]?++this.sequenceIndex===et.Cdata.length&&(this.state=P.InCommentLike,this.currentSequence=et.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=P.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===et.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=P.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!Hn(t):nl(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=P.SpecialStartSequence}stateBeforeTagName(t){if(t===ee.ExclamationMark)this.state=P.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===ee.Questionmark)this.state=P.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,!this.xmlMode&&n===et.TitleEnd[2]?this.startSpecial(et.TitleEnd,3):this.state=!this.xmlMode&&n===et.ScriptEnd[2]?P.BeforeSpecialS:P.InTagName}else t===ee.Slash?this.state=P.BeforeClosingTagName:(this.state=P.Text,this.stateText(t))}stateInTagName(t){Hn(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=P.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){Rt(t)||(t===ee.Gt?this.state=P.Text:(this.state=this.isTagStartChar(t)?P.InClosingTagName:P.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===ee.Gt||Rt(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=P.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.state=P.Text,this.baseState=P.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===ee.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=P.InSpecialTag,this.sequenceIndex=0):this.state=P.Text,this.baseState=this.state,this.sectionStart=this.index+1):t===ee.Slash?this.state=P.InSelfClosingTag:Rt(t)||(this.state=P.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===ee.Gt?(this.cbs.onselfclosingtag(this.index),this.state=P.Text,this.baseState=P.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Rt(t)||(this.state=P.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===ee.Eq||Hn(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=P.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===ee.Eq?this.state=P.BeforeAttributeValue:t===ee.Slash||t===ee.Gt?(this.cbs.onattribend(_t.NoValue,this.index),this.state=P.BeforeAttributeName,this.stateBeforeAttributeName(t)):Rt(t)||(this.cbs.onattribend(_t.NoValue,this.index),this.state=P.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===ee.DoubleQuote?(this.state=P.InAttributeValueDq,this.sectionStart=this.index+1):t===ee.SingleQuote?(this.state=P.InAttributeValueSq,this.sectionStart=this.index+1):Rt(t)||(this.sectionStart=this.index,this.state=P.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ee.DoubleQuote?_t.Double:_t.Single,this.index),this.state=P.BeforeAttributeName):this.decodeEntities&&t===ee.Amp&&(this.baseState=this.state,this.state=P.BeforeEntity)}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,ee.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,ee.SingleQuote)}stateInAttributeValueNoQuotes(t){Rt(t)||t===ee.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(_t.Unquoted,this.index),this.state=P.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===ee.Amp&&(this.baseState=this.state,this.state=P.BeforeEntity)}stateBeforeDeclaration(t){t===ee.OpeningSquareBracket?(this.state=P.CDATASequence,this.sequenceIndex=0):this.state=t===ee.Dash?P.BeforeComment:P.InDeclaration}stateInDeclaration(t){(t===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=P.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=P.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===ee.Dash?(this.state=P.InCommentLike,this.currentSequence=et.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=P.InDeclaration}stateInSpecialComment(t){(t===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=P.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===et.ScriptEnd[3]?this.startSpecial(et.ScriptEnd,4):n===et.StyleEnd[3]?this.startSpecial(et.StyleEnd,4):(this.state=P.InTagName,this.stateInTagName(t))}stateBeforeEntity(t){this.entityExcess=1,this.entityResult=0,t===ee.Number?this.state=P.BeforeNumericEntity:t===ee.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=P.InNamedEntity,this.stateInNamedEntity(t))}stateInNamedEntity(t){if(this.entityExcess+=1,this.trieIndex=bo(this.entityTrie,this.trieCurrent,this.trieIndex+1,t),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&Ti.VALUE_LENGTH;if(n){const i=(n>>14)-1;if(!this.allowLegacyEntity()&&t!==ee.Semi)this.trieIndex+=i;else{const r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,i===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&Ti.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~Ti.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(t){(t|32)===ee.LowerX?(this.entityExcess++,this.state=P.InHexEntity):(this.state=P.InNumericEntity,this.stateInNumericEntity(t))}emitNumericEntity(t){const n=this.index-this.entityExcess-1;n+2+ +(this.state===P.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(t),this.emitCodePoint(wo(this.entityResult))),this.state=this.baseState}stateInNumericEntity(t){t===ee.Semi?this.emitNumericEntity(!0):Ir(t)?(this.entityResult=this.entityResult*10+(t-ee.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(t){t===ee.Semi?this.emitNumericEntity(!0):Ir(t)?(this.entityResult=this.entityResult*16+(t-ee.Zero),this.entityExcess++):il(t)?(this.entityResult=this.entityResult*16+((t|32)-ee.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===P.Text||this.baseState===P.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===P.Text||this.state===P.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===P.InAttributeValueDq||this.state===P.InAttributeValueSq||this.state===P.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case P.Text:{this.stateText(t);break}case P.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case P.InSpecialTag:{this.stateInSpecialTag(t);break}case P.CDATASequence:{this.stateCDATASequence(t);break}case P.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case P.InAttributeName:{this.stateInAttributeName(t);break}case P.InCommentLike:{this.stateInCommentLike(t);break}case P.InSpecialComment:{this.stateInSpecialComment(t);break}case P.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case P.InTagName:{this.stateInTagName(t);break}case P.InClosingTagName:{this.stateInClosingTagName(t);break}case P.BeforeTagName:{this.stateBeforeTagName(t);break}case P.AfterAttributeName:{this.stateAfterAttributeName(t);break}case P.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case P.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case P.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case P.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case P.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case P.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case P.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case P.InDeclaration:{this.stateInDeclaration(t);break}case P.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case P.BeforeComment:{this.stateBeforeComment(t);break}case P.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case P.InNamedEntity:{this.stateInNamedEntity(t);break}case P.BeforeEntity:{this.stateBeforeEntity(t);break}case P.InHexEntity:{this.stateInHexEntity(t);break}case P.InNumericEntity:{this.stateInNumericEntity(t);break}default:this.stateBeforeNumericEntity(t)}this.index++}this.cleanup()}finish(){this.state===P.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.state===P.InCommentLike?this.currentSequence===et.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===P.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===P.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===P.InTagName||this.state===P.BeforeAttributeName||this.state===P.BeforeAttributeValue||this.state===P.AfterAttributeName||this.state===P.InAttributeName||this.state===P.InAttributeValueSq||this.state===P.InAttributeValueDq||this.state===P.InAttributeValueNq||this.state===P.InClosingTagName||this.cbs.ontext(this.sectionStart,t)}emitPartial(t,n){this.baseState!==P.Text&&this.baseState!==P.InSpecialTag?this.cbs.onattribdata(t,n):this.cbs.ontext(t,n)}emitCodePoint(t){this.baseState!==P.Text&&this.baseState!==P.InSpecialTag?this.cbs.onattribentity(t):this.cbs.ontextentity(t)}}const on=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Re=new Set(["p"]),Dr=new Set(["thead","tbody"]),Pr=new Set(["dd","dt"]),Mr=new Set(["rt","rp"]),al=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Re],["h1",Re],["h2",Re],["h3",Re],["h4",Re],["h5",Re],["h6",Re],["select",on],["input",on],["output",on],["button",on],["datalist",on],["textarea",on],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Pr],["dt",Pr],["address",Re],["article",Re],["aside",Re],["blockquote",Re],["details",Re],["div",Re],["dl",Re],["fieldset",Re],["figcaption",Re],["figure",Re],["footer",Re],["form",Re],["header",Re],["hr",Re],["main",Re],["nav",Re],["ol",Re],["pre",Re],["section",Re],["table",Re],["ul",Re],["rt",Mr],["rp",Mr],["tbody",Dr],["tfoot",Dr]]),sl=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Lr=new Set(["math","svg"]),Br=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),ol=/\s|\//;let ll=class{constructor(t,n={}){var i,r,a,o,l;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:!n.xmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:!n.xmlMode,this.tokenizer=new((a=n.Tokenizer)!==null&&a!==void 0?a:rl)(this.options,this),(l=(o=this.cbs).onparserinit)===null||l===void 0||l.call(o,this)}ontext(t,n){var i,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n}ontextentity(t){var n,i;const r=this.tokenizer.getSectionStart();this.endIndex=r-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,_r(t)),this.startIndex=r}isVoidElement(t){return!this.options.xmlMode&&sl.has(t)}onopentagname(t,n){this.endIndex=n;let i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;const o=!this.options.xmlMode&&al.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){const l=this.stack.pop();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,l,!0)}this.isVoidElement(t)||(this.stack.push(t),Lr.has(t)?this.foreignContext.push(!0):Br.has(t)&&this.foreignContext.push(!1)),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var i,r,a,o,l,u;this.endIndex=n;let g=this.getSlice(t,n);if(this.lowerCaseTagNames&&(g=g.toLowerCase()),(Lr.has(g)||Br.has(g))&&this.foreignContext.pop(),this.isVoidElement(g))!this.options.xmlMode&&g==="br"&&((r=(i=this.cbs).onopentagname)===null||r===void 0||r.call(i,"br"),(o=(a=this.cbs).onopentag)===null||o===void 0||o.call(a,"br",{},!0),(u=(l=this.cbs).onclosetag)===null||u===void 0||u.call(l,"br",!1));else{const E=this.stack.lastIndexOf(g);if(E!==-1)if(this.cbs.onclosetag){let k=this.stack.length-E;for(;k--;)this.cbs.onclosetag(this.stack.pop(),k!==0)}else this.stack.length=E;else!this.options.xmlMode&&g==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,i;const r=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.pop())}onattribname(t,n){this.startIndex=t;const i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=_r(t)}onattribend(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===_t.Double?'"':t===_t.Single?"'":t===_t.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(ol);let i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction(`!${r}`,`!${i}`)}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction(`?${r}`,`?${i}`)}this.startIndex=n+1}oncomment(t,n,i){var r,a,o,l;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(l=(o=this.cbs).oncommentend)===null||l===void 0||l.call(o),this.startIndex=n+1}oncdata(t,n,i){var r,a,o,l,u,g,E,k,p,Q;this.endIndex=n;const ae=this.getSlice(t,n-i);this.options.xmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(l=(o=this.cbs).ontext)===null||l===void 0||l.call(o,ae),(g=(u=this.cbs).oncdataend)===null||g===void 0||g.call(u)):((k=(E=this.cbs).oncomment)===null||k===void 0||k.call(E,`[CDATA[${ae}]]`),(Q=(p=this.cbs).oncommentend)===null||Q===void 0||Q.call(p)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};var Ae;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(Ae||(Ae={}));function ul(e){return e.type===Ae.Tag||e.type===Ae.Script||e.type===Ae.Style}Ae.Root;Ae.Text;Ae.Directive;Ae.Comment;Ae.Script;Ae.Style;Ae.Tag;Ae.CDATA;Ae.Doctype;class Sa{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Ra(this,t)}}class Qi extends Sa{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}let Mi=class extends Qi{constructor(){super(...arguments),this.type=Ae.Text}get nodeType(){return 3}};class Aa extends Qi{constructor(){super(...arguments),this.type=Ae.Comment}get nodeType(){return 8}}class ka extends Qi{constructor(t,n){super(n),this.name=t,this.type=Ae.Directive}get nodeType(){return 1}}class Zi extends Sa{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class Ta extends Zi{constructor(){super(...arguments),this.type=Ae.CDATA}get nodeType(){return 4}}class Li extends Zi{constructor(){super(...arguments),this.type=Ae.Root}get nodeType(){return 9}}class Ca extends Zi{constructor(t,n,i=[],r=t==="script"?Ae.Script:t==="style"?Ae.Style:Ae.Tag){super(i),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,i;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[t]}})}}function Jn(e){return ul(e)}function cl(e){return e.type===Ae.CDATA}function Bi(e){return e.type===Ae.Text}function dl(e){return e.type===Ae.Comment}function pl(e){return e.type===Ae.Directive}function fl(e){return e.type===Ae.Root}function hl(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Ra(e,t=!1){let n;if(Bi(e))n=new Mi(e.data);else if(dl(e))n=new Aa(e.data);else if(Jn(e)){const i=t?Ci(e.children):[],r=new Ca(e.name,{...e.attribs},i);i.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(cl(e)){const i=t?Ci(e.children):[],r=new Ta(i);i.forEach(a=>a.parent=r),n=r}else if(fl(e)){const i=t?Ci(e.children):[],r=new Li(i);i.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(pl(e)){const i=new ka(e.name,e.data);e["x-name"]!=null&&(i["x-name"]=e["x-name"],i["x-publicId"]=e["x-publicId"],i["x-systemId"]=e["x-systemId"]),n=i}else throw new Error(`Not implemented yet: ${e.type}`);return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Ci(e){const t=e.map(n=>Ra(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const $r={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class ml{constructor(t,n,i){this.dom=[],this.root=new Li(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=$r),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:$r,this.elementCB=i!=null?i:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Li(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const i=this.options.xmlMode?Ae.Tag:void 0,r=new Ca(t,n,void 0,i);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===Ae.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new Mi(t);this.addNode(i),this.lastNode=i}}oncomment(t){if(this.lastNode&&this.lastNode.type===Ae.Comment){this.lastNode.data+=t;return}const n=new Aa(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Mi(""),n=new Ta([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const i=new ka(t,n);this.addNode(i)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),i&&(t.prev=i,i.next=t),t.parent=n,this.lastNode=null}}function Na(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function yl(e,t,n=!0,i=1/0){return vl(e,Array.isArray(t)?t:[t],n,i)}function vl(e,t,n,i){const r=[],a=[t],o=[0];for(;;){if(o[0]>=a[0].length){if(o.length===1)return r;a.shift(),o.shift();continue}const l=a[0][o[0]++];if(e(l)&&(r.push(l),--i<=0))return r;n&&hl(l)&&l.children.length>0&&(o.unshift(0),a.unshift(l.children))}}const gl={tag_name(e){return typeof e=="function"?t=>Jn(t)&&e(t.name):e==="*"?Jn:t=>Jn(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>Bi(t)&&e(t.data):t=>Bi(t)&&t.data===e}};function Ia(e,t,n=!0,i=1/0){return yl(gl.tag_name(e),t,n,i)}function Da(e,t){const n=new ml(void 0,t);return new ll(n,t).end(e),n.root}function kt(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const Mn=Object.prototype.toString,bl=Object.prototype.hasOwnProperty;function $i(e){return e===void 0}function Gt(e){return e!==void 0}function wl(e){return e==null}function vt(e){return Mn.call(e)==="[object Array]"}function cn(e){return Mn.call(e)==="[object Object]"}function $t(e){return Mn.call(e)==="[object Number]"}function Bt(e){const t=Mn.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function St(e){return Mn.call(e)==="[object String]"}function Ji(e,t){return bl.call(e,t)}function gt(e,t){const n=tr(t);let i;return ne(e,function(r,a){if(n(r,a))return i=r,!1}),i}function El(e,t){const n=tr(t);let i=vt(e)?-1:void 0;return ne(e,function(r,a){if(n(r,a))return i=a,!1}),i}function dn(e,t){const n=tr(t);let i=[];return ne(e,function(r,a){n(r,a)&&i.push(r)}),i}function ne(e,t){let n,i;if($i(e))return;const r=vt(e)?Sl:_l;for(let a in e)if(Ji(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function pn(e,t,n){return ne(e,function(i,r){n=t(n,i,r)}),n}function er(e,t){return!!pn(e,function(n,i,r){return n&&t(i,r)},!0)}function Pa(e,t){return!!gt(e,t)}function xl(e,t){let n=[];return ne(e,function(i,r){n.push(t(i,r))}),n}function Or(e){return function(t){return er(e,function(n,i){return t[i]===n})}}function tr(e){return Bt(e)?e:t=>t===e}function _l(e){return e}function Sl(e){return Number(e)}function Al(e,t){let n,i,r,a;function o(k){let p=Date.now(),Q=k?0:a+t-p;if(Q>0)return l(Q);e.apply(r,i),u()}function l(k){n=setTimeout(o,k)}function u(){n&&clearTimeout(n),n=a=i=r=void 0}function g(){n&&o(!0),u()}function E(...k){a=Date.now(),i=k,r=this,n||l(t)}return E.flush=g,E.cancel=u,E}function Ot(e,t){return e.bind(t)}function ce(e,...t){return Object.assign(e,...t)}function kl(e,t,n){let i=e;return ne(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let o=t[a+1],l=i[r];Gt(o)&&wl(l)&&(l=i[r]=isNaN(+o)?{}:[]),$i(o)?$i(n)?delete i[r]:i[r]=n:i=l}),e}function Tl(e,t){let n={},i=Object(e);return ne(t,function(r){r in i&&(n[r]=e[r])}),n}function Cl(e,t){let n={},i=Object(e);return ne(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}var Rl=1e3;function Dt(e,t){var n=this;t=t||Rl,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,o=r.element,l=r.gfx,u=r.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(l,o,u):n.drawConnection(l,o,u)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Dt.prototype.canRender=function(e){};Dt.prototype.drawShape=function(e,t){};Dt.prototype.drawConnection=function(e,t){};Dt.prototype.getShapePath=function(e){};Dt.prototype.getConnectionPath=function(e){};function de(e,t){var n=fn(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Nl(e,t){return Pa(t,function(n){return de(e,n)})}function fn(e){return e&&e.businessObject||e}function hn(e){return e&&e.di}function Oi(e,t){return de(e,"bpmn:CallActivity")?!1:de(e,"bpmn:SubProcess")?(t=t||hn(e),t&&de(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):de(e,"bpmn:Participant")?!!fn(e).processRef:!0}function Il(e){return e&&!!fn(e).triggeredByEvent}function Dl(e){if(de(e,"bpmn:FlowElement")||de(e,"bpmn:Participant")||de(e,"bpmn:Lane")||de(e,"bpmn:SequenceFlow")||de(e,"bpmn:MessageFlow")||de(e,"bpmn:DataInput")||de(e,"bpmn:DataOutput"))return"name";if(de(e,"bpmn:TextAnnotation"))return"text";if(de(e,"bpmn:Group"))return"categoryValueRef"}function Pl(e){var t=e.categoryValueRef;return t&&t.value||""}function li(e){var t=e.businessObject,n=Dl(t);if(n)return n==="categoryValueRef"?Pl(t):t[n]||""}function Ml(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function Ma(e,t){return t.appendChild(Ml(e,t))}function Ve(e,t){return Ma(t,e),e}var Vi=2,La={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Vi,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Vi,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Ll(e,t){return La[t]?e.style[t]:e.getAttributeNS(null,t)}function Ba(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=La[i];r?(r===Vi&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Bl(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Ba(e,r,t[r])}function _e(e,t,n){if(typeof t=="string")if(n!==void 0)Ba(e,t,n);else return Ll(e,t);else Bl(e,t);return e}const $l=Object.prototype.toString;function st(e){return new Vt(e)}function Vt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Vt.prototype.add=function(e){return this.list.add(e),this};Vt.prototype.remove=function(e){return $l.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Vt.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Vt.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Vt.prototype.array=function(){return Array.from(this.list)};Vt.prototype.has=Vt.prototype.contains=function(e){return this.list.contains(e)};function gn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function $a(e){for(var t;t=e.firstChild;)gn(t);return e}var nr={svg:"http://www.w3.org/2000/svg"},Vr='<svg xmlns="'+nr.svg+'"';function Oa(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(nr.svg)===-1&&(e=Vr+e.substring(4)):(e=Vr+">"+e+"</svg>",t=!0);var n=Ol(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Ol(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Ce(e,t){var n;return e.charAt(0)==="<"?(n=Oa(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(nr.svg,e),t&&_e(n,t),n}var Ri=null;function Fi(){return Ri===null&&(Ri=Ce("svg")),Ri}function Fr(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Vl(e,t,n,i,r,a){var o=Fi().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return Fr(o,e);case 6:return Fr(o,{a:e,b:t,c:n,d:i,e:r,f:a})}}function Cn(e){return e?Fi().createSVGTransformFromMatrix(e):Fi().createSVGTransform()}var Ur=/([&<>]{1})/g,Fl=/([\n\r"]{1})/g,Ul={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Ni(e,t){function n(i,r){return Ul[r]||r}return e.replace(t,n)}function Va(e,t){var n,i,r,a,o;switch(e.nodeType){case 3:t.push(Ni(e.textContent,Ur));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',Ni(a.value,Fl),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,i=o.length;n<i;++n)Va(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Ni(e.nodeValue,Ur),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function ql(e,t){var n=Oa(t);if($a(e),!!t){zl(n)||(n=n.documentElement);for(var i=Wl(n.childNodes),r=0;r<i.length;r++)Ma(i[r],e)}}function jl(e){for(var t=e.firstChild,n=[];t;)Va(t,n),t=t.nextSibling;return n.join("")}function zl(e){return e.nodeName==="#document-fragment"}function qr(e,t){if(t!==void 0){try{ql(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return jl(e)}function Wl(e){return Array.prototype.slice.call(e)}function Hl(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Yl(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Hl(e,i))}function In(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Yl(n,t)),n.consolidate()}function Qt(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Gl(e){return["M",e.x,e.y]}function Ii(e){return["L",e.x,e.y]}function Kl(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Xl(e,t){const n=e.length,i=[Gl(e[0])];for(let r=1;r<n;r++){const a=e[r-1],o=e[r],l=e[r+1];if(!l||!t){i.push(Ii(o));continue}const u=Math.min(t,Ui(o.x-a.x,o.y-a.y),Ui(l.x-o.x,l.y-o.y));if(!u){i.push(Ii(o));continue}const g=Yn(o,a,u),E=Yn(o,a,u*.5),k=Yn(o,l,u),p=Yn(o,l,u*.5);i.push(Ii(g)),i.push(Kl(E,p,k))}return i}function Yn(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=Ui(i,r),o=n/a;return{x:e.x+i*o,y:e.y+r*o}}function Ui(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ir(e,t,n){$t(t)&&(n=t,t=null),t||(t={});const i=Ce("path",t);return $t(n)&&(i.dataset.cornerRadius=String(n)),Fa(i,e)}function Fa(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return _e(e,{d:Qt(Xl(t,n))}),e}var kn="hsl(225, 10%, 15%)";function bt(e,t,n){function i(r,a){return er(a,function(o,l){return r[l]==o})}return Pa(e.eventDefinitions,function(r){return r.$type===t&&i(e,n)})}function Ql(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function Zl(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function Ge(e){return e.businessObject}function we(e,t){var n=hn(e);return n.get("color:background-color")||n.get("bioc:fill")||t||"white"}function W(e,t){var n=hn(e);return n.get("color:border-color")||n.get("bioc:stroke")||t||kn}function An(e,t,n){var i=hn(e),r=i.get("label");return r&&r.get("color:color")||t||W(e,n)}function Jl(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Qt(r)}function eu(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,o=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return Qt(o)}function tu(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,o=n/2,l=[["M",i+a,r],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return Qt(l)}function nu(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Qt(a)}function iu(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const ru=Object.prototype.toString,au=Object.prototype.hasOwnProperty;function su(e){return e===void 0}function ou(e){return ru.call(e)==="[object Array]"}function lu(e,t){return au.call(e,t)}function jr(e,t){let n,i;if(su(e))return;const r=ou(e)?cu:uu;for(let a in e)if(lu(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function uu(e){return e}function cu(e){return Number(e)}function tt(e,...t){const n=e.style;return jr(t,function(i){i&&jr(i,function(r,a){n[a]=r})}),e}function du(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const pu=Object.prototype.toString;function mi(e){return new Ft(e)}function Ft(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Ft.prototype.add=function(e){return this.list.add(e),this};Ft.prototype.remove=function(e){return pu.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Ft.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Ft.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Ft.prototype.array=function(){return Array.from(this.list)};Ft.prototype.has=Ft.prototype.contains=function(e){return this.list.contains(e)};function Ua(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}function zr(e,t){return e&&typeof e.matches=="function"&&e.matches(t)}function fu(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(zr(i,t))return i;i=i.parentNode}return zr(i,t)?i:null}var ui={},ci,qi,rr;function qa(){ci=window.addEventListener?"addEventListener":"attachEvent",qi=window.removeEventListener?"removeEventListener":"detachEvent",rr=ci!=="addEventListener"?"on":""}var hu=ui.bind=function(e,t,n,i){return ci||qa(),e[ci](rr+t,n,i||!1),n},mu=ui.unbind=function(e,t,n,i){return qi||qa(),e[qi](rr+t,n,i||!1),n},ar=iu({__proto__:null,bind:hu,unbind:mu,default:ui},[ui]),ja=["focus","blur"];function yu(e,t,n,i,r){return ja.indexOf(n)!==-1&&(r=!0),ar.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=fu(o,t,!0),a.delegateTarget&&i.call(e,a)},r)}function vu(e,t,n,i){return ja.indexOf(t)!==-1&&(i=!0),ar.unbind(e,t,n,i)}var ji={bind:yu,unbind:vu},gu=bu,za=!1,Gn;typeof document<"u"&&(Gn=document.createElement("div"),Gn.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',za=!Gn.getElementsByTagName("link").length,Gn=void 0);var Fe={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:za?[1,"X<div>","</div>"]:[0,"",""]};Fe.td=Fe.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Fe.option=Fe.optgroup=[1,'<select multiple="multiple">',"</select>"];Fe.thead=Fe.tbody=Fe.colgroup=Fe.caption=Fe.tfoot=[1,"<table>","</table>"];Fe.polyline=Fe.ellipse=Fe.polygon=Fe.circle=Fe.text=Fe.line=Fe.path=Fe.rect=Fe.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function bu(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var u=t.createElement("html");return u.innerHTML=e,u.removeChild(u.lastChild)}var r=Object.prototype.hasOwnProperty.call(Fe,i)?Fe[i]:Fe._default,a=r[0],o=r[1],l=r[2],u=t.createElement("div");for(u.innerHTML=o+e+l;a--;)u=u.lastChild;if(u.firstChild==u.lastChild)return u.removeChild(u.firstChild);for(var g=t.createDocumentFragment();u.firstChild;)g.appendChild(u.removeChild(u.firstChild));return g}var At=gu;function yt(e,t){return t=t||document,t.querySelector(e)}function wu(e,t){return t=t||document,t.querySelectorAll(e)}function di(e){e.parentNode&&e.parentNode.removeChild(e)}function Wr(e,t,n,i,r){var a=Cn();a.setTranslate(t,n);var o=Cn();o.setRotate(i||0,0,0);var l=Cn();l.setScale(r||1,r||1),In(e,[a,o,l])}function Wa(e,t,n){var i=Cn();i.setTranslate(t,n),In(e,i)}function Eu(e,t){var n=Cn();n.setRotate(t,0,0),In(e,n)}function xu(e,t){return t={exports:{}},e(t,t.exports),t.exports}var _u=xu(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var o=r-Math.floor(r),l="",a=0;a<Math.floor(r);a++){var u=Math.floor(Math.random()*i).toString(i);l=u+l}if(o){var g=Math.pow(i,o),u=Math.floor(Math.random()*g).toString(i);l=u+l}var E=parseInt(l,i);return E!==1/0&&E>=Math.pow(2,n)?t(n,i):l};t.rack=function(n,i,r){var a=function(l){var u=0;do{if(u++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var g=t(n,i)}while(Object.hasOwnProperty.call(o,g));return o[g]=l,g},o=a.hats={};return a.get=function(l){return a.hats[l]},a.set=function(l,u){return a.hats[l]=u,a},a.bits=n||128,a.base=i||16,a}});function It(e){if(!(this instanceof It))return new It(e);e=e||[128,36,1],this._seed=e.length?_u.rack(e[0],e[1],e[2]):e}It.prototype.next=function(e){return this._seed(e||!0)};It.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};It.prototype.claim=function(e,t){this._seed.set(e,t||!0)};It.prototype.assigned=function(e){return this._seed.get(e)||!1};It.prototype.unclaim=function(e){delete this._seed.hats[e]};It.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Su=new It,ei=10,Di=3,ln=.95,Au=.35,ku=10;function Zt(e,t,n,i,r,a,o){Dt.call(this,t,o);var l=e&&e.defaultFillColor,u=e&&e.defaultStrokeColor,g=e&&e.defaultLabelColor,E=Su.next(),k={};function p(f){return n.computeStyle(f,{strokeLinecap:"round",strokeLinejoin:"round",stroke:kn,strokeWidth:2,fill:"white"})}function Q(f){return n.computeStyle(f,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:kn,strokeWidth:2})}function ae(f,s){var{ref:h={x:0,y:0},scale:b=1,element:I}=s,w=Ce("marker",{id:f,viewBox:"0 0 20 20",refX:h.x,refY:h.y,markerWidth:20*b,markerHeight:20*b,orient:"auto"});Ve(w,I);var S=yt("defs",r._svg);S||(S=Ce("defs"),Ve(r._svg,S)),Ve(S,w),k[f]=w}function te(f){return f.replace(/[^0-9a-zA-z]+/g,"_")}function se(f,s,h){var b=f+"-"+te(s)+"-"+te(h)+"-"+E;return k[b]||Y(b,f,s,h),"url(#"+b+")"}function Y(f,s,h,b){if(s==="sequenceflow-end"){var I=Ce("path",{d:"M 1 5 L 11 10 L 1 15 Z",...p({fill:b,stroke:b,strokeWidth:1})});ae(f,{element:I,ref:{x:11,y:10},scale:.5})}if(s==="messageflow-start"){var w=Ce("circle",{cx:6,cy:6,r:3.5,...p({fill:h,stroke:b,strokeWidth:1,strokeDasharray:[1e4,1]})});ae(f,{element:w,ref:{x:6,y:6}})}if(s==="messageflow-end"){var S=Ce("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...p({fill:h,stroke:b,strokeWidth:1,strokeDasharray:[1e4,1]})});ae(f,{element:S,ref:{x:8.5,y:5}})}if(s==="association-start"){var K=Ce("path",{d:"M 11 5 L 1 10 L 11 15",...Q({fill:"none",stroke:b,strokeWidth:1.5,strokeDasharray:[1e4,1]})});ae(f,{element:K,ref:{x:1,y:10},scale:.5})}if(s==="association-end"){var m=Ce("path",{d:"M 1 5 L 11 10 L 1 15",...Q({fill:"none",stroke:b,strokeWidth:1.5,strokeDasharray:[1e4,1]})});ae(f,{element:m,ref:{x:11,y:10},scale:.5})}if(s==="conditional-flow-marker"){var v=Ce("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...p({fill:h,stroke:b})});ae(f,{element:v,ref:{x:-1,y:10},scale:.5})}if(s==="conditional-default-flow-marker"){var ve=Ce("path",{d:"M 6 4 L 10 16",...p({stroke:b})});ae(f,{element:ve,ref:{x:0,y:10},scale:.5})}}function T(f,s,h,b,I){cn(b)&&(I=b,b=0),b=b||0,I=p(I),I.fill==="none"&&delete I.fillOpacity;var w=s/2,S=h/2,K=Ce("circle",{cx:w,cy:S,r:Math.round((s+h)/4-b),...I});return Ve(f,K),K}function F(f,s,h,b,I,w){cn(I)&&(w=I,I=0),I=I||0,w=p(w);var S=Ce("rect",{x:I,y:I,width:s-I*2,height:h-I*2,rx:b,ry:b,...w});return Ve(f,S),S}function _(f,s,h,b){var I=s/2,w=h/2,S=[{x:I,y:0},{x:s,y:w},{x:I,y:h},{x:0,y:w}],K=S.map(function(v){return v.x+","+v.y}).join(" ");b=p(b);var m=Ce("polygon",{...b,points:K});return Ve(f,m),m}function y(f,s,h,b){h=Q(h);var I=ir(s,h,b);return Ve(f,I),I}function D(f,s,h){return y(f,s,h,5)}function V(f,s,h){h=Q(h);var b=Ce("path",{...h,d:s});return Ve(f,b),b}function A(f,s,h,b){return V(s,h,ce({"data-marker":f},b))}function x(f){return ge[f]}function L(f){return function(s,h){return x(f)(s,h)}}function j(f,s){var h=Ge(f),b=Ql(h);return h.eventDefinitions&&h.eventDefinitions.length>1?h.parallelMultiple?x("bpmn:ParallelMultipleEventDefinition")(s,f,b):x("bpmn:MultipleEventDefinition")(s,f,b):bt(h,"bpmn:MessageEventDefinition")?x("bpmn:MessageEventDefinition")(s,f,b):bt(h,"bpmn:TimerEventDefinition")?x("bpmn:TimerEventDefinition")(s,f,b):bt(h,"bpmn:ConditionalEventDefinition")?x("bpmn:ConditionalEventDefinition")(s,f):bt(h,"bpmn:SignalEventDefinition")?x("bpmn:SignalEventDefinition")(s,f,b):bt(h,"bpmn:EscalationEventDefinition")?x("bpmn:EscalationEventDefinition")(s,f,b):bt(h,"bpmn:LinkEventDefinition")?x("bpmn:LinkEventDefinition")(s,f,b):bt(h,"bpmn:ErrorEventDefinition")?x("bpmn:ErrorEventDefinition")(s,f,b):bt(h,"bpmn:CancelEventDefinition")?x("bpmn:CancelEventDefinition")(s,f,b):bt(h,"bpmn:CompensateEventDefinition")?x("bpmn:CompensateEventDefinition")(s,f,b):bt(h,"bpmn:TerminateEventDefinition")?x("bpmn:TerminateEventDefinition")(s,f,b):null}function H(f,s,h){h=ce({size:{width:100}},h);var b=a.createText(s||"",h);return st(b).add("djs-label"),Ve(f,b),b}function z(f,s,h){var b=Ge(s);return H(f,b.name,{box:s,align:h,padding:7,style:{fill:An(s,g,u)}})}function J(f,s){var h={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return H(f,li(s),{box:h,fitBox:!0,style:ce({},a.getExternalStyle(),{fill:An(s,g,u)})})}function he(f,s,h){var b=H(f,s,{box:{height:30,width:h.height},align:"center-middle",style:{fill:An(h,g,u)}}),I=-1*h.height;Wr(b,0,-I,270)}var ge=this.handlers={"bpmn:Event":function(f,s,h){return"fillOpacity"in h||(h.fillOpacity=ln),T(f,s.width,s.height,h)},"bpmn:StartEvent":function(f,s){var h={fill:we(s,l),stroke:W(s,u)},b=Ge(s);b.isInterrupting||(h={strokeDasharray:"6",fill:we(s,l),stroke:W(s,u)});var I=x("bpmn:Event")(f,s,h);return j(s,f),I},"bpmn:MessageEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.235,my:.315}}),I=h?W(s,u):we(s,l),w=h?we(s,l):W(s,u),S=V(f,b,{strokeWidth:1,fill:I,stroke:w});return S},"bpmn:TimerEventDefinition":function(f,s){var h=T(f,s.width,s.height,.2*s.height,{strokeWidth:2,fill:we(s,l),stroke:W(s,u)}),b=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}});V(f,b,{strokeWidth:2,stroke:W(s,u)});for(var I=0;I<12;I++){var w=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}}),S=s.width/2,K=s.height/2;V(f,w,{strokeWidth:1,transform:"rotate("+I*30+","+K+","+S+")",stroke:W(s,u)})}return h},"bpmn:EscalationEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)})},"bpmn:ConditionalEventDefinition":function(f,s){var h=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.222}});return V(f,h,{strokeWidth:1,stroke:W(s,u)})},"bpmn:LinkEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)})},"bpmn:ErrorEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.2,my:.722}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)})},"bpmn:CancelEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),I=h?W(s,u):"none",w=V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)});return Eu(w,45),w},"bpmn:CompensateEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.22,my:.5}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)})},"bpmn:SignalEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I,stroke:W(s,u)})},"bpmn:MultipleEventDefinition":function(f,s,h){var b=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.222,my:.36}}),I=h?W(s,u):"none";return V(f,b,{strokeWidth:1,fill:I})},"bpmn:ParallelMultipleEventDefinition":function(f,s){var h=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width,containerHeight:s.height,position:{mx:.458,my:.194}});return V(f,h,{strokeWidth:1,fill:W(s,u),stroke:W(s,u)})},"bpmn:EndEvent":function(f,s){var h=x("bpmn:Event")(f,s,{strokeWidth:4,fill:we(s,l),stroke:W(s,u)});return j(s,f),h},"bpmn:TerminateEventDefinition":function(f,s){var h=T(f,s.width,s.height,8,{strokeWidth:4,fill:W(s,u),stroke:W(s,u)});return h},"bpmn:IntermediateEvent":function(f,s){var h=x("bpmn:Event")(f,s,{strokeWidth:1.5,fill:we(s,l),stroke:W(s,u)});return T(f,s.width,s.height,Di,{strokeWidth:1.5,fill:we(s,"none"),stroke:W(s,u)}),j(s,f),h},"bpmn:IntermediateCatchEvent":L("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":L("bpmn:IntermediateEvent"),"bpmn:Activity":function(f,s,h){return h=h||{},"fillOpacity"in h||(h.fillOpacity=ln),F(f,s.width,s.height,ei,h)},"bpmn:Task":function(f,s){var h={fill:we(s,l),stroke:W(s,u)},b=x("bpmn:Activity")(f,s,h);return z(f,s,"center-middle"),ye(f,s),b},"bpmn:ServiceTask":function(f,s){var h=x("bpmn:Task")(f,s),b=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});V(f,b,{strokeWidth:1,fill:we(s,l),stroke:W(s,u)});var I=i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});V(f,I,{strokeWidth:0,fill:we(s,l)});var w=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return V(f,w,{strokeWidth:1,fill:we(s,l),stroke:W(s,u)}),h},"bpmn:UserTask":function(f,s){var h=x("bpmn:Task")(f,s),b=15,I=12,w=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:b,y:I}});V(f,w,{strokeWidth:.5,fill:we(s,l),stroke:W(s,u)});var S=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:b,y:I}});V(f,S,{strokeWidth:.5,fill:we(s,l),stroke:W(s,u)});var K=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:b,y:I}});return V(f,K,{strokeWidth:.5,fill:W(s,u),stroke:W(s,u)}),h},"bpmn:ManualTask":function(f,s){var h=x("bpmn:Task")(f,s),b=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return V(f,b,{strokeWidth:.5,fill:we(s,l),stroke:W(s,u)}),h},"bpmn:SendTask":function(f,s){var h=x("bpmn:Task")(f,s),b=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return V(f,b,{strokeWidth:1,fill:W(s,u),stroke:we(s,l)}),h},"bpmn:ReceiveTask":function(f,s){var h=Ge(s),b=x("bpmn:Task")(f,s),I;return h.instantiate?(T(f,28,28,20*.22,{strokeWidth:1}),I=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):I=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),V(f,I,{strokeWidth:1,fill:we(s,l),stroke:W(s,u)}),b},"bpmn:ScriptTask":function(f,s){var h=x("bpmn:Task")(f,s),b=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return V(f,b,{strokeWidth:1,stroke:W(s,u)}),h},"bpmn:BusinessRuleTask":function(f,s){var h=x("bpmn:Task")(f,s),b=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),I=V(f,b);_e(I,{strokeWidth:1,fill:we(s,"#aaaaaa"),stroke:W(s,u)});var w=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),S=V(f,w);return _e(S,{strokeWidth:1,stroke:W(s,u)}),h},"bpmn:SubProcess":function(f,s,h){h={fill:we(s,l),stroke:W(s,u),...h};var b=x("bpmn:Activity")(f,s,h),I=Oi(s);return Il(s)&&_e(b,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),z(f,s,I?"center-top":"center-middle"),I?ye(f,s):ye(f,s,["SubProcessMarker"]),b},"bpmn:AdHocSubProcess":function(f,s){return x("bpmn:SubProcess")(f,s)},"bpmn:Transaction":function(f,s){var h=x("bpmn:SubProcess")(f,s,{strokeWidth:1.5}),b=n.style(["no-fill","no-events"],{stroke:W(s,u),strokeWidth:1.5});return F(f,s.width,s.height,ei-3,Di,b),h},"bpmn:CallActivity":function(f,s){return x("bpmn:SubProcess")(f,s,{strokeWidth:5})},"bpmn:Participant":function(f,s){var h=1.5,b={fillOpacity:ln,fill:we(s,l),stroke:W(s,u),strokeWidth:h},I=x("bpmn:Lane")(f,s,b),w=Oi(s);if(w){y(f,[{x:30,y:0},{x:30,y:s.height}],{stroke:W(s,u),strokeWidth:h});var S=Ge(s).name;he(f,S,s)}else{var K=Ge(s).name;H(f,K,{box:s,align:"center-middle",style:{fill:An(s,g,u)}})}var m=!!Ge(s).participantMultiplicity;return m&&x("ParticipantMultiplicityMarker")(f,s),I},"bpmn:Lane":function(f,s,h){var b=F(f,s.width,s.height,0,{fill:we(s,l),fillOpacity:Au,stroke:W(s,u),strokeWidth:1.5,...h}),I=Ge(s);if(I.$type==="bpmn:Lane"){var w=I.name;he(f,w,s)}return b},"bpmn:InclusiveGateway":function(f,s){var h=x("bpmn:Gateway")(f,s);return T(f,s.width,s.height,s.height*.24,{strokeWidth:2.5,fill:we(s,l),stroke:W(s,u)}),h},"bpmn:ExclusiveGateway":function(f,s){var h=x("bpmn:Gateway")(f,s),b=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}});return hn(s).isMarkerVisible&&V(f,b,{strokeWidth:1,fill:W(s,u),stroke:W(s,u)}),h},"bpmn:ComplexGateway":function(f,s){var h=x("bpmn:Gateway")(f,s),b=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return V(f,b,{strokeWidth:1,fill:W(s,u),stroke:W(s,u)}),h},"bpmn:ParallelGateway":function(f,s){var h=x("bpmn:Gateway")(f,s),b=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return V(f,b,{strokeWidth:1,fill:W(s,u),stroke:W(s,u)}),h},"bpmn:EventBasedGateway":function(f,s){var h=Ge(s),b=x("bpmn:Gateway")(f,s);T(f,s.width,s.height,s.height*.2,{strokeWidth:1,fill:"none",stroke:W(s,u)});var I=h.eventGatewayType,w=!!h.instantiate;function S(){var m=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});V(f,m,{strokeWidth:2,fill:we(s,"none"),stroke:W(s,u)})}if(I==="Parallel"){var K=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});V(f,K,{strokeWidth:1,fill:"none"})}else I==="Exclusive"&&(w||T(f,s.width,s.height,s.height*.26,{strokeWidth:1,fill:"none",stroke:W(s,u)}),S());return b},"bpmn:Gateway":function(f,s){return _(f,s.width,s.height,{fill:we(s,l),fillOpacity:ln,stroke:W(s,u)})},"bpmn:SequenceFlow":function(f,s){var h=we(s,l),b=W(s,u),I=D(f,s.waypoints,{markerEnd:se("sequenceflow-end",h,b),stroke:W(s,u)}),w=Ge(s),S;return s.source&&(S=s.source.businessObject,w.conditionExpression&&S.$instanceOf("bpmn:Activity")&&_e(I,{markerStart:se("conditional-flow-marker",h,b)}),S.default&&(S.$instanceOf("bpmn:Gateway")||S.$instanceOf("bpmn:Activity"))&&S.default===w&&_e(I,{markerStart:se("conditional-default-flow-marker",h,b)})),I},"bpmn:Association":function(f,s,h){var b=Ge(s),I=we(s,l),w=W(s,u);return h={strokeDasharray:"0, 5",stroke:W(s,u),...h},(b.associationDirection==="One"||b.associationDirection==="Both")&&(h.markerEnd=se("association-end",I,w)),b.associationDirection==="Both"&&(h.markerStart=se("association-start",I,w)),D(f,s.waypoints,h)},"bpmn:DataInputAssociation":function(f,s){var h=we(s,l),b=W(s,u);return x("bpmn:Association")(f,s,{markerEnd:se("association-end",h,b)})},"bpmn:DataOutputAssociation":function(f,s){var h=we(s,l),b=W(s,u);return x("bpmn:Association")(f,s,{markerEnd:se("association-end",h,b)})},"bpmn:MessageFlow":function(f,s){var h=Ge(s),b=hn(s),I=we(s,l),w=W(s,u),S=D(f,s.waypoints,{markerEnd:se("messageflow-end",I,w),markerStart:se("messageflow-start",I,w),strokeDasharray:"10, 11",strokeWidth:1.5,stroke:W(s,u)});if(h.messageRef){var K=S.getPointAtLength(S.getTotalLength()/2),m=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:K.x,y:K.y}}),v={strokeWidth:1};b.messageVisibleKind==="initiating"?(v.fill="white",v.stroke=kn):(v.fill="#888",v.stroke="white");var ve=V(f,m,v),pe=h.messageRef.name,Pe=H(f,pe,{align:"center-top",fitBox:!0,style:{fill:W(s,g)}}),Se=ve.getBBox(),ue=Pe.getBBox(),le=K.x-ue.width/2,be=K.y+Se.height/2+ku;Wr(Pe,le,be,0)}return S},"bpmn:DataObject":function(f,s){var h=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),b=V(f,h,{fill:we(s,l),fillOpacity:ln,stroke:W(s,u)}),I=Ge(s);return Zl(I)&&it(f,s),b},"bpmn:DataObjectReference":L("bpmn:DataObject"),"bpmn:DataInput":function(f,s){var h=i.getRawPath("DATA_ARROW"),b=x("bpmn:DataObject")(f,s);return V(f,h,{strokeWidth:1}),b},"bpmn:DataOutput":function(f,s){var h=i.getRawPath("DATA_ARROW"),b=x("bpmn:DataObject")(f,s);return V(f,h,{strokeWidth:1,fill:kn}),b},"bpmn:DataStoreReference":function(f,s){var h=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}}),b=V(f,h,{strokeWidth:2,fill:we(s,l),fillOpacity:ln,stroke:W(s,u)});return b},"bpmn:BoundaryEvent":function(f,s){var h=Ge(s),b=h.cancelActivity,I={strokeWidth:1.5,fill:we(s,l),stroke:W(s,u)};b||(I.strokeDasharray="6");var w={...I,fillOpacity:1},S={...I,fill:"none"},K=x("bpmn:Event")(f,s,w);return T(f,s.width,s.height,Di,S),j(s,f),K},"bpmn:Group":function(f,s){return F(f,s.width,s.height,ei,{stroke:W(s,u),strokeWidth:1.5,strokeDasharray:"10,6,0,6",fill:"none",pointerEvents:"none"})},label:function(f,s){return J(f,s)},"bpmn:TextAnnotation":function(f,s){var h=F(f,s.width,s.height,0,0,{fill:"none",stroke:"none"}),b=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:0}});V(f,b,{stroke:W(s,u)});var I=Ge(s).text||"";return H(f,I,{box:s,align:"left-top",padding:7,style:{fill:An(s,g,u)}}),h},ParticipantMultiplicityMarker:function(f,s){var h=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:s.width/2/s.width,my:(s.height-15)/s.height}});A("participant-multiplicity",f,h,{strokeWidth:2,fill:we(s,l),stroke:W(s,u)})},SubProcessMarker:function(f,s){var h=F(f,14,14,0,{strokeWidth:1,fill:we(s,l),stroke:W(s,u)});Wa(h,s.width/2-7.5,s.height-20);var b=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});A("sub-process",f,b,{fill:we(s,l),stroke:W(s,u)})},ParallelMarker:function(f,s,h){var b=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+h.parallel)/s.width,my:(s.height-20)/s.height}});A("parallel",f,b,{fill:we(s,l),stroke:W(s,u)})},SequentialMarker:function(f,s,h){var b=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+h.seq)/s.width,my:(s.height-19)/s.height}});A("sequential",f,b,{fill:we(s,l),stroke:W(s,u)})},CompensationMarker:function(f,s,h){var b=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+h.compensation)/s.width,my:(s.height-13)/s.height}});A("compensation",f,b,{strokeWidth:1,fill:we(s,l),stroke:W(s,u)})},LoopMarker:function(f,s,h){var b=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+h.loop)/s.width,my:(s.height-7)/s.height}});A("loop",f,b,{strokeWidth:1.5,fill:we(s,l),stroke:W(s,u),strokeMiterlimit:.5})},AdhocMarker:function(f,s,h){var b=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+h.adhoc)/s.width,my:(s.height-15)/s.height}});A("adhoc",f,b,{strokeWidth:1,fill:W(s,u),stroke:W(s,u)})}};function ye(f,s,h){var b=Ge(s),I=h&&h.indexOf("SubProcessMarker")!==-1,w;I?w={seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:w={seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},ne(h,function(m){x(m)(f,s,w)}),b.isForCompensation&&x("CompensationMarker")(f,s,w),b.$type==="bpmn:AdHocSubProcess"&&x("AdhocMarker")(f,s,w);var S=b.loopCharacteristics,K=S&&S.isSequential;S&&(K===void 0&&x("LoopMarker")(f,s,w),K===!1&&x("ParallelMarker")(f,s,w),K===!0&&x("SequentialMarker")(f,s,w))}function it(f,s){var h=(s.height-18)/s.height,b=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:h}});V(f,b,{strokeWidth:2})}this._drawPath=V,this._renderer=x}kt(Zt,Dt);Zt.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Zt.prototype.canRender=function(e){return de(e,"bpmn:BaseElement")};Zt.prototype.drawShape=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};Zt.prototype.drawConnection=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};Zt.prototype.getShapePath=function(e){return de(e,"bpmn:Event")?Jl(e):de(e,"bpmn:Activity")?eu(e,ei):de(e,"bpmn:Gateway")?tu(e):nu(e)};var Tu=0,Cu={width:150,height:50};function Ru(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function Nu(e){return cn(e)?ce({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function Iu(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(a){return{width:0,height:0}}}function Du(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=Iu(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return Pu(e,r,i,a);r=Lu(r,a.width,t)}}function Pu(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Hr="";function Mu(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===Hr)&&r.pop();break}var o=r[r.length-1];return o&&o===Hr&&(r[r.length-1]="-"),r.join("")}function Lu(e,t,n){var i=Math.max(e.length*(n/t),1),r=Mu(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function Bu(){var e=document.getElementById("helper-svg");return e||(e=Ce("svg"),_e(e,{id:"helper-svg"}),tt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function yi(e){this._config=ce({},{size:Cu,padding:Tu,style:{},align:"center-top"},e||{})}yi.prototype.createText=function(e,t){return this.layoutText(e,t).element};yi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};yi.prototype.layoutText=function(e,t){var n=ce({},this._config.size,t.box),i=ce({},this._config.style,t.style),r=Ru(t.align||this._config.align),a=Nu(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,l=$u(i),u=e.split(/\u00AD?\r?\n/),g=[],E=n.width-a.left-a.right,k=Ce("text");_e(k,{x:0,y:0}),_e(k,i);var p=Bu();for(Ve(p,k);u.length;)g.push(Du(u,E,k));r.vertical==="middle"&&(a.top=a.bottom=0);var Q=pn(g,function(T,F,_){return T+(l||F.height)},0)+a.top+a.bottom,ae=pn(g,function(T,F,_){return F.width>T?F.width:T},0),te=a.top;r.vertical==="middle"&&(te+=(n.height-Q)/2),te-=(l||g[0].height)/4;var se=Ce("text");_e(se,i),ne(g,function(T){var F;switch(te+=l||T.height,r.horizontal){case"left":F=a.left;break;case"right":F=(o?ae:E)-a.right-T.width;break;default:F=Math.max(((o?ae:E)-T.width)/2+a.left,0)}var _=Ce("tspan");_e(_,{x:F,y:te}),_.textContent=T.text,Ve(se,_)}),gn(k);var Y={width:ae,height:Q};return{dimensions:Y,element:se}};function $u(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var Ou=12,Vu=1.2,Fu=30;function Ha(e){var t=ce({fontFamily:"Arial, sans-serif",fontSize:Ou,fontWeight:"normal",lineHeight:Vu},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=ce({},t,{fontSize:n},e&&e.externalStyle||{}),r=new yi({style:t});this.getExternalLabelBounds=function(a,o){var l=r.getDimensions(o,{box:{width:90,height:30,x:a.width/2+a.x,y:a.height/2+a.y},style:i});return{x:Math.round(a.x+a.width/2-l.width/2),y:Math.round(a.y),width:Math.ceil(l.width),height:Math.ceil(l.height)}},this.getTextAnnotationBounds=function(a,o){var l=r.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(Fu,Math.round(l.height))}},this.createText=function(a,o){return r.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Ha.$inject=["config.textRenderer"];function Uu(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var l=n.containerHeight/i.height*n.yScaleFactor,u=n.containerWidth/i.width*n.xScaleFactor,g=0;g<i.heightElements.length;g++)o["y"+g]=i.heightElements[g]*l;for(var E=0;E<i.widthElements.length;E++)o["x"+E]=i.widthElements[E]*u}var k=Wu(i.d,{mx:r,my:a,e:o});return k}}var qu=/\{([^{}]+)\}/g,ju=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function zu(e,t,n){var i=n;return t.replace(ju,function(r,a,o,l,u){a=a||l,i&&(a in i&&(i=i[a]),typeof i=="function"&&u&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Wu(e,t){return String(e).replace(qu,function(n,i){return zu(n,i,t)})}const Hu={__init__:["bpmnRenderer"],bpmnRenderer:["type",Zt],textRenderer:["type",Ha],pathMap:["type",Uu]};function Yu(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Ya={translate:["value",Yu]};var pi={width:90,height:20},Yr=15;function Gu(e){return de(e,"bpmn:Event")||de(e,"bpmn:Gateway")||de(e,"bpmn:DataStoreReference")||de(e,"bpmn:DataObjectReference")||de(e,"bpmn:DataInput")||de(e,"bpmn:DataOutput")||de(e,"bpmn:SequenceFlow")||de(e,"bpmn:MessageFlow")||de(e,"bpmn:Group")}function Ku(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=Xu(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),o=r.x,l=r.y;return Math.abs(a)<Math.PI/2?l-=Yr:o+=Yr,{x:o,y:l}}function Xu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Qu(e){return e.waypoints?Ku(e.waypoints):de(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+pi.height/2}:{x:e.x+e.width/2,y:e.y+e.height+pi.height/2}}function Zu(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max(pi.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Qu(t),i=pi),ce({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Ju(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function zi(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function ec(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function tc(e){return Ju({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function nc(e){for(var t=e.waypoints,n=t.reduce(function(g,E,k){var p=t[k-1];if(p){var Q=g[g.length-1],ae=Q&&Q.endLength||0,te=ic(p,E);g.push({start:p,end:E,startLength:ae,endLength:ae+te,length:te})}return g},[]),i=n.reduce(function(g,E){return g+E.length},0),r=i/2,a=0,o=n[a];o.endLength<r;)o=n[++a];var l=(r-o.startLength)/o.length,u={x:o.start.x+(o.end.x-o.start.x)*l,y:o.start.y+(o.end.y-o.start.y)*l};return u}function Wi(e){return rc(e)?nc(e):tc(e)}function ic(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rc(e){return!!e.waypoints}function He(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function ti(e,t,n){return ce({id:e.id,type:e.$type,businessObject:e,di:t},n)}function ac(e,t,n){var i=e.waypoint;return!i||i.length<2?[Wi(t),Wi(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Ga(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:He(n),referenced:He(t),property:i}))}function Pt(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}Pt.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];Pt.prototype.add=function(e,t,n){var i,r=this._translate,a,o;if(de(t,"bpmndi:BPMNPlane")){var l=de(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(ti(e,t,l)),this._canvas.addRootElement(i)}else if(de(t,"bpmndi:BPMNShape")){var u=!Oi(e,t),g=oc(e);a=n&&(n.hidden||n.collapsed);var E=t.bounds;i=this._elementFactory.createShape(ti(e,t,{collapsed:u,hidden:a,x:Math.round(E.x),y:Math.round(E.y),width:Math.round(E.width),height:Math.round(E.height),isFrame:g})),de(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),de(e,"bpmn:Lane")&&(o=0),de(e,"bpmn:DataStoreReference")&&(sc(n,Wi(E))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(de(t,"bpmndi:BPMNEdge")){var k=this._getSource(e),p=this._getTarget(e);a=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(ti(e,t,{hidden:a,source:k,target:p,waypoints:ac(t,k,p)})),de(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(r("unknown di {di} for element {semantic}",{di:He(t),semantic:He(e)}));return Gu(e)&&li(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Pt.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:He(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw Ga(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),a.indexOf(t)===-1&&a.push(t)};Pt.prototype.addLabel=function(e,t,n){var i,r,a;return i=Zu(t,n),r=li(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(ti(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!li(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Pt.prototype._getEnd=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Ga(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:He(e),side:t}))};Pt.prototype._getSource=function(e){return this._getEnd(e,"source")};Pt.prototype._getTarget=function(e){return this._getEnd(e,"target")};Pt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function sc(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function oc(e){return de(e,"bpmn:Group")}const lc={__depends__:[Ya],bpmnImporter:["type",Pt]},uc={__depends__:[Hu,lc]};function sr(e){return e.originalEvent||e.srcEvent}function cc(){return/mac/i.test(navigator.platform)}function Ka(e,t){return(sr(e)||e).button===t}function Ln(e){return Ka(e,0)}function dc(e){return Ka(e,1)}function pc(e){var t=sr(e)||e;return Ln(e)?cc()?t.metaKey:t.ctrlKey:!1}function fc(e){var t=sr(e)||e;return Ln(e)&&t.shiftKey}function hc(e){return!0}function Kn(e){return Ln(e)||dc(e)}var Gr=500;function Xa(e,t,n){var i=this;function r(A,x,L){if(!l(A,x)){var j,H,z;L?H=t.getGraphics(L):(j=x.delegateTarget||x.target,j&&(H=j,L=t.get(H))),!(!H||!L)&&(z=e.fire(A,{element:L,gfx:H,originalEvent:x}),z===!1&&(x.stopPropagation(),x.preventDefault()))}}var a={};function o(A){return a[A]}function l(A,x){var L=g[A]||Ln;return!L(x)}var u={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},g={"element.contextmenu":hc,"element.mousedown":Kn,"element.mouseup":Kn,"element.click":Kn,"element.dblclick":Kn};function E(A,x,L){var j=u[A];if(!j)throw new Error("unmapped DOM event name <"+A+">");return r(j,x,L)}var k="svg, .djs-element";function p(A,x,L,j){var H=a[L]=function(z){r(L,z)};j&&(g[L]=j),H.$delegate=ji.bind(A,k,x,H)}function Q(A,x,L){var j=o(L);j&&ji.unbind(A,x,j.$delegate)}function ae(A){ne(u,function(x,L){p(A,L,x)})}function te(A){ne(u,function(x,L){Q(A,L,x)})}e.on("canvas.destroy",function(A){te(A.svg)}),e.on("canvas.init",function(A){ae(A.svg)}),e.on(["shape.added","connection.added"],function(A){var x=A.element,L=A.gfx;e.fire("interactionEvents.createHit",{element:x,gfx:L})}),e.on(["shape.changed","connection.changed"],Gr,function(A){var x=A.element,L=A.gfx;e.fire("interactionEvents.updateHit",{element:x,gfx:L})}),e.on("interactionEvents.createHit",Gr,function(A){var x=A.element,L=A.gfx;i.createDefaultHit(x,L)}),e.on("interactionEvents.updateHit",function(A){var x=A.element,L=A.gfx;i.updateDefaultHit(x,L)});var se=y("djs-hit djs-hit-stroke"),Y=y("djs-hit djs-hit-click-stroke"),T=y("djs-hit djs-hit-all"),F=y("djs-hit djs-hit-no-move"),_={all:T,"click-stroke":Y,stroke:se,"no-move":F};function y(A,x){return x=ce({stroke:"white",strokeWidth:15},x||{}),n.cls(A,["no-fill","no-border"],x)}function D(A,x){var L=_[x];if(!L)throw new Error("invalid hit type <"+x+">");return _e(A,L),A}function V(A,x){Ve(A,x)}this.removeHits=function(A){var x=wu(".djs-hit",A);ne(x,gn)},this.createDefaultHit=function(A,x){var L=A.waypoints,j=A.isFrame,H;return L?this.createWaypointsHit(x,L):(H=j?"stroke":"all",this.createBoxHit(x,H,{width:A.width,height:A.height}))},this.createWaypointsHit=function(A,x){var L=ir(x);return D(L,"stroke"),V(A,L),L},this.createBoxHit=function(A,x,L){L=ce({x:0,y:0},L);var j=Ce("rect");return D(j,x),_e(j,L),V(A,j),j},this.updateDefaultHit=function(A,x){var L=yt(".djs-hit",x);if(L)return A.waypoints?Fa(L,A.waypoints):_e(L,{width:A.width,height:A.height}),L},this.fire=r,this.triggerMouseEvent=E,this.mouseHandler=o,this.registerEvent=p,this.unregisterEvent=Q}Xa.$inject=["eventBus","elementRegistry","styles"];const mc={__init__:["interactionEvents"],interactionEvents:["type",Xa]};function Kt(e,t){t=!!t,vt(e)||(e=[e]);var n,i,r,a;return ne(e,function(o){var l=o;o.waypoints&&!t&&(l=Kt(o.waypoints,!0));var u=l.x,g=l.y,E=l.height||0,k=l.width||0;(u<n||n===void 0)&&(n=u),(g<i||i===void 0)&&(i=g),(u+k>r||r===void 0)&&(r=u+k),(g+E>a||a===void 0)&&(a=g+E)}),{x:n,y:i,height:a-i,width:r-n}}function Qa(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Za(e){return!!(e&&e.isFrame)}var yc=500;function vi(e,t){this.offset=6;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a,o){var l=Ce("rect");return _e(l,ce({x:10,y:10,rx:4,width:100,height:100},n)),Ve(a,l),l}e.on(["shape.added","shape.changed"],yc,function(a){var o=a.element,l=a.gfx,u=yt(".djs-outline",l);u||(u=r(l)),i.updateShapeOutline(u,o)}),e.on(["connection.added","connection.changed"],function(a){var o=a.element,l=a.gfx,u=yt(".djs-outline",l);u||(u=r(l)),i.updateConnectionOutline(u,o)})}vi.prototype.updateShapeOutline=function(e,t){_e(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};vi.prototype.updateConnectionOutline=function(e,t){var n=Kt(t);_e(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};vi.$inject=["eventBus","styles","elementRegistry"];const vc={__init__:["outline"],outline:["type",vi]};function bn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}bn.$inject=["eventBus","canvas"];bn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};bn.prototype.get=function(){return this._selectedElements};bn.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};bn.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();vt(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(o){var l=r.findRoot(o);return a===l}),t?ne(e,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Kr="hover",Xr="selected",Xn=6;function or(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(o,l){e.addMarker(o,l)}function a(o,l){e.removeMarker(o,l)}t.on("element.hover",function(o){r(o.element,Kr)}),t.on("element.out",function(o){a(o.element,Kr)}),t.on("selection.changed",function(o){function l(k){a(k,Xr)}function u(k){r(k,Xr)}var g=o.oldSelection,E=o.newSelection;ne(g,function(k){E.indexOf(k)===-1&&l(k)}),ne(E,function(k){g.indexOf(k)===-1&&u(k)}),i._updateSelectionOutline(E)}),t.on("element.changed",function(o){n.isSelected(o.element)&&i._updateSelectionOutline(n.get())})}or.$inject=["canvas","eventBus","selection"];or.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");$a(t);var n=e.length>1,i=this._canvas.getContainer();if(st(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=gc(Kt(e)),a=Ce("rect");_e(a,ce({rx:3},r)),st(a).add("djs-selection-outline"),Ve(t,a)}};function gc(e){return{x:e.x-Xn,y:e.y-Xn,width:e.width+Xn*2,height:e.height+Xn*2}}function Ja(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,o=a.canExecute,l=a.elements,u=a.hints||{},g=u.autoSelect;if(o){if(g===!1)return;vt(g)?t.select(g):t.select(l.filter(bc))}}),e.on("connect.end",500,function(r){var a=r.context,o=a.connection;o&&t.select(o)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],o=i.get(r.context.shape.id),l=gt(a,function(u){return o.id===u.id});l||t.select(o)}),e.on("element.click",function(r){if(Ln(r)){var a=r.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),l=t.get().length>1,u=pc(r)||fc(r);if(o&&l)return u?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,u)}})}Ja.$inject=["eventBus","selection","canvas","elementRegistry"];function bc(e){return!e.hidden}const wc={__init__:["selectionVisuals","selectionBehavior"],__depends__:[mc,vc],selection:["type",bn],selectionVisuals:["type",or],selectionBehavior:["type",Ja]};function es(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}es.prototype.next=function(){return this._prefix+ ++this._counter};var Ec=new es("ov"),xc=500;function ze(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Ec,this._overlayDefaults=ce({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=_c(n.getContainer()),this._init()}ze.$inject=["config.overlays","eventBus","canvas","elementRegistry"];ze.prototype.get=function(e){if(St(e)&&(e={id:e}),St(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?dn(t.overlays,Or({type:e.type})):t.overlays.slice():[]}else return e.type?dn(this._overlays,Or({type:e.type})):e.id?this._overlays[e.id]:null};ze.prototype.add=function(e,t,n){if(cn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=ce({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};ze.prototype.remove=function(e){var t=this.get(e)||[];vt(t)||(t=[t]);var n=this;ne(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(di(i.html),di(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};ze.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};ze.prototype.show=function(){gi(this._overlayRoot)};ze.prototype.hide=function(){gi(this._overlayRoot,!1)};ze.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ua(this._overlayRoot)};ze.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=Kt(t);i=a.x,r=a.y}ts(n,i,r),du(e.html,"data-container-id",t.id)};ze.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var o;i.waypoints?o=Kt(i).width:o=i.width,r=t.right*-1+o}if(t.bottom!==void 0){var l;i.waypoints?l=Kt(i).height:l=i.height,a=t.bottom*-1+l}ts(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};ze.prototype._createOverlayContainer=function(e){var t=At('<div class="djs-overlays" />');tt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};ze.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";ns(this._overlayRoot,n)};ze.prototype._getOverlayContainer=function(e,t){var n=gt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};ze.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),St(i)&&(i=At(i)),a=this._getOverlayContainer(n),r=At('<div class="djs-overlay" data-overlay-id="'+t+'">'),tt(r,{position:"absolute"}),r.appendChild(i),e.type&&mi(r).add("djs-overlay-"+e.type);var o=this._canvas.findRoot(n),l=this._canvas.getRootElement();gi(r,o===l),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};ze.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,l=this._canvas.getRootElement(),u=!0;(i!==l||n&&(Gt(r)&&r>t.scale||Gt(a)&&a<t.scale))&&(u=!1),gi(o,u),this._updateOverlayScale(e,t)};ze.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,o,l="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Gt(i)&&t.scale<i&&(o=(1/t.scale||1)*i),Gt(r)&&t.scale>r&&(o=(1/t.scale||1)*r)),Gt(o)&&(l="scale("+o+","+o+")"),ns(a,l)};ze.prototype._updateOverlaysVisibilty=function(e){var t=this;ne(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};ze.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});ne(a,function(u){t.remove(u.id)});var o=t._getOverlayContainer(r);if(o){di(o.html);var l=t._overlayContainers.indexOf(o);l!==-1&&t._overlayContainers.splice(l,1)}}),e.on("element.changed",xc,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(ne(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&mi(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function _c(e){var t=At('<div class="djs-overlay-container" />');return tt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function ts(e,t,n){tt(e,{left:t+"px",top:n+"px"})}function gi(e,t){e.style.display=t===!1?"none":""}function ns(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const is={__init__:["overlays"],overlays:["type",ze]};function rs(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(Qa(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}rs.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Sc={__init__:["changeSupport"],changeSupport:["type",rs]};var Ac=1e3;function Jt(e){this._eventBus=e}Jt.$inject=["eventBus"];function kc(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}Jt.prototype.on=function(e,t,n,i,r,a){if((Bt(t)||$t(t))&&(a=r,r=i,i=n,n=t,t=null),Bt(n)&&(a=r,r=i,i=n,n=Ac),cn(r)&&(a=r,r=!1),!Bt(i))throw new Error("handlerFn must be a function");vt(e)||(e=[e]);var o=this._eventBus;ne(e,function(l){var u=["commandStack",l,t].filter(function(g){return g}).join(".");o.on(u,n,r?kc(i,a):i,a)})};var Tc=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];ne(Tc,function(e){Jt.prototype[e]=function(t,n,i,r,a){(Bt(t)||$t(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}});function lr(e,t){t.invoke(Jt,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}kt(lr,Jt);lr.$inject=["canvas","injector"];const Cc={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",lr]};var Rc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Nc(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return Rc[t]})}var Ic="_plane";function ur(e){var t=e.id;return de(e,"bpmn:SubProcess")?Dc(t):t}function Dc(e){return e+Ic}var Pc="bjs-breadcrumbs-shown";function as(e,t,n,i){var r=At('<ul class="bjs-breadcrumbs"></ul>'),a=i.getContainer(),o=mi(a);a.appendChild(r);var l=[];e.on("element.changed",function(g){var E=g.element,k=fn(E),p=gt(l,function(Q){return Q===k});p&&u()});function u(g){g&&(l=Mc(g));var E=l.map(function(p){var Q=Nc(p.name||p.id),ae=At('<li><span class="bjs-crumb"><a title="'+Q+'">'+Q+"</a></span></li>"),te=i.findRoot(ur(p))||i.findRoot(p.id);if(!te&&de(p,"bpmn:Process")){var se=t.find(function(Y){var T=fn(Y);return T&&T.processRef&&T.processRef===p});te=i.findRoot(se.id)}return ae.addEventListener("click",function(){i.setRootElement(te)}),ae});r.innerHTML="";var k=E.length>1;o.toggle(Pc,k),E.forEach(function(p){r.appendChild(p)})}e.on("root.set",function(g){u(g.element)})}as.$inject=["eventBus","elementRegistry","overlays","canvas"];function Mc(e){for(var t=fn(e),n=[],i=t;i;i=i.$parent)(de(i,"bpmn:SubProcess")||de(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function ss(e,t){var n=null,i=new Lc;e.on("root.set",function(r){var a=r.element,o=t.viewbox(),l=i.get(a);if(i.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=a,!(de(a,"bpmn:Collaboration")&&!l)){l=l||{x:0,y:0,zoom:1};var u=(o.x-l.x)*o.scale,g=(o.y-l.y)*o.scale;(u!==0||g!==0)&&t.scroll({dx:u,dy:g}),l.zoom!==o.scale&&t.zoom(l.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}ss.$inject=["eventBus","canvas"];function Lc(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Qr={x:180,y:160};function en(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n.handleImport(r.definitions)})}en.prototype.handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=[];e.diagrams.forEach(function(i){var r=t.createNewDiagrams(i.plane);Array.prototype.push.apply(n,r)}),n.forEach(function(i){t.movePlaneElementsToOrigin(i.plane)})}};en.prototype.createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var o=a.bpmnElement;if(o){var l=o.$parent;de(o,"bpmn:SubProcess")&&!a.isExpanded&&n.push(o),$c(o,e)&&i.push({diElement:a,parent:l})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var o=t.createDiagram(a);t._processToDiagramMap[a.id]=o,r.push(o)}}),i.forEach(function(a){for(var o=a.diElement,l=a.parent;l&&n.indexOf(l)===-1;)l=l.$parent;if(l){var u=t._processToDiagramMap[l.id];t.moveToDiPlane(o,u.plane)}}),r};en.prototype.movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Bc(e),i={x:n.x-Qr.x,y:n.y-Qr.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};en.prototype.moveToDiPlane=function(e,t){var n=os(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};en.prototype.createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};en.$inject=["eventBus","moddle"];function os(e){return de(e,"bpmndi:BPMNDiagram")?e:os(e.$parent)}function Bc(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=zi(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),ec(t)}function $c(e,t){var n=e.$parent;return!(!de(n,"bpmn:SubProcess")||n===t.bpmnElement||Nl(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Qn=250,Oc='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Vc="bjs-drilldown-empty";function jt(e,t,n,i){Jt.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i;var r=this;this.executed("shape.toggleCollapse",Qn,function(a){var o=a.shape;r.canDrillDown(o)?r.addOverlay(o):r.removeOverlay(o)},!0),this.reverted("shape.toggleCollapse",Qn,function(a){var o=a.shape;r.canDrillDown(o)?r.addOverlay(o):r.removeOverlay(o)},!0),this.executed(["shape.create","shape.move","shape.delete"],Qn,function(a){var o=a.oldParent,l=a.newParent||a.parent,u=a.shape;r.canDrillDown(u)&&r.addOverlay(u),r.updateDrilldownOverlay(o),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(u)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Qn,function(a){var o=a.oldParent,l=a.newParent||a.parent,u=a.shape;r.canDrillDown(u)&&r.addOverlay(u),r.updateDrilldownOverlay(o),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(u)},!0),t.on("import.render.complete",function(){n.filter(function(a){return r.canDrillDown(a)}).map(function(a){r.addOverlay(a)})})}kt(jt,Jt);jt.prototype.updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this.updateOverlayVisibility(n)}};jt.prototype.canDrillDown=function(e){var t=this._canvas;return de(e,"bpmn:SubProcess")&&t.findRoot(ur(e))};jt.prototype.updateOverlayVisibility=function(e){var t=this._overlays,n=e.businessObject,i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.flowElements&&n.flowElements.length;mi(i.html).toggle(Vc,!r)}};jt.prototype.addOverlay=function(e){var t=this._canvas,n=this._overlays,i=n.get({element:e,type:"drilldown"});i.length&&this.removeOverlay(e);var r=At('<button class="bjs-drilldown">'+Oc+"</button>");r.addEventListener("click",function(){t.setRootElement(t.findRoot(ur(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:r}),this.updateOverlayVisibility(e)};jt.prototype.removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};jt.$inject=["canvas","eventBus","elementRegistry","overlays"];const Fc={__depends__:[is,Sc,Cc],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",as],drilldownCentering:["type",ss],drilldownOverlayBehavior:["type",jt],subprocessCompatibility:["type",en]},Uc=/^class[ {]/;function qc(e){return Uc.test(e.toString())}function cr(e){return Array.isArray(e)}function Pi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ni(...e){e.length===1&&cr(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const jc=/constructor\s*[^(]*\(\s*([^)]*)\)/m,zc=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Wc=/\/\*([^*]*)\*\//m;function Hc(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(qc(e)?jc:zc);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Wc);return(r&&r[1]||i).trim()})||[]}function ls(e,t){t=t||{get:function(T,F){if(n.push(T),F===!1)return null;throw o(`No provider for "${T}"!`)}};const n=[],i=this._providers=Object.create(t._providers||null),r=this._instances=Object.create(null),a=r.injector=this,o=function(T){const F=n.join(" -> ");return n.length=0,new Error(F?`${T} (Resolving: ${F})`:T)};function l(T,F){if(!i[T]&&T.indexOf(".")!==-1){const _=T.split(".");let y=l(_.shift());for(;_.length;)y=y[_.shift()];return y}if(Pi(r,T))return r[T];if(Pi(i,T)){if(n.indexOf(T)!==-1)throw n.push(T),o("Cannot resolve circular dependency!");return n.push(T),r[T]=i[T][0](i[T][1]),n.pop(),r[T]}return t.get(T,F)}function u(T,F){if(typeof F>"u"&&(F={}),typeof T!="function")if(cr(T))T=ni(T.slice());else throw o(`Cannot invoke "${T}". Expected a function!`);const y=(T.$inject||Hc(T)).map(D=>Pi(F,D)?F[D]:l(D));return{fn:T,dependencies:y}}function g(T){const{fn:F,dependencies:_}=u(T),y=Function.prototype.bind.apply(F,[null].concat(_));return new y}function E(T,F,_){const{fn:y,dependencies:D}=u(T,_);return y.apply(F,D)}function k(T){return ni(F=>T.get(F))}function p(T,F){if(F&&F.length){const _=Object.create(null),y=Object.create(null),D=[],V=[],A=[];let x,L,j,H;for(let z in i)x=i[z],F.indexOf(z)!==-1&&(x[2]==="private"?(L=D.indexOf(x[3]),L===-1?(j=x[3].createChild([],F),H=k(j),D.push(x[3]),V.push(j),A.push(H),_[z]=[H,z,"private",j]):_[z]=[A[L],z,"private",V[L]]):_[z]=[x[2],x[1]],y[z]=!0),(x[2]==="factory"||x[2]==="type")&&x[1].$scope&&F.forEach(J=>{x[1].$scope.indexOf(J)!==-1&&(_[z]=[x[2],x[1]],y[J]=!0)});F.forEach(z=>{if(!y[z])throw new Error('No provider for "'+z+'". Cannot use provider from the parent!')}),T.unshift(_)}return new ls(T,a)}const Q={factory:E,type:g,value:function(T){return T}};function ae(T,F){const _=T.__init__||[];return function(){_.forEach(y=>{typeof y=="string"?F.get(y):F.invoke(y)})}}function te(T){const F=T.__exports__;if(F){const _=T.__modules__,y=Object.keys(T).reduce((L,j)=>(j!=="__exports__"&&j!=="__modules__"&&j!=="__init__"&&j!=="__depends__"&&(L[j]=T[j]),L),Object.create(null)),D=(_||[]).concat(y),V=p(D),A=ni(function(L){return V.get(L)});F.forEach(function(L){i[L]=[A,L,"private",V]});const x=(T.__init__||[]).slice();return x.unshift(function(){V.init()}),T=Object.assign({},T,{__init__:x}),ae(T,V)}return Object.keys(T).forEach(function(_){if(_==="__init__"||_==="__depends__")return;if(T[_][2]==="private"){i[_]=T[_];return}const y=T[_][0],D=T[_][1];i[_]=[Q[y],Yc(y,D),y]}),ae(T,a)}function se(T,F){return T.indexOf(F)!==-1||(T=(F.__depends__||[]).reduce(se,T),T.indexOf(F)!==-1)?T:T.concat(F)}function Y(T){const F=T.reduce(se,[]).map(te);let _=!1;return function(){_||(_=!0,F.forEach(y=>y()))}}this.get=l,this.invoke=E,this.instantiate=g,this.createChild=p,this.init=Y(e)}function Yc(e,t){return e!=="value"&&cr(t)&&(t=ni(t.slice())),t}var Gc=1;function zt(e,t){Dt.call(this,e,Gc),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}kt(zt,Dt);zt.prototype.canRender=function(){return!0};zt.prototype.drawShape=function(t,n,i){var r=Ce("rect");return _e(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Za(n)?_e(r,ce({},this.FRAME_STYLE,i||{})):_e(r,ce({},this.SHAPE_STYLE,i||{})),Ve(t,r),r};zt.prototype.drawConnection=function(t,n,i){var r=ir(n.waypoints,ce({},this.CONNECTION_STYLE,i||{}));return Ve(t,r),r};zt.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,o=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return Qt(o)};zt.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return Qt(a)};zt.$inject=["eventBus","styles"];function Kc(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return ce(a,{class:n})},this.style=function(n,i){!vt(n)&&!i&&(i=n,n=[]);var r=pn(n,function(a,o){return ce(a,e[o]||{})},{});return i?ce(r,i):r},this.computeStyle=function(n,i,r){return vt(i)||(r=i,i=[]),t.style(i||[],ce({},r,n||{}))}}const Xc={__init__:["defaultRenderer"],defaultRenderer:["type",zt],styles:["type",Kc]};function Qc(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Zc(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function ii(e,t){return Math.round(e*t)/t}function Zr(e){return $t(e)?e+"px":e}function Jc(e){for(;e.parent;)e=e.parent;return e}function ed(e){e=ce({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),tt(n,{position:"relative",overflow:"hidden",width:Zr(e.width),height:Zr(e.height)}),t.appendChild(n),n}function us(e,t,n){const i=Ce("g");st(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const td="base",cs=0,nd=1,id={shape:["x","y","width","height"],connection:["waypoints"]};function me(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}me.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];me.prototype._init=function(e){const t=this._eventBus,n=this._container=ed(e),i=this._svg=Ce("svg");_e(i,{width:"100%",height:"100%"}),Ve(n,i);const r=this._viewport=us(i,"viewport");e.deferUpdate!==!1&&(this._viewboxChanged=Al(Ot(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};me.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};me.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=Qa(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};me.prototype.getDefaultLayer=function(){return this.getLayer(td,cs)};me.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};me.prototype._getChildIndex=function(e){return pn(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};me.prototype._createLayer=function(e,t){typeof t>"u"&&(t=nd);const n=this._getChildIndex(t);return{group:us(this._viewport,"layer-"+e,n),index:t,visible:!0}};me.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};me.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(gn(n),t.visible=!1),n};me.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],gn(t.group))};me.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};me.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(Jc(e))||{}).rootElement:void 0};me.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};me.prototype._findPlaneForRoot=function(e){return gt(this._planes,function(t){return t.rootElement===e})};me.prototype.getContainer=function(){return this._container};me.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(ne([i.gfx,i.secondaryGfx],function(r){r&&(n?st(r).add(t):st(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};me.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};me.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};me.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return st(n).has(t)};me.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};me.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};me.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,cs);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};me.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};me.prototype.setRootElement=function(e,t){if(Gt(t))throw new Error("override not supported");if(e===this._rootElement)return;let n;if(!e)throw new Error("rootElement required");return n=this._findPlaneForRoot(e),n||(e=this.addRootElement(e)),this._setRoot(e),e};me.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};me.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};me.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};me.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=id[e];if(!er(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};me.prototype._setParent=function(e,t,n){Zc(t.children,e,n),e.parent=t};me.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const o=a.create(e,t,i);return this._elementRegistry.add(t,o),a.update(e,t,o),r.fire(e+".added",{element:t,gfx:o}),t};me.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};me.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};me.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Qc(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};me.prototype.removeShape=function(e){return this._removeElement(e,"shape")};me.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};me.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};me.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};me.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};me.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,a,o,l,u,g;if(e)this._changeViewbox(function(){l=Math.min(n.width/e.width,n.height/e.height);const E=this._svg.createSVGMatrix().scale(l).translate(-e.x,-e.y);In(t,E)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},o=In(t),r=o?o.matrix:Vl(),l=ii(r.a,1e3),u=ii(-r.e||0,1e3),g=ii(-r.f||0,1e3),e=this._cachedViewbox={x:u?u/l:0,y:g?g/l:0,width:n.width/l,height:n.height/l,scale:l,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};me.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=ce({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),ds(t,n)}),{x:n.e,y:n.f}};me.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);i!==this.getRootElement()&&this.setRootElement(i),t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=Kt(e),a=zi(r),o=this.viewbox(),l=this.zoom();let u,g;o.y+=t.top/l,o.x+=t.left/l,o.width-=(t.right+t.left)/l,o.height-=(t.bottom+t.top)/l;const E=zi(o);if(!(r.width<o.width&&r.height<o.height))u=r.x-o.x,g=r.y-o.y;else{const p=Math.max(0,a.right-E.right),Q=Math.min(0,a.left-E.left),ae=Math.max(0,a.bottom-E.bottom),te=Math.min(0,a.top-E.top);u=p||Q,g=ae||te}this.scroll({dx:-u*l,dy:-g*l})};me.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),ii(i.a,1e3)};function ds(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}me.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};me.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let o,l,u,g,E;u=i.getCTM();const k=u.a;return t?(o=ce(a,t),l=o.matrixTransform(u.inverse()),g=r.translate(l.x,l.y).scale(1/k*e).translate(-l.x,-l.y),E=u.multiply(g)):E=r.scale(e),ds(this._viewport,E),E};me.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};me.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,o=n.height*t.scale;return{x:i,y:r,width:a,height:o}};me.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var mn="data-element-id";function ot(e){this._elements={},this._eventBus=e}ot.$inject=["eventBus"];ot.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),_e(t,mn,i),n&&_e(n,mn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};ot.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(_e(i.gfx,mn,""),i.secondaryGfx&&_e(i.secondaryGfx,mn,""),delete t[n])};ot.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};ot.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&_e(t,mn,i),t};ot.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&_e(e,mn);var n=this._elements[t];return n&&n.element};ot.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};ot.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],o=a.element,l=a.gfx;if(e(o,l))return o}};ot.prototype.getAll=function(){return this.filter(function(e){return e})};ot.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};ot.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};ot.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var dr={exports:{}},bi={};function rd(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var l=this.indexOf(a);if(typeof o>"u"){if(l!==-1)return;o=this.length}l!==-1&&this.splice(l,1),this.splice(o,0,a),l===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function ad(e){return e.__refs_collection===!0}bi.extend=rd;bi.isExtended=ad;var ps=bi;function sd(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function fs(e,t,n){var i=ps.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function od(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var o=r;r=null,o&&e.unset(o,i,n),r=a,e.set(r,i,n)}}})}function Ut(e,t){if(!(this instanceof Ut))return new Ut(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ut.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?fs(this,t,e):od(this,t,e)};Ut.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return ps.isExtended(n)||fs(this,t,e),n};Ut.prototype.ensureBound=function(e,t){sd(e,t)||this.bind(e,t)};Ut.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Ut.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var ld=Ut;dr.exports=ld;dr.exports.Collection=bi;var ud=dr.exports;const Bn=Hs(ud);var hs=new Bn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ms=new Bn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Jr=new Bn({name:"attachers",collection:!0},{name:"host"}),ys=new Bn({name:"outgoing",collection:!0},{name:"source"}),vs=new Bn({name:"incoming",collection:!0},{name:"target"});function wi(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),hs.bind(this,"parent"),ms.bind(this,"labels"),ys.bind(this,"outgoing"),vs.bind(this,"incoming")}function wn(){wi.call(this),hs.bind(this,"children"),Jr.bind(this,"host"),Jr.bind(this,"attachers")}kt(wn,wi);function gs(){wn.call(this)}kt(gs,wn);function bs(){wn.call(this),ms.bind(this,"labelTarget")}kt(bs,wn);function ws(){wi.call(this),ys.bind(this,"source"),vs.bind(this,"target")}kt(ws,wi);var cd={connection:ws,shape:wn,label:bs,root:gs};function dd(e,t){var n=cd[e];if(!n)throw new Error("unknown type: <"+e+">");return ce(new n,t)}function En(){this._uid=12}En.prototype.createRoot=function(e){return this.create("root",e)};En.prototype.createLabel=function(e){return this.create("label",e)};En.prototype.createShape=function(e){return this.create("shape",e)};En.prototype.createConnection=function(e){return this.create("connection",e)};En.prototype.create=function(e,t){return t=ce({},t||{}),t.id||(t.id=e+"_"+this._uid++),dd(e,t)};var fi="__fn",Es=1e3,pd=Array.prototype.slice;function nt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}nt.prototype.on=function(e,t,n,i){if(e=vt(e)?e:[e],Bt(t)&&(i=n,n=t,t=Es),!$t(t))throw new Error("priority must be a number");var r=n;i&&(r=Ot(n,i),r[fi]=n[fi]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:r,next:null})})};nt.prototype.once=function(e,t,n,i){var r=this;if(Bt(t)&&(i=n,n=t,t=Es),!$t(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(i,arguments);return r.off(e,a),o}a[fi]=n,this.on(e,t,a)};nt.prototype.off=function(e,t){e=vt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};nt.prototype.createEvent=function(e){var t=new $n;return t.init(e),t};nt.prototype.fire=function(e,t){var n,i,r,a;if(a=pd.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof $n?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==o&&(n.type=o)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};nt.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};nt.prototype._destroy=function(){this._listeners={}};nt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};nt.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=fd(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};nt.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};nt.prototype._getListeners=function(e){return this._listeners[e]};nt.prototype._setListeners=function(e,t){this._listeners[e]=t};nt.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[fi]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function $n(){}$n.prototype.stopPropagation=function(){this.cancelBubble=!0};$n.prototype.preventDefault=function(){this.defaultPrevented=!0};$n.prototype.init=function(e){ce(this,e||{})};function fd(e,t){return e.apply(null,t)}function hd(e){return e.childNodes[0]}function md(e){return e.parentNode.childNodes[1]}function lt(e,t){this._eventBus=e,this._elementRegistry=t}lt.$inject=["eventBus","elementRegistry"];lt.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=md(t),n||(n=Ce("g"),st(n).add("djs-children"),Ve(t.parentNode,n))):n=t,n};lt.prototype._clear=function(e){var t=hd(e);return Ua(t),t};lt.prototype._createContainer=function(e,t,n,i){var r=Ce("g");st(r).add("djs-group"),typeof n<"u"?xs(r,t,t.childNodes[n]):Ve(t,r);var a=Ce("g");st(a).add("djs-element"),st(a).add("djs-"+e),i&&st(a).add("djs-frame"),Ve(r,a);var o=Ce("g");return st(o).add("djs-visual"),Ve(a,o),a};lt.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Za(t))};lt.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=pn(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),ne(i,function(r){var a=r.children;if(a){var o=t._getChildrenContainer(r);ne(a.slice().reverse(),function(l){var u=n.getGraphics(l);xs(u.parentNode,o)})}})};lt.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})};lt.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};lt.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})};lt.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};lt.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Wa(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?_e(n,"display","none"):_e(n,"display","block")}};lt.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);gn(t.parentNode)};function xs(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const yd={__depends__:[Xc],__init__:["canvas"],canvas:["type",me],elementRegistry:["type",ot],elementFactory:["type",En],eventBus:["type",nt],graphicsFactory:["type",lt]};function vd(e){var t=new ls(e);return t.init(),t}function gd(e){e=e||{};var t={config:["value",e]},n=[t,yd].concat(e.modules||[]);return vd(n)}function xn(e,t){this.injector=t=t||gd(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}xn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};xn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function pr(){}pr.prototype.get=function(e){return this.$model.properties.get(this,e)};pr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function _s(e,t){this.model=e,this.properties=t}_s.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(pr.prototype);ne(e.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(o){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ne(o,Ot(function(l,u){this.set(u,l)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var bd={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ss={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function fr(e,t){var n=Ss[e];return n?n(t):t}function Hi(e){return!!bd[e]}function As(e){return!!Ss[e]}function Ke(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function ut(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}ut.prototype.build=function(){return Tl(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};ut.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};ut.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var l=r.indexOf(e);if(l===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(l,1),this.addProperty(t,n?void 0:l,o),a[i.name]=a[i.localName]=t};ut.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=Ke(r[0],i),o=Ke(r[1],a.prefix).name,l=this.propertiesByName[o];if(l)this.replaceProperty(l,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};ut.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};ut.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};ut.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};ut.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};ut.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};ut.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};ut.prototype.hasProperty=function(e){return this.propertiesByName[e]};ut.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ne(e.properties,Ot(function(a){a=ce({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,l=a.redefines;o||l?this.redefineProperty(a,o||l,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function Wt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ne(e,Ot(this.registerPackage,this))}Wt.prototype.getPackage=function(e){return this.packageMap[e]};Wt.prototype.getPackages=function(){return this.packages};Wt.prototype.registerPackage=function(e){e=ce({},e);var t=this.packageMap;ea(t,e,"prefix"),ea(t,e,"uri"),ne(e.types,Ot(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Wt.prototype.registerType=function(e,t){e=ce({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:ce(e.meta||{})});var n=Ke(e.name,t.prefix),i=n.name,r={};ne(e.properties,Ot(function(a){var o=Ke(a.name,n.prefix),l=o.name;Hi(a.type)||(a.type=Ke(a.type,o.prefix).name),ce(a,{ns:o,name:l}),r[l]=a},this)),ce(e,{ns:n,name:i,propertiesByName:r}),ne(e.extends,Ot(function(a){var o=Ke(a,n.prefix),l=this.typeMap[o.name];l.traits=l.traits||[],l.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Wt.prototype.mapTypes=function(e,t,n){var i=Hi(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(u,g){var E=Ke(u,Hi(u)?"":e.prefix);r.mapTypes(E,t,g)}function o(u){return a(u,!0)}function l(u){return a(u,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ne(i.superClass,n?o:l),t(i,!n),ne(i.traits,o)};Wt.prototype.getEffectiveDescriptor=function(e){var t=Ke(e),n=new ut(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Wt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function ea(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function tn(e){this.model=e}tn.prototype.set=function(e,t,n){if(!St(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;wd(n)?i?delete e[r]:delete e.$attrs[Yi(t)]:i?r in e?e[r]=n:ks(e,i,n):e.$attrs[Yi(t)]=n};tn.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Yi(t)];var i=n.name;return!e[i]&&n.isMany&&ks(e,n,[]),e[i]};tn.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=ce({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};tn.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};tn.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};tn.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function wd(e){return typeof e>"u"}function ks(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Yi(e){return e.replace(/^:/,"")}function dt(e,t={}){this.properties=new tn(this),this.factory=new _s(this,this.properties),this.registry=new Wt(e,this.properties),this.typeCache={},this.config=t}dt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};dt.prototype.getType=function(e){var t=this.typeCache,n=St(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};dt.prototype.createAny=function(e,t,n){var i=Ke(e),r={$type:e,$instanceOf:function(o){return o===this.$type},get:function(o){return this[o]},set:function(o,l){kl(this,[o],l)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ne(n,function(o,l){cn(o)&&o.value!==void 0?r[o.name]=o.value:r[l]=o}),r};dt.prototype.getPackage=function(e){return this.registry.getPackage(e)};dt.prototype.getPackages=function(){return this.registry.getPackages()};dt.prototype.getElementDescriptor=function(e){return e.$descriptor};dt.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};dt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};dt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var ta=String.fromCharCode,Ed=Object.prototype.hasOwnProperty,xd=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Rn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Rn).forEach(function(e){Rn[e.toUpperCase()]=Rn[e]});function _d(e,t,n,i){return i?Ed.call(Rn,i)?Rn[i]:"&"+i+";":ta(t||parseInt(n,16))}function Yt(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(xd,_d):e}var Sd="http://www.w3.org/2001/XMLSchema-instance",Ad="xsi",na="xsi:type",ia="non-whitespace outside of root node";function un(e){return new Error(e)}function ra(e){return"missing namespace for prefix <"+e+">"}function Zn(e){return{get:e,enumerable:!0}}function kd(e){var t={},n;for(n in e)t[n]=e[n];return t}function Gi(e){return e+"$uri"}function Td(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Gi(i)]=n;return t}function aa(){return{line:0,column:0}}function Cd(e){throw e}function Ts(e){if(!this)return new Ts(e);var t=e&&e.proxy,n,i,r,a,o=Cd,l,u,g,E,k=aa,p=!1,Q=!1,ae=null,te=!1,se;function Y(_){_ instanceof Error||(_=un(_)),ae=_,o(_,k)}function T(_){l&&(_ instanceof Error||(_=un(_)),l(_,k))}this.on=function(_,y){if(typeof y!="function")throw un("required args <name, cb>");switch(_){case"openTag":i=y;break;case"text":n=y;break;case"closeTag":r=y;break;case"error":o=y;break;case"warn":l=y;break;case"cdata":a=y;break;case"attention":E=y;break;case"question":g=y;break;case"comment":u=y;break;default:throw un("unsupported event: "+_)}return this},this.ns=function(_){if(typeof _>"u"&&(_={}),typeof _!="object")throw un("required args <nsMap={}>");var y={},D;for(D in _)y[D]=_[D];return y[Sd]=Ad,Q=!0,se=y,this},this.parse=function(_){if(typeof _!="string")throw un("required args <xml=string>");return ae=null,F(_),k=aa,te=!1,ae},this.stop=function(){te=!0};function F(_){var y=Q?[]:null,D=Q?Td(se):null,V,A=[],x=0,L=!1,j=!1,H=0,z=0,J,he,ge,ye,it,f,s,h,b,I="",w=0,S;function K(){if(S!==null)return S;var v,ve,pe,Pe=Q&&D.xmlns,Se=Q&&p?[]:null,ue=w,le=I,be=le.length,Tt,rt,Ie,$e,xe,We={},nn={},Qe,ie,Ee;e:for(;ue<be;ue++)if(Qe=!1,ie=le.charCodeAt(ue),!(ie===32||ie<14&&ie>8)){for((ie<65||ie>122||ie>90&&ie<97)&&ie!==95&&ie!==58&&(T("illegal first char attribute name"),Qe=!0),Ee=ue+1;Ee<be;Ee++)if(ie=le.charCodeAt(Ee),!(ie>96&&ie<123||ie>64&&ie<91||ie>47&&ie<59||ie===46||ie===45||ie===95)){if(ie===32||ie<14&&ie>8){T("missing attribute value"),ue=Ee;continue e}if(ie===61)break;T("illegal attribute name char"),Qe=!0}if(xe=le.substring(ue,Ee),xe==="xmlns:xmlns"&&(T("illegal declaration of xmlns"),Qe=!0),ie=le.charCodeAt(Ee+1),ie===34)Ee=le.indexOf('"',ue=Ee+2),Ee===-1&&(Ee=le.indexOf("'",ue),Ee!==-1&&(T("attribute value quote missmatch"),Qe=!0));else if(ie===39)Ee=le.indexOf("'",ue=Ee+2),Ee===-1&&(Ee=le.indexOf('"',ue),Ee!==-1&&(T("attribute value quote missmatch"),Qe=!0));else for(T("missing attribute value quotes"),Qe=!0,Ee=Ee+1;Ee<be&&(ie=le.charCodeAt(Ee+1),!(ie===32||ie<14&&ie>8));Ee++);for(Ee===-1&&(T("missing closing quotes"),Ee=be,Qe=!0),Qe||(Ie=le.substring(ue,Ee)),ue=Ee;Ee+1<be&&(ie=le.charCodeAt(Ee+1),!(ie===32||ie<14&&ie>8));Ee++)ue===Ee&&(T("illegal character after attribute end"),Qe=!0);if(ue=Ee+1,Qe)continue e;if(xe in nn){T("attribute <"+xe+"> already defined");continue}if(nn[xe]=!0,!Q){We[xe]=Ie;continue}if(p){if(rt=xe==="xmlns"?"xmlns":xe.charCodeAt(0)===120&&xe.substr(0,6)==="xmlns:"?xe.substr(6):null,rt!==null){if(v=Yt(Ie),ve=Gi(rt),$e=se[v],!$e){if(rt==="xmlns"||ve in D&&D[ve]!==v)do $e="ns"+x++;while(typeof D[$e]<"u");else $e=rt;se[v]=$e}D[rt]!==$e&&(Tt||(D=kd(D),Tt=!0),D[rt]=$e,rt==="xmlns"&&(D[Gi($e)]=v,Pe=$e),D[ve]=v),We[xe]=Ie;continue}Se.push(xe,Ie);continue}if(ie=xe.indexOf(":"),ie===-1){We[xe]=Ie;continue}if(!(pe=D[xe.substring(0,ie)])){T(ra(xe.substring(0,ie)));continue}xe=Pe===pe?xe.substr(ie+1):pe+xe.substr(ie),xe===na&&(ie=Ie.indexOf(":"),ie!==-1?(pe=Ie.substring(0,ie),pe=D[pe]||pe,Ie=pe+Ie.substring(ie)):Ie=Pe+":"+Ie),We[xe]=Ie}if(p)for(ue=0,be=Se.length;ue<be;ue++){if(xe=Se[ue++],Ie=Se[ue],ie=xe.indexOf(":"),ie!==-1){if(!(pe=D[xe.substring(0,ie)])){T(ra(xe.substring(0,ie)));continue}xe=Pe===pe?xe.substr(ie+1):pe+xe.substr(ie),xe===na&&(ie=Ie.indexOf(":"),ie!==-1?(pe=Ie.substring(0,ie),pe=D[pe]||pe,Ie=pe+Ie.substring(ie)):Ie=Pe+":"+Ie)}We[xe]=Ie}return S=We}function m(){for(var v=/(\r\n|\r|\n)/g,ve=0,pe=0,Pe=0,Se=z,ue,le;H>=Pe&&(ue=v.exec(_),!(!ue||(Se=ue[0].length+ue.index,Se>H)));)ve+=1,Pe=Se;return H==-1?(pe=Se,le=_.substring(z)):z===0?le=_.substring(z,H):(pe=H-Pe,le=z==-1?_.substring(H):_.substring(H,z+1)),{data:le,line:ve,column:pe}}for(k=m,t&&(b=Object.create({},{name:Zn(function(){return s}),originalName:Zn(function(){return h}),attrs:Zn(K),ns:Zn(function(){return D})}));z!==-1;){if(_.charCodeAt(z)===60?H=z:H=_.indexOf("<",z),H===-1){if(A.length)return Y("unexpected end of file");if(z===0)return Y("missing start tag");z<_.length&&_.substring(z).trim()&&T(ia);return}if(z!==H){if(A.length){if(n&&(n(_.substring(z,H),Yt,k),te))return}else if(_.substring(z,H).trim()&&(T(ia),te))return}if(ye=_.charCodeAt(H+1),ye===33){if(ge=_.charCodeAt(H+2),ge===91&&_.substr(H+3,6)==="CDATA["){if(z=_.indexOf("]]>",H),z===-1)return Y("unclosed cdata");if(a&&(a(_.substring(H+9,z),k),te))return;z+=3;continue}if(ge===45&&_.charCodeAt(H+3)===45){if(z=_.indexOf("-->",H),z===-1)return Y("unclosed comment");if(u&&(u(_.substring(H+4,z),Yt,k),te))return;z+=3;continue}}if(ye===63){if(z=_.indexOf("?>",H),z===-1)return Y("unclosed question");if(g&&(g(_.substring(H,z+2),k),te))return;z+=2;continue}for(J=H+1;;J++){if(it=_.charCodeAt(J),isNaN(it))return z=-1,Y("unclosed tag");if(it===34)ge=_.indexOf('"',J+1),J=ge!==-1?ge:J;else if(it===39)ge=_.indexOf("'",J+1),J=ge!==-1?ge:J;else if(it===62){z=J;break}}if(ye===33){if(E&&(E(_.substring(H,z+1),Yt,k),te))return;z+=1;continue}if(S={},ye===47){if(L=!1,j=!0,!A.length)return Y("missing open tag");if(J=s=A.pop(),ge=H+2+J.length,_.substring(H+2,ge)!==J)return Y("closing tag mismatch");for(;ge<z;ge++)if(ye=_.charCodeAt(ge),!(ye===32||ye>8&&ye<14))return Y("close tag")}else{if(_.charCodeAt(z-1)===47?(J=s=_.substring(H+1,z-1),L=!0,j=!0):(J=s=_.substring(H+1,z),L=!0,j=!1),!(ye>96&&ye<123||ye>64&&ye<91||ye===95||ye===58))return Y("illegal first char nodeName");for(ge=1,he=J.length;ge<he;ge++)if(ye=J.charCodeAt(ge),!(ye>96&&ye<123||ye>64&&ye<91||ye>47&&ye<59||ye===45||ye===95||ye==46)){if(ye===32||ye<14&&ye>8){s=J.substring(0,ge),S=null;break}return Y("invalid nodeName")}j||A.push(s)}if(Q){if(V=D,L&&(j||y.push(V),S===null&&(p=J.indexOf("xmlns",ge)!==-1)&&(w=ge,I=J,K(),p=!1)),h=s,ye=s.indexOf(":"),ye!==-1){if(f=D[s.substring(0,ye)],!f)return Y("missing namespace on <"+h+">");s=s.substr(ye+1)}else f=D.xmlns;f&&(s=f+":"+s)}if(L&&(w=ge,I=J,i&&(t?i(b,Yt,j,k):i(s,K,Yt,j,k),te)))return;if(j){if(r&&(r(t?b:s,Yt,L,k),te))return;Q&&(L?D=V:D=y.pop())}z+=1}}}function Cs(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Rd={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Ei="xsi:type";function Rs(e){return e.xml&&e.xml.serialize}function Ns(e){return Rs(e)===Ei}function Nd(e){return Rs(e)==="property"}function Id(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Is(e,t){return Cs(t)?e.prefix+":"+Id(e.localName):e.name}function Dd(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function Pd(e,t){var n=Ke(e),i=t.getPackage(n.prefix);return Dd(n,i)}function qt(e){return new Error(e)}function Nt(e){return e.$descriptor}function Md(e){ce(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw qt("expected element");var n=this.elementsById,i=Nt(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw qt("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function On(){}On.prototype.handleEnd=function(){};On.prototype.handleText=function(){};On.prototype.handleNode=function(){};function hr(){}hr.prototype=Object.create(On.prototype);hr.prototype.handleNode=function(){return this};function _n(){}_n.prototype=Object.create(On.prototype);_n.prototype.handleText=function(e){this.body=(this.body||"")+e};function Vn(e,t){this.property=e,this.context=t}Vn.prototype=Object.create(_n.prototype);Vn.prototype.handleNode=function(e){if(this.element)throw qt("expected no sub nodes");return this.element=this.createReference(e),this};Vn.prototype.handleEnd=function(){this.element.id=this.body};Vn.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function mr(e,t){this.element=t,this.propertyDesc=e}mr.prototype=Object.create(_n.prototype);mr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=fr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function xi(){}xi.prototype=Object.create(_n.prototype);xi.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Xe(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Xe.prototype=Object.create(xi.prototype);Xe.prototype.addReference=function(e){this.context.addReference(e)};Xe.prototype.handleText=function(e){var t=this.element,n=Nt(t),i=n.bodyProperty;if(!i)throw qt("unexpected body text <"+e+">");_n.prototype.handleText.call(this,e)};Xe.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Nt(t),i=n.bodyProperty;i&&e!==void 0&&(e=fr(i.type,e),t.set(i.name,e))};Xe.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Nt(n),r=this.context,a=new n({}),o=this.model,l;return ne(t,function(u,g){var E=i.propertiesByName[g],k;E&&E.isReference?E.isMany?(k=u.split(" "),ne(k,function(p){r.addReference({element:a,property:E.ns.name,id:p})})):r.addReference({element:a,property:E.ns.name,id:u}):(E?u=fr(E.type,u):g!=="xmlns"&&(l=Ke(g,i.ns.prefix),o.getPackage(l.prefix)&&r.addWarning({message:"unknown attribute <"+g+">",element:a,property:g,value:u})),a.set(g,u))}),a};Xe.prototype.getPropertyForNode=function(e){var t=e.name,n=Ke(t),i=this.type,r=this.model,a=Nt(i),o=n.name,l=a.propertiesByName[o],u,g;if(l&&!l.isAttr)return Ns(l)&&(u=e.attributes[Ei],u)?(u=Pd(u,r),g=r.getType(u),ce({},l,{effectiveType:Nt(g).name})):l;var E=r.getPackage(n.prefix);if(E){if(u=Is(n,E),g=r.getType(u),l=gt(a.properties,function(k){return!k.isVirtual&&!k.isReference&&!k.isAttribute&&g.hasType(k.type)}),l)return ce({},l,{effectiveType:Nt(g).name})}else if(l=gt(a.properties,function(k){return!k.isReference&&!k.isAttribute&&k.type==="Element"}),l)return l;throw qt("unrecognized element <"+n.name+">")};Xe.prototype.toString=function(){return"ElementDescriptor["+Nt(this.type).name+"]"};Xe.prototype.valueHandler=function(e,t){return new mr(e,t)};Xe.prototype.referenceHandler=function(e){return new Vn(e,this.context)};Xe.prototype.handler=function(e){return e==="Element"?new yn(this.model,e,this.context):new Xe(this.model,e,this.context)};Xe.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,As(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(ce(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function yr(e,t,n){Xe.call(this,e,t,n)}yr.prototype=Object.create(Xe.prototype);yr.prototype.createElement=function(e){var t=e.name,n=Ke(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),o=a&&Is(n,a)||t;if(!r.hasType(o))throw qt("unexpected element <"+e.originalName+">");return Xe.prototype.createElement.call(this,e)};function yn(e,t,n){this.model=e,this.context=n}yn.prototype=Object.create(xi.prototype);yn.prototype.createElement=function(e){var t=e.name,n=Ke(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};yn.prototype.handleChild=function(e){var t=new yn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};yn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function vr(e){e instanceof dt&&(e={model:e}),ce(this,{lax:!1},e)}vr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Xe?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,o=new Md(ce({},t,{rootHandler:i})),l=new Ts({proxy:!0}),u=Ld();i.context=o,u.push(i);function g(y,D,V){var A=D(),x=A.line,L=A.column,j=A.data;j.charAt(0)==="<"&&j.indexOf(" ")!==-1&&(j=j.slice(0,j.indexOf(" "))+">");var H="unparsable content "+(j?j+" ":"")+`detected
	line: `+x+`
	column: `+L+`
	nested error: `+y.message;if(V)return o.addWarning({message:H,error:y}),!0;throw qt(H)}function E(y,D){return g(y,D,!0)}function k(){var y=o.elementsById,D=o.references,V,A;for(V=0;A=D[V];V++){var x=A.element,L=y[A.id],j=Nt(x).propertiesByName[A.property];if(L||o.addWarning({message:"unresolved reference <"+A.id+">",element:A.element,property:A.property,value:A.id}),j.isMany){var H=x.get(j.name),z=H.indexOf(A);z===-1&&(z=H.length),L?H[z]=L:H.splice(z,1)}else x.set(j.name,L)}}function p(){u.pop().handleEnd()}var Q=/^<\?xml /i,ae=/ encoding="([^"]+)"/i,te=/^utf-8$/i;function se(y){if(Q.test(y)){var D=ae.exec(y),V=D&&D[1];!V||te.test(V)||o.addWarning({message:"unsupported document encoding <"+V+">, falling back to UTF-8"})}}function Y(y,D){var V=u.peek();try{u.push(V.handleNode(y))}catch(A){g(A,D,a)&&u.push(new hr)}}function T(y,D){try{u.peek().handleText(y)}catch(V){E(V,D)}}function F(y,D){y.trim()&&T(y,D)}var _=r.getPackages().reduce(function(y,D){return y[D.uri]=D.prefix,y},{"http://www.w3.org/XML/1998/namespace":"xml"});return l.ns(_).on("openTag",function(y,D,V,A){var x=y.attrs||{},L=Object.keys(x).reduce(function(H,z){var J=D(x[z]);return H[z]=J,H},{}),j={name:y.name,originalName:y.originalName,attributes:L,ns:y.ns};Y(j,A)}).on("question",se).on("closeTag",p).on("cdata",T).on("text",function(y,D,V){F(D(y),V)}).on("error",g).on("warn",E),new Promise(function(y,D){var V;try{l.parse(e),k()}catch(H){V=H}var A=i.element;!V&&!A&&(V=qt("failed to parse document as <"+i.type.$descriptor.name+">"));var x=o.warnings,L=o.references,j=o.elementsById;return V?(V.warnings=x,D(V)):y({rootElement:A,elementsById:j,references:L,warnings:x})})};vr.prototype.handler=function(e){return new yr(this.model,e)};function Ld(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Bd=`<?xml version="1.0" encoding="UTF-8"?>
`,$d=/<|>|'|"|&|\n\r|\n/g,Ds=/<|>|&/g;function Od(e){var t={},n={},i={},r=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,l){n[o.uri]=o,l?r.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,l){t[o||"xmlns"]=l},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var l=o.uri,u=this.getNSKey(o);i[u]=this.byUri(l),e&&e.logUsed(o)},this.getUsed=function(o){function l(E){var k=u.getNSKey(E);return i[k]}var u=this,g=[].concat(r,a);return g.filter(l)}}function Vd(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Fd(e,t){return Cs(t)?Vd(e):e}function Ps(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Ms(e){return St(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Ud(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function qd(e,t){return t.isGeneric?ce({localName:t.ns.localName},e):ce({localName:Fd(t.ns.localName,t.$pkg)},e)}function jd(e,t){return ce({localName:t.ns.localName},e)}function zd(e){var t=e.$descriptor;return dn(t.properties,function(n){var i=n.name;if(n.isVirtual||!Ji(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var Wd={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Hd={"<":"lt",">":"gt","&":"amp"};function Ls(e,t,n){return e=St(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function Yd(e){return Ls(e,$d,Wd)}function Gd(e){return Ls(e,Ds,Hd)}function Kd(e){return dn(e,function(t){return t.isAttr})}function Xd(e){return dn(e,function(t){return!t.isAttr})}function gr(e){this.tagName=e}gr.prototype.build=function(e){return this.element=e,this};gr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Xt(){}Xt.prototype.serializeValue=Xt.prototype.serializeTo=function(e){e.append(this.escape?Gd(this.value):this.value)};Xt.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Ds)!==-1&&(this.escape=!0),this};function br(e){this.tagName=e}Ps(br,Xt);br.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Me(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Me.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=zd(e),this.parseAttributes(Kd(r)),this.parseContainments(Xd(r))),this.parseGenericAttributes(e,i),this};Me.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return qd(t,e)};Me.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return jd(t,e)};Me.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Me.prototype.nsAttributeName=function(e){var t;if(St(e)?t=Ke(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:ce({localName:t.localName},n)};Me.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ne(e,function(r,a){var o;a==="$body"?n.push(new Xt().build({type:"String"},r)):a==="$children"?ne(r,function(l){n.push(new Me(t).build(l))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,r),o&&i.push({name:a,value:r}))}),i};Me.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Ke(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};Me.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ne(i,function(a,o){var l=n.parseNsAttribute(e,o,a);l&&r.push(l)}),r};Me.prototype.parseGenericAttributes=function(e,t){var n=this;ne(t,function(i){if(i.name!==Ei)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Me.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ne(e,function(r){var a=i.get(r.name),o=r.isReference,l=r.isMany;if(l||(a=[a]),r.isBody)n.push(new Xt().build(r,a[0]));else if(As(r.type))ne(a,function(E){n.push(new br(t.addTagName(t.nsPropertyTagName(r))).build(r,E))});else if(o)ne(a,function(E){n.push(new gr(t.addTagName(t.nsPropertyTagName(r))).build(E))});else{var u=Ns(r),g=Nd(r);ne(a,function(E){var k;u?k=new _i(t,r):g?k=new Me(t,r):k=new Me(t),n.push(k.build(E))})}})};Me.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new Od(i):t=i),t};Me.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,o=i.byUri(r);return(!o||n)&&i.add(e,t),i.mapPrefix(a,r),e};Me.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,o=e.uri,l,u,g;if(!a&&!o)return{localName:e.localName};if(g=Rd[a]||i&&(i.getPackage(a)||{}).uri,o=o||g||r.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(o),!e){for(l=a,u=1;r.uriByPrefix(l);)l=a+"_"+u++;e=this.logNamespace({prefix:l,uri:o},g===o)}return a&&r.mapPrefix(a,o),e};Me.prototype.parseAttributes=function(e){var t=this,n=this.element;ne(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];ne(r,function(o){a.push(o.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Me.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Ms(e)};Me.prototype.addAttribute=function(e,t){var n=this.attrs;St(t)&&(t=Yd(t));var i=El(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Me.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Ud(n).concat(t)),ne(t,function(i){e.append(" ").append(Ms(i.name)).append('="').append(i.value).append('"')})};Me.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Xt;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ne(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function _i(e,t){Me.call(this,e,t)}Ps(_i,Me);_i.prototype.parseNsAttributes=function(e){var t=Me.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Ei),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};_i.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Qd(){this.value="",this.write=function(e){this.value+=e}}function Zd(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Jd(e){e=ce({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Qd,a=new Zd(r,e.format);if(e.preamble&&a.append(Bd),new Me().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function Si(e,t){dt.call(this,e,t)}Si.prototype=Object.create(dt.prototype);Si.prototype.fromXML=function(e,t,n){St(t)||(n=t,t="bpmn:Definitions");var i=new vr(ce({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Si.prototype.toXML=function(e,t){var n=new Jd(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(o){return r(o)}})};var ep="BPMN20",tp="http://www.omg.org/spec/BPMN/20100524/MODEL",np="bpmn",ip=[],rp=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],ap=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],sp={tagAlias:"lowerCase",typePrefix:"t"},op={name:ep,uri:tp,prefix:np,associations:ip,types:rp,enumerations:ap,xml:sp},lp="BPMNDI",up="http://www.omg.org/spec/BPMN/20100524/DI",cp="bpmndi",dp=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],pp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],fp=[],hp={name:lp,uri:up,prefix:cp,types:dp,enumerations:pp,associations:fp},mp="DC",yp="http://www.omg.org/spec/DD/20100524/DC",vp="dc",gp=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],bp=[],wp={name:mp,uri:yp,prefix:vp,types:gp,associations:bp},Ep="DI",xp="http://www.omg.org/spec/DD/20100524/DI",_p="di",Sp=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Ap=[],kp={tagAlias:"lowerCase"},Tp={name:Ep,uri:xp,prefix:_p,types:Sp,associations:Ap,xml:kp},Cp="bpmn.io colors for BPMN",Rp="http://bpmn.io/schema/bpmn/biocolor/1.0",Np="bioc",Ip=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Dp=[],Pp=[],Mp={name:Cp,uri:Rp,prefix:Np,types:Ip,enumerations:Dp,associations:Pp},Lp="BPMN in Color",Bp="http://www.omg.org/spec/BPMN/non-normative/color/1.0",$p="color",Op=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Vp=[],Fp=[],Up={name:Lp,uri:Bp,prefix:$p,types:Op,enumerations:Vp,associations:Fp},qp={bpmn:op,bpmndi:hp,dc:wp,di:Tp,bioc:Mp,color:Up};function jp(e,t){var n=ce({},qp,e);return new Si(n,t)}function Fn(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(t>=1&&Bt(arguments[t-1])){var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);e.apply(this,i).then(function(r){var a=Object.keys(r)[0];return n(null,r[a])},function(r){return n(r,r.warnings)})}else return e.apply(this,arguments)}}var zp="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Wp(e){Ji(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(zp)}})}function Je(e,t){return e.$instanceOf(t)}function Hp(e){return gt(e.rootElements,function(t){return Je(t,"bpmn:Process")||Je(t,"bpmn:Collaboration")})}function Yp(e,t){var n={},i=[],r={};function a(w,S){return function(K){w(K,S)}}function o(w){n[w.id]=w}function l(w){return n[w.id]}function u(w,S){var K=w.gfx;if(K)throw new Error(t("already rendered {element}",{element:He(w)}));return e.element(w,r[w.id],S)}function g(w,S){return e.root(w,r[w.id],S)}function E(w,S){try{var K=r[w.id]&&u(w,S);return o(w),K}catch(m){k(m.message,{element:w,error:m}),console.error(t("failed to import {element}",{element:He(w)})),console.error(m)}}function k(w,S){e.error(w,S)}function p(w){var S=w.bpmnElement;S?r[S.id]?k(t("multiple DI elements defined for {element}",{element:He(S)}),{element:S}):(r[S.id]=w,Wp(S)):k(t("no bpmnElement referenced in {element}",{element:He(w)}),{element:w})}function Q(w){ae(w.plane)}function ae(w){p(w),ne(w.planeElement,te)}function te(w){p(w)}function se(w,S){var K=w.diagrams;if(S&&K.indexOf(S)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!S&&K&&K.length&&(S=K[0]),!S)throw new Error(t("no diagram to display"));r={},Q(S);var m=S.plane;if(!m)throw new Error(t("no plane for {element}",{element:He(S)}));var v=m.bpmnElement;if(!v)if(v=Hp(w),v)k(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:He(m),rootElement:He(v)})),m.bpmnElement=v,p(m);else throw new Error(t("no process or collaboration to display"));var ve=g(v,m);if(Je(v,"bpmn:Process")||Je(v,"bpmn:SubProcess"))T(v,ve);else if(Je(v,"bpmn:Collaboration"))b(v,ve),F(w.rootElements,ve);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:He(m),rootElement:He(v)}));Y()}function Y(){for(var w;i.length;)w=i.shift(),w()}function T(w,S){f(w,S),j(w.ioSpecification,S),L(w.artifacts,S),o(w)}function F(w,S){var K=dn(w,function(m){return!l(m)&&Je(m,"bpmn:Process")&&m.laneSets});K.forEach(a(T,S))}function _(w,S){E(w,S)}function y(w,S){ne(w,a(_,S))}function D(w,S){E(w,S)}function V(w,S){E(w,S)}function A(w,S){E(w,S)}function x(w,S){E(w,S)}function L(w,S){ne(w,function(K){Je(K,"bpmn:Association")?i.push(function(){x(K,S)}):x(K,S)})}function j(w,S){w&&(ne(w.dataInputs,a(V,S)),ne(w.dataOutputs,a(A,S)))}function H(w,S){f(w,S),L(w.artifacts,S)}function z(w,S){var K=E(w,S);Je(w,"bpmn:SubProcess")&&H(w,K||S),Je(w,"bpmn:Activity")&&j(w.ioSpecification,S),i.push(function(){ne(w.dataInputAssociations,a(D,S)),ne(w.dataOutputAssociations,a(D,S))})}function J(w,S){E(w,S)}function he(w,S){E(w,S)}function ge(w,S){i.push(function(){var K=E(w,S);w.childLaneSet&&ye(w.childLaneSet,K||S),I(w)})}function ye(w,S){ne(w.lanes,a(ge,S))}function it(w,S){ne(w,a(ye,S))}function f(w,S){s(w.flowElements,S),w.laneSets&&it(w.laneSets,S)}function s(w,S){ne(w,function(K){Je(K,"bpmn:SequenceFlow")?i.push(function(){J(K,S)}):Je(K,"bpmn:BoundaryEvent")?i.unshift(function(){z(K,S)}):Je(K,"bpmn:FlowNode")?z(K,S):Je(K,"bpmn:DataObject")||(Je(K,"bpmn:DataStoreReference")||Je(K,"bpmn:DataObjectReference")?he(K,S):k(t("unrecognized flowElement {element} in context {context}",{element:He(K),context:S?He(S.businessObject):"null"}),{element:K,context:S}))})}function h(w,S){var K=E(w,S),m=w.processRef;m&&T(m,K||S)}function b(w,S){ne(w.participants,a(h,S)),L(w.artifacts,S),i.push(function(){y(w.messageFlows,S)})}function I(w){ne(w.flowNodeRef,function(S){var K=S.get("lanes");K&&K.push(w)})}return{handleDeferred:Y,handleDefinitions:se,handleSubProcess:H,registerDi:p}}function Gp(e,t,n){var i,r,a,o,l,u=[];function g(E,k){var p={root:function(se,Y){return i.add(se,Y)},element:function(se,Y,T){return i.add(se,Y,T)},error:function(se,Y){u.push({message:se,context:Y})}},Q=new Yp(p,a);k=k||E.diagrams&&E.diagrams[0];var ae=Kp(E,k);if(!ae)throw new Error(a("no diagram to display"));ne(ae,function(se){Q.handleDefinitions(E,se)});var te=k.plane.bpmnElement.id;o.setRootElement(o.findRoot(te+"_plane")||o.findRoot(te))}return new Promise(function(E,k){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("translate"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),g(t,n),r.fire("import.render.complete",{error:l,warnings:u}),E({warnings:u})}catch(p){return p.warnings=u,k(p)}})}function Kp(e,t){if(t){var n=t.plane.bpmnElement,i=n;!de(n,"bpmn:Process")&&!de(n,"bpmn:Collaboration")&&(i=Xp(n));var r;de(i,"bpmn:Collaboration")?r=i:r=gt(e.rootElements,function(g){if(de(g,"bpmn:Collaboration"))return gt(g.participants,function(E){return E.processRef===i})});var a=[i];r&&(a=xl(r.participants,function(g){return g.processRef}),a.push(r));var o=Bs(a),l=[t],u=[n];return ne(e.diagrams,function(g){var E=g.plane.bpmnElement;o.indexOf(E)!==-1&&u.indexOf(E)===-1&&(l.push(g),u.push(E))}),l}}function Bs(e){var t=[];return ne(e,function(n){n&&(t.push(n),t=t.concat(Bs(n.flowElements)))}),t}function Xp(e){for(var t=e;t;){if(de(t,"bpmn:Process"))return t;t=t.$parent}}var Qp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',$s=Qp,Os={verticalAlign:"middle"},Vs={color:"#404040"},Zp={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},Jp={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},ef={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},tf='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+$s+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Et;function nf(){Et=At(tf),tt(Et,Zp),tt(yt("svg",Et),Os),tt(yt(".backdrop",Et),Jp),tt(yt(".notice",Et),ef),tt(yt(".link",Et),Vs,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function rf(){Et||(nf(),ji.bind(Et,".backdrop","click",function(e){document.body.removeChild(Et)})),document.body.appendChild(Et)}function Oe(e){e=ce({},sf,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),lf(this._container),this._init(this._container,this._moddle,e)}kt(Oe,xn);Oe.prototype.importXML=Fn(async function(t,n){const i=this;function r(o){const l=i.get("eventBus").createEvent(o);return Object.defineProperty(l,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:o.warnings,references:o.references,elementsById:o.elementsById}}}),l}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let o;try{o=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(p){throw this._emit("import.parse.complete",{error:p}),p}let l=o.rootElement;const u=o.references,g=o.warnings,E=o.elementsById;a=a.concat(g),l=this._emit("import.parse.complete",r({error:null,definitions:l,elementsById:E,references:u,warnings:a}))||l;const k=await this.importDefinitions(l,n);return a=a.concat(k.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(o){let l=o;throw a=a.concat(l.warnings||[]),ri(l,a),l=af(l),this._emit("import.done",{error:l,warnings:l.warnings}),l}});Oe.prototype.importDefinitions=Fn(async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}});Oe.prototype.open=Fn(async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw ri(a,[]),a}if(typeof t=="string"&&(i=of(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw ri(a,[]),a}try{this.clear()}catch(a){throw ri(a,[]),a}const{warnings:r}=await Gp(this,n,i);return{warnings:r}});Oe.prototype.saveXML=Fn(async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(o){i=o}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a});Oe.prototype.saveSVG=Fn(async function(t={}){this._emit("saveSVG.start");let n,i;try{const r=this.get("canvas"),a=r.getActiveLayer(),o=yt("defs",r._svg),l=qr(a),u=o?"<defs>"+qr(o)+"</defs>":"",g=a.getBBox();n=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+g.width+'" height="'+g.height+'" viewBox="'+g.x+" "+g.y+" "+g.width+" "+g.height+'" version="1.1">'+u+l+"</svg>"}catch(r){i=r}if(this._emit("saveSVG.done",{error:i,svg:n}),i)throw i;return{svg:n}});Oe.prototype._setDefinitions=function(e){this._definitions=e};Oe.prototype.getModules=function(e){return this._modules};Oe.prototype.clear=function(){this.getDefinitions()&&xn.prototype.clear.call(this)};Oe.prototype.destroy=function(){xn.prototype.destroy.call(this),di(this._container)};Oe.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Oe.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Oe.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=yt(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Oe.prototype.getDefinitions=function(){return this._definitions};Oe.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Oe.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,i,r),l=ce(Cl(n,["additionalModules"]),{canvas:ce({},n.canvas,{container:e}),modules:o});xn.call(this,l),n&&n.container&&this.attachTo(n.container)};Oe.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Oe.prototype._createContainer=function(e){const t=At('<div class="bjs-container"></div>');return tt(t,{width:sa(e.width),height:sa(e.height),position:e.position}),t};Oe.prototype._createModdle=function(e){const t=ce({},this._moddleExtensions,e.moddleExtensions);return new jp(t)};Oe.prototype._modules=[];function ri(e,t){return e.warnings=t,e}function af(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const sf={width:"100%",height:"100%",position:"relative"};function sa(e){return e+($t(e)?"px":"")}function of(e,t){return t&&gt(e.diagrams,function(n){return n.id===t})||null}function lf(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+$s+"</a>",i=At(n);tt(yt("svg",i),Os),tt(i,Vs,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),ar.bind(i,"click",function(r){rf(),r.preventDefault()})}function Ai(e){Oe.call(this,e)}kt(Ai,Oe);Ai.prototype._modules=[uc,Ya,wc,is,Fc];Ai.prototype._moddleExtensions={};function uf(e,t,n){return`<?xml version="1.0" encoding="UTF-8"?>
  <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
               xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
               typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
               targetNamespace="${n}">
    <process id="${e}" name="${t}" isExecutable="true"></process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_1">
      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${e}">
      </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
  </definitions>`}const cf={class:"mt-4 text-lg"},df=vn({__name:"ProcessTaskList",props:{modelValue:{type:Boolean,required:!0},instanceId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e){const t=e,{instanceId:n}=Dn(t),i=X([]),r=X([]),a=X(!1),o=X();let l;const u=async()=>{a.value=!0;try{if(!(n!=null&&n.value))return;const{xml:E,activities:k,tasks:p,processes:Q}=await Wo(n.value);i.value=p!=null?p:[],r.value=Q!=null?Q:[],l||(l=Ys(new Ai({container:o.value}))),await l.importXML(E!=null?E:uf("none","none","none"));const ae=l.get("canvas");ae.zoom("fit-viewport"),k==null||k.forEach(({activityId:te,endTime:se,deleteReason:Y})=>{let T="highlight-curr";Y?T="highlight-reject":se&&(T="highlight"),ae.addMarker(te,T)})}finally{a.value=!1}},g=async()=>{u()};return(E,k)=>{const p=G("el-table-column"),Q=G("el-table"),ae=G("el-tag"),te=G("el-dialog"),se=ua("loading");return M(),U(te,{title:E.$t("processInstance.op.task"),width:"98%","model-value":e.modelValue,onOpened:k[0]||(k[0]=()=>g()),"onUpdate:modelValue":k[1]||(k[1]=Y=>E.$emit("update:modelValue",Y))},{default:d(()=>[Te("div",{ref_key:"bpmnContainer",ref:o,class:"w-full"},null,512),ai((M(),U(Q,{data:i.value},{default:d(()=>[c(p,{prop:"name",label:E.$t("processModel.name")},null,8,["label"]),c(p,{prop:"assignee",label:E.$t("processActivity.assignee")},null,8,["label"]),c(p,{property:"created",label:E.$t("processInstance.started")},{default:d(({row:Y})=>[O($(C(Lt)(Y.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),c(p,{property:"endDate",label:E.$t("processInstance.ended")},{default:d(({row:Y})=>[O($(Y.endDate?C(Lt)(Y.endDate).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"]),c(p,{prop:"duration",label:E.$t("processActivity.durationInMillis")},{default:d(({row:Y})=>[O($(Y.duration?Math.floor(Y.duration/100/60/60)/10+" H":void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[se,a.value]]),Te("p",cf,$(E.$t("processInstance.history")),1),ai((M(),U(Q,{data:r.value},{default:d(()=>[c(p,{prop:"assignee",label:E.$t("processInstance.assignee")},null,8,["label"]),c(p,{prop:"status",label:E.$t("processInstance.status")},{default:d(({row:Y})=>[Y.status==="complete"?(M(),U(ae,{key:0,type:"success",size:"small"},{default:d(()=>[O($(E.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):Y.status==="reject"?(M(),U(ae,{key:1,type:"danger",size:"small"},{default:d(()=>[O($(E.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):Y.status==="cancel"?(M(),U(ae,{key:2,type:"info",size:"small"},{default:d(()=>[O($(E.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):(M(),U(ae,{key:3,type:"warning",size:"small"},{default:d(()=>[O($(E.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024))]),_:1},8,["label"]),c(p,{prop:"opinion",label:E.$t("processInstance.opinion")},null,8,["label"]),c(p,{property:"started",label:E.$t("processInstance.started")},{default:d(({row:Y})=>[O($(C(Lt)(Y.started).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),c(p,{property:"ended",label:E.$t("processInstance.ended")},{default:d(({row:Y})=>[O($(Y.ended?C(Lt)(Y.ended).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[se,a.value]])]),_:1},8,["title","model-value"])}}});const pf=hi(df,[["__scopeId","data-v-38992a11"]]),ff={class:"el-upload-list__item is-success"},hf=["src"],mf={key:0,class:"ml-2"},yf={key:1,class:"el-upload--picture-card"},vf=["src"],oa=300,la=300,gf=vn({__name:"ImageListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},maxWidth:{type:Number,default:null},maxHeight:{type:Number,default:null},listType:{type:String,default:"pictureCard"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,{modelValue:i,maxWidth:r,maxHeight:a,fileAccept:o,fileMaxSize:l}=Dn(n),{t:u}=Pn(),g=Ki(),E=X(!1),k=X({}),p=X({}),Q=X(!1),ae=X(!1),te=X({src:"data:;base64,="}),se=at({get:()=>i.value,set:A=>t("update:modelValue",A)}),{formItem:Y}=ca();Nn(se,()=>{var A;(A=Y==null?void 0:Y.validate)==null||A.call(Y,"change").catch(x=>{})},{deep:!0});const T=A=>{te.value=A,Q.value=!0},F=()=>{const A={isWatermark:!0,thumbnailWidth:oa,thumbnailHeight:la};return(r==null?void 0:r.value)!=null&&(A.maxWidth=r.value),(a==null?void 0:a.value)!=null&&(A.maxHeight=a.value),A},_=at(()=>{var A;return(A=o==null?void 0:o.value)!=null?A:g.upload.imageInputAccept}),y=at(()=>{var A;return(A=l==null?void 0:l.value)!=null?A:g.upload.imageLimitByte}),D=A=>y.value>0&&A.size>y.value?(xt.error(u("error.fileMaxSize",{size:`${y.value/1024/1024} MB`})),!1):!0,V=A=>{ya(JSON.parse(A.message))};return(A,x)=>{const L=G("el-icon"),j=G("el-input"),H=G("el-progress"),z=G("el-upload"),J=G("el-dialog");return M(),Be("div",null,[c(C(Jo),{list:se.value,tag:"ul","item-key":"url",animation:250,class:Tn(["el-upload-list",[e.listType==="picture"?"el-upload-list--picture":"el-upload-list--picture-card",{"is-disabled":e.disabled}]]),onStart:x[1]||(x[1]=()=>E.value=!0),onEnd:x[2]||(x[2]=()=>E.value=!1)},{item:d(({element:he})=>[Te("li",ff,[Te("div",{class:Tn([e.listType==="picture"?["w-32","h-32"]:["w-full","h-full"],"relative flex items-center justify-center bg-gray-50"])},[Te("img",{class:"block max-w-full max-h-full",src:he.url,alt:""},null,8,hf),Te("div",{class:Tn(["absolute space-x-4 bg-black bg-opacity-50 rounded-md opacity-0 cursor-move full-flex-center",E.value?void 0:"hover:opacity-100"]),onClick:x[0]||(x[0]=si(()=>{},["stop"]))},[c(L,{class:"image-action",title:A.$t("cropImage"),onClick:()=>(ae.value=!0,p.value=he)},{default:d(()=>[c(C(Gs))]),_:2},1032,["title","onClick"]),c(L,{class:"image-action",title:A.$t("previewImage"),onClick:()=>T(he)},{default:d(()=>[c(C(da))]),_:2},1032,["title","onClick"]),c(L,{class:"image-action",title:A.$t("deleteImage"),onClick:()=>se.value.splice(se.value.indexOf(he),1)},{default:d(()=>[c(C(pa))]),_:2},1032,["title","onClick"])],2)],2),e.listType==="picture"?(M(),Be("div",mf,[c(j,{modelValue:he.url,"onUpdate:modelValue":ge=>he.url=ge,placeholder:"URL",maxlength:"255"},{prepend:d(()=>[O("URL")]),_:2},1032,["modelValue","onUpdate:modelValue"]),c(j,{modelValue:he.name,"onUpdate:modelValue":ge=>he.name=ge,placeholder:A.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O($(A.$t("article.imageList.name")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),c(j,{modelValue:he.description,"onUpdate:modelValue":ge=>he.description=ge,type:"textarea",rows:2,placeholder:A.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):re("",!0)])]),footer:d(()=>[c(z,{action:C(_o),headers:{...C(fa)(),...C(ha)()},data:F(),accept:_.value,"before-upload":D,"on-success":(he,ge)=>se.value.push({name:he.name,url:he.url}),"on-progress":(he,ge)=>k.value=ge,"on-error":V,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[k.value.status==="uploading"?(M(),U(H,{key:0,type:"circle",percentage:parseInt(k.value.percentage,10)},null,8,["percentage"])):(M(),Be("div",yf,[c(L,null,{default:d(()=>[c(C(ma))]),_:1})]))]),_:1},8,["action","headers","data","accept","on-success","on-progress","disabled"])]),_:1},8,["list","class"]),Te("div",null,[c(J,{modelValue:Q.value,"onUpdate:modelValue":x[6]||(x[6]=he=>Q.value=he),top:"5vh",width:768},{default:d(()=>[c(j,{modelValue:te.value.url,"onUpdate:modelValue":x[3]||(x[3]=he=>te.value.url=he),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),e.listType!=="picture"?(M(),U(j,{key:0,modelValue:te.value.name,"onUpdate:modelValue":x[4]||(x[4]=he=>te.value.name=he),placeholder:A.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O($(A.$t("article.imageList.name")),1)]),_:1},8,["modelValue","placeholder"])):re("",!0),e.listType!=="picture"?(M(),U(j,{key:1,modelValue:te.value.description,"onUpdate:modelValue":x[5]||(x[5]=he=>te.value.description=he),type:"textarea",rows:2,placeholder:A.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","placeholder"])):re("",!0),Te("img",{src:te.value.url,alt:"",class:"mt-1 border border-gray-300"},null,8,vf)]),_:1},8,["modelValue"])]),c(Qo,{modelValue:ae.value,"onUpdate:modelValue":x[7]||(x[7]=he=>ae.value=he),src:p.value.url,"thumbnail-width":oa,"thumbnail-height":la,onSuccess:x[8]||(x[8]=he=>p.value.url=he)},null,8,["modelValue","src"])])}}}),bf=hi(gf,[["__scopeId","data-v-ebaf49e7"]]),wf={class:"w-full"},Ef=["onClick"],xf={class:"el-upload-list__item-status-label"},_f=vn({__name:"FileListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,{fileAccept:i,fileMaxSize:r,modelValue:a}=Dn(n),{t:o}=Pn(),l=Ki(),u=X({}),g=at({get:()=>a.value,set:_=>t("update:modelValue",_)}),{formItem:E}=ca();Nn(g,()=>{var _;(_=E==null?void 0:E.validate)==null||_.call(E,"change").catch(y=>{})},{deep:!0});const k=X(!1),p=X({}),Q=X(),ae=_=>{p.value=_,k.value=!0},te=()=>{Q.value.validate(async _=>{_&&(k.value=!1)})},se=at(()=>{var _;return(_=i==null?void 0:i.value)!=null?_:l.upload.fileInputAccept}),Y=at(()=>{var _;return(_=r==null?void 0:r.value)!=null?_:l.upload.fileLimitByte}),T=_=>Y.value>0&&_.size>Y.value?(xt.error(o("error.fileMaxSize",{size:`${Y.value/1024/1024} MB`})),!1):!0,F=_=>{ya(JSON.parse(_.message))};return(_,y)=>{const D=G("el-upload"),V=G("el-progress"),A=G("el-icon"),x=G("el-input"),L=G("el-form-item"),j=G("el-button"),H=G("el-form"),z=G("el-dialog");return M(),Be("div",wf,[c(D,{action:C(So),headers:{...C(fa)(),...C(ha)()},accept:se.value,"before-upload":T,"on-success":J=>g.value.push({name:J.name,url:J.url,length:J.size}),"on-progress":(J,he)=>u.value=he,"on-error":F,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[O($(_.$t("clickOrDragToUpload"))+" ",1)]),_:1},8,["action","headers","accept","on-success","on-progress","disabled"]),u.value.status==="uploading"?(M(),U(V,{key:0,percentage:parseInt(u.value.percentage,10)},null,8,["percentage"])):re("",!0),c(Qs,{tag:"ul",class:Tn(["el-upload-list","el-upload-list--text",{"is-disabled":e.disabled}]),name:"el-list"},{default:d(()=>[(M(!0),Be(ct,null,mt(g.value,J=>(M(),Be("li",{key:J.url,class:"el-upload-list__item is-success"},[Te("a",{class:"el-upload-list__item-name",onClick:()=>ae(J)},[c(A,{class:"el-icon--document"},{default:d(()=>[c(C(Ks))]),_:1}),O($(J.name),1)],8,Ef),Te("label",xf,[c(A,{class:"el-icon--upload-success el-icon--circle-check"},{default:d(()=>[c(C(va))]),_:1})]),e.disabled?re("",!0):(M(),U(A,{key:0,class:"el-icon--close",onClick:()=>g.value.splice(g.value.indexOf(J),1)},{default:d(()=>[c(C(Xs))]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["class"]),c(z,{modelValue:k.value,"onUpdate:modelValue":y[4]||(y[4]=J=>k.value=J),title:_.$t("article.fileList.attribute"),top:"5vh",width:768,"append-to-body":""},{default:d(()=>[c(H,{ref_key:"form",ref:Q,model:p.value,"label-width":"150px"},{default:d(()=>[c(L,{prop:"name",label:_.$t("name"),rules:{required:!0,message:()=>_.$t("v.required")}},{default:d(()=>[c(x,{modelValue:p.value.name,"onUpdate:modelValue":y[0]||(y[0]=J=>p.value.name=J),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","rules"]),c(L,{prop:"length",label:_.$t("size"),rules:{required:!0,message:()=>_.$t("v.required")}},{default:d(()=>[c(x,{modelValue:p.value.length,"onUpdate:modelValue":y[1]||(y[1]=J=>p.value.length=J),maxlength:"19"},{append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),c(L,{prop:"url",label:"URL",rules:{required:!0,message:()=>_.$t("v.required")}},{default:d(()=>[c(x,{modelValue:p.value.url,"onUpdate:modelValue":y[2]||(y[2]=J=>p.value.url=J),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"]),c(j,{type:"primary","native-type":"submit",onClick:y[3]||(y[3]=si(()=>te(),["prevent"]))},{default:d(()=>[O($(_.$t("save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Sf=hi(_f,[["__scopeId","data-v-8f839ee5"]]),Fs=(e,t,n)=>{if(e===0||e===1)window.open(t);else{n=n+"?preview=true";const i=n.lastIndexOf("/",n.lastIndexOf("/")-1),r=`${n.substring(0,i)}/auth/jwt/login?code=${Zs()}&redirectUri=${encodeURIComponent(n)}`;window.open(r)}},Af={key:0},kf={class:"w-full"},Tf={class:"w-full"},Cf={key:1,class:"inline-flex mb-1"},Rf={key:2,class:"inline-flex mb-1"},Nf={name:"ArticleForm"},If=vn({...Nf,props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},beanIds:{type:Array,required:!0},action:{type:String,default:"edit"},channel:{type:Object,default:null},isReview:{type:Boolean,default:!1}},emits:{"update:modelValue":null,finished:null},setup(e){const t=e,{modelValue:n,channel:i}=Dn(t),{t:r}=Pn(),a=Ki(),o=Js(),l=X(),u=X(!1),g=X(!1),E=X(!1),k=X(),p=X({}),Q=X(),ae=X(!1),te=X([]),se=X([]),Y=X([]),T=X([]),F=X(),_=at(()=>Y.value.find(m=>m.id===F.value)),y=at(()=>{var m;return Tr(Cr(Rr().article.mains,(m=_.value)==null?void 0:m.mains,"article"))}),D=at(()=>{var m;return Tr(Cr(Rr().article.asides,(m=_.value)==null?void 0:m.asides,"article"))}),V=at(()=>{var m;return JSON.parse(((m=_.value)==null?void 0:m.customs)||"[]").filter(v=>v.type!=="tinyEditor")}),A=at(()=>{var m;return JSON.parse(((m=_.value)==null?void 0:m.customs)||"[]").filter(v=>v.type==="tinyEditor")}),x=X(!1),L=X([]),j=async m=>{x.value=!0,L.value=await No({Q_Contains_name:m,Q_OrderBy:"refers_desc,id_desc",limit:20}),x.value=!1};Nn(n,()=>{var m;n.value&&(F.value=(m=i==null?void 0:i.value)==null?void 0:m.articleModelId,J(),he(),ge(),H())}),Nn(V,()=>{ye(p.value.customs)});const H=async()=>{qe.epRank>0&&(ae.value=await Io())},z=m=>Do("sys_article_source",m),J=async()=>{se.value=await Xi({isArticlePermission:!0}),te.value=oi(se.value)},he=async()=>{Y.value=await Ao({type:"article"}),F.value==null&&Y.value.length>0&&(F.value=Y.value[0].id)},ge=async()=>{T.value=await Po()},ye=m=>(V.value.forEach(v=>{m[v.code]==null&&(m[v.code]=v.defaultValue,v.defaultValueKey!=null&&(m[v.code+"_key"]=v.defaultValueKey))}),m),it=async m=>{if(qe.epRank<=1)return!1;const v=await Ho({text:m.text});if(v.status===-1){if(m.editorType===1){const pe=Q.value.editor.plugins.searchreplace;pe.find(v.result.name),pe.done(),Wn.confirm(r("article.error.errorWord.confirm",{name:v.result.name,correct:v.result.correct}),{cancelButtonText:r("cancel"),confirmButtonText:r("ok"),type:"warning",callback:Pe=>{Pe==="confirm"&&(pe.find(v.result.name),pe.replace(v.result.correct,!1,!0),pe.done(),p.value.text=Q.value.editor.getContent())}})}else m.editorType===2&&Wn.alert(r("article.error.errorWord.alert.message",{name:v.result.name}),r("article.error.errorWord.alert.title"),{confirmButtonText:r("ok")});return!0}const ve=await Yo({text:m.text});if(ve.status===-1){if(m.editorType===1){const pe=Q.value.editor.plugins.searchreplace;pe.find(ve.result.name),pe.done()}return Wn.alert(r("article.error.sensitiveWord.alert.message",{name:ve.result.name}),r("article.error.sensitiveWord.alert.title"),{confirmButtonText:r("ok")}),!0}return!1},f=()=>{l.value.submit(async(m,{focus:v,emit:ve,props:pe,form:Pe})=>{var Se;m.status=10,await Ar(m),(Se=v==null?void 0:v.focus)==null||Se.call(v),ve("update:values",pe.initValues(m.value)),Pe.resetFields(),xt.success(r("success"))})},s=async(m,v)=>{if(["pass","reject"].includes(m)){l.value.remove(async ve=>{if(m==="pass")await Mo([v]);else if(m==="reject")try{const{value:pe}=await Wn.prompt(r("article.rejectReason"),r("reject"),{confirmButtonText:r("submit"),cancelButtonText:r("cancel"),inputPattern:/\S+/,inputErrorMessage:r("v.required")});await Lo([v],pe)}catch(pe){}});return}l.value.submit(async(ve,{loadBean:pe})=>{if(m==="delete")await wa([v]);else if(m==="submit")await Ea([v]);else if(m==="archive")await xa([v]);else if(m==="offline")await _a([v]);else throw new Error(`not support action: ${m}`);pe()})},h=X(!1),b=X([]),I=()=>{var pe,Pe;h.value=!0;const m=Da(p.value.text),ve=Ia("img",m).map(Se=>Na(Se,"src")).filter(Se=>Se==null?void 0:Se.startsWith(a.base.uploadUrlPrefix));b.value=[...(Pe=(pe=p.value.imageList)==null?void 0:pe.map(Se=>Se.url))!=null?Pe:[],...ve]},w=X(!1),S=X([]),K=async(m,v)=>{S.value=await Bo(.6,m,v),S.value.length>0?w.value=!0:xt.success(r("article.success.titleSimilarity"))};return(m,v)=>{const ve=G("el-button"),pe=G("el-popconfirm"),Pe=G("el-button-group"),Se=G("el-tag"),ue=G("el-input"),le=G("el-form-item"),be=G("el-col"),Tt=G("el-checkbox"),rt=G("el-option"),Ie=G("el-select"),$e=G("el-row"),xe=G("el-alert"),We=G("el-radio"),nn=G("el-radio-group"),Qe=G("el-tree-select"),ie=G("el-date-picker"),Ee=G("el-autocomplete"),R=G("el-switch"),Z=G("el-tooltip"),Le=G("el-tab-pane"),pt=G("el-tabs"),Mt=G("el-table-column"),rn=G("el-table"),an=G("el-dialog");return M(),Be("div",null,[c(Ko,{ref_key:"dialog",ref:l,values:p.value,"onUpdate:values":v[51]||(v[51]=fe=>p.value=fe),name:m.$t("menu.content.article"),"query-bean":C(ga),"create-bean":C(Ar),"update-bean":C(Ro),"delete-bean":C(ba),"bean-id":e.beanId,"bean-ids":e.beanIds,action:e.action,focus:k.value,"init-values":()=>{var fe,De;return F.value=(fe=C(i))==null?void 0:fe.articleModelId,{editorType:y.value.text.editorType,channelId:(De=C(i))==null?void 0:De.id,allowComment:!0,customs:{},fileList:[],imageList:[]}},"to-values":fe=>({...fe}),perms:"article","model-value":e.modelValue,addable:!e.isReview,"disable-edit":fe=>fe.id!=null&&!fe.editable&&!C(qe).allStatusPermission&&!e.isReview,"prevent-submit":it,"label-width":"140px",large:"","onUpdate:modelValue":v[52]||(v[52]=fe=>m.$emit("update:modelValue",fe)),onFinished:v[53]||(v[53]=()=>m.$emit("finished")),onBeanChange:v[54]||(v[54]=fe=>{var De,ke,q;u.value=!!fe.subtitle,g.value=!!fe.fullTitle,E.value=!!fe.linkUrl,F.value=(q=(De=fe.channel)==null?void 0:De.articleModelId)!=null?q:(ke=C(i))==null?void 0:ke.articleModelId})},{"header-action":d(({isEdit:fe,bean:De,unsaved:ke,handleDelete:q})=>[e.isReview?(M(),U(Pe,{key:0},{default:d(()=>[fe&&e.isReview?(M(),U(pe,{key:0,title:m.$t("confirmPass"),onConfirm:()=>s("pass",De.id)},{reference:d(()=>[c(ve,{disabled:C(Ne)("articleReview:pass")||ke,type:"primary",icon:C(va)},{default:d(()=>[O($(m.$t("pass")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0),c(ve,{disabled:C(Ne)("articleReview:reject")||ke,icon:C(Er),onClick:()=>s("reject",De.id)},{default:d(()=>[O($(m.$t("reject")),1)]),_:2},1032,["disabled","icon","onClick"])]),_:2},1024)):re("",!0),e.isReview?re("",!0):(M(),U(Pe,{key:1},{default:d(()=>[fe?(M(),U(pe,{key:0,title:m.$t("confirmExecute"),onConfirm:()=>s("submit",De.id)},{reference:d(()=>[c(ve,{disabled:[0,12].includes(De.status)||C(Ne)("article:submit")||ke,icon:C(eo)},{default:d(()=>[O($(m.$t("article.op.submit")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0),fe?(M(),U(pe,{key:1,title:m.$t("confirmExecute"),onConfirm:()=>s("archive",De.id)},{reference:d(()=>[c(ve,{disabled:![0].includes(De.status)||C(Ne)("article:archive")||ke,icon:C(to)},{default:d(()=>[O($(m.$t("article.op.archive")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0),fe?(M(),U(pe,{key:2,title:m.$t("confirmExecute"),onConfirm:()=>s("offline",De.id)},{reference:d(()=>[c(ve,{disabled:![0,1,5,11,12].includes(De.status)||C(Ne)("article:offline")||ke,icon:C(Er)},{default:d(()=>[O($(m.$t("article.op.offline")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0)]),_:2},1024)),fe?(M(),U(ve,{key:2,icon:C(da),onClick:v[0]||(v[0]=()=>C(Fs)(p.value.status,p.value.url,p.value.dynamicUrl))},{default:d(()=>[O($(m.$t("article.op.preview")),1)]),_:1},8,["icon"])):re("",!0),c(Pe,null,{default:d(()=>[fe&&!e.isReview?(M(),U(pe,{key:0,title:m.$t("confirmDelete"),onConfirm:()=>s("delete",De.id)},{reference:d(()=>[c(ve,{disabled:C(Ne)("article:delete")||ke,icon:C(no)},{default:d(()=>[O($(m.$t("delete")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0),fe?(M(),U(pe,{key:1,title:m.$t("confirmCompletelyDelete"),onConfirm:()=>q()},{reference:d(()=>[c(ve,{disabled:C(Ne)("article:completelyDelete"),icon:C(pa)},{default:d(()=>[O($(m.$t("article.op.completelyDelete")),1)]),_:1},8,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):re("",!0)]),_:2},1024)]),"header-status":d(({isEdit:fe})=>[fe?(M(),Be(ct,{key:0},[p.value.status!=null?(M(),Be("span",Af,[p.value.status===0?(M(),U(Se,{key:0,type:"success",size:"small","disable-transitions":""},{default:d(()=>[O($(m.$t(`article.status.${p.value.status}`)),1)]),_:1})):p.value.status===1?(M(),U(Se,{key:1,size:"small","disable-transitions":""},{default:d(()=>[O($(m.$t(`article.status.${p.value.status}`)),1)]),_:1})):p.value.status===20?(M(),U(Se,{key:2,type:"danger",size:"small","disable-transitions":""},{default:d(()=>[O($(m.$t(`article.status.${p.value.status}`)),1)]),_:1})):[21,22].includes(p.value.status)?(M(),U(Se,{key:3,type:"warning",size:"small","disable-transitions":""},{default:d(()=>[O($(m.$t(`article.status.${p.value.status}`)),1)]),_:1})):(M(),U(Se,{key:4,type:"info",size:"small","disable-transitions":""},{default:d(()=>[O($(m.$t(`article.status.${p.value.status}`)),1)]),_:1}))])):re("",!0)],64)):re("",!0)]),default:d(({bean:fe,isEdit:De,disabled:ke})=>[c($e,null,{default:d(()=>[c(be,{span:18},{default:d(()=>[c($e,null,{default:d(()=>[p.value.src!=null?(M(),U(be,{key:0,span:y.value.title.double?12:24},{default:d(()=>[c(le,{label:m.$t("article.src")},{default:d(()=>[c(ue,{"model-value":p.value.src.title,disabled:""},{prepend:d(()=>[O($(C(r)(`article.type.${p.value.type}`)),1)]),append:d(()=>[O($(p.value.src.channel.paths.map(q=>q.name).join("/")),1)]),_:1},8,["model-value"])]),_:1},8,["label"])]),_:1},8,["span"])):re("",!0),c(be,{span:y.value.title.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"title",label:(q=y.value.title.name)!=null?q:m.$t("article.title"),rules:{required:!0,message:()=>m.$t("v.required")}},{default:d(()=>[c(ue,{ref_key:"focus",ref:k,modelValue:p.value.title,"onUpdate:modelValue":v[1]||(v[1]=N=>p.value.title=N),maxlength:"150"},null,8,["modelValue"]),c(ve,{disabled:!p.value.title,class:"mr-5",onClick:v[2]||(v[2]=()=>K(p.value.title,p.value.id))},{default:d(()=>[O($(m.$t("article.op.titleSimilarity")),1)]),_:1},8,["disabled"]),y.value.subtitle.show&&!y.value.subtitle.required?(M(),U(Tt,{key:0,modelValue:u.value,"onUpdate:modelValue":v[3]||(v[3]=N=>u.value=N),onClick:v[4]||(v[4]=()=>p.value.subtitle=void 0)},{default:d(()=>{var N;return[O($((N=y.value.subtitle.name)!=null?N:m.$t("article.subtitle")),1)]}),_:1},8,["modelValue"])):re("",!0),y.value.fullTitle.show&&!y.value.fullTitle.required?(M(),U(Tt,{key:1,modelValue:g.value,"onUpdate:modelValue":v[5]||(v[5]=N=>g.value=N),onClick:v[6]||(v[6]=()=>p.value.fullTitle=void 0)},{default:d(()=>{var N;return[O($((N=y.value.fullTitle.name)!=null?N:m.$t("article.fullTitle")),1)]}),_:1},8,["modelValue"])):re("",!0),y.value.linkUrl.show&&!y.value.linkUrl.required?(M(),U(Tt,{key:2,modelValue:E.value,"onUpdate:modelValue":v[7]||(v[7]=N=>E.value=N),onClick:v[8]||(v[8]=()=>(p.value.linkUrl=void 0,p.value.targetBlank=!1))},{default:d(()=>{var N;return[O($((N=y.value.linkUrl.name)!=null?N:m.$t("article.linkUrl")),1)]}),_:1},8,["modelValue"])):re("",!0)]),_:1},8,["label","rules"])]}),_:1},8,["span"]),(p.value.subtitle||u.value)&&y.value.subtitle.show||y.value.subtitle.show&&y.value.subtitle.required?(M(),U(be,{key:1,span:y.value.subtitle.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"subtitle",label:(q=y.value.subtitle.name)!=null?q:m.$t("article.subtitle"),rules:y.value.subtitle.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(ue,{modelValue:p.value.subtitle,"onUpdate:modelValue":v[9]||(v[9]=N=>p.value.subtitle=N),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),(p.value.fullTitle||g.value)&&y.value.fullTitle.show||y.value.fullTitle.show&&y.value.fullTitle.required?(M(),U(be,{key:2,span:y.value.fullTitle.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"fullTitle",label:(q=y.value.fullTitle.name)!=null?q:m.$t("article.fullTitle"),rules:y.value.fullTitle.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(ue,{modelValue:p.value.fullTitle,"onUpdate:modelValue":v[10]||(v[10]=N=>p.value.fullTitle=N),type:"textarea",rows:2,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),(p.value.linkUrl||E.value)&&y.value.linkUrl.show||y.value.linkUrl.show&&y.value.linkUrl.required?(M(),U(be,{key:3,span:y.value.linkUrl.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"linkUrl",label:(q=y.value.linkUrl.name)!=null?q:m.$t("article.linkUrl"),rules:y.value.linkUrl.required?[{required:!0,message:()=>m.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>m.$t("article.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>m.$t("article.error.linkUrl")}},{default:d(()=>[c(ue,{modelValue:p.value.linkUrl,"onUpdate:modelValue":v[12]||(v[12]=N=>p.value.linkUrl=N),maxlength:"255",disabled:p.value.src!=null&&p.value.type===3},{append:d(()=>[c(Tt,{modelValue:p.value.targetBlank,"onUpdate:modelValue":v[11]||(v[11]=N=>p.value.targetBlank=N)},{default:d(()=>[O($(m.$t("article.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),y.value.tags.show?(M(),U(be,{key:4,span:y.value.tags.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"tags",label:(q=y.value.tags.name)!=null?q:m.$t("article.tags"),rules:y.value.tags.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(Ie,{modelValue:p.value.tagNames,"onUpdate:modelValue":v[13]||(v[13]=N=>p.value.tagNames=N),multiple:"",filterable:"",remote:"",clearable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,"remote-method":j,loading:x.value,class:"w-full"},{default:d(()=>[(M(!0),Be(ct,null,mt(L.value.map(N=>N.name),N=>(M(),U(rt,{key:N,label:N,value:N},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),y.value.seoKeywords.show?(M(),U(be,{key:5,span:y.value.seoKeywords.double?12:24},{default:d(()=>[c(le,{prop:"seoKeywords",rules:y.value.seoKeywords.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var q;return[c(wt,{label:(q=y.value.seoKeywords.name)!=null?q:m.$t("article.seoKeywords"),message:"article.seoKeywords",help:""},null,8,["label"])]}),default:d(()=>[c(ue,{modelValue:p.value.seoKeywords,"onUpdate:modelValue":v[14]||(v[14]=q=>p.value.seoKeywords=q),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):re("",!0),y.value.seoDescription.show?(M(),U(be,{key:6,span:y.value.seoDescription.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"seoDescription",label:(q=y.value.seoDescription.name)!=null?q:m.$t("article.seoDescription"),rules:y.value.seoDescription.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(ue,{modelValue:p.value.seoDescription,"onUpdate:modelValue":v[15]||(v[15]=N=>p.value.seoDescription=N),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),y.value.author.show?(M(),U(be,{key:7,span:y.value.author.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"author",label:(q=y.value.author.name)!=null?q:m.$t("article.author"),rules:y.value.author.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(ue,{modelValue:p.value.author,"onUpdate:modelValue":v[16]||(v[16]=N=>p.value.author=N),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),y.value.editor.show?(M(),U(be,{key:8,span:y.value.editor.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"editor",label:(q=y.value.editor.name)!=null?q:m.$t("article.editor"),rules:y.value.editor.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(ue,{modelValue:p.value.editor,"onUpdate:modelValue":v[17]||(v[17]=N=>p.value.editor=N),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):re("",!0),y.value.image.show?(M(),U(be,{key:9,span:y.value.image.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"image",label:(q=y.value.image.name)!=null?q:m.$t("article.image"),rules:y.value.image.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(C(Zo),{modelValue:p.value.image,"onUpdate:modelValue":v[18]||(v[18]=N=>p.value.image=N),height:y.value.image.imageHeight,width:y.value.image.imageWidth,mode:y.value.image.imageMode,disabled:ke},null,8,["modelValue","height","width","mode","disabled"]),c(ve,{class:"self-start ml-2",onClick:v[19]||(v[19]=()=>I())},{default:d(()=>[O($(m.$t("article.extractImage")),1)]),_:1})]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),(M(!0),Be(ct,null,mt(V.value,q=>(M(),U(be,{key:q.code,span:q.double?12:24},{default:d(()=>[c(le,{prop:`customs.${q.code}`,rules:q.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>[c(wt,{label:q.name},null,8,["label"])]),default:d(()=>[c(Nr,{modelValue:p.value.customs[q.code],"onUpdate:modelValue":N=>p.value.customs[q.code]=N,"model-key":p.value.customs[q.code+"_key"],"onUpdate:modelKey":N=>p.value.customs[q.code+"_key"]=N,field:q},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),y.value.file.show?(M(),U(be,{key:10,span:y.value.file.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"file",label:(q=y.value.file.name)!=null?q:m.$t("article.file"),rules:y.value.file.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c($e,{class:"w-full"},{default:d(()=>[c(be,{span:16},{default:d(()=>[c(ue,{modelValue:p.value.fileName,"onUpdate:modelValue":v[20]||(v[20]=N=>p.value.fileName=N)},{prepend:d(()=>[O($(m.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),c(be,{span:8},{default:d(()=>[c(ue,{modelValue:p.value.fileLength,"onUpdate:modelValue":v[21]||(v[21]=N=>p.value.fileLength=N)},{prepend:d(()=>[O($(m.$t("size")),1)]),append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),c(ue,{modelValue:p.value.file,"onUpdate:modelValue":v[22]||(v[22]=N=>p.value.file=N)},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),c(C(Sn),{type:"file","on-success":N=>(p.value.file=N.url,p.value.fileName=N.name,p.value.fileLength=N.size),disabled:ke},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.video.show?(M(),U(be,{key:11,span:y.value.video.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"video",label:(q=y.value.video.name)!=null?q:m.$t("article.video"),rules:y.value.video.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c($e,{class:"w-full"},{default:d(()=>[c(be,{span:16},{default:d(()=>[c(ue,{modelValue:p.value.video,"onUpdate:modelValue":v[23]||(v[23]=N=>p.value.video=N),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"])]),_:1}),c(be,{span:8},{default:d(()=>[c(ue,{modelValue:p.value.videoDuration,"onUpdate:modelValue":v[24]||(v[24]=N=>p.value.videoDuration=N),maxlength:"10"},{prepend:d(()=>[O($(m.$t("article.videoDuration")),1)]),append:d(()=>[O($(C(xr)(p.value.videoDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),c(C(Sn),{type:"video","on-success":N=>{p.value.video=N.url,p.value.videoDuration=N.duration,p.value.image||(p.value.image=N.image)},disabled:ke},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.audio.show?(M(),U(be,{key:12,span:y.value.audio.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"audio",label:(q=y.value.audio.name)!=null?q:m.$t("article.audio"),rules:y.value.audio.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c($e,{class:"w-full"},{default:d(()=>[c(be,{span:16},{default:d(()=>[c(ue,{modelValue:p.value.audio,"onUpdate:modelValue":v[25]||(v[25]=N=>p.value.audio=N),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"])]),_:1}),c(be,{span:8},{default:d(()=>[c(ue,{modelValue:p.value.audioDuration,"onUpdate:modelValue":v[26]||(v[26]=N=>p.value.audioDuration=N),maxlength:"10"},{prepend:d(()=>[O($(m.$t("article.audioDuration")),1)]),append:d(()=>[O($(C(xr)(p.value.audioDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),c(C(Sn),{type:"audio","on-success":N=>{p.value.audio=N.url,p.value.audioDuration=N.duration},disabled:ke},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.doc.show?(M(),U(be,{key:13,span:y.value.doc.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"doc",label:(q=y.value.doc.name)!=null?q:m.$t("article.doc"),rules:y.value.doc.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[Te("div",kf,[c($e,null,{default:d(()=>[c(be,{span:12},{default:d(()=>[c(ue,{modelValue:p.value.docName,"onUpdate:modelValue":v[27]||(v[27]=N=>p.value.docName=N)},{prepend:d(()=>[O($(m.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),c(be,{span:12},{default:d(()=>[c(ue,{modelValue:p.value.docLength,"onUpdate:modelValue":v[28]||(v[28]=N=>p.value.docLength=N)},{prepend:d(()=>[O($(m.$t("size")),1)]),append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),c(ue,{modelValue:p.value.doc,"onUpdate:modelValue":v[29]||(v[29]=N=>p.value.doc=N)},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),c(ue,{modelValue:p.value.docOrig,"onUpdate:modelValue":v[30]||(v[30]=N=>p.value.docOrig=N)},{prepend:d(()=>[O($(m.$t("article.docOrig")),1)]),_:1},8,["modelValue"]),ae.value&&C(qe).epRank>0?(M(),U(C(Sn),{key:0,type:"library",disabled:C(Ne)("jodConvert:library")||ke,"upload-action":C(To),"on-success":N=>{p.value.doc=N.doc,p.value.docOrig=N.docOrig,p.value.docName=N.docName,p.value.docLength=N.docLength,p.value.image=N.docImage}},null,8,["disabled","upload-action","on-success"])):re("",!0),!ae.value&&C(qe).epRank>0?(M(),U(xe,{key:1,title:m.$t("error.jodConverterNotEnabled"),type:"error",closable:!1},null,8,["title"])):re("",!0),C(qe).epRank===0?(M(),U(ve,{key:2,type:"primary",onClick:v[31]||(v[31]=()=>m.$alert(m.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O($(m.$t("article.op.clickToUpload")),1)]),_:1})):re("",!0)])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.imageList.show?(M(),U(be,{key:14,span:y.value.imageList.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"imageList",label:(q=y.value.imageList.name)!=null?q:m.$t("article.imageList"),rules:y.value.imageList.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(C(bf),{modelValue:p.value.imageList,"onUpdate:modelValue":v[32]||(v[32]=N=>p.value.imageList=N),"max-height":y.value.imageList.imageMaxHeight,"max-width":y.value.imageList.imageMaxWidth,"list-type":y.value.imageList.imageListType,disabled:ke},null,8,["modelValue","max-height","max-width","list-type","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.fileList.show?(M(),U(be,{key:15,span:y.value.fileList.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"fileList",label:(q=y.value.fileList.name)!=null?q:m.$t("article.fileList"),rules:y.value.fileList.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(C(Sf),{modelValue:p.value.fileList,"onUpdate:modelValue":v[33]||(v[33]=N=>p.value.fileList=N),disabled:ke},null,8,["modelValue","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),y.value.text.show?(M(),U(be,{key:16,span:y.value.text.double?12:24},{default:d(()=>{var q;return[c(le,{prop:"text",label:(q=y.value.text.name)!=null?q:m.$t("article.text"),rules:y.value.text.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>{var N;return[Te("div",Tf,[y.value.text.editorSwitch?(M(),U(nn,{key:0,modelValue:p.value.editorType,"onUpdate:modelValue":v[34]||(v[34]=Ue=>p.value.editorType=Ue),class:"mr-6",onChange:v[35]||(v[35]=()=>p.value.markdown="")},{default:d(()=>[(M(),Be(ct,null,mt([1,2],Ue=>c(We,{key:Ue,label:Ue},{default:d(()=>[O($(m.$t(`model.field.editorType.${Ue}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])):re("",!0),p.value.editorType===1&&ae.value&&C(qe).epRank>0?(M(),Be("div",Cf,[c(C(Sn),{type:"doc",disabled:C(Ne)("jodConvert:doc"),"upload-action":C(Co),"on-success":Ue=>p.value.text=Ue,button:m.$t("article.op.docImport")},null,8,["disabled","upload-action","on-success","button"])])):re("",!0),C(qe).epRank===0&&C(qe).epDisplay?(M(),Be("div",Rf,[c(ve,{type:"primary",onClick:v[36]||(v[36]=()=>m.$alert(m.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O($(m.$t("article.op.docImport")),1)]),_:1})])):re("",!0),p.value.editorType===2?(M(),U(C(Eo),{key:3,modelValue:p.value.markdown,"onUpdate:modelValue":v[37]||(v[37]=Ue=>p.value.markdown=Ue),html:p.value.text,"onUpdate:html":v[38]||(v[38]=Ue=>p.value.text=Ue),class:"leading-6"},null,8,["modelValue","html"])):(M(),U(C(Xo),{key:4,ref_key:"tinyText",ref:Q,modelValue:p.value.text,"onUpdate:modelValue":v[39]||(v[39]=Ue=>p.value.text=Ue),disabled:ke,init:{typesetting_options:(N=C(o).currentSite.editor)==null?void 0:N.typesetting}},null,8,["modelValue","disabled","init"]))])]}),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):re("",!0),(M(!0),Be(ct,null,mt(A.value,q=>(M(),U(be,{key:q.code,span:q.double?12:24},{default:d(()=>[c(le,{prop:`customs.${q.code}`,label:q.name,rules:q.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>[c(wt,{label:q.name},null,8,["label"])]),default:d(()=>[c(Nr,{modelValue:p.value.customs[q.code],"onUpdate:modelValue":N=>p.value.customs[q.code]=N,field:q},null,8,["modelValue","onUpdate:modelValue","field"])]),_:2},1032,["prop","label","rules"])]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1024),c(be,{span:6,class:"el-form--label-top label-top"},{default:d(()=>[c(pt,{type:"border-card",class:"ml-5"},{default:d(()=>[c(Le,{label:m.$t("article.tabs.setting")},{default:d(()=>{var q,N,Ue,Un,ft,sn,ht,qn,jn;return[c(le,{prop:"channelId",label:(q=D.value.channel.name)!=null?q:m.$t("article.channel"),rules:[{required:!0,message:()=>m.$t("v.required")},{validator:(oe,Ze,Ct)=>{var Ht;if(((Ht=te.value.find(ki=>ki.id===Ze))==null?void 0:Ht.children.length)>0){Ct(m.$t("article.error.leafChannelOnly"));return}Ct()}}]},{default:d(()=>{var oe;return[c(Qe,{modelValue:p.value.channelId,"onUpdate:modelValue":v[40]||(v[40]=Ze=>p.value.channelId=Ze),data:te.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":(oe=fe.channel)==null?void 0:oe.paths.map(Ze=>Ze.id),class:"w-full",onChange:v[41]||(v[41]=Ze=>{var Ct;F.value=(Ct=se.value.find(Ht=>Ht.id===Ze))==null?void 0:Ct.articleModelId})},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","rules"]),De&&D.value.org.show?(M(),U(le,{key:0,label:(N=D.value.org.name)!=null?N:m.$t("article.org"),required:""},{default:d(()=>{var oe;return[c(ue,{value:(oe=p.value.org)==null?void 0:oe.name,disabled:""},null,8,["value"])]}),_:1},8,["label"])):re("",!0),D.value.publishDate.show?(M(),U(le,{key:1,prop:"publishDate",rules:De?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var oe;return[c(wt,{label:(oe=D.value.publishDate.name)!=null?oe:m.$t("article.publishDate"),message:"article.publishDate",help:""},null,8,["label"])]}),default:d(()=>[c(ie,{modelValue:p.value.publishDate,"onUpdate:modelValue":v[42]||(v[42]=oe=>p.value.publishDate=oe),type:"datetime",class:"w-full",onChange:v[43]||(v[43]=oe=>{oe===null&&(p.value.publishDate=void 0)})},null,8,["modelValue"])]),_:2},1032,["rules"])):re("",!0),D.value.onlineDate.show?(M(),U(le,{key:2,prop:"onlineDate",rules:D.value.onlineDate.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var oe;return[c(wt,{label:(oe=D.value.onlineDate.name)!=null?oe:m.$t("article.onlineDate"),message:"article.onlineDate",help:""},null,8,["label"])]}),default:d(()=>[c(ie,{modelValue:p.value.onlineDate,"onUpdate:modelValue":v[44]||(v[44]=oe=>p.value.onlineDate=oe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):re("",!0),D.value.offlineDate.show?(M(),U(le,{key:3,prop:"offlineDate",rules:D.value.offlineDate.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var oe;return[c(wt,{label:(oe=D.value.offlineDate.name)!=null?oe:m.$t("article.offlineDate"),message:"article.offlineDate",help:""},null,8,["label"])]}),default:d(()=>[c(ie,{modelValue:p.value.offlineDate,"onUpdate:modelValue":v[45]||(v[45]=oe=>p.value.offlineDate=oe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):re("",!0),D.value.source.show?(M(),U(le,{key:4,prop:"source",label:(Ue=D.value.source.name)!=null?Ue:m.$t("article.source"),rules:D.value.source.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{default:d(()=>[c(Ee,{modelValue:p.value.source,"onUpdate:modelValue":v[46]||(v[46]=oe=>p.value.source=oe),"value-key":"name","fetch-suggestions":(oe,Ze)=>{z(oe).then(Ct=>Ze(Ct))},class:"w-full","highlight-first-item":"","hide-loading":"",clearable:"",onKeydown:v[47]||(v[47]=io(si(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","fetch-suggestions"])]),_:1},8,["label","rules"])):re("",!0),D.value.articleTemplate.show?(M(),U(le,{key:5,prop:"articleTemplate",label:(Un=D.value.articleTemplate.name)!=null?Un:m.$t("article.articleTemplate"),rules:D.value.articleTemplate.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var oe;return[c(wt,{label:(oe=D.value.articleTemplate.name)!=null?oe:m.$t("article.articleTemplate"),message:"article.articleTemplate",help:""},null,8,["label"])]}),default:d(()=>[c(Ie,{modelValue:p.value.articleTemplate,"onUpdate:modelValue":v[48]||(v[48]=oe=>p.value.articleTemplate=oe),clearable:"",class:"w-full"},{default:d(()=>[(M(!0),Be(ct,null,mt(T.value,oe=>(M(),U(rt,{key:oe,label:oe+".html",value:oe},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):re("",!0),D.value.allowComment.show?(M(),U(le,{key:6,prop:"allowComment",rules:D.value.allowComment.required?{required:!0,message:()=>m.$t("v.required")}:void 0},{label:d(()=>{var oe;return[c(wt,{label:(oe=D.value.allowComment.name)!=null?oe:m.$t("article.allowComment"),message:"article.allowComment",help:""},null,8,["label"])]}),default:d(()=>[c(R,{modelValue:p.value.allowComment,"onUpdate:modelValue":v[49]||(v[49]=oe=>p.value.allowComment=oe)},null,8,["modelValue"])]),_:1},8,["rules"])):re("",!0),D.value.user.show?(M(),U(le,{key:7,label:(ft=D.value.user.name)!=null?ft:m.$t("article.user")},{default:d(()=>{var oe;return[c(ue,{"model-value":(oe=p.value.user)==null?void 0:oe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):re("",!0),D.value.created.show?(M(),U(le,{key:8,label:(sn=D.value.created.name)!=null?sn:m.$t("article.created")},{default:d(()=>[c(ie,{"model-value":p.value.created,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):re("",!0),D.value.modifiedUser.show?(M(),U(le,{key:9,label:(ht=D.value.modifiedUser.name)!=null?ht:m.$t("article.modifiedUser")},{default:d(()=>{var oe;return[c(ue,{"model-value":(oe=p.value.modifiedUser)==null?void 0:oe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):re("",!0),D.value.modified.show?(M(),U(le,{key:10,label:(qn=D.value.modified.name)!=null?qn:m.$t("article.modified")},{default:d(()=>[c(ie,{"model-value":p.value.modified,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):re("",!0),((jn=p.value.destList)==null?void 0:jn.length)>0?(M(),U(le,{key:11,label:m.$t("article.destList")},{default:d(()=>[(M(!0),Be(ct,null,mt(p.value.destList,oe=>(M(),U(Z,{key:oe.id,content:(oe.siteId!=p.value.siteId?`[${oe.site.name}] `:"")+oe.channel.paths.map(Ze=>Ze.name).join("/"),placement:"top-start"},{default:d(()=>[c(ue,{"model-value":(oe.siteId!=p.value.siteId?`[${oe.site.name}] `:"")+oe.channel.paths.map(Ze=>Ze.name).join("/"),disabled:""},{append:d(()=>[O($(C(r)(`article.type.${oe.type}`)),1)]),_:2},1032,["model-value"])]),_:2},1032,["content"]))),128))]),_:1},8,["label"])):re("",!0)]}),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"footer-action":d(({isEdit:fe,handleSubmit:De})=>[c(ve,{disabled:C(Ne)(fe?"article:update":"article:create"),type:"primary","native-type":"submit",onClick:si(()=>De(),["prevent"])},{default:d(()=>[O($(m.$t(fe?"save":"submit")),1)]),_:2},1032,["disabled","onClick"]),fe?re("",!0):(M(),U(ve,{key:0,onClick:v[50]||(v[50]=()=>f())},{default:d(()=>[O($(m.$t("article.op.saveAsDraft")),1)]),_:1}))]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","action","focus","init-values","to-values","model-value","addable","disable-edit"]),c(el,{modelValue:h.value,"onUpdate:modelValue":v[55]||(v[55]=fe=>h.value=fe),urls:b.value,"append-to-body":!0,onFinished:v[56]||(v[56]=fe=>p.value.image=fe[0])},null,8,["modelValue","urls"]),c(an,{modelValue:w.value,"onUpdate:modelValue":v[57]||(v[57]=fe=>w.value=fe),title:m.$t("article.op.titleSimilarity"),width:"820px"},{default:d(()=>[c(rn,{data:S.value},{default:d(()=>[c(Mt,{property:"id",label:"ID",width:"100px"}),c(Mt,{property:"title",label:m.$t("article.similarity.title"),"show-overflow-tooltip":""},null,8,["label"]),c(Mt,{property:"channel.name",label:m.$t("article.channel"),formatter:fe=>fe.channel.paths.map(De=>De.name).join(" / "),width:"180px","show-overflow-tooltip":""},null,8,["label","formatter"]),c(Mt,{property:"score",label:m.$t("article.similarity.score"),formatter:fe=>m.$n(fe.score,"percent",{minimumFractionDigits:0}),width:"100px"},null,8,["label","formatter"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}});const Df=hi(If,[["__scopeId","data-v-13bddff3"]]),Pf={class:"flex justify-between items-center"},Mf=Te("div",null,null,-1),Lf={name:"ArticleInternalPushForm"},Bf=vn({...Lf,props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},type:{type:String,default:"external"}},emits:{"update:modelValue":null,finished:null},setup(e,{emit:t}){const n=e,{beanId:i,type:r,modelValue:a}=Dn(n),{t:o}=Pn(),l=X(),u=X({}),g=X({}),E=X(!1),k=X([]),p=X([]),Q=X(),ae=async()=>{(i==null?void 0:i.value)!=null&&(u.value=await ga(i.value))},te=async F=>{const _=r.value==="internal"?{isArticlePermission:!0}:{siteId:F};p.value=xo(oi(await Xi(_))),p.value=Sr(p.value,[...u.value.destList.map(y=>y.channel.id),u.value.channel.id])},se=async()=>{k.value=await Go(),k.value=oi(k.value),k.value=Sr(k.value,[u.value.siteId])};Nn(a,async()=>{a.value&&(await ae(),r.value==="external"?se():te(),g.value={ids:[u.value.id],type:3})});const Y=()=>{Q.value!=null&&(g.value.channelIds=[...Q.value.getCheckedNodes(),...Q.value.getHalfCheckedNodes()].map(F=>F.id),l.value.validate())},T=()=>{l.value.validate(async F=>{if(F){E.value=!0;try{r.value==="internal"?await $o(g.value):await Oo(g.value),t("finished"),t("update:modelValue",!1),xt.success(o("success"))}finally{E.value=!1}}})};return(F,_)=>{const y=G("el-input"),D=G("el-form-item"),V=G("el-radio-button"),A=G("el-radio-group"),x=G("el-tree-select"),L=G("el-tree"),j=G("el-form"),H=G("el-button"),z=G("el-drawer");return M(),U(z,{title:F.$t(`article.op.${C(r)}Push`),"model-value":e.modelValue,size:414,"onUpdate:modelValue":_[6]||(_[6]=J=>F.$emit("update:modelValue",J))},{default:d(()=>[c(j,{ref_key:"form",ref:l,model:g.value,"label-position":"top"},{default:d(()=>[c(D,null,{default:d(()=>[c(y,{"model-value":u.value.title,disabled:""},null,8,["model-value"])]),_:1}),c(D,{prop:"type"},{default:d(()=>[c(A,{modelValue:g.value.type,"onUpdate:modelValue":_[0]||(_[0]=J=>g.value.type=J)},{default:d(()=>[(M(),Be(ct,null,mt([1,3],J=>c(V,{key:J,label:J},{default:d(()=>[O($(C(o)(`article.type.${J}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),C(r)==="external"?(M(),U(D,{key:0,prop:"siteId",rules:[{required:!0,message:()=>F.$t("v.required")}]},{default:d(()=>[c(x,{modelValue:g.value.siteId,"onUpdate:modelValue":_[1]||(_[1]=J=>g.value.siteId=J),data:k.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",class:"w-full",onChange:_[2]||(_[2]=J=>te(J))},null,8,["modelValue","data"])]),_:1},8,["rules"])):re("",!0),c(D,{prop:"channelIds",rules:[{required:!0,message:()=>F.$t("v.required")}]},{default:d(()=>[c(L,{ref_key:"channelTree",ref:Q,data:p.value,"node-key":"id",props:{label:"name"},class:"border rounded w-full","check-strictly":"","default-expand-all":"","show-checkbox":"","check-on-click-node":"",onCheck:_[3]||(_[3]=()=>Y())},null,8,["data"])]),_:1},8,["rules"])]),_:1},8,["model"])]),footer:d(()=>[Te("div",Pf,[Mf,Te("div",null,[c(H,{onClick:_[4]||(_[4]=()=>F.$emit("update:modelValue",!1))},{default:d(()=>[O($(F.$t("cancel")),1)]),_:1}),c(H,{type:"primary",loading:E.value,onClick:_[5]||(_[5]=()=>T())},{default:d(()=>[O($(F.$t("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["title","model-value"])}}}),$f={class:"mb-1 ml-2"},Of={class:"mb-3"},Vf={class:"app-block"},Ff={key:0},Uf={key:0},qf=["title"],jf={class:"text-xs"},zf={class:"text-xs"},Wf={class:"text-xs"},Hf={class:"text-xs"},Yf={class:"text-xs"},Gf={class:"text-xs"},Kf={class:"text-xs"},Xf={class:"text-xs"},Qf={name:"ArticleList"},gh=vn({...Qf,setup(e){var Ee;const{t}=Pn(),n=X({}),i=X(),r=X(1),a=X(10),o=X(0),l=X(),u=X([]),g=X([]),E=X(!1),k=X(!1),p=X(),Q=at(()=>u.value.map(R=>R.id)),ae=X(!1),te=X("edit"),se=X([]),Y=X(!1),T=X(),F=X(),_=X(),y=X(),D=X(),V=X(),A=X(),x=X([]),L=X(!1),j=X(),H=X(),z=X(!1),J=["completelyDelete","delete","submit","archive","offline"],he=X(J[0]),ge=X(!1),ye=X("internal"),it=ro(),f=X(Number((Ee=it.query.status)!=null?Ee:"-1")),s=R=>he.value==="delete"?![20].includes(R.status):he.value==="submit"?![0,12].includes(R.status):he.value==="archive"?[0].includes(R.status):he.value==="offline"?[0,1,5,11,12].includes(R.status):(he.value==="completelyDelete",!0),h=at(()=>g.value.filter(R=>s(R)).map(R=>R.id)),b=async(R,Z)=>{if(R==="delete")await wa(Z);else if(R==="submit")await Ea(Z);else if(R==="archive")await xa(Z);else if(R==="offline")await _a(Z);else if(R==="completelyDelete")await ba(Z);else throw new Error(`not support action: ${R}`);I(),xt.success(t("success"))},I=async()=>{var R;E.value=!0;try{const{content:Z,totalElements:Le}=await Vo({...oo(n.value),Q_EQ_status:f.value!==-1?f.value:void 0,subChannelId:(R=j.value)==null?void 0:R.id,Q_OrderBy:i.value,page:r.value,pageSize:a.value});ae.value=i.value!==void 0,u.value=Z,o.value=Le}finally{E.value=!1}},w=async()=>{L.value=!0;try{x.value=oi(await Xi({isArticlePermission:!0}))}finally{L.value=!1}},S=async()=>{se.value=await ko()};let K;const m=()=>{const R=document.querySelector("#dataTable .el-table__body-wrapper tbody");K=yo.create(R,{handle:".drag-handle",onEnd:async function(Z){const{oldIndex:Le,newIndex:pt}=Z;Le!==pt&&(await Fo(u.value[Le].id,u.value[pt].id),u.value.splice(pt,0,u.value.splice(Le,1)[0]),xt.success(t("success")))}})};ao(()=>{I(),w(),S(),m()}),so(()=>{K!==void 0&&K.destroy()});const v=({column:R,prop:Z,order:Le})=>{var pt;Z&&Le?i.value=((pt=R.sortBy)!=null?pt:Z)+(Le==="descending"?"_desc":""):i.value=void 0,I()},ve=()=>{r.value=1,I()},pe=()=>{l.value.clearSort(),mo(n.value),i.value=void 0,r.value=1,I()},Pe=()=>{te.value="add",p.value=void 0,k.value=!0},Se=R=>{te.value="copy",p.value=R,k.value=!0},ue=R=>{Ne("article:update")||(te.value="edit",p.value=R,k.value=!0)},le=R=>{p.value=R,ye.value="internal",ge.value=!0},be=R=>{p.value=R,ye.value="external",ge.value=!0},Tt=(R,Z)=>{var rn,an;Y.value=!0,T.value=R,F.value=Z.id,_.value=Z.title,y.value=Z.description,D.value=Z.video;const Le=Da(Z.text),Mt=Ia("img",Le).map(fe=>Na(fe,"src")).filter(fe=>fe!=null);V.value=[...(an=(rn=Z.imageList)==null?void 0:rn.map(fe=>fe.url))!=null?an:[],...Mt],Z.image&&V.value.push(Z.image)},rt=async R=>{await Uo([R]),I(),xt.success(t("success"))},Ie=R=>{H.value=R,z.value=!0},$e=X(!1),xe=X(),We=X({id:0,sticky:0,stickyDate:null}),nn=(R,Z,Le)=>{$e.value=!0,We.value={id:R,sticky:Z<1?1:Z,stickyDate:Le}},Qe=async()=>{xe.value.validate(async R=>{R&&(await kr([We.value.id],We.value.sticky,We.value.stickyDate),I(),$e.value=!1,xt.success(t("success")))})},ie=async R=>{await kr([R],0,void 0),I(),xt.success(t("success"))};return(R,Z)=>{const Le=G("el-button"),pt=G("el-tree"),Mt=G("el-scrollbar"),rn=G("el-aside"),an=G("el-option"),fe=G("el-select"),De=G("el-popconfirm"),ke=G("el-radio-button"),q=G("el-radio-group"),N=G("el-table-column"),Ue=G("el-icon"),Un=G("el-link"),ft=G("el-tag"),sn=G("el-tooltip"),ht=G("el-dropdown-item"),qn=G("el-dropdown-menu"),jn=G("el-dropdown"),oe=G("el-table"),Ze=G("el-pagination"),Ct=G("el-input-number"),Ht=G("el-form-item"),ki=G("el-date-picker"),Us=G("el-form"),qs=G("el-dialog"),js=G("el-main"),zs=G("el-container"),wr=ua("loading");return M(),U(zs,null,{default:d(()=>[c(rn,{width:"220px",class:"pr-3"},{default:d(()=>[c(Mt,{class:"p-2 bg-white rounded-sm"},{default:d(()=>[Te("div",$f,[c(Le,{type:j.value==null?"primary":void 0,link:"",onClick:Z[0]||(Z[0]=()=>{A.value.setCurrentKey(null),j.value=void 0,ve()})},{default:d(()=>[O($(R.$t("article.allChannel")),1)]),_:1},8,["type"])]),ai(c(pt,{ref_key:"channelTree",ref:A,data:x.value,props:{label:"name"},"expand-on-click-node":!1,"node-key":"id","highlight-current":"",onNodeClick:Z[1]||(Z[1]=B=>{j.value=B,ve()})},null,8,["data"]),[[wr,L.value]])]),_:1})]),_:1}),c(js,{class:"p-0"},{default:d(()=>[Te("div",Of,[c(C(qo),{params:n.value,onSearch:ve,onReset:pe},{default:d(()=>[c(C(Ye),{label:R.$t("article.title"),name:"Q_Contains_@articleExt-title"},null,8,["label"]),c(C(Ye),{label:R.$t("article.text"),name:"Q_Contains_@articleExt-text"},null,8,["label"]),c(C(Ye),{label:R.$t("article.publishDate"),name:"Q_GE_publishDate_DateTime,Q_LE_publishDate_DateTime",type:"datetime"},null,8,["label"]),c(C(Ye),{label:R.$t("article.block"),name:"Q_In_@BlockItem-blockId_Int",options:se.value.filter(B=>B.recommendable).map(B=>({label:B.name,value:B.id}))},null,8,["label","options"]),c(C(Ye),{label:R.$t("article.org"),name:"Q_Like_org-name"},null,8,["label"]),c(C(Ye),{label:R.$t("article.user"),name:"Q_Like_user-username"},null,8,["label"]),c(C(Ye),{label:R.$t("article.created"),name:"Q_GE_created_DateTime,Q_LE_created_DateTime",type:"datetime"},null,8,["label"]),c(C(Ye),{label:R.$t("article.modifiedUser"),name:"Q_Like_modifiedUser@user-username"},null,8,["label"]),c(C(Ye),{label:R.$t("article.modified"),name:"Q_GE_modified_DateTime,Q_LE_modified_DateTime",type:"datetime"},null,8,["label"]),c(C(Ye),{label:R.$t("article.author"),name:"Q_Contains_@articleExt-author"},null,8,["label"]),c(C(Ye),{label:R.$t("article.editor"),name:"Q_Contains_@articleExt-editor"},null,8,["label"]),c(C(Ye),{label:R.$t("article.source"),name:"Q_Contains_@articleExt-source"},null,8,["label"]),c(C(Ye),{label:R.$t("article.subtitle"),name:"Q_Contains_@articleExt-subtitle"},null,8,["label"]),c(C(Ye),{label:R.$t("article.fullTitle"),name:"Q_Contains_@articleExt-fullTitle"},null,8,["label"]),c(C(Ye),{label:R.$t("article.seoKeywords"),name:"Q_Contains_@articleExt-seoKeywords"},null,8,["label"]),c(C(Ye),{label:R.$t("article.seoDescription"),name:"Q_Contains_@articleExt-seoDescription"},null,8,["label"])]),_:1},8,["params"])]),Te("div",null,[c(Le,{type:"primary",disabled:C(Ne)("article:create"),icon:C(ma),onClick:Z[2]||(Z[2]=()=>Pe())},{default:d(()=>[O($(R.$t("add")),1)]),_:1},8,["disabled","icon"]),c(fe,{modelValue:he.value,"onUpdate:modelValue":Z[3]||(Z[3]=B=>he.value=B),class:"ml-2"},{prefix:d(()=>[O($(R.$t("batchAction")+":"),1)]),default:d(()=>[(M(),Be(ct,null,mt(J,B=>c(an,{key:B,disabled:C(Ne)(`article:${B}`),value:B,label:R.$t(`article.op.${B}`)},null,8,["disabled","value","label"])),64))]),_:1},8,["modelValue"]),c(De,{title:R.$t("confirmExecute"),onConfirm:Z[4]||(Z[4]=()=>b(he.value,h.value))},{reference:d(()=>[c(Le,{disabled:h.value.length<=0||C(Ne)(`article:${he.value}`),icon:C(lo)},{default:d(()=>[O($(R.$t("execute")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),c(C(jo),{name:"article",class:"ml-2"})]),c(q,{modelValue:f.value,"onUpdate:modelValue":Z[5]||(Z[5]=B=>f.value=B),class:"mt-3",onChange:Z[6]||(Z[6]=()=>I())},{default:d(()=>[c(ke,{label:-1},{default:d(()=>[O($(R.$t("all")),1)]),_:1}),c(ke,{label:0},{default:d(()=>[O($(R.$t("article.status.0")),1)]),_:1}),c(ke,{label:1},{default:d(()=>[O($(R.$t("article.status.1")),1)]),_:1}),c(ke,{label:5},{default:d(()=>[O($(R.$t("article.status.5")),1)]),_:1}),c(ke,{label:10},{default:d(()=>[O($(R.$t("article.status.10")),1)]),_:1}),c(ke,{label:11},{default:d(()=>[O($(R.$t("article.status.11")),1)]),_:1}),c(ke,{label:12},{default:d(()=>[O($(R.$t("article.status.12")),1)]),_:1}),c(ke,{label:20},{default:d(()=>[O($(R.$t("article.status.20")),1)]),_:1}),c(ke,{label:21},{default:d(()=>[O($(R.$t("article.status.21")),1)]),_:1}),c(ke,{label:22},{default:d(()=>[O($(R.$t("article.status.22")),1)]),_:1})]),_:1},8,["modelValue"]),Te("div",Vf,[ai((M(),U(oe,{id:"dataTable",ref_key:"table",ref:l,"row-key":"id",data:u.value,onSelectionChange:Z[7]||(Z[7]=B=>g.value=B),onRowDblclick:Z[8]||(Z[8]=B=>ue(B.id)),onSortChange:v},{default:d(()=>[c(C(zo),{name:"article"},{default:d(()=>[c(N,{type:"selection",selectable:s,width:"38"}),c(N,{width:"42"},{default:d(()=>[c(Ue,{class:Tn(["text-lg align-middle text-gray-secondary",ae.value||C(Ne)("article:updateOrder")?["cursor-not-allowed","text-gray-disabled"]:["cursor-move","text-gray-regular","drag-handle"]]),disalbed:""},{default:d(()=>[c(C(uo))]),_:1},8,["class"])]),_:1}),c(N,{property:"id",label:"ID",width:"80",sortable:"custom"}),c(N,{property:"title",label:R.$t("article.title"),"min-width":"280","sort-by":"@articleExt-title",sortable:"custom"},{default:d(({row:B})=>[c(Un,{href:"javascript:",underline:!1,onClick:()=>C(Fs)(B.status,B.url,B.dynamicUrl)},{default:d(()=>[O($(B.title),1)]),_:2},1032,["onClick"]),(M(!0),Be(ct,null,mt(B.blockItemList,je=>(M(),U(ft,{key:je.id,type:je.enabled?void 0:"info",size:"small",class:"ml-1",closable:"",onClose:()=>rt(je.id)},{default:d(()=>[O($(je.block.name),1)]),_:2},1032,["type","onClose"]))),128)),B.sticky>0?(M(),U(sn,{key:0,placement:"top"},{content:d(()=>[O($(R.$t("article.sticky"))+" ",1),B.stickyDate!=null?(M(),Be("span",Ff,$(C(Lt)(B.stickyDate).format(" YYYY-MM-DD HH:mm:ss")),1)):re("",!0)]),default:d(()=>[c(ft,{type:"danger",class:"mx-1",effect:"light",size:"small",round:"",closable:!C(Ne)("article:sticky"),onClose:()=>ie(B.id)},{default:d(()=>[O($(B.sticky),1)]),_:2},1032,["closable","onClose"])]),_:2},1024)):re("",!0),B.srcId!=null?(M(),U(sn,{key:1,placement:"top"},{content:d(()=>[O($(C(t)(`article.type.${B.type}`))+": ",1),B.siteId!==B.src.siteId?(M(),Be("span",Uf,"["+$(B.src.site.name)+"]",1)):re("",!0),O(" "+$(B.src.channel.paths.map(je=>je.name).join(" / ")),1)]),default:d(()=>[c(Ue,{class:"ml-1 align-middle"},{default:d(()=>[c(C(co))]),_:1})]),_:2},1024)):re("",!0)]),_:1},8,["label"]),c(N,{property:"channel.name",label:R.$t("article.channel"),"sort-by":"channel-name",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:B})=>[Te("span",{title:B.channel.paths.map(je=>je.name).join(" / ")},$(B.channel.name),9,qf)]),_:1},8,["label"]),c(N,{property:"org.name",label:R.$t("article.org"),"sort-by":"org-name",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"author",label:R.$t("article.author"),"sort-by":"@articleExt-author",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"editor",label:R.$t("article.editor"),"sort-by":"@articleExt-editor",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"source",label:R.$t("article.source"),"sort-by":"@articleExt-source",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"user.username",label:R.$t("article.user"),"sort-by":"user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"created",label:R.$t("article.created"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:B})=>[O($(C(Lt)(B.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),c(N,{property:"modifiedUser.username",label:R.$t("article.modifiedUser"),"sort-by":"modifiedUser@user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"modified",label:R.$t("article.modified"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:B})=>[O($(C(Lt)(B.modified).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),c(N,{property:"publishDate",label:R.$t("article.publishDate"),"min-width":"120",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:B})=>[O($(C(Lt)(B.publishDate).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),c(N,{property:"views",label:R.$t("article.views"),"sort-by":"@articleExt-views",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"dayViews",label:R.$t("article.dayViews"),"sort-by":"@articleExt-dayViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"weekViews",label:R.$t("article.weekViews"),"sort-by":"@articleExt-weekViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"monthViews",label:R.$t("article.monthViews"),"sort-by":"@articleExt-monthViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"quarterViews",label:R.$t("article.quarterViews"),"sort-by":"@articleExt-quarterViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"yearViews",label:R.$t("article.yearViews"),"sort-by":"@articleExt-yearViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),c(N,{property:"status",label:R.$t("article.status"),sortable:"custom","show-overflow-tooltip":""},{default:d(({row:B})=>[B.status===0?(M(),U(ft,{key:0,type:"success",size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024)):B.status===1?(M(),U(ft,{key:1,size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024)):B.status===20?(M(),U(ft,{key:2,type:"warning",size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024)):B.status===21?(M(),U(ft,{key:3,type:"warning",size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024)):B.status===22?(M(),U(sn,{key:4,content:B.rejectReason,placement:"top"},{default:d(()=>[c(ft,{type:"danger",size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024)]),_:2},1032,["content"])):(M(),U(ft,{key:5,type:"info",size:"small"},{default:d(()=>[O($(R.$t(`article.status.${B.status}`)),1)]),_:2},1024))]),_:1},8,["label"]),c(N,{label:R.$t("table.action"),width:"260"},{default:d(({row:B})=>[c(Le,{type:"primary",disabled:C(Ne)("article:update"),size:"small",link:"",onClick:()=>ue(B.id)},{default:d(()=>[O($(R.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),C(qe).epRank>0||C(qe).epDisplay?(M(),U(Le,{key:0,type:"primary",disabled:!B.processInstanceId||C(Ne)("processInstance:task")||C(qe).epRank<1,size:"small",link:"",onClick:()=>Ie(B.processInstanceId)},{default:d(()=>[O($(R.$t("processInstance.op.task")),1)]),_:2},1032,["disabled","onClick"])):re("",!0),c(De,{title:R.$t("confirmDelete"),onConfirm:()=>b("delete",[B.id])},{reference:d(()=>[c(Le,{type:"primary",disabled:C(Ne)("article:delete")||[20].includes(B.status),size:"small",link:""},{default:d(()=>[O($(R.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"]),c(De,{title:R.$t("confirmCompletelyDelete"),onConfirm:()=>b("completelyDelete",[B.id])},{reference:d(()=>[c(Le,{type:"primary",disabled:C(Ne)("article:completelyDelete"),size:"small",link:""},{default:d(()=>[O($(R.$t("completelyDelete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"]),c(jn,{class:"ml-2 align-middle"},{dropdown:d(()=>[Te("div",null,[c(qn,null,{default:d(()=>[c(ht,{disabled:C(Ne)("article:submit")||[0,12].includes(B.status),onClick:()=>b("submit",[B.id])},{default:d(()=>[Te("span",jf,$(R.$t("article.op.submit")),1)]),_:2},1032,["disabled","onClick"]),c(ht,{disabled:C(Ne)("article:archive")||![0].includes(B.status),onClick:()=>b("archive",[B.id])},{default:d(()=>[Te("span",zf,$(R.$t("article.op.archive")),1)]),_:2},1032,["disabled","onClick"]),c(ht,{disabled:C(Ne)("article:offline")||![0,1,5,11,12].includes(B.status),onClick:()=>b("offline",[B.id])},{default:d(()=>[Te("span",Wf,$(R.$t("article.op.offline")),1)]),_:2},1032,["disabled","onClick"]),c(ht,{disabled:C(Ne)("article:create"),divided:"",onClick:()=>Se(B.id)},{default:d(()=>[Te("span",Hf,$(R.$t("copy")),1)]),_:2},1032,["disabled","onClick"]),C(qe).epRank>=2||C(qe).epDisplay?(M(),U(ht,{key:0,disabled:C(Ne)("article:internalPush")||B.status!==0||B.srcId!=null||C(qe).epRank<2,title:C(qe).epRank<2?R.$t("error.enterprise.short"):void 0,onClick:()=>le(B.id)},{default:d(()=>[Te("span",Yf,$(R.$t("article.op.internalPush")),1)]),_:2},1032,["disabled","title","onClick"])):re("",!0),C(qe).epRank>=3||C(qe).epDisplay?(M(),U(ht,{key:1,disabled:C(Ne)("article:externalPush")||B.status!==0||B.srcId!=null||C(qe).epRank<3,title:C(qe).epRank<3?R.$t("error.enterprise.short"):void 0,onClick:()=>be(B.id)},{default:d(()=>[Te("span",Gf,$(R.$t("article.op.externalPush")),1)]),_:2},1032,["disabled","title","onClick"])):re("",!0),c(ht,{disabled:C(Ne)("article:sticky"),divided:"",onClick:()=>nn(B.id,B.sticky,B.stickyDate)},{default:d(()=>[Te("span",Kf,$(R.$t("article.op.sticky")),1)]),_:2},1032,["disabled","onClick"]),(M(!0),Be(ct,null,mt(se.value.filter(je=>je.enabled&&je.recommendable),(je,zn)=>(M(),U(ht,{key:je.id,disabled:B.blocks.findIndex(Ws=>Ws.id===je.id)>=0,divided:zn===0,onClick:()=>Tt(je.id,B)},{default:d(()=>[Te("span",Xf,$(`${R.$t("article.op.recommendTo")}: ${je.name}`),1)]),_:2},1032,["disabled","divided","onClick"]))),128))]),_:2},1024)])]),default:d(()=>[c(Le,{type:"primary",size:"small",link:""},{default:d(()=>[c(Ue,{class:"text-primary"},{default:d(()=>[c(C(po))]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[wr,E.value]]),c(Ze,{"current-page":r.value,"onUpdate:currentPage":Z[9]||(Z[9]=B=>r.value=B),pageSize:a.value,"onUpdate:pageSize":Z[10]||(Z[10]=B=>a.value=B),total:o.value,"page-sizes":C(fo),layout:C(ho),small:"",background:"",class:"justify-end px-3 py-2",onSizeChange:Z[11]||(Z[11]=()=>I()),onCurrentChange:Z[12]||(Z[12]=()=>I())},null,8,["current-page","pageSize","total","page-sizes","layout"])]),c(Df,{modelValue:k.value,"onUpdate:modelValue":Z[13]||(Z[13]=B=>k.value=B),action:te.value,"bean-id":p.value,"bean-ids":Q.value,channel:j.value,onFinished:I},null,8,["modelValue","action","bean-id","bean-ids","channel"]),c(Bf,{modelValue:ge.value,"onUpdate:modelValue":Z[14]||(Z[14]=B=>ge.value=B),"bean-id":p.value,type:ye.value,onFinished:I},null,8,["modelValue","bean-id","type"]),c(tl,{modelValue:Y.value,"onUpdate:modelValue":Z[15]||(Z[15]=B=>Y.value=B),"bean-id":void 0,"bean-ids":[],"block-id":T.value,"article-id":F.value,title:_.value,description:y.value,video:D.value,images:V.value,onFinished:I},null,8,["modelValue","block-id","article-id","title","description","video","images"]),c(pf,{modelValue:z.value,"onUpdate:modelValue":Z[16]||(Z[16]=B=>z.value=B),"instance-id":H.value},null,8,["modelValue","instance-id"]),c(qs,{modelValue:$e.value,"onUpdate:modelValue":Z[20]||(Z[20]=B=>$e.value=B),title:R.$t("article.sticky"),width:768},{default:d(()=>[c(Us,{ref_key:"stickyForm",ref:xe,model:We.value,"label-width":"150px"},{default:d(()=>[c(Ht,{prop:"sticky"},{label:d(()=>[c(wt,{message:"article.sticky",help:""})]),default:d(()=>[c(Ct,{modelValue:We.value.sticky,"onUpdate:modelValue":Z[17]||(Z[17]=B=>We.value.sticky=B),min:0,max:999},null,8,["modelValue"])]),_:1}),c(Ht,{prop:"stickyDate",rules:{validator:(B,je,zn)=>{if(je!=null&&Date.now()>je.getTime()){zn(R.$t("article.error.stickyDate.beforeCurrent"));return}zn()}}},{label:d(()=>[c(wt,{message:"article.stickyDate",help:""})]),default:d(()=>[c(ki,{modelValue:We.value.stickyDate,"onUpdate:modelValue":Z[18]||(Z[18]=B=>We.value.stickyDate=B),type:"datetime"},null,8,["modelValue"])]),_:1},8,["rules"]),c(Le,{type:"primary",onClick:Z[19]||(Z[19]=()=>Qe())},{default:d(()=>[O($(R.$t("submit")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1})}}});export{gh as default};
