System.register(["./index-legacy-DSyHl_gO.js","./el-radio-group-legacy-CeZwVPyl.js","./el-radio-button-legacy-C-wGwFOO.js","./stat-legacy-CJTQv6rn.js"],(function(e,t){"use strict";var a,r,n,l,i,s,o,u,c,d,m,v,p,y,f,Y,g,b,D,h,M,w,C;return{setters:[e=>{a=e.d,r=e.u,n=e.r,l=e.Y,i=e.o,s=e.X,o=e.a0,u=e.b,c=e.P,d=e.l,m=e.h,v=e.w,p=e.aF,y=e.aG,f=e.v,Y=e.x,g=e.a2,b=e.a6},e=>{D=e.b,h=e.E},null,e=>{M=e.h,w=e.i,C=e.j}],execute:function(){const t={class:"p-3 mt-3 app-block"},_={class:"p-3 mt-3 app-block"},x={class:"p-3 mt-3 app-block"},z={class:"p-3 mt-3 app-block"};e("default",a({__name:"VisitEnv",setup(e){const{t:a,n:k}=r(),N=n("last30day"),S=e=>{switch(e){case"today":return s().format("YYYY-MM-DD");case"yesterday":return s().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return s().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return s().subtract(29,"day").format("YYYY-MM-DD");case"last3month":return s().subtract(3,"month").format("YYYY-MM-DD");case"last6month":return s().subtract(6,"month").format("YYYY-MM-DD");case"lastYear":return s().subtract(1,"year").format("YYYY-MM-DD");default:return}},j=e=>"yesterday"===e?s().subtract(1,"day").format("YYYY-MM-DD"):s().format("YYYY-MM-DD"),B=l(),E=l(),F=l(),O=async e=>{(async e=>{const t=await M({begin:S(e),end:j(e)}),r=t.reduce(((e,t)=>e+Number(t.pvCount)),0),n={title:{text:a("visitDevice.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:e=>k(100*e/r,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("visitDevice.name"),type:"pie",radius:"72%",center:["40%","56%"],data:t.map((e=>({value:Number(e.pvCount),name:e.name})))}]},l=B.value;if(null==l)return;let i=o.getInstanceByDom(l);null==i&&(i=o.init(l)),i.setOption(n),window.addEventListener("resize",(function(){i&&i.resize()}))})(e),(async e=>{const t=await w({begin:S(e),end:j(e)}),r=t.reduce(((e,t)=>e+Number(t.pvCount)),0),n={title:{text:a("visitOs.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:e=>k(100*e/r,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("visitOs.name"),type:"pie",radius:"72%",center:["40%","56%"],data:t.map((e=>({value:Number(e.pvCount),name:e.name})))}]},l=E.value;if(null==l)return;let i=o.getInstanceByDom(l);null==i&&(i=o.init(l)),i.setOption(n),window.addEventListener("resize",(function(){i&&i.resize()}))})(e),(async e=>{const t=await C({begin:S(e),end:j(e)}),r=t.reduce(((e,t)=>e+Number(t.pvCount)),0),n={title:{text:a("visitBrowser.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:e=>k(100*e/r,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("visitBrowser.name"),type:"pie",radius:"72%",center:["40%","56%"],data:t.map((e=>({value:Number(e.pvCount),name:e.name})))}]},l=F.value;if(null==l)return;let i=o.getInstanceByDom(l);null==i&&(i=o.init(l)),i.setOption(n),window.addEventListener("resize",(function(){i&&i.resize()}))})(e)};return i((async()=>{O(N.value)})),(e,a)=>{const r=D,n=h,l=g,i=b;return u(),c("div",null,[d("div",t,[d("div",null,[m(n,{modelValue:N.value,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),onChange:a[1]||(a[1]=e=>O(e))},{default:v((()=>[(u(),c(p,null,y(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],(t=>m(r,{key:t,value:t},{default:v((()=>[f(Y(e.$t(`visit.${t}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])]),m(i,{gutter:12},{default:v((()=>[m(l,{span:12},{default:v((()=>[d("div",_,[d("div",{ref_key:"deviceChartRef",ref:B,class:"h-80"},null,512)])])),_:1}),m(l,{span:12},{default:v((()=>[d("div",x,[d("div",{ref_key:"osChartRef",ref:E,class:"h-80"},null,512)])])),_:1})])),_:1}),d("div",z,[d("div",{ref_key:"browserChartRef",ref:F,class:"h-80"},null,512)])])}}}))}}}));
