System.register(["./index-legacy-BTwn5I6C.js","./el-radio-group-legacy-CqcfN_4l.js","./el-radio-button-legacy-C-wGwFOO.js","./stat-legacy-C0RGhAOz.js"],(function(t,e){"use strict";var a,r,n,l,s,o,u,i,c,d,m,y,Y,v,p,f,g,b,D,M,h,C;return{setters:[t=>{a=t.d,r=t.u,n=t.r,l=t.Y,s=t.o,o=t.X,u=t.a0,i=t.b,c=t.P,d=t.l,m=t.h,y=t.w,Y=t.aF,v=t.aG,p=t.v,f=t.x,g=t.a2,b=t.a6},t=>{D=t.b,M=t.E},null,t=>{h=t.c,C=t.d}],execute:function(){const e={class:"p-3 mt-3 app-block"},_={class:"p-3 mt-3 app-block"},w={class:"p-3 mt-3 app-block"};t("default",a({__name:"VisitRegion",setup(t){const{t:a,n:x}=r(),k=n("last30day"),z=t=>{switch(t){case"today":return o().format("YYYY-MM-DD");case"yesterday":return o().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return o().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return o().subtract(29,"day").format("YYYY-MM-DD");case"last3month":return o().subtract(3,"month").format("YYYY-MM-DD");case"last6month":return o().subtract(6,"month").format("YYYY-MM-DD");case"lastYear":return o().subtract(1,"year").format("YYYY-MM-DD");default:return}},S=t=>"yesterday"===t?o().subtract(1,"day").format("YYYY-MM-DD"):o().format("YYYY-MM-DD"),j=l(),N=l(),V=async t=>{(async t=>{const e=await h({begin:z(t),end:S(t)}),r=e.reduce(((t,e)=>t+Number(e.pvCount)),0),n={title:{text:a("menu.stat.visitCountry"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>x(100*t/r,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("menu.stat.visitCountry"),type:"pie",radius:"72%",center:["40%","56%"],data:e.map((t=>({value:Number(t.pvCount),name:t.name})))}]},l=j.value;if(null==l)return;let s=u.getInstanceByDom(l);null==s&&(s=u.init(l)),s.setOption(n),window.addEventListener("resize",(function(){s&&s.resize()}))})(t),(async t=>{const e=await C({begin:z(t),end:S(t)}),r=e.reduce(((t,e)=>t+Number(e.pvCount)),0),n={title:{text:a("menu.stat.visitProvince"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>x(100*t/r,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("menu.stat.visitProvince"),type:"pie",radius:"72%",center:["40%","56%"],data:e.map((t=>({value:Number(t.pvCount),name:t.name})))}]},l=N.value;if(null==l)return;let s=u.getInstanceByDom(l);null==s&&(s=u.init(l)),s.setOption(n),window.addEventListener("resize",(function(){s&&s.resize()}))})(t)};return s((async()=>{V(k.value)})),(t,a)=>{const r=D,n=M,l=g,s=b;return i(),c("div",null,[d("div",e,[d("div",null,[m(n,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),onChange:a[1]||(a[1]=t=>V(t))},{default:y((()=>[(i(),c(Y,null,v(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],(e=>m(r,{key:e,value:e},{default:y((()=>[p(f(t.$t(`visit.${e}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])]),m(s,{gutter:12},{default:y((()=>[m(l,{span:12},{default:y((()=>[d("div",_,[d("div",{ref_key:"countryChartRef",ref:j,class:"h-80"},null,512)])])),_:1}),m(l,{span:12},{default:y((()=>[d("div",w,[d("div",{ref_key:"provinceChartRef",ref:N,class:"h-80"},null,512)])])),_:1})])),_:1})])}}}))}}}));
