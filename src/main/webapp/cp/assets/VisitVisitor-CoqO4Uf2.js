import{d as M,X as v,r as h,o as x,b as l,P as i,l as d,h as t,w as e,aF as w,aG as E,v as r,x as s,k as m,aa as b,a3 as R,a2 as B,a6 as N}from"./index-Cf36YWNS.js";import{b as j,E as H}from"./el-radio-group-AuMglPEu.js";/* empty css                        */import{d as S}from"./duration-DXO_hxd5.js";import{b as P}from"./stat-BvhbaIxl.js";const F={class:"p-3 mt-3 app-block"},G={class:"flex p-3 mt-3 justify-evenly app-block"},U={class:"h-64 w-60 text-primary"},q={class:"mt-2 text-center"},I={class:"flex items-center justify-center mt-2"},L={class:"text-3xl"},T={key:0},X={key:1},z={class:"mt-4 space-y-2 text-sm"},A={key:0},J={key:1},K={key:0},O={key:1},Q={key:0},W={key:1},Z={class:"h-64 w-60 text-gray-secondary"},tt={class:"mt-2 text-center"},et={class:"flex items-center justify-center mt-2"},at={class:"text-3xl"},st={key:0},ot={key:1},nt={class:"mt-4 space-y-2 text-sm"},ut={key:0},lt={key:1},it={key:0},rt={key:1},dt={key:0},vt={key:1},ht=M({__name:"VisitVisitor",setup(ct){v.extend(S);const y=h("last30day"),k=a=>{switch(a){case"today":return v().format("YYYY-MM-DD");case"yesterday":return v().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return v().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return v().subtract(29,"day").format("YYYY-MM-DD");case"last3month":return v().subtract(3,"month").format("YYYY-MM-DD");case"last6month":return v().subtract(6,"month").format("YYYY-MM-DD");case"lastYear":return v().subtract(1,"year").format("YYYY-MM-DD");default:return}},V=a=>a==="yesterday"?v().subtract(1,"day").format("YYYY-MM-DD"):v().format("YYYY-MM-DD"),o=h({}),n=h({}),C=async a=>{const c=await P({begin:k(a),end:V(a)});o.value=c.newVisitor,n.value=c.oldVisitor,o.value.pvCount=Number(o.value.pvCount),n.value.pvCount=Number(n.value.pvCount),o.value.uvCount=Number(o.value.uvCount),n.value.uvCount=Number(n.value.uvCount);const f=o.value.uvCount+n.value.uvCount;f>0?(o.value.proportion=o.value.uvCount*100/f,n.value.proportion=n.value.uvCount*100/f):(o.value.proportion=50,n.value.proportion=50)};return x(async()=>{C(y.value)}),(a,c)=>{var g,D;const f=j,$=H,Y=R,u=B,_=N;return l(),i("div",null,[d("div",F,[d("div",null,[t($,{modelValue:y.value,"onUpdate:modelValue":c[0]||(c[0]=p=>y.value=p),onChange:c[1]||(c[1]=p=>C(p))},{default:e(()=>[(l(),i(w,null,E(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],p=>t(f,{key:p,value:p},{default:e(()=>[r(s(a.$t("visit.".concat(p))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),d("div",G,[d("div",U,[d("div",q,s(a.$t("visitVisitor.newVisitor")),1),d("div",I,[t(Y,{class:"text-5xl"},{default:e(()=>[t(m(b))]),_:1}),d("span",L,[o.value.uvCount>0?(l(),i("span",T,s(a.$n((g=o.value.proportion)!=null?g:0,"decimal")),1)):(l(),i("span",X,"0")),c[2]||(c[2]=r("% "))])]),d("div",z,[t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(o.value.pvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(o.value.uvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",A,s(a.$n(o.value.bounceCount*100/o.value.uvCount,"decimal"))+"%",1)):(l(),i("span",J,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",K,s(m(v).duration(o.value.duration/o.value.uvCount,"seconds").format("HH:mm:ss")),1)):(l(),i("span",O,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",Q,s(a.$n(o.value.pvCount/o.value.uvCount,"decimal")),1)):(l(),i("span",W,"-"))]),_:1})]),_:1})])]),d("div",Z,[d("div",tt,s(a.$t("visitVisitor.oldVisitor")),1),d("div",et,[t(Y,{class:"text-5xl"},{default:e(()=>[t(m(b))]),_:1}),d("span",at,[n.value.uvCount>0?(l(),i("span",st,s(a.$n((D=n.value.proportion)!=null?D:0,"decimal")),1)):(l(),i("span",ot,"0")),c[3]||(c[3]=r("% "))])]),d("div",nt,[t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(n.value.pvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[r(s(n.value.uvCount),1)]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(u,{span:12},{default:e(()=>[n.value.uvCount>0?(l(),i("span",ut,s(a.$n(n.value.bounceCount*100/n.value.uvCount,"decimal"))+"%",1)):(l(),i("span",lt,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(u,{span:12},{default:e(()=>[o.value.uvCount>0?(l(),i("span",it,s(m(v).duration(n.value.duration/n.value.uvCount,"seconds").format("HH:mm:ss")),1)):(l(),i("span",rt,"-"))]),_:1})]),_:1}),t(_,{gutter:24},{default:e(()=>[t(u,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(u,{span:12},{default:e(()=>[n.value.uvCount>0?(l(),i("span",dt,s(a.$n(n.value.pvCount/n.value.uvCount,"decimal")),1)):(l(),i("span",vt,"-"))]),_:1})]),_:1})])])])])])}}});export{ht as default};
