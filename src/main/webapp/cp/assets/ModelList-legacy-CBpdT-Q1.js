System.register(["./index-legacy-Dn378GZk.js","./el-radio-group-legacy-Bo0xKR1q.js","./el-radio-button-legacy-C-wGwFOO.js","./el-popover-legacy-DS1ey-DB.js","./config-legacy-DvEG9oKg.js","./QueryItem.vue_vue_type_script_setup_true_lang-legacy-X61T56A1.js","./ListMove.vue_vue_type_script_setup_true_lang-legacy-CxwKLf1Y.js","./el-select-legacy-BR_8Webd.js","./el-radio-legacy-DPwh4a3j.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-CIId0m1t.js","./el-switch-legacy-CJu_GaeZ.js","./data-legacy-Ddf9C88u.js","./el-main-legacy-DCNSY1wY.js","./vuedraggable.umd-legacy-ISFTCR-2.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-FLpBpGbO.js","./content-legacy-mGlTTE-V.js","./sortable.esm-legacy-xUcotENm.js","./el-checkbox-group-legacy-CFEJ959H.js","./Tinymce-legacy-c_Ar6L-9.js","./FileListUpload.vue_vue_type_style_index_0_scoped_b3a09e2e_lang-legacy-rgJAACf3.js","./BaseUpload.vue_vue_type_style_index_0_scoped_248c0508_lang-legacy-CKxOBGSm.js","./BaseUpload-legacy-BZSNhk5x.js","./position-legacy-qRsP4k9q.js"],(function(e,l){"use strict";var a,d,t,u,o,i,m,n,p,r,s,c,b,y,f,v,V,g,h,_,$,w,k,U,x,T,S,q,M,C,I,j,F,H,z,E,O,L,W,K,B,A,D,J,N,R,Q,P,Z,G,X,Y,ee,le,ae,de,te,ue,oe,ie,me,ne,pe,re,se,ce,be,ye,fe,ve,Ve,ge,he,_e,$e,we,ke,Ue,xe,Te;return{setters:[e=>{a=e.d,d=e.r,t=e.b,u=e.c,o=e.w,i=e.h,m=e.i,n=e.j,p=e.P,r=e.aF,s=e.aG,c=e.v,b=e.x,y=e.k,f=e.A,v=e.u,V=e.B,g=e.$,h=e.E,_=e.aP,$=e.aQ,w=e.b6,k=e.g,U=e.l,x=e.m,T=e.n,S=e.t,q=e.z,M=e.O,C=e.b3,I=e.aD,j=e.a2,F=e.ay,H=e.a3,z=e.bb,E=e.b8,O=e.b9,L=e._,W=e.ar,K=e.o,B=e.bi,A=e.bs,D=e.aW,J=e.b5,N=e.aZ,R=e.bI,Q=e.e,P=e.y,Z=e.aO},e=>{G=e.E,X=e.a,Y=e.b},null,e=>{ee=e.E},e=>{le=e.M,ae=e.N,de=e.O,te=e.P,ue=e.c,oe=e.q,ie=e.Q},e=>{me=e.a,ne=e._,pe=e.b,re=e.c},e=>{se=e._},e=>{ce=e.E,be=e.a,ye=e.c},null,e=>{fe=e._},e=>{ve=e.E},e=>{Ve=e.g,ge=e.m},e=>{he=e.b,_e=e.E,$e=e.c,we=e.a},e=>{ke=e.d},e=>{Ue=e.a,xe=e._},e=>{Te=e.C},null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='.drag-component[data-v-bca848c2]{position:relative;margin-top:.5rem;margin-right:.5rem;display:inline-block;width:7rem;cursor:move;border-radius:.125rem;border-width:1px;border-style:dashed;border-color:rgb(64 158 255 / var(--tw-border-opacity, 1));--tw-border-opacity: 0;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));padding:.5rem;font-size:.75rem;line-height:1rem}.drag-component[data-v-bca848c2]:hover{--tw-border-opacity: 1;--tw-text-opacity: 1;color:rgb(64 158 255 / var(--tw-text-opacity, 1))}.drag-mask[data-v-bca848c2]{position:absolute;top:0;left:0;z-index:10;height:100%;width:100%;cursor:move;--tw-bg-opacity: 1;background-color:rgb(160 207 255 / var(--tw-bg-opacity, 1));opacity:0}.drag-mask-selected[data-v-bca848c2]{border-radius:.125rem;border-width:1px;border-style:dashed;--tw-border-opacity: 1;border-color:rgb(64 158 255 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(160 207 255 / var(--tw-bg-opacity, 1));opacity:.3}.drag-close[data-v-bca848c2]{position:absolute;top:-.125rem;right:0;z-index:10;cursor:pointer;opacity:.7}.dialog-full[data-v-bca848c2] .el-dialog__body{padding-bottom:0}.right-panel[data-v-bca848c2] .el-form-item{margin-bottom:14px}.drawing-board .sortable-ghost[data-v-bca848c2]:before{content:" ";position:absolute;top:0;left:0;height:.25rem;width:100%;--tw-bg-opacity: 1;background-color:rgb(230 162 60 / var(--tw-bg-opacity, 1))}.drawing-board .sortable-ghost .drag-mask[data-v-bca848c2]{opacity:.1!important}.drawing-board .sortable-ghost.drag-component[data-v-bca848c2]{margin-left:0;margin-right:0;width:100%}.drawing-board[data-v-bca848c2] .el-scrollbar__view{height:100%}\n/*$vite$:1*/',document.head.appendChild(l);const Se=a({name:"ModelForm",__name:"ModelForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},modelType:{type:String,required:!0}},emits:{"update:modelValue":null,finished:null},setup(e){const l=d(),a=d({});return(d,f)=>{const v=n,V=m,g=X,h=G,_=be,$=ce;return t(),u(fe,{values:a.value,"onUpdate:values":f[3]||(f[3]=e=>a.value=e),name:d.$t("menu.config.model"),"query-bean":y(te),"create-bean":y(de),"update-bean":y(ae),"delete-bean":y(le),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:l.value,"init-values":()=>({type:e.modelType,scope:0}),"to-values":e=>({...e}),"disable-delete":e=>e.id<=10,perms:"model","model-value":e.modelValue,"onUpdate:modelValue":f[4]||(f[4]=e=>d.$emit("update:modelValue",e)),onFinished:f[5]||(f[5]=()=>d.$emit("finished"))},{default:o((({})=>[i(V,{prop:"name",label:d.$t("model.name"),rules:{required:!0,message:()=>d.$t("v.required")}},{default:o((()=>[i(v,{ref_key:"focus",ref:l,modelValue:a.value.name,"onUpdate:modelValue":f[0]||(f[0]=e=>a.value.name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),i(V,{prop:"scope",label:d.$t("model.scope"),rules:{required:!0,message:()=>d.$t("v.required")}},{default:o((()=>[i(h,{modelValue:a.value.scope,"onUpdate:modelValue":f[1]||(f[1]=e=>a.value.scope=e),disabled:a.value.id<10},{default:o((()=>[(t(),p(r,null,s([0,2],(e=>i(g,{key:e,value:e},{default:o((()=>[c(b(d.$t(`model.scope.${e}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","disabled"])])),_:1},8,["label","rules"]),i(V,{prop:"type",label:d.$t("model.type")},{default:o((()=>[i($,{modelValue:a.value.type,"onUpdate:modelValue":f[2]||(f[2]=e=>a.value.type=e),disabled:""},{default:o((()=>[i(_,{value:e.modelType,label:d.$t(`model.type.${e.modelType}`)},null,8,["value","label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","disable-delete","model-value"])}}}),qe={class:"mt-3"},Me=a({name:"ModelSystemFields",__name:"ModelSystemFields",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e,{emit:l}){const a=e,m=l,{beanId:y,modelValue:M}=f(a),{t:C}=v(),I=d({}),j=d(!1),F=d([]),H=d([]);V(M,(async()=>{if(M.value&&y.value){I.value=await te(y.value);const e=Ve()[I.value.type];F.value=ge(e.mains.filter((e=>g.epRank>=(e.epRank??0))),I.value.mains,I.value.type),e.asides?.length>0&&(H.value=ge(e.asides.filter((e=>g.epRank>=(e.epRank??0))),I.value.asides,I.value.type))}}));const z=async()=>{j.value=!0;try{F.value=F.value.map((e=>({...e,name:""===e.name?null:e.name}))),H.value=H.value.map((e=>({...e,name:""===e.name?null:e.name}))),await ae({...I.value,mains:JSON.stringify(F.value),asides:JSON.stringify(H.value)}),S.success(C("success"))}finally{j.value=!1,m("update:modelValue",!1)}},E=()=>{const e=Ve()[I.value.type];F.value=ge(e.mains,null,I.value.type),e.asides?.length>0&&(H.value=ge(e.asides,null,I.value.type))};return(l,a)=>{const d=$,m=n,y=ve,f=be,v=ce,V=w,g=_,S=x,M=h,C=q;return t(),u(C,{title:l.$t("model.fun.systemFields"),"model-value":e.modelValue,top:"5vh",width:"1024px","onUpdate:modelValue":a[0]||(a[0]=e=>l.$emit("update:modelValue",e))},{default:o((()=>[i(M,null,{default:o((()=>[i(g,{data:F.value},{default:o((()=>[i(d,{prop:"code",label:l.$t("model.field.code"),"min-width":"110"},null,8,["label"]),i(d,{prop:"name",label:l.$t("model.field.name"),"min-width":"140"},{default:o((({row:e})=>[i(m,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:l.$t(e.label),class:"w-11/12"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:1},8,["label"]),i(d,{prop:"show",label:l.$t("model.field.show")},{default:o((({row:e})=>[i(y,{modelValue:e.show,"onUpdate:modelValue":l=>e.show=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),i(d,{prop:"double",label:l.$t("model.field.double")},{default:o((({row:e})=>[i(y,{modelValue:e.double,"onUpdate:modelValue":l=>e.double=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"]),i(d,{prop:"required",label:l.$t("model.field.required")},{default:o((({row:e})=>[i(y,{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),i(d,{label:l.$t("model.field.attribute"),"min-width":"180"},{default:o((({row:e})=>["image"===e.type?(t(),p(r,{key:0},[i(m,{modelValue:e.imageHeight,"onUpdate:modelValue":l=>e.imageHeight=l,modelModifiers:{number:!0}},{prepend:o((()=>[c(b(l.$t("model.field.imageHeight")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),i(m,{modelValue:e.imageWidth,"onUpdate:modelValue":l=>e.imageWidth=l,modelModifiers:{number:!0}},{prepend:o((()=>[c(b(l.$t("model.field.imageWidth")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),i(v,{modelValue:e.imageMode,"onUpdate:modelValue":l=>e.imageMode=l,placeholder:l.$t("model.field.imageMode"),class:"w-full"},{default:o((()=>[(t(),p(r,null,s(["manual","cut","resize","none"],(e=>i(f,{key:e,value:e,label:l.$t(`model.field.imageMode.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])],64)):"imageList"===e.type?(t(),p(r,{key:1},[i(m,{modelValue:e.imageMaxHeight,"onUpdate:modelValue":l=>e.imageMaxHeight=l,modelModifiers:{number:!0}},{prepend:o((()=>[c(b(l.$t("model.field.imageMaxHeight")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),i(m,{modelValue:e.imageMaxWidth,"onUpdate:modelValue":l=>e.imageMaxWidth=l,modelModifiers:{number:!0}},{prepend:o((()=>[c(b(l.$t("model.field.imageMaxWidth")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),i(v,{modelValue:e.imageListType,"onUpdate:modelValue":l=>e.imageListType=l,placeholder:l.$t("model.field.imageListType"),class:"w-full"},{default:o((()=>[(t(),p(r,null,s(["pictureCard","picture"],(e=>i(f,{key:e,value:e,label:l.$t(`model.field.imageListType.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])],64)):"editor"===e.type?(t(),p(r,{key:2},[i(v,{modelValue:e.editorType,"onUpdate:modelValue":l=>e.editorType=l,placeholder:l.$t("model.field.editorType"),class:"w-full"},{default:o((()=>[(t(),p(r,null,s([1,2],(e=>i(f,{key:e,value:e,label:l.$t(`model.field.editorType.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),i(V,{modelValue:e.editorSwitch,"onUpdate:modelValue":l=>e.editorSwitch=l},{default:o((()=>[c(b(l.$t("model.field.editorSwitch")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):k("",!0)])),_:1},8,["label"])])),_:1},8,["data"]),H.value.length>0?(t(),u(g,{key:0,data:H.value,class:"mt-5"},{default:o((()=>[i(d,{prop:"code",label:l.$t("model.field.code"),"min-width":"100"},null,8,["label"]),i(d,{prop:"name",label:l.$t("model.field.name"),"min-width":"120"},{default:o((({row:e})=>[i(m,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:l.$t(e.label),class:"w-11/12"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:1},8,["label"]),i(d,{prop:"show",label:l.$t("model.field.show")},{default:o((({row:e})=>[i(y,{modelValue:e.show,"onUpdate:modelValue":l=>e.show=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),i(d,{prop:"required",label:l.$t("model.field.required")},{default:o((({row:e})=>[i(y,{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"])])),_:1},8,["data"])):k("",!0),U("div",qe,[i(S,{loading:j.value,type:"primary","native-type":"submit",onClick:T(z,["prevent"])},{default:o((()=>[c(b(l.$t("save")),1)])),_:1},8,["loading"]),i(S,{onClick:E},{default:o((()=>[c(b(l.$t("restoreInitialSettings")),1)])),_:1})])])),_:1})])),_:1},8,["title","model-value"])}}}),Ce=a({__name:"FieldAttribute",props:{selected:{type:Object,required:!0}},setup(e){const l=e,{selected:a}=f(l),v=d([]),V=d([]);return M((async()=>{"date"!==a.value.type||a.value.dateType||(a.value.dateType="date"),"switch"!==a.value.type||a.value.inactiveValue||(a.value.inactiveValue="0"),"switch"!==a.value.type||a.value.activeValue||(a.value.activeValue="1"),["radio","checkbox"].includes(a.value.type)&&!a.value.checkStyle&&(a.value.checkStyle="default"),["checkbox","multipleSelect"].includes(a.value.type)&&!a.value.defaultValue&&(a.value.defaultValue=[]),["checkbox","multipleSelect"].includes(a.value.type)&&(a.value.multiple=!0),["radio","checkbox","select","multipleSelect"].includes(a.value.type)&&(v.value=await ue())})),M((async()=>{null!=a.value.dictTypeId&&(V.value=await Te({typeId:a.value.dictTypeId}))})),(e,l)=>{const d=n,f=m,g=ve,h=ye,_=be,$=ce,w=Ue,U=Y,x=G;return t(),p(r,null,[i(f,{prop:"code",label:e.$t("model.field.code"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:o((()=>[i(d,{modelValue:y(a).code,"onUpdate:modelValue":l[0]||(l[0]=e=>y(a).code=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),i(f,{prop:"name",label:e.$t("model.field.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:o((()=>[i(d,{modelValue:y(a).name,"onUpdate:modelValue":l[1]||(l[1]=e=>y(a).name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),["tinyEditor","textarea"].includes(y(a).type)?(t(),u(f,{key:0,prop:"clob",label:e.$t("model.field.clob")},{label:o((()=>[i(C,{message:"model.field.clob",help:""})])),default:o((()=>[i(g,{modelValue:y(a).clob,"onUpdate:modelValue":l[2]||(l[2]=e=>y(a).clob=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),i(f,{prop:"double",label:e.$t("model.field.double")},{default:o((()=>[i(g,{modelValue:y(a).double,"onUpdate:modelValue":l[3]||(l[3]=e=>y(a).double=e)},null,8,["modelValue"])])),_:1},8,["label"]),["text","textarea","number","date","color","slider","switch","radio","checkbox","select","multipleSelect"].includes(y(a).type)?(t(),u(f,{key:1,prop:"required",label:e.$t("model.field.showInList")},{default:o((()=>[i(g,{modelValue:y(a).showInList,"onUpdate:modelValue":l[4]||(l[4]=e=>y(a).showInList=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),i(f,{prop:"required",label:e.$t("model.field.required")},{default:o((()=>[i(g,{modelValue:y(a).required,"onUpdate:modelValue":l[5]||(l[5]=e=>y(a).required=e)},null,8,["modelValue"])])),_:1},8,["label"]),["text","textarea","number","select","multipleSelect","videoUpload","audioUpload","fileUpload","tinyEditor"].includes(y(a).type)?(t(),u(f,{key:2,prop:"placeholder",label:e.$t("model.field.placeholder")},{default:o((()=>[i(d,{modelValue:y(a).placeholder,"onUpdate:modelValue":l[6]||(l[6]=e=>y(a).placeholder=e),maxlength:"100"},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["text","textarea"].includes(y(a).type)?(t(),p(r,{key:3},[i(f,{prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i(d,{modelValue:y(a).defaultValue,"onUpdate:modelValue":l[7]||(l[7]=e=>y(a).defaultValue=e),maxlength:"100"},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"minlength",label:e.$t("model.field.minlength")},{default:o((()=>[i(h,{modelValue:y(a).minlength,"onUpdate:modelValue":l[8]||(l[8]=e=>y(a).minlength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"maxlength",label:e.$t("model.field.maxlength")},{default:o((()=>[i(h,{modelValue:y(a).maxlength,"onUpdate:modelValue":l[9]||(l[9]=e=>y(a).maxlength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"])],64)):k("",!0),["textarea"].includes(y(a).type)?(t(),u(f,{key:4,prop:"rows",label:e.$t("model.field.rows")},{default:o((()=>[i(h,{modelValue:y(a).rows,"onUpdate:modelValue":l[10]||(l[10]=e=>y(a).rows=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["number","slider"].includes(y(a).type)?(t(),p(r,{key:5},[i(f,{prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i(h,{modelValue:y(a).defaultValue,"onUpdate:modelValue":l[11]||(l[11]=e=>y(a).defaultValue=e),min:y(a).min,max:y(a).max},null,8,["modelValue","min","max"])])),_:1},8,["label"]),i(f,{prop:"min",label:e.$t("model.field.min")},{default:o((()=>[i(h,{modelValue:y(a).min,"onUpdate:modelValue":l[12]||(l[12]=e=>y(a).min=e)},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"max",label:e.$t("model.field.max")},{default:o((()=>[i(h,{modelValue:y(a).max,"onUpdate:modelValue":l[13]||(l[13]=e=>y(a).max=e)},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"step",label:e.$t("model.field.step")},{default:o((()=>[i(h,{modelValue:y(a).step,"onUpdate:modelValue":l[14]||(l[14]=e=>y(a).step=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):k("",!0),["number"].includes(y(a).type)?(t(),u(f,{key:6,prop:"precision",label:e.$t("model.field.precision")},{default:o((()=>[i(h,{modelValue:y(a).precision,"onUpdate:modelValue":l[15]||(l[15]=e=>y(a).precision=e),precision:0,min:0,max:4},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["slider"].includes(y(a).type)?(t(),u(f,{key:7,prop:"showInput",label:e.$t("model.field.showInput")},{default:o((()=>[i(g,{modelValue:y(a).showInput,"onUpdate:modelValue":l[16]||(l[16]=e=>y(a).showInput=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["date"].includes(y(a).type)?(t(),u(f,{key:8,prop:"dateType",label:e.$t("model.field.dateType")},{default:o((()=>[i($,{modelValue:y(a).dateType,"onUpdate:modelValue":l[17]||(l[17]=e=>y(a).dateType=e)},{default:o((()=>[(t(),p(r,null,s(["date","datetime"],(l=>i(_,{key:l,label:e.$t(`model.field.dateType.${l}`),value:l},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])):k("",!0),["color"].includes(y(a).type)?(t(),u(f,{key:9,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i(w,{modelValue:y(a).defaultValue,"onUpdate:modelValue":l[18]||(l[18]=e=>y(a).defaultValue=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["switch"].includes(y(a).type)?(t(),u(f,{key:10,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i(g,{modelValue:y(a).defaultValue,"onUpdate:modelValue":l[19]||(l[19]=e=>y(a).defaultValue=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["radio","checkbox"].includes(y(a).type)?(t(),u(f,{key:11,prop:"checkStyle",label:e.$t("model.field.checkStyle")},{default:o((()=>[i(x,{modelValue:y(a).checkStyle,"onUpdate:modelValue":l[20]||(l[20]=e=>y(a).checkStyle=e)},{default:o((()=>[(t(),p(r,null,s(["default","button"],(l=>i(U,{key:l,value:l},{default:o((()=>[c(b(e.$t(`model.field.checkStyle.${l}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])):k("",!0),["select","multipleSelect"].includes(y(a).type)?(t(),u(f,{key:12,prop:"clearable",label:e.$t("model.field.clearable")},{default:o((()=>[i(g,{modelValue:y(a).clearable,"onUpdate:modelValue":l[21]||(l[21]=e=>y(a).clearable=e)},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),["radio","checkbox","select","multipleSelect"].includes(y(a).type)?(t(),p(r,{key:13},[i(f,{prop:"dictTypeId",label:e.$t("model.field.dictType"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:o((()=>[i($,{modelValue:y(a).dictTypeId,"onUpdate:modelValue":l[22]||(l[22]=e=>y(a).dictTypeId=e),class:"w-full",onChange:l[23]||(l[23]=e=>(e=>{a.value.defaultValue=a.value.multiple?[]:void 0,a.value.defaultValueKey=a.value.multiple?[]:void 0,a.value.dataType=1===v.value.find((l=>l.id===e))?.dataType?"number":"string"})(e))},{default:o((()=>[(t(!0),p(r,null,s(v.value,(e=>(t(),u(_,{key:e.id,value:e.id,label:`${e.name}(${e.alias})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label","rules"]),i(f,{prop:"dataType",label:e.$t("model.field.dataType")},{default:o((()=>[i($,{modelValue:y(a).dataType,"onUpdate:modelValue":l[24]||(l[24]=e=>y(a).dataType=e),class:"w-full",disabled:""},{default:o((()=>[(t(),p(r,null,s(["string","number"],(l=>i(_,{key:l,value:l,label:e.$t(`model.field.dataType.${l}`)},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):k("",!0),["radio","select"].includes(y(a).type)?(t(),u(f,{key:14,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i($,{modelValue:y(a).defaultValueKey,"onUpdate:modelValue":l[25]||(l[25]=e=>y(a).defaultValueKey=e),clearable:"",class:"w-full",onChange:l[26]||(l[26]=e=>y(a).defaultValue=V.value.find((l=>l.value===e))?.name)},{default:o((()=>[(t(!0),p(r,null,s(V.value,(e=>(t(),u(_,{key:e.id,value:e.value,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):k("",!0),["checkbox","multipleSelect"].includes(y(a).type)?(t(),u(f,{key:15,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:o((()=>[i($,{modelValue:y(a).defaultValueKey,"onUpdate:modelValue":l[27]||(l[27]=e=>y(a).defaultValueKey=e),clearable:"",class:"w-full",multiple:"",onChange:l[28]||(l[28]=e=>y(a).defaultValue=V.value.filter((l=>-1!==e.indexOf(l.value))).map((e=>e.name)))},{default:o((()=>[(t(!0),p(r,null,s(V.value,(e=>(t(),u(_,{key:e.id,value:e.value,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):k("",!0),["imageUpload"].includes(y(a).type)?(t(),p(r,{key:16},[i(f,{prop:"imageWidth",label:e.$t("model.field.imageWidth")},{default:o((()=>[i(h,{modelValue:y(a).imageWidth,"onUpdate:modelValue":l[29]||(l[29]=e=>y(a).imageWidth=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"imageHeight",label:e.$t("model.field.imageHeight")},{default:o((()=>[i(h,{modelValue:y(a).imageHeight,"onUpdate:modelValue":l[30]||(l[30]=e=>y(a).imageHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"imageMode",label:e.$t("model.field.imageMode")},{default:o((()=>[i($,{modelValue:y(a).imageMode,"onUpdate:modelValue":l[31]||(l[31]=e=>y(a).imageMode=e),clearable:"",class:"w-full"},{default:o((()=>[(t(),p(r,null,s(["cut","resize","manual","none"],(l=>i(_,{key:l,value:l,label:e.$t(`model.field.imageMode.${l}`)},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):k("",!0),["imageUpload","videoUpload","audioUpload","fileUpload"].includes(y(a).type)?(t(),p(r,{key:17},[i(f,{prop:"fileAccept"},{label:o((()=>[i(C,{message:"model.field.fileAccept",help:"","fix-width":!1})])),default:o((()=>[i(d,{modelValue:y(a).fileAccept,"onUpdate:modelValue":l[32]||(l[32]=e=>y(a).fileAccept=e),maxlength:"255"},null,8,["modelValue"])])),_:1}),i(f,{prop:"fileMaxSize",rules:{type:"number",min:0,max:65535,message:()=>e.$t("v.range",{min:0,max:65535})}},{label:o((()=>[i(C,{message:"model.field.fileMaxSize",help:"","fix-width":!1})])),default:o((()=>[i(d,{modelValue:y(a).fileMaxSize,"onUpdate:modelValue":l[33]||(l[33]=e=>y(a).fileMaxSize=e),modelModifiers:{number:!0},maxlength:"5"},null,8,["modelValue"])])),_:1},8,["rules"])],64)):k("",!0),["tinyEditor"].includes(y(a).type)?(t(),p(r,{key:18},[i(f,{prop:"minHeight",label:e.$t("model.field.minHeight")},{default:o((()=>[i(h,{modelValue:y(a).minHeight,"onUpdate:modelValue":l[34]||(l[34]=e=>y(a).minHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),i(f,{prop:"maxHeight",label:e.$t("model.field.maxHeight")},{default:o((()=>[i(h,{modelValue:y(a).maxHeight,"onUpdate:modelValue":l[35]||(l[35]=e=>y(a).maxHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"])],64)):k("",!0)],64)}}}),Ie={class:"dialog-full"},je={class:"drag-component"},Fe=["onClick"],He=["onClick"],ze=a({name:"ModelCustomFields",__name:"ModelCustomFields",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e,{emit:l}){const a=e,n=l,{beanId:r,modelValue:s}=f(a),{t:g}=v(),_=d({}),$=d({}),w=d(),M=d(!1),L=d(),W=d(),K=d("attribute"),B=d(!1),A=d([{label:g("model.fieldType.text"),type:"text"},{label:g("model.fieldType.textarea"),type:"textarea"},{label:g("model.fieldType.number"),type:"number"},{label:g("model.fieldType.slider"),type:"slider"},{label:g("model.fieldType.date"),type:"date"},{label:g("model.fieldType.color"),type:"color"},{label:g("model.fieldType.radio"),type:"radio"},{label:g("model.fieldType.checkbox"),type:"checkbox"},{label:g("model.fieldType.select"),type:"select"},{label:g("model.fieldType.multipleSelect"),type:"multipleSelect"},{label:g("model.fieldType.switch"),type:"switch"},{label:g("model.fieldType.imageUpload"),type:"imageUpload"},{label:g("model.fieldType.videoUpload"),type:"videoUpload"},{label:g("model.fieldType.audioUpload"),type:"audioUpload"},{label:g("model.fieldType.fileUpload"),type:"fileUpload"},{label:g("model.fieldType.tinyEditor"),type:"tinyEditor"}]),D=d([]);V(s,(async()=>{s.value&&null!=r?.value&&(_.value=await te(r.value),D.value=JSON.parse(_.value.customs||"[]"),D.value.length>0?[L.value]=D.value:L.value=void 0)}));const J=e=>{const l={code:`field${Date.now()}`,type:e.type,name:e.label,double:!1,dataType:-1!==["number","slider"].indexOf(e.type)?"number":"string",clob:-1!==["tinyEditor"].indexOf(e.type)};return W.value=l,l},N=e=>{e.from!==e.to&&(L.value=W.value)},R=async()=>{B.value=!0;try{D.value.length>0?w.value.validate((async e=>{e&&await ae({..._.value,customs:JSON.stringify(D.value)})})):await ae({..._.value,customs:JSON.stringify(D.value)}),S.success(g("success"))}finally{B.value=!1,n("update:modelValue",!1)}};return(l,a)=>{const d=I,n=_e,r=x,s=$e,f=m,v=H,V=j,g=h,_=we,S=he,W=O,Q=E,P=q;return t(),p("div",Ie,[i(P,{title:l.$t("model.fun.customFields"),"model-value":e.modelValue,"destroy-on-close":"",fullscreen:"","onUpdate:modelValue":a[3]||(a[3]=e=>l.$emit("update:modelValue",e))},{default:o((()=>[i(S,{class:"border-t",style:{height:"calc(100vh - 65px)"}},{default:o((()=>[i(n,{width:"240px"},{default:o((()=>[i(d,{class:"h-full"},{default:o((()=>[i(y(ke),{list:A.value,group:{name:"components",pull:"clone",put:!1},sort:!1,clone:J,"item-key":"label",onEnd:N},{item:o((({element:e})=>[U("div",je,b(e.label),1)])),_:1},8,["list"])])),_:1})])),_:1}),i(S,{class:"border-l border-r"},{default:o((()=>[i(s,{height:"auto",class:"px-2 py-1"},{default:o((()=>[i(r,{loading:B.value,type:"primary",onClick:T(R,["prevent"])},{default:o((()=>[c(b(l.$t("save")),1)])),_:1},8,["loading"])])),_:1}),i(_,{class:"p-0 border-t"},{default:o((()=>[i(d,{class:"h-full p-2 drawing-board"},{default:o((()=>[i(g,{model:$.value,"label-width":"150px",class:"h-full"},{default:o((()=>[i(y(ke),{list:D.value,class:"content-start min-h-full mx-0",tag:"el-row","component-data":{gutter:8},animation:250,group:"components","item-key":"code",onStart:a[0]||(a[0]=()=>M.value=!0),onEnd:a[1]||(a[1]=()=>M.value=!1)},{item:o((({element:e})=>[i(V,{span:e.double?12:24,class:"relative"},{default:o((()=>[i(f,{required:e.required,"show-message":!1,class:"py-3 mb-0"},{label:o((()=>[i(C,{label:e.name},null,8,["label"])])),default:o((()=>[i(xe,{modelValue:e.defaultValue,"onUpdate:modelValue":l=>e.defaultValue=l,"model-key":e.defaultValueKey,"onUpdate:modelKey":l=>e.defaultValueKey=l,field:e},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])])),_:2},1032,["required"]),U("div",{class:F(["drag-mask",M.value||L.value===e?null:"hover:opacity-10",L.value===e?"drag-mask-selected":null]),onClick:()=>(async e=>{L.value?w.value.validate((l=>{l&&(L.value=e)})):L.value=e})(e)},null,10,Fe),U("div",{class:F(["drag-close",L.value!==e?"hidden":null]),onClick:()=>(e=>{const l=D.value.indexOf(e);D.value.splice(l,1);const{length:a}=D.value;L.value=a<=0?void 0:l<a?D.value[l]:D.value[a-1]})(e)},[i(v,{class:"text-danger"},{default:o((()=>[i(y(z))])),_:1})],10,He)])),_:2},1032,["span"])])),_:1},8,["list"])])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),i(n,{class:"w-64 right-panel"},{default:o((()=>[i(d,{class:"h-full pt-0.5 pb-3"},{default:o((()=>[i(Q,{modelValue:K.value,"onUpdate:modelValue":a[2]||(a[2]=e=>K.value=e),stretch:""},{default:o((()=>[i(W,{label:l.$t("model.attribute"),name:"attribute",class:"px-2"},{default:o((()=>[i(g,{ref_key:"selectedForm",ref:w,model:L.value},{default:o((()=>[L.value?(t(),u(Ce,{key:0,selected:L.value},null,8,["selected"])):k("",!0)])),_:1},8,["model"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["title","model-value"])])}}}),Ee=L(ze,[["__scopeId","data-v-bca848c2"]]),Oe={class:"mb-3"},Le={class:"app-block"};e("default",a({name:"ModelList",__name:"ModelList",setup(e){const{t:l}=v(),a=d({}),m=d("article"),n=d(),f=d(),V=d([]),g=d([]),h=d(!1),w=d(!1),T=d(!1),q=d(!1),M=d(),C=W((()=>V.value.map((e=>e.id)))),I=d(!1),j=async()=>{h.value=!0;try{V.value=await oe({...B(a.value),type:m.value,Q_OrderBy:n.value}),I.value=Object.values(a.value).filter((e=>void 0!==e&&""!==e)).length>0||void 0!==n.value}finally{h.value=!1}};K(j);const F=({column:e,prop:l,order:a})=>{n.value=l&&a?(e.sortBy??l)+("descending"===a?"_desc":""):void 0,j()},H=()=>j(),z=()=>{f.value.clearSort(),A(a.value),n.value=void 0,j()},E=e=>{M.value=e,w.value=!0},O=async e=>{await le(e),j(),S.success(l("success"))},L=e=>e.id>10;return(e,l)=>{const d=x,n=ee,v=Y,S=G,W=$,K=Z,B=_,A=P;return t(),p("div",null,[U("div",Oe,[i(y(ne),{params:a.value,onSearch:H,onReset:z},{default:o((()=>[i(y(me),{label:e.$t("model.name"),name:"Q_Contains_name"},null,8,["label"])])),_:1},8,["params"])]),U("div",null,[i(d,{type:"primary",disabled:y(J)("model:create"),icon:y(D),onClick:l[0]||(l[0]=()=>(M.value=void 0,void(w.value=!0)))},{default:o((()=>[c(b(e.$t("add")),1)])),_:1},8,["disabled","icon"]),i(n,{title:e.$t("confirmDelete"),onConfirm:l[1]||(l[1]=()=>O(g.value.map((e=>e.id))))},{reference:o((()=>[i(d,{disabled:g.value.length<=0||y(J)("model:delete"),icon:y(N)},{default:o((()=>[c(b(e.$t("delete")),1)])),_:1},8,["disabled","icon"])])),_:1},8,["title"]),i(se,{disabled:g.value.length<=0||I.value||y(J)("org:update"),class:"ml-2",onMove:l[2]||(l[2]=e=>(async(e,l)=>{const a=R(e,V.value,l);await ie(a.map((e=>e.id)))})(g.value,e))},null,8,["disabled"]),i(y(pe),{name:"model",class:"ml-2"})]),i(S,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),class:"mt-3",onChange:l[4]||(l[4]=()=>j())},{default:o((()=>[(t(),p(r,null,s(["article","channel","form","site","global"],(l=>i(v,{key:l,value:l},{default:o((()=>[c(b(e.$t(`model.type.${l}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"]),U("div",Le,[Q((t(),u(B,{ref_key:"table",ref:f,data:V.value,onSelectionChange:l[5]||(l[5]=e=>g.value=e),onRowDblclick:l[6]||(l[6]=e=>E(e.id)),onSortChange:F},{default:o((()=>[i(y(re),{name:"model"},{default:o((()=>[i(W,{type:"selection",selectable:L,width:"45"}),i(W,{property:"id",label:"ID",width:"170",sortable:"custom"}),i(W,{property:"name",label:e.$t("model.name"),sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),i(W,{property:"type",label:e.$t("model.type"),sortable:"custom",formatter:l=>e.$t(`model.type.${l.type}`)},null,8,["label","formatter"]),i(W,{property:"scope",label:e.$t("model.scope"),sortable:"custom"},{default:o((({row:l})=>[2===l.scope?(t(),u(K,{key:0,type:"success",size:"small"},{default:o((()=>[c(b(e.$t(`model.scope.${l.scope}`)),1)])),_:2},1024)):(t(),u(K,{key:1,type:"info",size:"small"},{default:o((()=>[c(b(e.$t(`model.scope.${l.scope}`)),1)])),_:2},1024))])),_:1},8,["label"]),i(W,{label:e.$t("table.action")},{default:o((({row:l})=>[i(d,{type:"primary",disabled:y(J)("model:update"),size:"small",link:"",onClick:()=>E(l.id)},{default:o((()=>[c(b(e.$t("edit")),1)])),_:2},1032,["disabled","onClick"]),["form","global","site"].includes(l.type)?k("",!0):(t(),u(d,{key:0,type:"primary",disabled:y(J)("model:update"),size:"small",link:"",onClick:()=>{return e=l.id,M.value=e,void(T.value=!0);var e}},{default:o((()=>[c(b(e.$t("model.fun.systemFields")),1)])),_:2},1032,["disabled","onClick"])),i(d,{type:"primary",disabled:y(J)("model:update"),size:"small",link:"",onClick:()=>{return e=l.id,M.value=e,void(q.value=!0);var e}},{default:o((()=>[c(b(e.$t("model.fun.customFields")),1)])),_:2},1032,["disabled","onClick"]),L(l)?(t(),u(n,{key:1,title:e.$t("confirmDelete"),onConfirm:()=>O([l.id])},{reference:o((()=>[i(d,{type:"primary",disabled:y(J)("model:delete"),size:"small",link:""},{default:o((()=>[c(b(e.$t("delete")),1)])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):k("",!0)])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[A,h.value]])]),i(Se,{modelValue:w.value,"onUpdate:modelValue":l[7]||(l[7]=e=>w.value=e),"bean-id":M.value,"bean-ids":C.value,"model-type":m.value,onFinished:j},null,8,["modelValue","bean-id","bean-ids","model-type"]),i(Me,{modelValue:T.value,"onUpdate:modelValue":l[8]||(l[8]=e=>T.value=e),"bean-id":M.value},null,8,["modelValue","bean-id"]),i(Ee,{modelValue:q.value,"onUpdate:modelValue":l[9]||(l[9]=e=>q.value=e),"bean-id":M.value},null,8,["modelValue","bean-id"])])}}}))}}}));
