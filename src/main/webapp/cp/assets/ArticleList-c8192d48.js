import{d as an,p as Xt,u as En,r as Q,a1 as Je,a2 as Xr,v as bn,a3 as Kn,a as J,c as D,I as Ne,h as m,w as h,j as Ae,a4 as $t,l as Xn,i as C,a5 as ks,a6 as Cs,a7 as Qr,k as z,t as q,g as se,a8 as Zr,a9 as Jr,e as F,aa as ea,E as _t,ab as ta,_ as ai,ac as rt,ad as ot,W as Rs,ae as na,af as Ns,ag as Is,ah as ke,ai as Ds,aj as Ps,ak as Ms,al as Ls,am as Bs,an as $s,ao as Ln,ap as ur,aq as Be,ar as Os,P as mn,as as Vs,at as Fs,b as ia,f as Qn,U as Bt,au as Us,o as qs,av as js,aw as zs,ax as Ws,ay as Hs,az as Gs,aA as Ys,aB as Ks}from"./index-0b297134.js";import{x as Xs,h as Qs,d as Zs,B as vi,r as Js,f as cr,T as eo}from"./TuiEditor-64a053b8.js";import{t as Zn,d as to,a as dr}from"./tree-73f11865.js";import{i as no,f as io,q as ro,a as ao}from"./config-a46f2ebe.js";import{j as so,a as oo,q as ra,c as pr,u as lo,b as aa,d as uo,e as co,f as po,g as Vi,h as fo,p as ho,r as mo,i as sa,s as oa,k as la,o as ua,l as yo,m as vo,n as go,t as bo,v as fr}from"./content-36f9a437.js";import{_ as wo,a as Fe,b as Eo,c as xo}from"./QueryItem.vue_vue_type_script_setup_true_lang-a71c7d8e.js";import{v as _o,a as So,q as Ao,b as To}from"./system-40d42734.js";import{a as hr,m as mr,g as yr}from"./data-1f7ec94e.js";import{_ as vr}from"./FieldItem.vue_vue_type_script_setup_true_lang-e8b03176.js";import{_ as ko}from"./DialogForm.vue_vue_type_script_setup_true_lang-99772bc8.js";import{T as Co}from"./Tinymce-0c80a6ea.js";import{I as Ro,a as No}from"./FileListUpload.vue_vue_type_style_index_0_scoped_cd89d899_lang-19312f37.js";import{d as Io}from"./vuedraggable.umd-be79d1d8.js";import{B as fn}from"./BaseUpload-57db687e.js";import{_ as Do,a as Po}from"./BlockItemForm.vue_vue_type_script_setup_true_lang-37df7ff5.js";import"./index-aa008802.js";/* empty css                                                                   */var Z;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(Z||(Z={}));var N;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"})(N||(N={}));function gt(e){return e===Z.Space||e===Z.NewLine||e===Z.Tab||e===Z.FormFeed||e===Z.CarriageReturn}function Bn(e){return e===Z.Slash||e===Z.Gt||gt(e)}function gr(e){return e>=Z.Zero&&e<=Z.Nine}function Mo(e){return e>=Z.LowerA&&e<=Z.LowerZ||e>=Z.UpperA&&e<=Z.UpperZ}function Lo(e){return e>=Z.UpperA&&e<=Z.UpperF||e>=Z.LowerA&&e<=Z.LowerF}var ft;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(ft||(ft={}));const Ye={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class Bo{constructor({xmlMode:t=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=N.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=N.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=t,this.decodeEntities=n,this.entityTrie=t?Xs:Qs}reset(){this.state=N.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=N.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(t){t===Z.Lt||!this.decodeEntities&&this.fastForwardTo(Z.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=N.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===Z.Amp&&(this.state=N.BeforeEntity)}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?Bn(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=N.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===Z.Gt||gt(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ye.TitleEnd?this.decodeEntities&&t===Z.Amp&&(this.state=N.BeforeEntity):this.fastForwardTo(Z.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===Z.Lt)}stateCDATASequence(t){t===Ye.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ye.Cdata.length&&(this.state=N.InCommentLike,this.currentSequence=Ye.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=N.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ye.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=N.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!Bn(t):Mo(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=N.SpecialStartSequence}stateBeforeTagName(t){if(t===Z.ExclamationMark)this.state=N.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===Z.Questionmark)this.state=N.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,!this.xmlMode&&n===Ye.TitleEnd[2]?this.startSpecial(Ye.TitleEnd,3):this.state=!this.xmlMode&&n===Ye.ScriptEnd[2]?N.BeforeSpecialS:N.InTagName}else t===Z.Slash?this.state=N.BeforeClosingTagName:(this.state=N.Text,this.stateText(t))}stateInTagName(t){Bn(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=N.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){gt(t)||(t===Z.Gt?this.state=N.Text:(this.state=this.isTagStartChar(t)?N.InClosingTagName:N.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===Z.Gt||gt(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=N.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===Z.Gt||this.fastForwardTo(Z.Gt))&&(this.state=N.Text,this.baseState=N.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===Z.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=N.InSpecialTag,this.sequenceIndex=0):this.state=N.Text,this.baseState=this.state,this.sectionStart=this.index+1):t===Z.Slash?this.state=N.InSelfClosingTag:gt(t)||(this.state=N.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===Z.Gt?(this.cbs.onselfclosingtag(this.index),this.state=N.Text,this.baseState=N.Text,this.sectionStart=this.index+1,this.isSpecial=!1):gt(t)||(this.state=N.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===Z.Eq||Bn(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=N.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===Z.Eq?this.state=N.BeforeAttributeValue:t===Z.Slash||t===Z.Gt?(this.cbs.onattribend(ft.NoValue,this.index),this.state=N.BeforeAttributeName,this.stateBeforeAttributeName(t)):gt(t)||(this.cbs.onattribend(ft.NoValue,this.index),this.state=N.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===Z.DoubleQuote?(this.state=N.InAttributeValueDq,this.sectionStart=this.index+1):t===Z.SingleQuote?(this.state=N.InAttributeValueSq,this.sectionStart=this.index+1):gt(t)||(this.sectionStart=this.index,this.state=N.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===Z.DoubleQuote?ft.Double:ft.Single,this.index),this.state=N.BeforeAttributeName):this.decodeEntities&&t===Z.Amp&&(this.baseState=this.state,this.state=N.BeforeEntity)}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,Z.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,Z.SingleQuote)}stateInAttributeValueNoQuotes(t){gt(t)||t===Z.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ft.Unquoted,this.index),this.state=N.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===Z.Amp&&(this.baseState=this.state,this.state=N.BeforeEntity)}stateBeforeDeclaration(t){t===Z.OpeningSquareBracket?(this.state=N.CDATASequence,this.sequenceIndex=0):this.state=t===Z.Dash?N.BeforeComment:N.InDeclaration}stateInDeclaration(t){(t===Z.Gt||this.fastForwardTo(Z.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=N.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===Z.Gt||this.fastForwardTo(Z.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=N.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===Z.Dash?(this.state=N.InCommentLike,this.currentSequence=Ye.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=N.InDeclaration}stateInSpecialComment(t){(t===Z.Gt||this.fastForwardTo(Z.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=N.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===Ye.ScriptEnd[3]?this.startSpecial(Ye.ScriptEnd,4):n===Ye.StyleEnd[3]?this.startSpecial(Ye.StyleEnd,4):(this.state=N.InTagName,this.stateInTagName(t))}stateBeforeEntity(t){this.entityExcess=1,this.entityResult=0,t===Z.Number?this.state=N.BeforeNumericEntity:t===Z.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=N.InNamedEntity,this.stateInNamedEntity(t))}stateInNamedEntity(t){if(this.entityExcess+=1,this.trieIndex=Zs(this.entityTrie,this.trieCurrent,this.trieIndex+1,t),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&vi.VALUE_LENGTH;if(n){const i=(n>>14)-1;if(!this.allowLegacyEntity()&&t!==Z.Semi)this.trieIndex+=i;else{const r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,i===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&vi.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~vi.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(t){(t|32)===Z.LowerX?(this.entityExcess++,this.state=N.InHexEntity):(this.state=N.InNumericEntity,this.stateInNumericEntity(t))}emitNumericEntity(t){const n=this.index-this.entityExcess-1;n+2+ +(this.state===N.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(t),this.emitCodePoint(Js(this.entityResult))),this.state=this.baseState}stateInNumericEntity(t){t===Z.Semi?this.emitNumericEntity(!0):gr(t)?(this.entityResult=this.entityResult*10+(t-Z.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(t){t===Z.Semi?this.emitNumericEntity(!0):gr(t)?(this.entityResult=this.entityResult*16+(t-Z.Zero),this.entityExcess++):Lo(t)?(this.entityResult=this.entityResult*16+((t|32)-Z.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===N.Text||this.baseState===N.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===N.Text||this.state===N.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===N.InAttributeValueDq||this.state===N.InAttributeValueSq||this.state===N.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case N.Text:{this.stateText(t);break}case N.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case N.InSpecialTag:{this.stateInSpecialTag(t);break}case N.CDATASequence:{this.stateCDATASequence(t);break}case N.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case N.InAttributeName:{this.stateInAttributeName(t);break}case N.InCommentLike:{this.stateInCommentLike(t);break}case N.InSpecialComment:{this.stateInSpecialComment(t);break}case N.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case N.InTagName:{this.stateInTagName(t);break}case N.InClosingTagName:{this.stateInClosingTagName(t);break}case N.BeforeTagName:{this.stateBeforeTagName(t);break}case N.AfterAttributeName:{this.stateAfterAttributeName(t);break}case N.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case N.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case N.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case N.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case N.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case N.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case N.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case N.InDeclaration:{this.stateInDeclaration(t);break}case N.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case N.BeforeComment:{this.stateBeforeComment(t);break}case N.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case N.InNamedEntity:{this.stateInNamedEntity(t);break}case N.BeforeEntity:{this.stateBeforeEntity(t);break}case N.InHexEntity:{this.stateInHexEntity(t);break}case N.InNumericEntity:{this.stateInNumericEntity(t);break}default:this.stateBeforeNumericEntity(t)}this.index++}this.cleanup()}finish(){this.state===N.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.state===N.InCommentLike?this.currentSequence===Ye.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===N.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===N.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===N.InTagName||this.state===N.BeforeAttributeName||this.state===N.BeforeAttributeValue||this.state===N.AfterAttributeName||this.state===N.InAttributeName||this.state===N.InAttributeValueSq||this.state===N.InAttributeValueDq||this.state===N.InAttributeValueNq||this.state===N.InClosingTagName||this.cbs.ontext(this.sectionStart,t)}emitPartial(t,n){this.baseState!==N.Text&&this.baseState!==N.InSpecialTag?this.cbs.onattribdata(t,n):this.cbs.ontext(t,n)}emitCodePoint(t){this.baseState!==N.Text&&this.baseState!==N.InSpecialTag?this.cbs.onattribentity(t):this.cbs.ontextentity(t)}}const Gt=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Se=new Set(["p"]),br=new Set(["thead","tbody"]),wr=new Set(["dd","dt"]),Er=new Set(["rt","rp"]),$o=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Se],["h1",Se],["h2",Se],["h3",Se],["h4",Se],["h5",Se],["h6",Se],["select",Gt],["input",Gt],["output",Gt],["button",Gt],["datalist",Gt],["textarea",Gt],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",wr],["dt",wr],["address",Se],["article",Se],["aside",Se],["blockquote",Se],["details",Se],["div",Se],["dl",Se],["fieldset",Se],["figcaption",Se],["figure",Se],["footer",Se],["form",Se],["header",Se],["hr",Se],["main",Se],["nav",Se],["ol",Se],["pre",Se],["section",Se],["table",Se],["ul",Se],["rt",Er],["rp",Er],["tbody",br],["tfoot",br]]),Oo=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),xr=new Set(["math","svg"]),_r=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Vo=/\s|\//;let Fo=class{constructor(t,n={}){var i,r,a,o,l;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:!n.xmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:!n.xmlMode,this.tokenizer=new((a=n.Tokenizer)!==null&&a!==void 0?a:Bo)(this.options,this),(l=(o=this.cbs).onparserinit)===null||l===void 0||l.call(o,this)}ontext(t,n){var i,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n}ontextentity(t){var n,i;const r=this.tokenizer.getSectionStart();this.endIndex=r-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,cr(t)),this.startIndex=r}isVoidElement(t){return!this.options.xmlMode&&Oo.has(t)}onopentagname(t,n){this.endIndex=n;let i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;const o=!this.options.xmlMode&&$o.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){const l=this.stack.pop();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,l,!0)}this.isVoidElement(t)||(this.stack.push(t),xr.has(t)?this.foreignContext.push(!0):_r.has(t)&&this.foreignContext.push(!1)),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var i,r,a,o,l,d;this.endIndex=n;let b=this.getSlice(t,n);if(this.lowerCaseTagNames&&(b=b.toLowerCase()),(xr.has(b)||_r.has(b))&&this.foreignContext.pop(),this.isVoidElement(b))!this.options.xmlMode&&b==="br"&&((r=(i=this.cbs).onopentagname)===null||r===void 0||r.call(i,"br"),(o=(a=this.cbs).onopentag)===null||o===void 0||o.call(a,"br",{},!0),(d=(l=this.cbs).onclosetag)===null||d===void 0||d.call(l,"br",!1));else{const c=this.stack.lastIndexOf(b);if(c!==-1)if(this.cbs.onclosetag){let _=this.stack.length-c;for(;_--;)this.cbs.onclosetag(this.stack.pop(),_!==0)}else this.stack.length=c;else!this.options.xmlMode&&b==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,i;const r=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.pop())}onattribname(t,n){this.startIndex=t;const i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=cr(t)}onattribend(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===ft.Double?'"':t===ft.Single?"'":t===ft.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(Vo);let i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction(`!${r}`,`!${i}`)}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction(`?${r}`,`?${i}`)}this.startIndex=n+1}oncomment(t,n,i){var r,a,o,l;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(l=(o=this.cbs).oncommentend)===null||l===void 0||l.call(o),this.startIndex=n+1}oncdata(t,n,i){var r,a,o,l,d,b,c,_,I,K;this.endIndex=n;const X=this.getSlice(t,n-i);this.options.xmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(l=(o=this.cbs).ontext)===null||l===void 0||l.call(o,X),(b=(d=this.cbs).oncdataend)===null||b===void 0||b.call(d)):((_=(c=this.cbs).oncomment)===null||_===void 0||_.call(c,`[CDATA[${X}]]`),(K=(I=this.cbs).oncommentend)===null||K===void 0||K.call(I)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};var we;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(we||(we={}));function Uo(e){return e.type===we.Tag||e.type===we.Script||e.type===we.Style}we.Root;we.Text;we.Directive;we.Comment;we.Script;we.Style;we.Tag;we.CDATA;we.Doctype;class ca{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return ma(this,t)}}class Fi extends ca{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}let Si=class extends Fi{constructor(){super(...arguments),this.type=we.Text}get nodeType(){return 3}};class da extends Fi{constructor(){super(...arguments),this.type=we.Comment}get nodeType(){return 8}}class pa extends Fi{constructor(t,n){super(n),this.name=t,this.type=we.Directive}get nodeType(){return 1}}class Ui extends ca{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class fa extends Ui{constructor(){super(...arguments),this.type=we.CDATA}get nodeType(){return 4}}class Ai extends Ui{constructor(){super(...arguments),this.type=we.Root}get nodeType(){return 9}}class ha extends Ui{constructor(t,n,i=[],r=t==="script"?we.Script:t==="style"?we.Style:we.Tag){super(i),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,i;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[t]}})}}function jn(e){return Uo(e)}function qo(e){return e.type===we.CDATA}function Ti(e){return e.type===we.Text}function jo(e){return e.type===we.Comment}function zo(e){return e.type===we.Directive}function Wo(e){return e.type===we.Root}function Ho(e){return Object.prototype.hasOwnProperty.call(e,"children")}function ma(e,t=!1){let n;if(Ti(e))n=new Si(e.data);else if(jo(e))n=new da(e.data);else if(jn(e)){const i=t?gi(e.children):[],r=new ha(e.name,{...e.attribs},i);i.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(qo(e)){const i=t?gi(e.children):[],r=new fa(i);i.forEach(a=>a.parent=r),n=r}else if(Wo(e)){const i=t?gi(e.children):[],r=new Ai(i);i.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(zo(e)){const i=new pa(e.name,e.data);e["x-name"]!=null&&(i["x-name"]=e["x-name"],i["x-publicId"]=e["x-publicId"],i["x-systemId"]=e["x-systemId"]),n=i}else throw new Error(`Not implemented yet: ${e.type}`);return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function gi(e){const t=e.map(n=>ma(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const Sr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Go{constructor(t,n,i){this.dom=[],this.root=new Ai(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=Sr),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:Sr,this.elementCB=i!=null?i:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Ai(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const i=this.options.xmlMode?we.Tag:void 0,r=new ha(t,n,void 0,i);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===we.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new Si(t);this.addNode(i),this.lastNode=i}}oncomment(t){if(this.lastNode&&this.lastNode.type===we.Comment){this.lastNode.data+=t;return}const n=new da(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Si(""),n=new fa([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const i=new pa(t,n);this.addNode(i)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),i&&(t.prev=i,i.next=t),t.parent=n,this.lastNode=null}}function ya(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function Yo(e,t,n=!0,i=1/0){return Ko(e,Array.isArray(t)?t:[t],n,i)}function Ko(e,t,n,i){const r=[],a=[t],o=[0];for(;;){if(o[0]>=a[0].length){if(o.length===1)return r;a.shift(),o.shift();continue}const l=a[0][o[0]++];if(e(l)&&(r.push(l),--i<=0))return r;n&&Ho(l)&&l.children.length>0&&(o.unshift(0),a.unshift(l.children))}}const Xo={tag_name(e){return typeof e=="function"?t=>jn(t)&&e(t.name):e==="*"?jn:t=>jn(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>Ti(t)&&e(t.data):t=>Ti(t)&&t.data===e}};function va(e,t,n=!0,i=1/0){return Yo(Xo.tag_name(e),t,n,i)}function ga(e,t){const n=new Go(void 0,t);return new Fo(n,t).end(e),n.root}const Qo={class:"el-upload-list__item is-success"},Zo=["src"],Jo={key:0,class:"ml-2"},el={key:1,class:"el-upload--picture-card"},tl=["src"],Ar=300,Tr=300,nl=an({__name:"ImageListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},maxWidth:{type:Number,default:null},maxHeight:{type:Number,default:null},listType:{type:String,default:"pictureCard"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,{modelValue:i,maxWidth:r,maxHeight:a,fileAccept:o,fileMaxSize:l}=Xt(n),{t:d}=En(),b=Q(!1),c=Q({}),_=Q({}),I=Q(!1),K=Q(!1),X=Q({src:"data:;base64,="}),ne=Je({get:()=>i.value,set:k=>t("update:modelValue",k)}),{formItem:ie}=Xr();bn(ne,()=>{var k;(k=ie==null?void 0:ie.validate)==null||k.call(ie,"change").catch(T=>{})},{deep:!0});const Y=k=>{X.value=k,I.value=!0},S=()=>{const k={isWatermark:!0,thumbnailWidth:Ar,thumbnailHeight:Tr};return(r==null?void 0:r.value)!=null&&(k.maxWidth=r.value),(a==null?void 0:a.value)!=null&&(k.maxHeight=a.value),k},y=Je(()=>{var k;return(k=o==null?void 0:o.value)!=null?k:Kn.imageInputAccept}),E=Je(()=>{var k;return(k=l==null?void 0:l.value)!=null?k:Kn.imageLimitByte}),L=k=>E.value>0&&k.size>E.value?(_t.error(d("error.fileMaxSize",{size:`${E.value/1024/1024} MB`})),!1):!0,O=k=>{ta(JSON.parse(k.message))};return(k,T)=>{const x=J("el-icon"),P=J("el-input"),G=J("el-progress"),W=J("el-upload"),B=J("el-dialog");return D(),Ne("div",null,[m(C(Io),{list:ne.value,tag:"ul","item-key":"url",animation:250,class:$t(["el-upload-list",[e.listType==="picture"?"el-upload-list--picture":"el-upload-list--picture-card",{"is-disabled":e.disabled}]]),onStart:T[1]||(T[1]=()=>b.value=!0),onEnd:T[2]||(T[2]=()=>b.value=!1)},{item:h(({element:U})=>[Ae("li",Qo,[Ae("div",{class:$t([e.listType==="picture"?["w-32","h-32"]:["w-full","h-full"],"bg-gray-50 flex justify-center items-center relative"])},[Ae("img",{class:"max-w-full max-h-full block",src:U.url,alt:""},null,8,Zo),Ae("div",{class:$t(["full-flex-center absolute rounded-md cursor-move bg-black bg-opacity-50 opacity-0 space-x-4",b.value?void 0:"hover:opacity-100"]),onClick:T[0]||(T[0]=Xn(()=>{},["stop"]))},[m(x,{class:"image-action",title:k.$t("cropImage"),onClick:()=>(K.value=!0,_.value=U)},{default:h(()=>[m(C(ks))]),_:2},1032,["title","onClick"]),m(x,{class:"image-action",title:k.$t("previewImage"),onClick:()=>Y(U)},{default:h(()=>[m(C(Cs))]),_:2},1032,["title","onClick"]),m(x,{class:"image-action",title:k.$t("deleteImage"),onClick:()=>ne.value.splice(ne.value.indexOf(U),1)},{default:h(()=>[m(C(Qr))]),_:2},1032,["title","onClick"])],2)],2),e.listType==="picture"?(D(),Ne("div",Jo,[m(P,{modelValue:U.url,"onUpdate:modelValue":Re=>U.url=Re,placeholder:"URL",maxlength:"255"},{prepend:h(()=>[z("URL")]),_:2},1032,["modelValue","onUpdate:modelValue"]),m(P,{modelValue:U.name,"onUpdate:modelValue":Re=>U.name=Re,placeholder:k.$t("article.imageList.name"),class:"mt-1"},{prepend:h(()=>[z(q(k.$t("article.imageList.name")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),m(P,{modelValue:U.description,"onUpdate:modelValue":Re=>U.description=Re,type:"textarea",rows:2,placeholder:k.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):se("",!0)])]),footer:h(()=>[m(W,{action:C(no),headers:{...C(Zr)(),...C(Jr)()},data:S(),accept:y.value,"before-upload":L,"on-success":(U,Re)=>ne.value.push({name:U.name,url:U.url}),"on-progress":(U,Re)=>c.value=Re,"on-error":O,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:h(()=>[c.value.status==="uploading"?(D(),F(G,{key:0,type:"circle",percentage:parseInt(c.value.percentage,10)},null,8,["percentage"])):(D(),Ne("div",el,[m(x,null,{default:h(()=>[m(C(ea))]),_:1})]))]),_:1},8,["action","headers","data","accept","on-success","on-progress","disabled"])]),_:1},8,["list","class"]),Ae("div",null,[m(B,{modelValue:I.value,"onUpdate:modelValue":T[6]||(T[6]=U=>I.value=U),top:"5vh",width:768},{default:h(()=>[m(P,{modelValue:X.value.url,"onUpdate:modelValue":T[3]||(T[3]=U=>X.value.url=U),maxlength:"255"},{prepend:h(()=>[z("URL")]),_:1},8,["modelValue"]),e.listType!=="picture"?(D(),F(P,{key:0,modelValue:X.value.name,"onUpdate:modelValue":T[4]||(T[4]=U=>X.value.name=U),placeholder:k.$t("article.imageList.name"),class:"mt-1"},{prepend:h(()=>[z(q(k.$t("article.imageList.name")),1)]),_:1},8,["modelValue","placeholder"])):se("",!0),e.listType!=="picture"?(D(),F(P,{key:1,modelValue:X.value.description,"onUpdate:modelValue":T[5]||(T[5]=U=>X.value.description=U),type:"textarea",rows:2,placeholder:k.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","placeholder"])):se("",!0),Ae("img",{src:X.value.url,alt:"",class:"mt-1 border border-gray-300"},null,8,tl)]),_:1},8,["modelValue"])]),m(Ro,{modelValue:K.value,"onUpdate:modelValue":T[7]||(T[7]=U=>K.value=U),src:_.value.url,"thumbnail-width":Ar,"thumbnail-height":Tr,onSuccess:T[8]||(T[8]=U=>_.value.url=U)},null,8,["modelValue","src"])])}}}),il=ai(nl,[["__scopeId","data-v-90f4f252"]]),rl={class:"w-full"},al=["onClick"],sl={class:"el-upload-list__item-status-label"},ol=an({__name:"FileListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,{fileAccept:i,fileMaxSize:r}=Xt(n),{t:a}=En(),{modelValue:o}=Xt(n),l=Q({}),d=Je({get:()=>o.value,set:y=>t("update:modelValue",y)}),{formItem:b}=Xr();bn(d,()=>{var y;(y=b==null?void 0:b.validate)==null||y.call(b,"change").catch(E=>{})},{deep:!0});const c=Q(!1),_=Q({}),I=Q(),K=y=>{_.value=y,c.value=!0},X=()=>{I.value.validate(async y=>{y&&(c.value=!1)})},ne=Je(()=>{var y;return(y=i==null?void 0:i.value)!=null?y:Kn.fileInputAccept}),ie=Je(()=>{var y;return(y=r==null?void 0:r.value)!=null?y:Kn.fileLimitByte}),Y=y=>ie.value>0&&y.size>ie.value?(_t.error(a("error.fileMaxSize",{size:`${ie.value/1024/1024} MB`})),!1):!0,S=y=>{ta(JSON.parse(y.message))};return(y,E)=>{const L=J("el-upload"),O=J("el-progress"),k=J("el-icon"),T=J("el-input"),x=J("el-form-item"),P=J("el-button"),G=J("el-form"),W=J("el-dialog");return D(),Ne("div",rl,[m(L,{action:C(io),headers:{...C(Zr)(),...C(Jr)()},accept:ne.value,"before-upload":Y,"on-success":B=>d.value.push({name:B.name,url:B.url,length:B.size}),"on-progress":(B,U)=>l.value=U,"on-error":S,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:h(()=>[z(q(y.$t("clickOrDragToUpload"))+" ",1)]),_:1},8,["action","headers","accept","on-success","on-progress","disabled"]),l.value.status==="uploading"?(D(),F(O,{key:0,percentage:parseInt(l.value.percentage,10)},null,8,["percentage"])):se("",!0),m(Is,{tag:"ul",class:$t(["el-upload-list","el-upload-list--text",{"is-disabled":e.disabled}]),name:"el-list"},{default:h(()=>[(D(!0),Ne(rt,null,ot(d.value,B=>(D(),Ne("li",{key:B.url,class:"el-upload-list__item is-success"},[Ae("a",{class:"el-upload-list__item-name",onClick:()=>K(B)},[m(k,{class:"el-icon--document"},{default:h(()=>[m(C(Rs))]),_:1}),z(q(B.name),1)],8,al),Ae("label",sl,[m(k,{class:"el-icon--upload-success el-icon--circle-check"},{default:h(()=>[m(C(na))]),_:1})]),e.disabled?se("",!0):(D(),F(k,{key:0,class:"el-icon--close",onClick:()=>d.value.splice(d.value.indexOf(B),1)},{default:h(()=>[m(C(Ns))]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["class"]),m(W,{modelValue:c.value,"onUpdate:modelValue":E[4]||(E[4]=B=>c.value=B),title:y.$t("article.fileList.attribute"),top:"5vh",width:768,"append-to-body":""},{default:h(()=>[m(G,{ref_key:"form",ref:I,model:_.value,"label-width":"150px"},{default:h(()=>[m(x,{prop:"name",label:y.$t("name"),rules:{required:!0,message:()=>y.$t("v.required")}},{default:h(()=>[m(T,{modelValue:_.value.name,"onUpdate:modelValue":E[0]||(E[0]=B=>_.value.name=B),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","rules"]),m(x,{prop:"length",label:y.$t("size"),rules:{required:!0,message:()=>y.$t("v.required")}},{default:h(()=>[m(T,{modelValue:_.value.length,"onUpdate:modelValue":E[1]||(E[1]=B=>_.value.length=B),maxlength:"19"},{append:h(()=>[z("Byte")]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),m(x,{prop:"url",label:"URL",rules:{required:!0,message:()=>y.$t("v.required")}},{default:h(()=>[m(T,{modelValue:_.value.url,"onUpdate:modelValue":E[2]||(E[2]=B=>_.value.url=B),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"]),m(P,{type:"primary","native-type":"submit",onClick:E[3]||(E[3]=Xn(()=>X(),["prevent"]))},{default:h(()=>[z(q(y.$t("save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ll=ai(ol,[["__scopeId","data-v-cd89d899"]]),ul={key:0},cl={class:"w-full"},dl={class:"w-full"},pl={key:1,class:"inline-flex mb-1"},fl={key:2,class:"inline-flex mb-1"},hl={name:"ArticleForm"},ml=an({...hl,props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},beanIds:{type:Array,required:!0},action:{type:String,default:"edit"},channel:{type:Object,default:null},isReview:{type:Boolean,default:!1}},emits:{"update:modelValue":null,finished:null},setup(e){const t=e,{modelValue:n,channel:i}=Xt(t),{t:r}=En(),a=Q(),o=Q(!1),l=Q(!1),d=Q(!1),b=Q(),c=Q({}),_=Q(),I=Q(!1),K=Q([]),X=Q([]),ne=Q([]),ie=Q([]),Y=Q(),S=Je(()=>ne.value.find(u=>u.id===Y.value)),y=Je(()=>{var u;return hr(mr(yr().article.mains,(u=S.value)==null?void 0:u.mains,"article"))}),E=Je(()=>{var u;return hr(mr(yr().article.asides,(u=S.value)==null?void 0:u.asides,"article"))}),L=Je(()=>{var u;return JSON.parse(((u=S.value)==null?void 0:u.customs)||"[]").filter(f=>f.type!=="tinyEditor")}),O=Je(()=>{var u;return JSON.parse(((u=S.value)==null?void 0:u.customs)||"[]").filter(f=>f.type==="tinyEditor")}),k=Q(!1),T=Q([]),x=async u=>{k.value=!0,T.value=await uo({Q_Contains_name:u,Q_OrderBy:"refers_desc,id_desc",limit:20}),k.value=!1};bn(n,()=>{var u;n.value&&(Y.value=(u=i==null?void 0:i.value)==null?void 0:u.articleModelId,W(),B(),U(),P())}),bn(L,()=>{Re(c.value.customs)});const P=async()=>{Be.epRank>0&&(I.value=await co())},G=u=>po("sys_article_source",u),W=async()=>{X.value=await Vi({isArticlePermission:!0}),K.value=Zn(X.value)},B=async()=>{ne.value=await ro({type:"article"}),Y.value==null&&ne.value.length>0&&(Y.value=ne.value[0].id)},U=async()=>{ie.value=await fo()},Re=u=>(L.value.forEach(f=>{u[f.code]==null&&(u[f.code]=f.defaultValue,f.defaultValueKey!=null&&(u[f.code+"_key"]=f.defaultValueKey))}),u),ve=async u=>{if(Be.epRank<=0)return!1;const f=await _o({text:u.text});if(f.status===-1){if(u.editorType===1){const w=_.value.editor.plugins.searchreplace;w.find(f.result.name),w.done(),mn.confirm(r("article.error.errorWord.confirm",{name:f.result.name,correct:f.result.correct}),{cancelButtonText:r("cancel"),confirmButtonText:r("ok"),type:"warning",callback:j=>{j==="confirm"&&(w.find(f.result.name),w.replace(f.result.correct,!1,!0),w.done(),c.value.text=_.value.editor.getContent())}})}else u.editorType===2&&mn.alert(r("article.error.errorWord.alert.message",{name:f.result.name}),r("article.error.errorWord.alert.title"),{confirmButtonText:r("ok")});return!0}const g=await So({text:u.text});if(g.status===-1){if(u.editorType===1){const w=_.value.editor.plugins.searchreplace;w.find(g.result.name),w.done()}return mn.alert(r("article.error.sensitiveWord.alert.message",{name:g.result.name}),r("article.error.sensitiveWord.alert.title"),{confirmButtonText:r("ok")}),!0}return!1},fe=()=>{a.value.submit(async(u,{focus:f,emit:g,props:w,form:j})=>{var ue;u.status=10,await pr(u),(ue=f==null?void 0:f.focus)==null||ue.call(f),g("update:values",w.initValues(u.value)),j.resetFields(),_t.success(r("success"))})},Oe=async(u,f)=>{if(["pass","reject"].includes(u)){a.value.remove(async g=>{if(u==="pass")await ho([f]);else if(u==="reject")try{const{value:w}=await mn.prompt(r("article.rejectReason"),r("reject"),{confirmButtonText:r("submit"),cancelButtonText:r("cancel"),inputPattern:/\S+/,inputErrorMessage:r("v.required")});await mo([f],w)}catch(w){}});return}a.value.submit(async(g,{loadBean:w})=>{if(u==="delete")await sa([f]);else if(u==="submit")await oa([f]);else if(u==="archive")await la([f]);else if(u==="offline")await ua([f]);else throw new Error(`not support action: ${u}`);w()})},p=Q(!1),s=Q([]),v=()=>{var w,j;p.value=!0;const u=ga(c.value.text),g=va("img",u).map(ue=>ya(ue,"src")).filter(ue=>ue==null?void 0:ue.startsWith(Vs.uploadUrlPrefix));s.value=[...(j=(w=c.value.imageList)==null?void 0:w.map(ue=>ue.url))!=null?j:[],...g]};return(u,f)=>{const g=J("el-button"),w=J("el-popconfirm"),j=J("el-button-group"),ue=J("el-tag"),ae=J("el-input"),de=J("el-form-item"),oe=J("el-col"),qe=J("el-checkbox"),je=J("el-option"),ge=J("el-select"),xe=J("el-row"),Qe=J("el-alert"),R=J("el-radio"),te=J("el-radio-group"),he=J("el-tree-select"),Le=J("el-date-picker"),ye=J("el-autocomplete"),Ze=J("el-switch"),vt=J("el-tooltip"),De=J("el-tab-pane"),re=J("el-tabs");return D(),Ne("div",null,[m(ko,{ref_key:"dialog",ref:a,values:c.value,"onUpdate:values":f[44]||(f[44]=$=>c.value=$),name:u.$t("menu.content.article"),"query-bean":C(ra),"create-bean":C(pr),"update-bean":C(lo),"delete-bean":C(aa),"bean-id":e.beanId,"bean-ids":e.beanIds,action:e.action,focus:b.value,"init-values":()=>{var $;return{editorType:y.value.text.editorType,channelId:($=C(i))==null?void 0:$.id,allowComment:!0,customs:{},fileList:[],imageList:[]}},"to-values":$=>({...$}),perms:"article","model-value":e.modelValue,addable:!e.isReview,"disable-edit":$=>$.id!=null&&!$.editable,"prevent-submit":ve,"label-width":"140px",large:"","onUpdate:modelValue":f[45]||(f[45]=$=>u.$emit("update:modelValue",$)),onFinished:f[46]||(f[46]=()=>u.$emit("finished")),onBeanChange:f[47]||(f[47]=$=>{var Ve,Te,V;o.value=!!$.subtitle,l.value=!!$.fullTitle,d.value=!!$.linkUrl,Y.value=(V=(Ve=$.channel)==null?void 0:Ve.articleModelId)!=null?V:(Te=C(i))==null?void 0:Te.articleModelId})},{"header-action":h(({isEdit:$,bean:Ve,unsaved:Te,handleDelete:V})=>[e.isReview?(D(),F(j,{key:0},{default:h(()=>[$&&e.isReview?(D(),F(w,{key:0,title:u.$t("confirmPass"),onConfirm:()=>Oe("pass",Ve.id)},{reference:h(()=>[m(g,{disabled:C(ke)("articleReview:pass")||Te,type:"primary",icon:C(na)},{default:h(()=>[z(q(u.$t("pass")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0),m(g,{disabled:C(ke)("articleReview:reject")||Te,icon:C(Ds),onClick:()=>Oe("reject",Ve.id)},{default:h(()=>[z(q(u.$t("reject")),1)]),_:2},1032,["disabled","icon","onClick"])]),_:2},1024)):se("",!0),e.isReview?se("",!0):(D(),F(j,{key:1},{default:h(()=>[$?(D(),F(w,{key:0,title:u.$t("confirmExecute"),onConfirm:()=>Oe("submit",Ve.id)},{reference:h(()=>[m(g,{disabled:[0,12].includes(Ve.status)||C(ke)("article:submit")||Te,icon:C(Ps)},{default:h(()=>[z(q(u.$t("article.op.submit")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0),$?(D(),F(w,{key:1,title:u.$t("confirmExecute"),onConfirm:()=>Oe("archive",Ve.id)},{reference:h(()=>[m(g,{disabled:![0].includes(Ve.status)||C(ke)("article:archive")||Te,icon:C(Ms)},{default:h(()=>[z(q(u.$t("article.op.archive")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0),$?(D(),F(w,{key:2,title:u.$t("confirmExecute"),onConfirm:()=>Oe("offline",Ve.id)},{reference:h(()=>[m(g,{disabled:![0,1,5,11,12].includes(Ve.status)||C(ke)("article:offline")||Te,icon:C(Ls)},{default:h(()=>[z(q(u.$t("article.op.offline")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0)]),_:2},1024)),m(j,null,{default:h(()=>[$&&!e.isReview?(D(),F(w,{key:0,title:u.$t("confirmDelete"),onConfirm:()=>V()},{reference:h(()=>[m(g,{disabled:C(ke)("article:delete")||Te,icon:C(Bs)},{default:h(()=>[z(q(u.$t("delete")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0),$?(D(),F(w,{key:1,title:u.$t("confirmCompletelyDelete"),onConfirm:()=>V()},{reference:h(()=>[m(g,{disabled:C(ke)("article:completelyDelete"),icon:C(Qr)},{default:h(()=>[z(q(u.$t("article.op.completelyDelete")),1)]),_:1},8,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):se("",!0)]),_:2},1024)]),"header-status":h(({isEdit:$})=>[$?(D(),Ne(rt,{key:0},[c.value.status!=null?(D(),Ne("span",ul,[c.value.status===0?(D(),F(ue,{key:0,type:"success",size:"small","disable-transitions":""},{default:h(()=>[z(q(u.$t(`article.status.${c.value.status}`)),1)]),_:1})):c.value.status===1?(D(),F(ue,{key:1,size:"small","disable-transitions":""},{default:h(()=>[z(q(u.$t(`article.status.${c.value.status}`)),1)]),_:1})):c.value.status===20?(D(),F(ue,{key:2,type:"danger",size:"small","disable-transitions":""},{default:h(()=>[z(q(u.$t(`article.status.${c.value.status}`)),1)]),_:1})):[21,22].includes(c.value.status)?(D(),F(ue,{key:3,type:"warning",size:"small","disable-transitions":""},{default:h(()=>[z(q(u.$t(`article.status.${c.value.status}`)),1)]),_:1})):(D(),F(ue,{key:4,type:"info",size:"small","disable-transitions":""},{default:h(()=>[z(q(u.$t(`article.status.${c.value.status}`)),1)]),_:1}))])):se("",!0)],64)):se("",!0)]),default:h(({bean:$,isEdit:Ve,disabled:Te})=>[m(xe,null,{default:h(()=>[m(oe,{span:18},{default:h(()=>[m(xe,null,{default:h(()=>[c.value.src!=null?(D(),F(oe,{key:0,span:y.value.title.double?12:24},{default:h(()=>[m(de,{label:u.$t("article.src")},{default:h(()=>[m(ae,{"model-value":c.value.src.title,disabled:""},{prepend:h(()=>[z(q(C(r)(`article.type.${c.value.type}`)),1)]),append:h(()=>[z(q(c.value.src.channel.paths.map(V=>V.name).join("/")),1)]),_:1},8,["model-value"])]),_:1},8,["label"])]),_:1},8,["span"])):se("",!0),m(oe,{span:y.value.title.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"title",label:(V=y.value.title.name)!=null?V:u.$t("article.title"),rules:{required:!0,message:()=>u.$t("v.required")}},{default:h(()=>[m(ae,{ref_key:"focus",ref:b,modelValue:c.value.title,"onUpdate:modelValue":f[3]||(f[3]=M=>c.value.title=M),maxlength:"150"},$s({_:2},[(!y.value.subtitle.required||!y.value.fullTitle.required||!y.value.linkUrl.required)&&(y.value.subtitle.show||y.value.fullTitle.show||y.value.linkUrl.show)?{name:"append",fn:h(()=>[y.value.subtitle.show&&!y.value.subtitle.required?(D(),F(g,{key:0,class:$t(o.value?"text-primary":void 0),onClick:f[0]||(f[0]=()=>{o.value=!o.value,c.value.subtitle=void 0})},{default:h(()=>{var M;return[z(q((M=y.value.subtitle.name)!=null?M:u.$t("article.subtitle")),1)]}),_:1},8,["class"])):se("",!0),y.value.fullTitle.show&&!y.value.fullTitle.required?(D(),F(g,{key:1,class:$t(l.value?"text-primary":void 0),onClick:f[1]||(f[1]=()=>{l.value=!l.value,c.value.fullTitle=void 0})},{default:h(()=>{var M;return[z(q((M=y.value.fullTitle.name)!=null?M:u.$t("article.fullTitle")),1)]}),_:1},8,["class"])):se("",!0),y.value.linkUrl.show&&!y.value.linkUrl.required?(D(),F(g,{key:2,class:$t(()=>d.value?"text-primary":void 0),disabled:c.value.src!=null&&c.value.type===3,onClick:f[2]||(f[2]=()=>{d.value=!d.value,c.value.linkUrl=void 0,c.value.targetBlank=!1})},{default:h(()=>{var M;return[z(q((M=y.value.linkUrl.name)!=null?M:u.$t("article.linkUrl")),1)]}),_:1},8,["class","disabled"])):se("",!0)]),key:"0"}:void 0]),1032,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"]),(c.value.subtitle||o.value)&&y.value.subtitle.show||y.value.subtitle.show&&y.value.subtitle.required?(D(),F(oe,{key:1,span:y.value.subtitle.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"subtitle",label:(V=y.value.subtitle.name)!=null?V:u.$t("article.subtitle"),rules:y.value.subtitle.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.subtitle,"onUpdate:modelValue":f[4]||(f[4]=M=>c.value.subtitle=M),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),(c.value.fullTitle||l.value)&&y.value.fullTitle.show||y.value.fullTitle.show&&y.value.fullTitle.required?(D(),F(oe,{key:2,span:y.value.fullTitle.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"fullTitle",label:(V=y.value.fullTitle.name)!=null?V:u.$t("article.fullTitle"),rules:y.value.fullTitle.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.fullTitle,"onUpdate:modelValue":f[5]||(f[5]=M=>c.value.fullTitle=M),type:"textarea",rows:2,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),(c.value.linkUrl||d.value)&&y.value.linkUrl.show||y.value.linkUrl.show&&y.value.linkUrl.required?(D(),F(oe,{key:3,span:y.value.linkUrl.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"linkUrl",label:(V=y.value.linkUrl.name)!=null?V:u.$t("article.linkUrl"),rules:y.value.linkUrl.required?[{required:!0,message:()=>u.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>u.$t("article.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>u.$t("article.error.linkUrl")}},{default:h(()=>[m(ae,{modelValue:c.value.linkUrl,"onUpdate:modelValue":f[7]||(f[7]=M=>c.value.linkUrl=M),maxlength:"255",disabled:c.value.src!=null&&c.value.type===3},{append:h(()=>[m(qe,{modelValue:c.value.targetBlank,"onUpdate:modelValue":f[6]||(f[6]=M=>c.value.targetBlank=M)},{default:h(()=>[z(q(u.$t("article.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.tags.show?(D(),F(oe,{key:4,span:y.value.tags.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"tags",label:(V=y.value.tags.name)!=null?V:u.$t("article.tags"),rules:y.value.tags.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ge,{modelValue:c.value.tagNames,"onUpdate:modelValue":f[8]||(f[8]=M=>c.value.tagNames=M),multiple:"",filterable:"",remote:"",clearable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,"remote-method":x,loading:k.value,class:"w-full"},{default:h(()=>[(D(!0),Ne(rt,null,ot(T.value.map(M=>M.name),M=>(D(),F(je,{key:M,label:M,value:M},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.seoKeywords.show?(D(),F(oe,{key:5,span:y.value.seoKeywords.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"seoKeywords",label:(V=y.value.seoKeywords.name)!=null?V:u.$t("article.seoKeywords"),rules:y.value.seoKeywords.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.seoKeywords,"onUpdate:modelValue":f[9]||(f[9]=M=>c.value.seoKeywords=M),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.seoDescription.show?(D(),F(oe,{key:6,span:y.value.seoDescription.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"seoDescription",label:(V=y.value.seoDescription.name)!=null?V:u.$t("article.seoDescription"),rules:y.value.seoDescription.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.seoDescription,"onUpdate:modelValue":f[10]||(f[10]=M=>c.value.seoDescription=M),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.author.show?(D(),F(oe,{key:7,span:y.value.author.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"author",label:(V=y.value.author.name)!=null?V:u.$t("article.author"),rules:y.value.author.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.author,"onUpdate:modelValue":f[11]||(f[11]=M=>c.value.author=M),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.editor.show?(D(),F(oe,{key:8,span:y.value.editor.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"editor",label:(V=y.value.editor.name)!=null?V:u.$t("article.editor"),rules:y.value.editor.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ae,{modelValue:c.value.editor,"onUpdate:modelValue":f[12]||(f[12]=M=>c.value.editor=M),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):se("",!0),y.value.image.show?(D(),F(oe,{key:9,span:y.value.image.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"image",label:(V=y.value.image.name)!=null?V:u.$t("article.image"),rules:y.value.image.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(C(No),{modelValue:c.value.image,"onUpdate:modelValue":f[13]||(f[13]=M=>c.value.image=M),height:y.value.image.imageHeight,width:y.value.image.imageWidth,mode:y.value.image.imageMode,disabled:Te},null,8,["modelValue","height","width","mode","disabled"]),m(g,{class:"self-start ml-2",onClick:f[14]||(f[14]=()=>v())},{default:h(()=>[z(q(u.$t("article.extractImage")),1)]),_:1})]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),(D(!0),Ne(rt,null,ot(L.value,V=>(D(),F(oe,{key:V.code,span:V.double?12:24},{default:h(()=>[m(de,{prop:`customs.${V.code}`,rules:V.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{label:h(()=>[m(Ln,{label:V.name},null,8,["label"])]),default:h(()=>[m(vr,{modelValue:c.value.customs[V.code],"onUpdate:modelValue":M=>c.value.customs[V.code]=M,"model-key":c.value.customs[V.code+"_key"],"onUpdate:modelKey":M=>c.value.customs[V.code+"_key"]=M,field:V},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),y.value.file.show?(D(),F(oe,{key:10,span:y.value.file.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"file",label:(V=y.value.file.name)!=null?V:u.$t("article.file"),rules:y.value.file.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(xe,{class:"w-full"},{default:h(()=>[m(oe,{span:16},{default:h(()=>[m(ae,{modelValue:c.value.fileName,"onUpdate:modelValue":f[15]||(f[15]=M=>c.value.fileName=M)},{prepend:h(()=>[z(q(u.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),m(oe,{span:8},{default:h(()=>[m(ae,{modelValue:c.value.fileLength,"onUpdate:modelValue":f[16]||(f[16]=M=>c.value.fileLength=M)},{prepend:h(()=>[z(q(u.$t("size")),1)]),append:h(()=>[z("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),m(ae,{modelValue:c.value.file,"onUpdate:modelValue":f[17]||(f[17]=M=>c.value.file=M)},{prepend:h(()=>[z("URL")]),_:1},8,["modelValue"]),m(C(fn),{type:"file","on-success":M=>(c.value.file=M.url,c.value.fileName=M.name,c.value.fileLength=M.size),disabled:Te},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.video.show?(D(),F(oe,{key:11,span:y.value.video.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"video",label:(V=y.value.video.name)!=null?V:u.$t("article.video"),rules:y.value.video.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(xe,{class:"w-full"},{default:h(()=>[m(oe,{span:16},{default:h(()=>[m(ae,{modelValue:c.value.video,"onUpdate:modelValue":f[18]||(f[18]=M=>c.value.video=M),maxlength:"255"},{prepend:h(()=>[z("URL")]),_:1},8,["modelValue"])]),_:1}),m(oe,{span:8},{default:h(()=>[m(ae,{modelValue:c.value.videoDuration,"onUpdate:modelValue":f[19]||(f[19]=M=>c.value.videoDuration=M),maxlength:"10"},{prepend:h(()=>[z(q(u.$t("article.videoDuration")),1)]),append:h(()=>[z(q(C(ur)(c.value.videoDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),m(C(fn),{type:"video","on-success":M=>{c.value.video=M.url,c.value.videoDuration=M.duration,c.value.image||(c.value.image=M.image)},disabled:Te},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.audio.show?(D(),F(oe,{key:12,span:y.value.audio.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"audio",label:(V=y.value.audio.name)!=null?V:u.$t("article.audio"),rules:y.value.audio.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(xe,{class:"w-full"},{default:h(()=>[m(oe,{span:16},{default:h(()=>[m(ae,{modelValue:c.value.audio,"onUpdate:modelValue":f[20]||(f[20]=M=>c.value.audio=M),maxlength:"255"},{prepend:h(()=>[z("URL")]),_:1},8,["modelValue"])]),_:1}),m(oe,{span:8},{default:h(()=>[m(ae,{modelValue:c.value.audioDuration,"onUpdate:modelValue":f[21]||(f[21]=M=>c.value.audioDuration=M),maxlength:"10"},{prepend:h(()=>[z(q(u.$t("article.audioDuration")),1)]),append:h(()=>[z(q(C(ur)(c.value.audioDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),m(C(fn),{type:"audio","on-success":M=>{c.value.audio=M.url,c.value.audioDuration=M.duration},disabled:Te},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.doc.show?(D(),F(oe,{key:13,span:y.value.doc.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"doc",label:(V=y.value.doc.name)!=null?V:u.$t("article.doc"),rules:y.value.doc.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[Ae("div",cl,[m(xe,null,{default:h(()=>[m(oe,{span:12},{default:h(()=>[m(ae,{modelValue:c.value.docName,"onUpdate:modelValue":f[22]||(f[22]=M=>c.value.docName=M)},{prepend:h(()=>[z(q(u.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),m(oe,{span:12},{default:h(()=>[m(ae,{modelValue:c.value.docLength,"onUpdate:modelValue":f[23]||(f[23]=M=>c.value.docLength=M)},{prepend:h(()=>[z(q(u.$t("size")),1)]),append:h(()=>[z("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),m(ae,{modelValue:c.value.doc,"onUpdate:modelValue":f[24]||(f[24]=M=>c.value.doc=M)},{prepend:h(()=>[z("URL")]),_:1},8,["modelValue"]),m(ae,{modelValue:c.value.docOrig,"onUpdate:modelValue":f[25]||(f[25]=M=>c.value.docOrig=M)},{prepend:h(()=>[z(q(u.$t("article.docOrig")),1)]),_:1},8,["modelValue"]),I.value&&C(Be).epRank>0?(D(),F(C(fn),{key:0,type:"library",disabled:C(ke)("jodConvert:library")||Te,"upload-action":C(so),"on-success":M=>{c.value.doc=M.doc,c.value.docOrig=M.docOrig,c.value.docName=M.docName,c.value.docLength=M.docLength,c.value.image=M.docImage}},null,8,["disabled","upload-action","on-success"])):se("",!0),!I.value&&C(Be).epRank>0?(D(),F(Qe,{key:1,title:u.$t("error.jodConverterNotEnabled"),type:"error",closable:!1},null,8,["title"])):se("",!0),C(Be).epRank===0?(D(),F(g,{key:2,type:"primary",onClick:f[26]||(f[26]=()=>u.$alert(u.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:h(()=>[z(q(u.$t("article.op.clickToUpload")),1)]),_:1})):se("",!0)])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.imageList.show?(D(),F(oe,{key:14,span:y.value.imageList.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"imageList",label:(V=y.value.imageList.name)!=null?V:u.$t("article.imageList"),rules:y.value.imageList.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(C(il),{modelValue:c.value.imageList,"onUpdate:modelValue":f[27]||(f[27]=M=>c.value.imageList=M),"max-height":y.value.imageList.imageMaxHeight,"max-width":y.value.imageList.imageMaxWidth,"list-type":y.value.imageList.imageListType,disabled:Te},null,8,["modelValue","max-height","max-width","list-type","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.fileList.show?(D(),F(oe,{key:15,span:y.value.fileList.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"fileList",label:(V=y.value.fileList.name)!=null?V:u.$t("article.fileList"),rules:y.value.fileList.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(C(ll),{modelValue:c.value.fileList,"onUpdate:modelValue":f[28]||(f[28]=M=>c.value.fileList=M),disabled:Te},null,8,["modelValue","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),y.value.text.show?(D(),F(oe,{key:16,span:y.value.text.double?12:24},{default:h(()=>{var V;return[m(de,{prop:"text",label:(V=y.value.text.name)!=null?V:u.$t("article.text"),rules:y.value.text.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[Ae("div",dl,[y.value.text.editorSwitch?(D(),F(te,{key:0,modelValue:c.value.editorType,"onUpdate:modelValue":f[29]||(f[29]=M=>c.value.editorType=M),class:"mr-6",onChange:f[30]||(f[30]=()=>c.value.markdown="")},{default:h(()=>[(D(),Ne(rt,null,ot([1,2],M=>m(R,{key:M,label:M},{default:h(()=>[z(q(u.$t(`model.field.editorType.${M}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])):se("",!0),c.value.editorType===1&&I.value&&C(Be).epRank>0?(D(),Ne("div",pl,[m(C(fn),{type:"doc",disabled:C(ke)("jodConvert:doc"),"upload-action":C(oo),"on-success":M=>c.value.text=M,button:u.$t("article.op.docImport")},null,8,["disabled","upload-action","on-success","button"])])):se("",!0),C(Be).epRank===0&&C(Be).epDisplay?(D(),Ne("div",fl,[m(g,{type:"primary",onClick:f[31]||(f[31]=()=>u.$alert(u.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:h(()=>[z(q(u.$t("article.op.docImport")),1)]),_:1})])):se("",!0),c.value.editorType===2?(D(),F(C(eo),{key:3,modelValue:c.value.markdown,"onUpdate:modelValue":f[32]||(f[32]=M=>c.value.markdown=M),html:c.value.text,"onUpdate:html":f[33]||(f[33]=M=>c.value.text=M),class:"leading-6"},null,8,["modelValue","html"])):(D(),F(C(Co),{key:4,ref_key:"tinyText",ref:_,modelValue:c.value.text,"onUpdate:modelValue":f[34]||(f[34]=M=>c.value.text=M),disabled:Te},null,8,["modelValue","disabled"]))])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):se("",!0),(D(!0),Ne(rt,null,ot(O.value,V=>(D(),F(oe,{key:V.code,span:V.double?12:24},{default:h(()=>[m(de,{prop:`customs.${V.code}`,label:V.name,rules:V.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{label:h(()=>[m(Ln,{label:V.name},null,8,["label"])]),default:h(()=>[m(vr,{modelValue:c.value.customs[V.code],"onUpdate:modelValue":M=>c.value.customs[V.code]=M,field:V},null,8,["modelValue","onUpdate:modelValue","field"])]),_:2},1032,["prop","label","rules"])]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1024),m(oe,{span:6,class:"el-form--label-top label-top"},{default:h(()=>[m(re,{type:"border-card",class:"ml-5"},{default:h(()=>[m(De,{label:u.$t("article.tabs.setting")},{default:h(()=>{var V,M,st,Rn,Nn,In,Dn,Pn,Mn,pn;return[m(de,{prop:"channelId",label:(V=E.value.channel.name)!=null?V:u.$t("article.channel"),rules:[{required:!0,message:()=>u.$t("v.required")},{validator:(A,_e,Mt)=>{var Ht;if(((Ht=K.value.find(Ts=>Ts.id===_e))==null?void 0:Ht.children.length)>0){Mt(u.$t("article.error.leafChannelOnly"));return}Mt()}}]},{default:h(()=>{var A;return[m(he,{modelValue:c.value.channelId,"onUpdate:modelValue":f[35]||(f[35]=_e=>c.value.channelId=_e),data:K.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":(A=$.channel)==null?void 0:A.paths.map(_e=>_e.id),class:"w-full",onChange:f[36]||(f[36]=_e=>{var Mt;Y.value=(Mt=X.value.find(Ht=>Ht.id===_e))==null?void 0:Mt.articleModelId})},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","rules"]),Ve&&E.value.org.show?(D(),F(de,{key:0,label:(M=E.value.org.name)!=null?M:u.$t("article.org"),required:""},{default:h(()=>{var A;return[m(ae,{value:(A=c.value.org)==null?void 0:A.name,disabled:""},null,8,["value"])]}),_:1},8,["label"])):se("",!0),E.value.publishDate.show?(D(),F(de,{key:1,prop:"publishDate",label:(st=E.value.publishDate.name)!=null?st:u.$t("article.publishDate"),rules:Ve?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(Le,{modelValue:c.value.publishDate,"onUpdate:modelValue":f[37]||(f[37]=A=>c.value.publishDate=A),type:"datetime",class:"w-full",onChange:f[38]||(f[38]=A=>{A===null&&(c.value.publishDate=void 0)})},null,8,["modelValue"])]),_:2},1032,["label","rules"])):se("",!0),E.value.source.show?(D(),F(de,{key:2,prop:"source",label:(Rn=E.value.source.name)!=null?Rn:u.$t("article.source"),rules:E.value.source.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{default:h(()=>[m(ye,{modelValue:c.value.source,"onUpdate:modelValue":f[39]||(f[39]=A=>c.value.source=A),"value-key":"name","fetch-suggestions":async(A,_e)=>_e(await G(A)),class:"w-full","highlight-first-item":"","hide-loading":"",clearable:"",onKeydown:f[40]||(f[40]=Os(Xn(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","fetch-suggestions"])]),_:1},8,["label","rules"])):se("",!0),E.value.articleTemplate.show?(D(),F(de,{key:3,prop:"articleTemplate",label:(Nn=E.value.articleTemplate.name)!=null?Nn:u.$t("article.articleTemplate"),rules:E.value.articleTemplate.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{label:h(()=>{var A;return[m(Ln,{label:(A=E.value.articleTemplate.name)!=null?A:u.$t("article.articleTemplate"),message:"article.articleTemplate",help:""},null,8,["label"])]}),default:h(()=>[m(ge,{modelValue:c.value.articleTemplate,"onUpdate:modelValue":f[41]||(f[41]=A=>c.value.articleTemplate=A),clearable:"",class:"w-full"},{default:h(()=>[(D(!0),Ne(rt,null,ot(ie.value,A=>(D(),F(je,{key:A,label:A+".html",value:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):se("",!0),E.value.allowComment.show?(D(),F(de,{key:4,prop:"allowComment",rules:E.value.allowComment.required?{required:!0,message:()=>u.$t("v.required")}:void 0},{label:h(()=>{var A;return[m(Ln,{label:(A=E.value.allowComment.name)!=null?A:u.$t("article.allowComment"),message:"article.allowComment",help:""},null,8,["label"])]}),default:h(()=>[m(Ze,{modelValue:c.value.allowComment,"onUpdate:modelValue":f[42]||(f[42]=A=>c.value.allowComment=A)},null,8,["modelValue"])]),_:1},8,["rules"])):se("",!0),E.value.user.show?(D(),F(de,{key:5,label:(In=E.value.user.name)!=null?In:u.$t("article.user")},{default:h(()=>{var A;return[m(ae,{"model-value":(A=c.value.user)==null?void 0:A.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):se("",!0),E.value.created.show?(D(),F(de,{key:6,label:(Dn=E.value.created.name)!=null?Dn:u.$t("article.created")},{default:h(()=>[m(Le,{"model-value":c.value.created,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):se("",!0),E.value.modifiedUser.show?(D(),F(de,{key:7,label:(Pn=E.value.modifiedUser.name)!=null?Pn:u.$t("article.modifiedUser")},{default:h(()=>{var A;return[m(ae,{"model-value":(A=c.value.modifiedUser)==null?void 0:A.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):se("",!0),E.value.modified.show?(D(),F(de,{key:8,label:(Mn=E.value.modified.name)!=null?Mn:u.$t("article.modified")},{default:h(()=>[m(Le,{"model-value":c.value.modified,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):se("",!0),((pn=c.value.destList)==null?void 0:pn.length)>0?(D(),F(de,{key:9,label:u.$t("article.destList")},{default:h(()=>[(D(!0),Ne(rt,null,ot(c.value.destList,A=>(D(),F(vt,{key:A.id,content:(A.siteId!=c.value.siteId?`[${A.site.name}] `:"")+A.channel.paths.map(_e=>_e.name).join("/"),placement:"top-start"},{default:h(()=>[m(ae,{"model-value":(A.siteId!=c.value.siteId?`[${A.site.name}] `:"")+A.channel.paths.map(_e=>_e.name).join("/"),disabled:""},{append:h(()=>[z(q(C(r)(`article.type.${A.type}`)),1)]),_:2},1032,["model-value"])]),_:2},1032,["content"]))),128))]),_:1},8,["label"])):se("",!0)]}),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"footer-action":h(({isEdit:$,handleSubmit:Ve})=>[m(g,{disabled:C(ke)($?"article:update":"article:create"),type:"primary","native-type":"submit",onClick:Xn(()=>Ve(),["prevent"])},{default:h(()=>[z(q(u.$t($?"save":"submit")),1)]),_:2},1032,["disabled","onClick"]),$?se("",!0):(D(),F(g,{key:0,onClick:f[43]||(f[43]=()=>fe())},{default:h(()=>[z(q(u.$t("article.op.saveAsDraft")),1)]),_:1}))]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","action","focus","init-values","to-values","model-value","addable","disable-edit"]),m(Do,{modelValue:p.value,"onUpdate:modelValue":f[48]||(f[48]=$=>p.value=$),urls:s.value,"append-to-body":!0,onFinished:f[49]||(f[49]=$=>c.value.image=$[0])},null,8,["modelValue","urls"])])}}});const yl=ai(ml,[["__scopeId","data-v-d1cae931"]]),vl={class:"flex justify-between items-center"},gl=Ae("div",null,null,-1),bl={name:"ArticleInternalPushForm"},wl=an({...bl,props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},type:{type:String,default:"external"}},emits:{"update:modelValue":null,finished:null},setup(e,{emit:t}){const n=e,{beanId:i,type:r,modelValue:a}=Xt(n),{t:o}=En(),l=Q(),d=Q({}),b=Q({}),c=Q(!1),_=Q([]),I=Q([]),K=Q(),X=async()=>{(i==null?void 0:i.value)!=null&&(d.value=await ra(i.value))},ne=async y=>{const E=r.value==="internal"?{isArticlePermission:!0}:{siteId:y};I.value=to(Zn(await Vi(E))),I.value=dr(I.value,[...d.value.destList.map(L=>L.channel.id),d.value.channel.id])},ie=async()=>{_.value=await Ao(),_.value=Zn(_.value),_.value=dr(_.value,[d.value.siteId])};bn(a,async()=>{a.value&&(await X(),r.value==="external"?ie():ne(),b.value={ids:[d.value.id],type:3})});const Y=()=>{K.value!=null&&(b.value.channelIds=[...K.value.getCheckedNodes(),...K.value.getHalfCheckedNodes()].map(y=>y.id),l.value.validate())},S=()=>{l.value.validate(async y=>{if(y){c.value=!0;try{r.value==="internal"?await yo(b.value):await vo(b.value),t("finished"),t("update:modelValue",!1),_t.success(o("success"))}finally{c.value=!1}}})};return(y,E)=>{const L=J("el-input"),O=J("el-form-item"),k=J("el-radio-button"),T=J("el-radio-group"),x=J("el-tree-select"),P=J("el-tree"),G=J("el-form"),W=J("el-button"),B=J("el-drawer");return D(),F(B,{title:y.$t(`article.op.${C(r)}Push`),"model-value":e.modelValue,size:414,"onUpdate:modelValue":E[6]||(E[6]=U=>y.$emit("update:modelValue",U))},{default:h(()=>[m(G,{ref_key:"form",ref:l,model:b.value,"label-position":"top"},{default:h(()=>[m(O,null,{default:h(()=>[m(L,{"model-value":d.value.title,disabled:""},null,8,["model-value"])]),_:1}),m(O,{prop:"type"},{default:h(()=>[m(T,{modelValue:b.value.type,"onUpdate:modelValue":E[0]||(E[0]=U=>b.value.type=U)},{default:h(()=>[(D(),Ne(rt,null,ot([1,3],U=>m(k,{key:U,label:U},{default:h(()=>[z(q(C(o)(`article.type.${U}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),C(r)==="external"?(D(),F(O,{key:0,prop:"siteId",rules:[{required:!0,message:()=>y.$t("v.required")}]},{default:h(()=>[m(x,{modelValue:b.value.siteId,"onUpdate:modelValue":E[1]||(E[1]=U=>b.value.siteId=U),data:_.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",class:"w-full",onChange:E[2]||(E[2]=U=>ne(U))},null,8,["modelValue","data"])]),_:1},8,["rules"])):se("",!0),m(O,{prop:"channelIds",rules:[{required:!0,message:()=>y.$t("v.required")}]},{default:h(()=>[m(P,{ref_key:"channelTree",ref:K,data:I.value,"node-key":"id",props:{label:"name"},class:"border rounded w-full","check-strictly":"","default-expand-all":"","show-checkbox":"","check-on-click-node":"",onCheck:E[3]||(E[3]=()=>Y())},null,8,["data"])]),_:1},8,["rules"])]),_:1},8,["model"])]),footer:h(()=>[Ae("div",vl,[gl,Ae("div",null,[m(W,{onClick:E[4]||(E[4]=()=>y.$emit("update:modelValue",!1))},{default:h(()=>[z(q(y.$t("cancel")),1)]),_:1}),m(W,{type:"primary",loading:c.value,onClick:E[5]||(E[5]=()=>S())},{default:h(()=>[z(q(y.$t("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["title","model-value"])}}});function yt(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const xn=Object.prototype.toString,El=Object.prototype.hasOwnProperty;function ki(e){return e===void 0}function Ot(e){return e!==void 0}function xl(e){return e==null}function ut(e){return xn.call(e)==="[object Array]"}function Qt(e){return xn.call(e)==="[object Object]"}function At(e){return xn.call(e)==="[object Number]"}function St(e){const t=xn.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function ht(e){return xn.call(e)==="[object String]"}function qi(e,t){return El.call(e,t)}function ct(e,t){const n=zi(t);let i;return ee(e,function(r,a){if(n(r,a))return i=r,!1}),i}function _l(e,t){const n=zi(t);let i=ut(e)?-1:void 0;return ee(e,function(r,a){if(n(r,a))return i=a,!1}),i}function Zt(e,t){const n=zi(t);let i=[];return ee(e,function(r,a){n(r,a)&&i.push(r)}),i}function ee(e,t){let n,i;if(ki(e))return;const r=ut(e)?Tl:Al;for(let a in e)if(qi(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function Jt(e,t,n){return ee(e,function(i,r){n=t(n,i,r)}),n}function ji(e,t){return!!Jt(e,function(n,i,r){return n&&t(i,r)},!0)}function ba(e,t){return!!ct(e,t)}function Sl(e,t){let n=[];return ee(e,function(i,r){n.push(t(i,r))}),n}function kr(e){return function(t){return ji(e,function(n,i){return t[i]===n})}}function zi(e){return St(e)?e:t=>t===e}function Al(e){return e}function Tl(e){return Number(e)}function kl(e,t){let n,i,r,a;function o(_){let I=Date.now(),K=_?0:a+t-I;if(K>0)return l(K);e.apply(r,i),d()}function l(_){n=setTimeout(o,_)}function d(){n&&clearTimeout(n),n=a=i=r=void 0}function b(){n&&o(!0),d()}function c(..._){a=Date.now(),i=_,r=this,n||l(t)}return c.flush=b,c.cancel=d,c}function Tt(e,t){return e.bind(t)}function le(e,...t){return Object.assign(e,...t)}function Cl(e,t,n){let i=e;return ee(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let o=t[a+1],l=i[r];Ot(o)&&xl(l)&&(l=i[r]=isNaN(+o)?{}:[]),ki(o)?ki(n)?delete i[r]:i[r]=n:i=l}),e}function Rl(e,t){let n={},i=Object(e);return ee(t,function(r){r in i&&(n[r]=e[r])}),n}function Nl(e,t){let n={},i=Object(e);return ee(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}var Il=1e3;function Et(e,t){var n=this;t=t||Il,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,o=r.element,l=r.gfx,d=r.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(l,o,d):n.drawConnection(l,o,d)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Et.prototype.canRender=function(e){};Et.prototype.drawShape=function(e,t){};Et.prototype.drawConnection=function(e,t){};Et.prototype.getShapePath=function(e){};Et.prototype.getConnectionPath=function(e){};function ce(e,t){var n=en(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Dl(e,t){return ba(t,function(n){return ce(e,n)})}function en(e){return e&&e.businessObject||e}function tn(e){return e&&e.di}function Ci(e,t){return ce(e,"bpmn:CallActivity")?!1:ce(e,"bpmn:SubProcess")?(t=t||tn(e),t&&ce(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):ce(e,"bpmn:Participant")?!!en(e).processRef:!0}function Pl(e){return e&&!!en(e).triggeredByEvent}function Ml(e){if(ce(e,"bpmn:FlowElement")||ce(e,"bpmn:Participant")||ce(e,"bpmn:Lane")||ce(e,"bpmn:SequenceFlow")||ce(e,"bpmn:MessageFlow")||ce(e,"bpmn:DataInput")||ce(e,"bpmn:DataOutput"))return"name";if(ce(e,"bpmn:TextAnnotation"))return"text";if(ce(e,"bpmn:Group"))return"categoryValueRef"}function Ll(e){var t=e.categoryValueRef;return t&&t.value||""}function Jn(e){var t=e.businessObject,n=Ml(t);if(n)return n==="categoryValueRef"?Ll(t):t[n]||""}function Bl(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function wa(e,t){return t.appendChild(Bl(e,t))}function Pe(e,t){return wa(t,e),e}var Ri=2,Ea={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Ri,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Ri,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function $l(e,t){return Ea[t]?e.style[t]:e.getAttributeNS(null,t)}function xa(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Ea[i];r?(r===Ri&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Ol(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)xa(e,r,t[r])}function be(e,t,n){if(typeof t=="string")if(n!==void 0)xa(e,t,n);else return $l(e,t);else Ol(e,t);return e}const Vl=Object.prototype.toString;function et(e){return new kt(e)}function kt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}kt.prototype.add=function(e){return this.list.add(e),this};kt.prototype.remove=function(e){return Vl.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};kt.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};kt.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};kt.prototype.array=function(){return Array.from(this.list)};kt.prototype.has=kt.prototype.contains=function(e){return this.list.contains(e)};function sn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function _a(e){for(var t;t=e.firstChild;)sn(t);return e}var Wi={svg:"http://www.w3.org/2000/svg"},Cr='<svg xmlns="'+Wi.svg+'"';function Sa(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Wi.svg)===-1&&(e=Cr+e.substring(4)):(e=Cr+">"+e+"</svg>",t=!0);var n=Fl(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Fl(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Ee(e,t){var n;return e.charAt(0)==="<"?(n=Sa(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Wi.svg,e),t&&be(n,t),n}var bi=null;function Ni(){return bi===null&&(bi=Ee("svg")),bi}function Rr(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Ul(e,t,n,i,r,a){var o=Ni().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return Rr(o,e);case 6:return Rr(o,{a:e,b:t,c:n,d:i,e:r,f:a})}}function vn(e){return e?Ni().createSVGTransformFromMatrix(e):Ni().createSVGTransform()}var Nr=/([&<>]{1})/g,ql=/([\n\r"]{1})/g,jl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function wi(e,t){function n(i,r){return jl[r]||r}return e.replace(t,n)}function Aa(e,t){var n,i,r,a,o;switch(e.nodeType){case 3:t.push(wi(e.textContent,Nr));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',wi(a.value,ql),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,i=o.length;n<i;++n)Aa(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",wi(e.nodeValue,Nr),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function zl(e,t){var n=Sa(t);if(_a(e),!!t){Hl(n)||(n=n.documentElement);for(var i=Gl(n.childNodes),r=0;r<i.length;r++)wa(i[r],e)}}function Wl(e){for(var t=e.firstChild,n=[];t;)Aa(t,n),t=t.nextSibling;return n.join("")}function Hl(e){return e.nodeName==="#document-fragment"}function Ir(e,t){if(t!==void 0){try{zl(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return Wl(e)}function Gl(e){return Array.prototype.slice.call(e)}function Yl(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Kl(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Yl(e,i))}function wn(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Kl(n,t)),n.consolidate()}function Ut(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Xl(e){return["M",e.x,e.y]}function Ei(e){return["L",e.x,e.y]}function Ql(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Zl(e,t){const n=e.length,i=[Xl(e[0])];for(let r=1;r<n;r++){const a=e[r-1],o=e[r],l=e[r+1];if(!l||!t){i.push(Ei(o));continue}const d=Math.min(t,Ii(o.x-a.x,o.y-a.y),Ii(l.x-o.x,l.y-o.y));if(!d){i.push(Ei(o));continue}const b=$n(o,a,d),c=$n(o,a,d*.5),_=$n(o,l,d),I=$n(o,l,d*.5);i.push(Ei(b)),i.push(Ql(c,I,_))}return i}function $n(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=Ii(i,r),o=n/a;return{x:e.x+i*o,y:e.y+r*o}}function Ii(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Hi(e,t,n){At(t)&&(n=t,t=null),t||(t={});const i=Ee("path",t);return At(n)&&(i.dataset.cornerRadius=String(n)),Ta(i,e)}function Ta(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return be(e,{d:Ut(Zl(t,n))}),e}var yn="hsl(225, 10%, 15%)";function dt(e,t,n){function i(r,a){return ji(a,function(o,l){return r[l]==o})}return ba(e.eventDefinitions,function(r){return r.$type===t&&i(e,n)})}function Jl(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function eu(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function ze(e){return e.businessObject}function me(e,t){var n=tn(e);return n.get("color:background-color")||n.get("bioc:fill")||t||"white"}function H(e,t){var n=tn(e);return n.get("color:border-color")||n.get("bioc:stroke")||t||yn}function hn(e,t,n){var i=tn(e),r=i.get("label");return r&&r.get("color:color")||t||H(e,n)}function tu(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Ut(r)}function nu(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,o=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return Ut(o)}function iu(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,o=n/2,l=[["M",i+a,r],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return Ut(l)}function ru(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Ut(a)}function au(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const su=Object.prototype.toString,ou=Object.prototype.hasOwnProperty;function lu(e){return e===void 0}function uu(e){return su.call(e)==="[object Array]"}function cu(e,t){return ou.call(e,t)}function Dr(e,t){let n,i;if(lu(e))return;const r=uu(e)?pu:du;for(let a in e)if(cu(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function du(e){return e}function pu(e){return Number(e)}function Ke(e,...t){const n=e.style;return Dr(t,function(i){i&&Dr(i,function(r,a){n[a]=r})}),e}function fu(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const hu=Object.prototype.toString;function si(e){return new Ct(e)}function Ct(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Ct.prototype.add=function(e){return this.list.add(e),this};Ct.prototype.remove=function(e){return hu.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Ct.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Ct.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Ct.prototype.array=function(){return Array.from(this.list)};Ct.prototype.has=Ct.prototype.contains=function(e){return this.list.contains(e)};function ka(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}function Pr(e,t){return e&&typeof e.matches=="function"&&e.matches(t)}function mu(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(Pr(i,t))return i;i=i.parentNode}return Pr(i,t)?i:null}var ei={},ti,Di,Gi;function Ca(){ti=window.addEventListener?"addEventListener":"attachEvent",Di=window.removeEventListener?"removeEventListener":"detachEvent",Gi=ti!=="addEventListener"?"on":""}var yu=ei.bind=function(e,t,n,i){return ti||Ca(),e[ti](Gi+t,n,i||!1),n},vu=ei.unbind=function(e,t,n,i){return Di||Ca(),e[Di](Gi+t,n,i||!1),n},Yi=au({__proto__:null,bind:yu,unbind:vu,default:ei},[ei]),Ra=["focus","blur"];function gu(e,t,n,i,r){return Ra.indexOf(n)!==-1&&(r=!0),Yi.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=mu(o,t,!0),a.delegateTarget&&i.call(e,a)},r)}function bu(e,t,n,i){return Ra.indexOf(t)!==-1&&(i=!0),Yi.unbind(e,t,n,i)}var Pi={bind:gu,unbind:bu},wu=Eu,Na=!1,On;typeof document<"u"&&(On=document.createElement("div"),On.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Na=!On.getElementsByTagName("link").length,On=void 0);var Me={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Na?[1,"X<div>","</div>"]:[0,"",""]};Me.td=Me.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Me.option=Me.optgroup=[1,'<select multiple="multiple">',"</select>"];Me.thead=Me.tbody=Me.colgroup=Me.caption=Me.tfoot=[1,"<table>","</table>"];Me.polyline=Me.ellipse=Me.polygon=Me.circle=Me.text=Me.line=Me.path=Me.rect=Me.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function Eu(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var d=t.createElement("html");return d.innerHTML=e,d.removeChild(d.lastChild)}var r=Object.prototype.hasOwnProperty.call(Me,i)?Me[i]:Me._default,a=r[0],o=r[1],l=r[2],d=t.createElement("div");for(d.innerHTML=o+e+l;a--;)d=d.lastChild;if(d.firstChild==d.lastChild)return d.removeChild(d.firstChild);for(var b=t.createDocumentFragment();d.firstChild;)b.appendChild(d.removeChild(d.firstChild));return b}var mt=wu;function lt(e,t){return t=t||document,t.querySelector(e)}function xu(e,t){return t=t||document,t.querySelectorAll(e)}function ni(e){e.parentNode&&e.parentNode.removeChild(e)}function Mr(e,t,n,i,r){var a=vn();a.setTranslate(t,n);var o=vn();o.setRotate(i||0,0,0);var l=vn();l.setScale(r||1,r||1),wn(e,[a,o,l])}function Ia(e,t,n){var i=vn();i.setTranslate(t,n),wn(e,i)}function _u(e,t){var n=vn();n.setRotate(t,0,0),wn(e,n)}function Su(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Au=Su(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var o=r-Math.floor(r),l="",a=0;a<Math.floor(r);a++){var d=Math.floor(Math.random()*i).toString(i);l=d+l}if(o){var b=Math.pow(i,o),d=Math.floor(Math.random()*b).toString(i);l=d+l}var c=parseInt(l,i);return c!==1/0&&c>=Math.pow(2,n)?t(n,i):l};t.rack=function(n,i,r){var a=function(l){var d=0;do{if(d++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var b=t(n,i)}while(Object.hasOwnProperty.call(o,b));return o[b]=l,b},o=a.hats={};return a.get=function(l){return a.hats[l]},a.set=function(l,d){return a.hats[l]=d,a},a.bits=n||128,a.base=i||16,a}});function wt(e){if(!(this instanceof wt))return new wt(e);e=e||[128,36,1],this._seed=e.length?Au.rack(e[0],e[1],e[2]):e}wt.prototype.next=function(e){return this._seed(e||!0)};wt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};wt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};wt.prototype.assigned=function(e){return this._seed.get(e)||!1};wt.prototype.unclaim=function(e){delete this._seed.hats[e]};wt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Tu=new wt,zn=10,xi=3,Yt=.95,ku=.35,Cu=10;function qt(e,t,n,i,r,a,o){Et.call(this,t,o);var l=e&&e.defaultFillColor,d=e&&e.defaultStrokeColor,b=e&&e.defaultLabelColor,c=Tu.next(),_={};function I(p){return n.computeStyle(p,{strokeLinecap:"round",strokeLinejoin:"round",stroke:yn,strokeWidth:2,fill:"white"})}function K(p){return n.computeStyle(p,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:yn,strokeWidth:2})}function X(p,s){var{ref:v={x:0,y:0},scale:u=1,element:f}=s,g=Ee("marker",{id:p,viewBox:"0 0 20 20",refX:v.x,refY:v.y,markerWidth:20*u,markerHeight:20*u,orient:"auto"});Pe(g,f);var w=lt("defs",r._svg);w||(w=Ee("defs"),Pe(r._svg,w)),Pe(w,g),_[p]=g}function ne(p){return p.replace(/[^0-9a-zA-z]+/g,"_")}function ie(p,s,v){var u=p+"-"+ne(s)+"-"+ne(v)+"-"+c;return _[u]||Y(u,p,s,v),"url(#"+u+")"}function Y(p,s,v,u){if(s==="sequenceflow-end"){var f=Ee("path",{d:"M 1 5 L 11 10 L 1 15 Z",...I({fill:u,stroke:u,strokeWidth:1})});X(p,{element:f,ref:{x:11,y:10},scale:.5})}if(s==="messageflow-start"){var g=Ee("circle",{cx:6,cy:6,r:3.5,...I({fill:v,stroke:u,strokeWidth:1,strokeDasharray:[1e4,1]})});X(p,{element:g,ref:{x:6,y:6}})}if(s==="messageflow-end"){var w=Ee("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...I({fill:v,stroke:u,strokeWidth:1,strokeDasharray:[1e4,1]})});X(p,{element:w,ref:{x:8.5,y:5}})}if(s==="association-start"){var j=Ee("path",{d:"M 11 5 L 1 10 L 11 15",...K({fill:"none",stroke:u,strokeWidth:1.5,strokeDasharray:[1e4,1]})});X(p,{element:j,ref:{x:1,y:10},scale:.5})}if(s==="association-end"){var ue=Ee("path",{d:"M 1 5 L 11 10 L 1 15",...K({fill:"none",stroke:u,strokeWidth:1.5,strokeDasharray:[1e4,1]})});X(p,{element:ue,ref:{x:11,y:10},scale:.5})}if(s==="conditional-flow-marker"){var ae=Ee("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...I({fill:v,stroke:u})});X(p,{element:ae,ref:{x:-1,y:10},scale:.5})}if(s==="conditional-default-flow-marker"){var de=Ee("path",{d:"M 6 4 L 10 16",...I({stroke:u})});X(p,{element:de,ref:{x:0,y:10},scale:.5})}}function S(p,s,v,u,f){Qt(u)&&(f=u,u=0),u=u||0,f=I(f),f.fill==="none"&&delete f.fillOpacity;var g=s/2,w=v/2,j=Ee("circle",{cx:g,cy:w,r:Math.round((s+v)/4-u),...f});return Pe(p,j),j}function y(p,s,v,u,f,g){Qt(f)&&(g=f,f=0),f=f||0,g=I(g);var w=Ee("rect",{x:f,y:f,width:s-f*2,height:v-f*2,rx:u,ry:u,...g});return Pe(p,w),w}function E(p,s,v,u){var f=s/2,g=v/2,w=[{x:f,y:0},{x:s,y:g},{x:f,y:v},{x:0,y:g}],j=w.map(function(ae){return ae.x+","+ae.y}).join(" ");u=I(u);var ue=Ee("polygon",{...u,points:j});return Pe(p,ue),ue}function L(p,s,v,u){v=K(v);var f=Hi(s,v,u);return Pe(p,f),f}function O(p,s,v){return L(p,s,v,5)}function k(p,s,v){v=K(v);var u=Ee("path",{...v,d:s});return Pe(p,u),u}function T(p,s,v,u){return k(s,v,le({"data-marker":p},u))}function x(p){return ve[p]}function P(p){return function(s,v){return x(p)(s,v)}}function G(p,s){var v=ze(p),u=Jl(v);return v.eventDefinitions&&v.eventDefinitions.length>1?v.parallelMultiple?x("bpmn:ParallelMultipleEventDefinition")(s,p,u):x("bpmn:MultipleEventDefinition")(s,p,u):dt(v,"bpmn:MessageEventDefinition")?x("bpmn:MessageEventDefinition")(s,p,u):dt(v,"bpmn:TimerEventDefinition")?x("bpmn:TimerEventDefinition")(s,p,u):dt(v,"bpmn:ConditionalEventDefinition")?x("bpmn:ConditionalEventDefinition")(s,p):dt(v,"bpmn:SignalEventDefinition")?x("bpmn:SignalEventDefinition")(s,p,u):dt(v,"bpmn:EscalationEventDefinition")?x("bpmn:EscalationEventDefinition")(s,p,u):dt(v,"bpmn:LinkEventDefinition")?x("bpmn:LinkEventDefinition")(s,p,u):dt(v,"bpmn:ErrorEventDefinition")?x("bpmn:ErrorEventDefinition")(s,p,u):dt(v,"bpmn:CancelEventDefinition")?x("bpmn:CancelEventDefinition")(s,p,u):dt(v,"bpmn:CompensateEventDefinition")?x("bpmn:CompensateEventDefinition")(s,p,u):dt(v,"bpmn:TerminateEventDefinition")?x("bpmn:TerminateEventDefinition")(s,p,u):null}function W(p,s,v){v=le({size:{width:100}},v);var u=a.createText(s||"",v);return et(u).add("djs-label"),Pe(p,u),u}function B(p,s,v){var u=ze(s);return W(p,u.name,{box:s,align:v,padding:7,style:{fill:hn(s,b,d)}})}function U(p,s){var v={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return W(p,Jn(s),{box:v,fitBox:!0,style:le({},a.getExternalStyle(),{fill:hn(s,b,d)})})}function Re(p,s,v){var u=W(p,s,{box:{height:30,width:v.height},align:"center-middle",style:{fill:hn(v,b,d)}}),f=-1*v.height;Mr(u,0,-f,270)}var ve=this.handlers={"bpmn:Event":function(p,s,v){return"fillOpacity"in v||(v.fillOpacity=Yt),S(p,s.width,s.height,v)},"bpmn:StartEvent":function(p,s){var v={fill:me(s,l),stroke:H(s,d)},u=ze(s);u.isInterrupting||(v={strokeDasharray:"6",fill:me(s,l),stroke:H(s,d)});var f=x("bpmn:Event")(p,s,v);return G(s,p),f},"bpmn:MessageEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.235,my:.315}}),f=v?H(s,d):me(s,l),g=v?me(s,l):H(s,d),w=k(p,u,{strokeWidth:1,fill:f,stroke:g});return w},"bpmn:TimerEventDefinition":function(p,s){var v=S(p,s.width,s.height,.2*s.height,{strokeWidth:2,fill:me(s,l),stroke:H(s,d)}),u=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}});k(p,u,{strokeWidth:2,stroke:H(s,d)});for(var f=0;f<12;f++){var g=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}}),w=s.width/2,j=s.height/2;k(p,g,{strokeWidth:1,transform:"rotate("+f*30+","+j+","+w+")",stroke:H(s,d)})}return v},"bpmn:EscalationEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)})},"bpmn:ConditionalEventDefinition":function(p,s){var v=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.222}});return k(p,v,{strokeWidth:1,stroke:H(s,d)})},"bpmn:LinkEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)})},"bpmn:ErrorEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.2,my:.722}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)})},"bpmn:CancelEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),f=v?H(s,d):"none",g=k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)});return _u(g,45),g},"bpmn:CompensateEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.22,my:.5}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)})},"bpmn:SignalEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f,stroke:H(s,d)})},"bpmn:MultipleEventDefinition":function(p,s,v){var u=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.222,my:.36}}),f=v?H(s,d):"none";return k(p,u,{strokeWidth:1,fill:f})},"bpmn:ParallelMultipleEventDefinition":function(p,s){var v=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width,containerHeight:s.height,position:{mx:.458,my:.194}});return k(p,v,{strokeWidth:1,fill:H(s,d),stroke:H(s,d)})},"bpmn:EndEvent":function(p,s){var v=x("bpmn:Event")(p,s,{strokeWidth:4,fill:me(s,l),stroke:H(s,d)});return G(s,p),v},"bpmn:TerminateEventDefinition":function(p,s){var v=S(p,s.width,s.height,8,{strokeWidth:4,fill:H(s,d),stroke:H(s,d)});return v},"bpmn:IntermediateEvent":function(p,s){var v=x("bpmn:Event")(p,s,{strokeWidth:1.5,fill:me(s,l),stroke:H(s,d)});return S(p,s.width,s.height,xi,{strokeWidth:1.5,fill:me(s,"none"),stroke:H(s,d)}),G(s,p),v},"bpmn:IntermediateCatchEvent":P("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":P("bpmn:IntermediateEvent"),"bpmn:Activity":function(p,s,v){return v=v||{},"fillOpacity"in v||(v.fillOpacity=Yt),y(p,s.width,s.height,zn,v)},"bpmn:Task":function(p,s){var v={fill:me(s,l),stroke:H(s,d)},u=x("bpmn:Activity")(p,s,v);return B(p,s,"center-middle"),fe(p,s),u},"bpmn:ServiceTask":function(p,s){var v=x("bpmn:Task")(p,s),u=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});k(p,u,{strokeWidth:1,fill:me(s,l),stroke:H(s,d)});var f=i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});k(p,f,{strokeWidth:0,fill:me(s,l)});var g=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return k(p,g,{strokeWidth:1,fill:me(s,l),stroke:H(s,d)}),v},"bpmn:UserTask":function(p,s){var v=x("bpmn:Task")(p,s),u=15,f=12,g=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:u,y:f}});k(p,g,{strokeWidth:.5,fill:me(s,l),stroke:H(s,d)});var w=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:u,y:f}});k(p,w,{strokeWidth:.5,fill:me(s,l),stroke:H(s,d)});var j=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:u,y:f}});return k(p,j,{strokeWidth:.5,fill:H(s,d),stroke:H(s,d)}),v},"bpmn:ManualTask":function(p,s){var v=x("bpmn:Task")(p,s),u=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return k(p,u,{strokeWidth:.5,fill:me(s,l),stroke:H(s,d)}),v},"bpmn:SendTask":function(p,s){var v=x("bpmn:Task")(p,s),u=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return k(p,u,{strokeWidth:1,fill:H(s,d),stroke:me(s,l)}),v},"bpmn:ReceiveTask":function(p,s){var v=ze(s),u=x("bpmn:Task")(p,s),f;return v.instantiate?(S(p,28,28,20*.22,{strokeWidth:1}),f=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):f=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),k(p,f,{strokeWidth:1,fill:me(s,l),stroke:H(s,d)}),u},"bpmn:ScriptTask":function(p,s){var v=x("bpmn:Task")(p,s),u=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return k(p,u,{strokeWidth:1,stroke:H(s,d)}),v},"bpmn:BusinessRuleTask":function(p,s){var v=x("bpmn:Task")(p,s),u=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),f=k(p,u);be(f,{strokeWidth:1,fill:me(s,"#aaaaaa"),stroke:H(s,d)});var g=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),w=k(p,g);return be(w,{strokeWidth:1,stroke:H(s,d)}),v},"bpmn:SubProcess":function(p,s,v){v={fill:me(s,l),stroke:H(s,d),...v};var u=x("bpmn:Activity")(p,s,v),f=Ci(s);return Pl(s)&&be(u,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),B(p,s,f?"center-top":"center-middle"),f?fe(p,s):fe(p,s,["SubProcessMarker"]),u},"bpmn:AdHocSubProcess":function(p,s){return x("bpmn:SubProcess")(p,s)},"bpmn:Transaction":function(p,s){var v=x("bpmn:SubProcess")(p,s,{strokeWidth:1.5}),u=n.style(["no-fill","no-events"],{stroke:H(s,d),strokeWidth:1.5});return y(p,s.width,s.height,zn-3,xi,u),v},"bpmn:CallActivity":function(p,s){return x("bpmn:SubProcess")(p,s,{strokeWidth:5})},"bpmn:Participant":function(p,s){var v=1.5,u={fillOpacity:Yt,fill:me(s,l),stroke:H(s,d),strokeWidth:v},f=x("bpmn:Lane")(p,s,u),g=Ci(s);if(g){L(p,[{x:30,y:0},{x:30,y:s.height}],{stroke:H(s,d),strokeWidth:v});var w=ze(s).name;Re(p,w,s)}else{var j=ze(s).name;W(p,j,{box:s,align:"center-middle",style:{fill:hn(s,b,d)}})}var ue=!!ze(s).participantMultiplicity;return ue&&x("ParticipantMultiplicityMarker")(p,s),f},"bpmn:Lane":function(p,s,v){var u=y(p,s.width,s.height,0,{fill:me(s,l),fillOpacity:ku,stroke:H(s,d),strokeWidth:1.5,...v}),f=ze(s);if(f.$type==="bpmn:Lane"){var g=f.name;Re(p,g,s)}return u},"bpmn:InclusiveGateway":function(p,s){var v=x("bpmn:Gateway")(p,s);return S(p,s.width,s.height,s.height*.24,{strokeWidth:2.5,fill:me(s,l),stroke:H(s,d)}),v},"bpmn:ExclusiveGateway":function(p,s){var v=x("bpmn:Gateway")(p,s),u=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}});return tn(s).isMarkerVisible&&k(p,u,{strokeWidth:1,fill:H(s,d),stroke:H(s,d)}),v},"bpmn:ComplexGateway":function(p,s){var v=x("bpmn:Gateway")(p,s),u=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return k(p,u,{strokeWidth:1,fill:H(s,d),stroke:H(s,d)}),v},"bpmn:ParallelGateway":function(p,s){var v=x("bpmn:Gateway")(p,s),u=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return k(p,u,{strokeWidth:1,fill:H(s,d),stroke:H(s,d)}),v},"bpmn:EventBasedGateway":function(p,s){var v=ze(s),u=x("bpmn:Gateway")(p,s);S(p,s.width,s.height,s.height*.2,{strokeWidth:1,fill:"none",stroke:H(s,d)});var f=v.eventGatewayType,g=!!v.instantiate;function w(){var ue=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});k(p,ue,{strokeWidth:2,fill:me(s,"none"),stroke:H(s,d)})}if(f==="Parallel"){var j=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});k(p,j,{strokeWidth:1,fill:"none"})}else f==="Exclusive"&&(g||S(p,s.width,s.height,s.height*.26,{strokeWidth:1,fill:"none",stroke:H(s,d)}),w());return u},"bpmn:Gateway":function(p,s){return E(p,s.width,s.height,{fill:me(s,l),fillOpacity:Yt,stroke:H(s,d)})},"bpmn:SequenceFlow":function(p,s){var v=me(s,l),u=H(s,d),f=O(p,s.waypoints,{markerEnd:ie("sequenceflow-end",v,u),stroke:H(s,d)}),g=ze(s),w;return s.source&&(w=s.source.businessObject,g.conditionExpression&&w.$instanceOf("bpmn:Activity")&&be(f,{markerStart:ie("conditional-flow-marker",v,u)}),w.default&&(w.$instanceOf("bpmn:Gateway")||w.$instanceOf("bpmn:Activity"))&&w.default===g&&be(f,{markerStart:ie("conditional-default-flow-marker",v,u)})),f},"bpmn:Association":function(p,s,v){var u=ze(s),f=me(s,l),g=H(s,d);return v={strokeDasharray:"0, 5",stroke:H(s,d),...v},(u.associationDirection==="One"||u.associationDirection==="Both")&&(v.markerEnd=ie("association-end",f,g)),u.associationDirection==="Both"&&(v.markerStart=ie("association-start",f,g)),O(p,s.waypoints,v)},"bpmn:DataInputAssociation":function(p,s){var v=me(s,l),u=H(s,d);return x("bpmn:Association")(p,s,{markerEnd:ie("association-end",v,u)})},"bpmn:DataOutputAssociation":function(p,s){var v=me(s,l),u=H(s,d);return x("bpmn:Association")(p,s,{markerEnd:ie("association-end",v,u)})},"bpmn:MessageFlow":function(p,s){var v=ze(s),u=tn(s),f=me(s,l),g=H(s,d),w=O(p,s.waypoints,{markerEnd:ie("messageflow-end",f,g),markerStart:ie("messageflow-start",f,g),strokeDasharray:"10, 11",strokeWidth:1.5,stroke:H(s,d)});if(v.messageRef){var j=w.getPointAtLength(w.getTotalLength()/2),ue=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:j.x,y:j.y}}),ae={strokeWidth:1};u.messageVisibleKind==="initiating"?(ae.fill="white",ae.stroke=yn):(ae.fill="#888",ae.stroke="white");var de=k(p,ue,ae),oe=v.messageRef.name,qe=W(p,oe,{align:"center-top",fitBox:!0,style:{fill:H(s,b)}}),je=de.getBBox(),ge=qe.getBBox(),xe=j.x-ge.width/2,Qe=j.y+je.height/2+Cu;Mr(qe,xe,Qe,0)}return w},"bpmn:DataObject":function(p,s){var v=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),u=k(p,v,{fill:me(s,l),fillOpacity:Yt,stroke:H(s,d)}),f=ze(s);return eu(f)&&Oe(p,s),u},"bpmn:DataObjectReference":P("bpmn:DataObject"),"bpmn:DataInput":function(p,s){var v=i.getRawPath("DATA_ARROW"),u=x("bpmn:DataObject")(p,s);return k(p,v,{strokeWidth:1}),u},"bpmn:DataOutput":function(p,s){var v=i.getRawPath("DATA_ARROW"),u=x("bpmn:DataObject")(p,s);return k(p,v,{strokeWidth:1,fill:yn}),u},"bpmn:DataStoreReference":function(p,s){var v=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}}),u=k(p,v,{strokeWidth:2,fill:me(s,l),fillOpacity:Yt,stroke:H(s,d)});return u},"bpmn:BoundaryEvent":function(p,s){var v=ze(s),u=v.cancelActivity,f={strokeWidth:1.5,fill:me(s,l),stroke:H(s,d)};u||(f.strokeDasharray="6");var g={...f,fillOpacity:1},w={...f,fill:"none"},j=x("bpmn:Event")(p,s,g);return S(p,s.width,s.height,xi,w),G(s,p),j},"bpmn:Group":function(p,s){return y(p,s.width,s.height,zn,{stroke:H(s,d),strokeWidth:1.5,strokeDasharray:"10,6,0,6",fill:"none",pointerEvents:"none"})},label:function(p,s){return U(p,s)},"bpmn:TextAnnotation":function(p,s){var v=y(p,s.width,s.height,0,0,{fill:"none",stroke:"none"}),u=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:0}});k(p,u,{stroke:H(s,d)});var f=ze(s).text||"";return W(p,f,{box:s,align:"left-top",padding:7,style:{fill:hn(s,b,d)}}),v},ParticipantMultiplicityMarker:function(p,s){var v=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:s.width/2/s.width,my:(s.height-15)/s.height}});T("participant-multiplicity",p,v,{strokeWidth:2,fill:me(s,l),stroke:H(s,d)})},SubProcessMarker:function(p,s){var v=y(p,14,14,0,{strokeWidth:1,fill:me(s,l),stroke:H(s,d)});Ia(v,s.width/2-7.5,s.height-20);var u=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});T("sub-process",p,u,{fill:me(s,l),stroke:H(s,d)})},ParallelMarker:function(p,s,v){var u=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+v.parallel)/s.width,my:(s.height-20)/s.height}});T("parallel",p,u,{fill:me(s,l),stroke:H(s,d)})},SequentialMarker:function(p,s,v){var u=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+v.seq)/s.width,my:(s.height-19)/s.height}});T("sequential",p,u,{fill:me(s,l),stroke:H(s,d)})},CompensationMarker:function(p,s,v){var u=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+v.compensation)/s.width,my:(s.height-13)/s.height}});T("compensation",p,u,{strokeWidth:1,fill:me(s,l),stroke:H(s,d)})},LoopMarker:function(p,s,v){var u=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+v.loop)/s.width,my:(s.height-7)/s.height}});T("loop",p,u,{strokeWidth:1.5,fill:me(s,l),stroke:H(s,d),strokeMiterlimit:.5})},AdhocMarker:function(p,s,v){var u=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+v.adhoc)/s.width,my:(s.height-15)/s.height}});T("adhoc",p,u,{strokeWidth:1,fill:H(s,d),stroke:H(s,d)})}};function fe(p,s,v){var u=ze(s),f=v&&v.indexOf("SubProcessMarker")!==-1,g;f?g={seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:g={seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},ee(v,function(ue){x(ue)(p,s,g)}),u.isForCompensation&&x("CompensationMarker")(p,s,g),u.$type==="bpmn:AdHocSubProcess"&&x("AdhocMarker")(p,s,g);var w=u.loopCharacteristics,j=w&&w.isSequential;w&&(j===void 0&&x("LoopMarker")(p,s,g),j===!1&&x("ParallelMarker")(p,s,g),j===!0&&x("SequentialMarker")(p,s,g))}function Oe(p,s){var v=(s.height-18)/s.height,u=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:v}});k(p,u,{strokeWidth:2})}this._drawPath=k,this._renderer=x}yt(qt,Et);qt.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];qt.prototype.canRender=function(e){return ce(e,"bpmn:BaseElement")};qt.prototype.drawShape=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};qt.prototype.drawConnection=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};qt.prototype.getShapePath=function(e){return ce(e,"bpmn:Event")?tu(e):ce(e,"bpmn:Activity")?nu(e,zn):ce(e,"bpmn:Gateway")?iu(e):ru(e)};var Ru=0,Nu={width:150,height:50};function Iu(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function Du(e){return Qt(e)?le({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function Pu(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(a){return{width:0,height:0}}}function Mu(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=Pu(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return Lu(e,r,i,a);r=$u(r,a.width,t)}}function Lu(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Lr="";function Bu(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===Lr)&&r.pop();break}var o=r[r.length-1];return o&&o===Lr&&(r[r.length-1]="-"),r.join("")}function $u(e,t,n){var i=Math.max(e.length*(n/t),1),r=Bu(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function Ou(){var e=document.getElementById("helper-svg");return e||(e=Ee("svg"),be(e,{id:"helper-svg"}),Ke(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function oi(e){this._config=le({},{size:Nu,padding:Ru,style:{},align:"center-top"},e||{})}oi.prototype.createText=function(e,t){return this.layoutText(e,t).element};oi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};oi.prototype.layoutText=function(e,t){var n=le({},this._config.size,t.box),i=le({},this._config.style,t.style),r=Iu(t.align||this._config.align),a=Du(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,l=Vu(i),d=e.split(/\u00AD?\r?\n/),b=[],c=n.width-a.left-a.right,_=Ee("text");be(_,{x:0,y:0}),be(_,i);var I=Ou();for(Pe(I,_);d.length;)b.push(Mu(d,c,_));r.vertical==="middle"&&(a.top=a.bottom=0);var K=Jt(b,function(S,y,E){return S+(l||y.height)},0)+a.top+a.bottom,X=Jt(b,function(S,y,E){return y.width>S?y.width:S},0),ne=a.top;r.vertical==="middle"&&(ne+=(n.height-K)/2),ne-=(l||b[0].height)/4;var ie=Ee("text");be(ie,i),ee(b,function(S){var y;switch(ne+=l||S.height,r.horizontal){case"left":y=a.left;break;case"right":y=(o?X:c)-a.right-S.width;break;default:y=Math.max(((o?X:c)-S.width)/2+a.left,0)}var E=Ee("tspan");be(E,{x:y,y:ne}),E.textContent=S.text,Pe(ie,E)}),sn(_);var Y={width:X,height:K};return{dimensions:Y,element:ie}};function Vu(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var Fu=12,Uu=1.2,qu=30;function Da(e){var t=le({fontFamily:"Arial, sans-serif",fontSize:Fu,fontWeight:"normal",lineHeight:Uu},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=le({},t,{fontSize:n},e&&e.externalStyle||{}),r=new oi({style:t});this.getExternalLabelBounds=function(a,o){var l=r.getDimensions(o,{box:{width:90,height:30,x:a.width/2+a.x,y:a.height/2+a.y},style:i});return{x:Math.round(a.x+a.width/2-l.width/2),y:Math.round(a.y),width:Math.ceil(l.width),height:Math.ceil(l.height)}},this.getTextAnnotationBounds=function(a,o){var l=r.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(qu,Math.round(l.height))}},this.createText=function(a,o){return r.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Da.$inject=["config.textRenderer"];function ju(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var l=n.containerHeight/i.height*n.yScaleFactor,d=n.containerWidth/i.width*n.xScaleFactor,b=0;b<i.heightElements.length;b++)o["y"+b]=i.heightElements[b]*l;for(var c=0;c<i.widthElements.length;c++)o["x"+c]=i.widthElements[c]*d}var _=Gu(i.d,{mx:r,my:a,e:o});return _}}var zu=/\{([^{}]+)\}/g,Wu=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Hu(e,t,n){var i=n;return t.replace(Wu,function(r,a,o,l,d){a=a||l,i&&(a in i&&(i=i[a]),typeof i=="function"&&d&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Gu(e,t){return String(e).replace(zu,function(n,i){return Hu(n,i,t)})}const Yu={__init__:["bpmnRenderer"],bpmnRenderer:["type",qt],textRenderer:["type",Da],pathMap:["type",ju]};function Ku(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Pa={translate:["value",Ku]};var ii={width:90,height:20},Br=15;function Xu(e){return ce(e,"bpmn:Event")||ce(e,"bpmn:Gateway")||ce(e,"bpmn:DataStoreReference")||ce(e,"bpmn:DataObjectReference")||ce(e,"bpmn:DataInput")||ce(e,"bpmn:DataOutput")||ce(e,"bpmn:SequenceFlow")||ce(e,"bpmn:MessageFlow")||ce(e,"bpmn:Group")}function Qu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=Zu(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),o=r.x,l=r.y;return Math.abs(a)<Math.PI/2?l-=Br:o+=Br,{x:o,y:l}}function Zu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Ju(e){return e.waypoints?Qu(e.waypoints):ce(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ii.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ii.height/2}}function ec(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max(ii.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Ju(t),i=ii),le({x:n.x-i.width/2,y:n.y-i.height/2},i)}function tc(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Mi(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function nc(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function ic(e){return tc({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function rc(e){for(var t=e.waypoints,n=t.reduce(function(b,c,_){var I=t[_-1];if(I){var K=b[b.length-1],X=K&&K.endLength||0,ne=ac(I,c);b.push({start:I,end:c,startLength:X,endLength:X+ne,length:ne})}return b},[]),i=n.reduce(function(b,c){return b+c.length},0),r=i/2,a=0,o=n[a];o.endLength<r;)o=n[++a];var l=(r-o.startLength)/o.length,d={x:o.start.x+(o.end.x-o.start.x)*l,y:o.start.y+(o.end.y-o.start.y)*l};return d}function Li(e){return sc(e)?rc(e):ic(e)}function ac(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sc(e){return!!e.waypoints}function Ue(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function Wn(e,t,n){return le({id:e.id,type:e.$type,businessObject:e,di:t},n)}function oc(e,t,n){var i=e.waypoint;return!i||i.length<2?[Li(t),Li(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Ma(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:Ue(n),referenced:Ue(t),property:i}))}function xt(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}xt.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];xt.prototype.add=function(e,t,n){var i,r=this._translate,a,o;if(ce(t,"bpmndi:BPMNPlane")){var l=ce(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(Wn(e,t,l)),this._canvas.addRootElement(i)}else if(ce(t,"bpmndi:BPMNShape")){var d=!Ci(e,t),b=uc(e);a=n&&(n.hidden||n.collapsed);var c=t.bounds;i=this._elementFactory.createShape(Wn(e,t,{collapsed:d,hidden:a,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height),isFrame:b})),ce(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),ce(e,"bpmn:Lane")&&(o=0),ce(e,"bpmn:DataStoreReference")&&(lc(n,Li(c))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(ce(t,"bpmndi:BPMNEdge")){var _=this._getSource(e),I=this._getTarget(e);a=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(Wn(e,t,{hidden:a,source:_,target:I,waypoints:oc(t,_,I)})),ce(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(r("unknown di {di} for element {semantic}",{di:Ue(t),semantic:Ue(e)}));return Xu(e)&&Jn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};xt.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Ue(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw Ma(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),a.indexOf(t)===-1&&a.push(t)};xt.prototype.addLabel=function(e,t,n){var i,r,a;return i=ec(t,n),r=Jn(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(Wn(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Jn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};xt.prototype._getEnd=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Ma(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:Ue(e),side:t}))};xt.prototype._getSource=function(e){return this._getEnd(e,"source")};xt.prototype._getTarget=function(e){return this._getEnd(e,"target")};xt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function lc(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function uc(e){return ce(e,"bpmn:Group")}const cc={__depends__:[Pa],bpmnImporter:["type",xt]},dc={__depends__:[Yu,cc]};function Ki(e){return e.originalEvent||e.srcEvent}function pc(){return/mac/i.test(navigator.platform)}function La(e,t){return(Ki(e)||e).button===t}function _n(e){return La(e,0)}function fc(e){return La(e,1)}function hc(e){var t=Ki(e)||e;return _n(e)?pc()?t.metaKey:t.ctrlKey:!1}function mc(e){var t=Ki(e)||e;return _n(e)&&t.shiftKey}function yc(e){return!0}function Vn(e){return _n(e)||fc(e)}var $r=500;function Ba(e,t,n){var i=this;function r(T,x,P){if(!l(T,x)){var G,W,B;P?W=t.getGraphics(P):(G=x.delegateTarget||x.target,G&&(W=G,P=t.get(W))),!(!W||!P)&&(B=e.fire(T,{element:P,gfx:W,originalEvent:x}),B===!1&&(x.stopPropagation(),x.preventDefault()))}}var a={};function o(T){return a[T]}function l(T,x){var P=b[T]||_n;return!P(x)}var d={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},b={"element.contextmenu":yc,"element.mousedown":Vn,"element.mouseup":Vn,"element.click":Vn,"element.dblclick":Vn};function c(T,x,P){var G=d[T];if(!G)throw new Error("unmapped DOM event name <"+T+">");return r(G,x,P)}var _="svg, .djs-element";function I(T,x,P,G){var W=a[P]=function(B){r(P,B)};G&&(b[P]=G),W.$delegate=Pi.bind(T,_,x,W)}function K(T,x,P){var G=o(P);G&&Pi.unbind(T,x,G.$delegate)}function X(T){ee(d,function(x,P){I(T,P,x)})}function ne(T){ee(d,function(x,P){K(T,P,x)})}e.on("canvas.destroy",function(T){ne(T.svg)}),e.on("canvas.init",function(T){X(T.svg)}),e.on(["shape.added","connection.added"],function(T){var x=T.element,P=T.gfx;e.fire("interactionEvents.createHit",{element:x,gfx:P})}),e.on(["shape.changed","connection.changed"],$r,function(T){var x=T.element,P=T.gfx;e.fire("interactionEvents.updateHit",{element:x,gfx:P})}),e.on("interactionEvents.createHit",$r,function(T){var x=T.element,P=T.gfx;i.createDefaultHit(x,P)}),e.on("interactionEvents.updateHit",function(T){var x=T.element,P=T.gfx;i.updateDefaultHit(x,P)});var ie=L("djs-hit djs-hit-stroke"),Y=L("djs-hit djs-hit-click-stroke"),S=L("djs-hit djs-hit-all"),y=L("djs-hit djs-hit-no-move"),E={all:S,"click-stroke":Y,stroke:ie,"no-move":y};function L(T,x){return x=le({stroke:"white",strokeWidth:15},x||{}),n.cls(T,["no-fill","no-border"],x)}function O(T,x){var P=E[x];if(!P)throw new Error("invalid hit type <"+x+">");return be(T,P),T}function k(T,x){Pe(T,x)}this.removeHits=function(T){var x=xu(".djs-hit",T);ee(x,sn)},this.createDefaultHit=function(T,x){var P=T.waypoints,G=T.isFrame,W;return P?this.createWaypointsHit(x,P):(W=G?"stroke":"all",this.createBoxHit(x,W,{width:T.width,height:T.height}))},this.createWaypointsHit=function(T,x){var P=Hi(x);return O(P,"stroke"),k(T,P),P},this.createBoxHit=function(T,x,P){P=le({x:0,y:0},P);var G=Ee("rect");return O(G,x),be(G,P),k(T,G),G},this.updateDefaultHit=function(T,x){var P=lt(".djs-hit",x);if(P)return T.waypoints?Ta(P,T.waypoints):be(P,{width:T.width,height:T.height}),P},this.fire=r,this.triggerMouseEvent=c,this.mouseHandler=o,this.registerEvent=I,this.unregisterEvent=K}Ba.$inject=["eventBus","elementRegistry","styles"];const vc={__init__:["interactionEvents"],interactionEvents:["type",Ba]};function Vt(e,t){t=!!t,ut(e)||(e=[e]);var n,i,r,a;return ee(e,function(o){var l=o;o.waypoints&&!t&&(l=Vt(o.waypoints,!0));var d=l.x,b=l.y,c=l.height||0,_=l.width||0;(d<n||n===void 0)&&(n=d),(b<i||i===void 0)&&(i=b),(d+_>r||r===void 0)&&(r=d+_),(b+c>a||a===void 0)&&(a=b+c)}),{x:n,y:i,height:a-i,width:r-n}}function $a(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Oa(e){return!!(e&&e.isFrame)}var gc=500;function li(e,t){this.offset=6;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a,o){var l=Ee("rect");return be(l,le({x:10,y:10,rx:4,width:100,height:100},n)),Pe(a,l),l}e.on(["shape.added","shape.changed"],gc,function(a){var o=a.element,l=a.gfx,d=lt(".djs-outline",l);d||(d=r(l)),i.updateShapeOutline(d,o)}),e.on(["connection.added","connection.changed"],function(a){var o=a.element,l=a.gfx,d=lt(".djs-outline",l);d||(d=r(l)),i.updateConnectionOutline(d,o)})}li.prototype.updateShapeOutline=function(e,t){be(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};li.prototype.updateConnectionOutline=function(e,t){var n=Vt(t);be(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};li.$inject=["eventBus","styles","elementRegistry"];const bc={__init__:["outline"],outline:["type",li]};function on(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}on.$inject=["eventBus","canvas"];on.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};on.prototype.get=function(){return this._selectedElements};on.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};on.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();ut(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(o){var l=r.findRoot(o);return a===l}),t?ee(e,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Or="hover",Vr="selected",Fn=6;function Xi(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(o,l){e.addMarker(o,l)}function a(o,l){e.removeMarker(o,l)}t.on("element.hover",function(o){r(o.element,Or)}),t.on("element.out",function(o){a(o.element,Or)}),t.on("selection.changed",function(o){function l(_){a(_,Vr)}function d(_){r(_,Vr)}var b=o.oldSelection,c=o.newSelection;ee(b,function(_){c.indexOf(_)===-1&&l(_)}),ee(c,function(_){b.indexOf(_)===-1&&d(_)}),i._updateSelectionOutline(c)}),t.on("element.changed",function(o){n.isSelected(o.element)&&i._updateSelectionOutline(n.get())})}Xi.$inject=["canvas","eventBus","selection"];Xi.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");_a(t);var n=e.length>1,i=this._canvas.getContainer();if(et(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=wc(Vt(e)),a=Ee("rect");be(a,le({rx:3},r)),et(a).add("djs-selection-outline"),Pe(t,a)}};function wc(e){return{x:e.x-Fn,y:e.y-Fn,width:e.width+Fn*2,height:e.height+Fn*2}}function Va(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,o=a.canExecute,l=a.elements,d=a.hints||{},b=d.autoSelect;if(o){if(b===!1)return;ut(b)?t.select(b):t.select(l.filter(Ec))}}),e.on("connect.end",500,function(r){var a=r.context,o=a.connection;o&&t.select(o)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],o=i.get(r.context.shape.id),l=ct(a,function(d){return o.id===d.id});l||t.select(o)}),e.on("element.click",function(r){if(_n(r)){var a=r.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),l=t.get().length>1,d=hc(r)||mc(r);if(o&&l)return d?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,d)}})}Va.$inject=["eventBus","selection","canvas","elementRegistry"];function Ec(e){return!e.hidden}const xc={__init__:["selectionVisuals","selectionBehavior"],__depends__:[vc,bc],selection:["type",on],selectionVisuals:["type",Xi],selectionBehavior:["type",Va]};function Fa(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Fa.prototype.next=function(){return this._prefix+ ++this._counter};var _c=new Fa("ov"),Sc=500;function $e(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=_c,this._overlayDefaults=le({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Ac(n.getContainer()),this._init()}$e.$inject=["config.overlays","eventBus","canvas","elementRegistry"];$e.prototype.get=function(e){if(ht(e)&&(e={id:e}),ht(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Zt(t.overlays,kr({type:e.type})):t.overlays.slice():[]}else return e.type?Zt(this._overlays,kr({type:e.type})):e.id?this._overlays[e.id]:null};$e.prototype.add=function(e,t,n){if(Qt(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=le({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};$e.prototype.remove=function(e){var t=this.get(e)||[];ut(t)||(t=[t]);var n=this;ee(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(ni(i.html),ni(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};$e.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};$e.prototype.show=function(){ui(this._overlayRoot)};$e.prototype.hide=function(){ui(this._overlayRoot,!1)};$e.prototype.clear=function(){this._overlays={},this._overlayContainers=[],ka(this._overlayRoot)};$e.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=Vt(t);i=a.x,r=a.y}Ua(n,i,r),fu(e.html,"data-container-id",t.id)};$e.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var o;i.waypoints?o=Vt(i).width:o=i.width,r=t.right*-1+o}if(t.bottom!==void 0){var l;i.waypoints?l=Vt(i).height:l=i.height,a=t.bottom*-1+l}Ua(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$e.prototype._createOverlayContainer=function(e){var t=mt('<div class="djs-overlays" />');Ke(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};$e.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";qa(this._overlayRoot,n)};$e.prototype._getOverlayContainer=function(e,t){var n=ct(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};$e.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),ht(i)&&(i=mt(i)),a=this._getOverlayContainer(n),r=mt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Ke(r,{position:"absolute"}),r.appendChild(i),e.type&&si(r).add("djs-overlay-"+e.type);var o=this._canvas.findRoot(n),l=this._canvas.getRootElement();ui(r,o===l),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$e.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,l=this._canvas.getRootElement(),d=!0;(i!==l||n&&(Ot(r)&&r>t.scale||Ot(a)&&a<t.scale))&&(d=!1),ui(o,d),this._updateOverlayScale(e,t)};$e.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,o,l="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Ot(i)&&t.scale<i&&(o=(1/t.scale||1)*i),Ot(r)&&t.scale>r&&(o=(1/t.scale||1)*r)),Ot(o)&&(l="scale("+o+","+o+")"),qa(a,l)};$e.prototype._updateOverlaysVisibilty=function(e){var t=this;ee(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};$e.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});ee(a,function(d){t.remove(d.id)});var o=t._getOverlayContainer(r);if(o){ni(o.html);var l=t._overlayContainers.indexOf(o);l!==-1&&t._overlayContainers.splice(l,1)}}),e.on("element.changed",Sc,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(ee(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&si(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function Ac(e){var t=mt('<div class="djs-overlay-container" />');return Ke(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Ua(e,t,n){Ke(e,{left:t+"px",top:n+"px"})}function ui(e,t){e.style.display=t===!1?"none":""}function qa(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const ja={__init__:["overlays"],overlays:["type",$e]};function za(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire($a(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}za.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Tc={__init__:["changeSupport"],changeSupport:["type",za]};var kc=1e3;function jt(e){this._eventBus=e}jt.$inject=["eventBus"];function Cc(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}jt.prototype.on=function(e,t,n,i,r,a){if((St(t)||At(t))&&(a=r,r=i,i=n,n=t,t=null),St(n)&&(a=r,r=i,i=n,n=kc),Qt(r)&&(a=r,r=!1),!St(i))throw new Error("handlerFn must be a function");ut(e)||(e=[e]);var o=this._eventBus;ee(e,function(l){var d=["commandStack",l,t].filter(function(b){return b}).join(".");o.on(d,n,r?Cc(i,a):i,a)})};var Rc=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];ee(Rc,function(e){jt.prototype[e]=function(t,n,i,r,a){(St(t)||At(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}});function Qi(e,t){t.invoke(jt,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}yt(Qi,jt);Qi.$inject=["canvas","injector"];const Nc={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Qi]};var Ic={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Dc(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return Ic[t]})}var Pc="_plane";function Zi(e){var t=e.id;return ce(e,"bpmn:SubProcess")?Mc(t):t}function Mc(e){return e+Pc}var Lc="bjs-breadcrumbs-shown";function Wa(e,t,n,i){var r=mt('<ul class="bjs-breadcrumbs"></ul>'),a=i.getContainer(),o=si(a);a.appendChild(r);var l=[];e.on("element.changed",function(b){var c=b.element,_=en(c),I=ct(l,function(K){return K===_});I&&d()});function d(b){b&&(l=Bc(b));var c=l.map(function(I){var K=Dc(I.name||I.id),X=mt('<li><span class="bjs-crumb"><a title="'+K+'">'+K+"</a></span></li>"),ne=i.findRoot(Zi(I))||i.findRoot(I.id);if(!ne&&ce(I,"bpmn:Process")){var ie=t.find(function(Y){var S=en(Y);return S&&S.processRef&&S.processRef===I});ne=i.findRoot(ie.id)}return X.addEventListener("click",function(){i.setRootElement(ne)}),X});r.innerHTML="";var _=c.length>1;o.toggle(Lc,_),c.forEach(function(I){r.appendChild(I)})}e.on("root.set",function(b){d(b.element)})}Wa.$inject=["eventBus","elementRegistry","overlays","canvas"];function Bc(e){for(var t=en(e),n=[],i=t;i;i=i.$parent)(ce(i,"bpmn:SubProcess")||ce(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Ha(e,t){var n=null,i=new $c;e.on("root.set",function(r){var a=r.element,o=t.viewbox(),l=i.get(a);if(i.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=a,!(ce(a,"bpmn:Collaboration")&&!l)){l=l||{x:0,y:0,zoom:1};var d=(o.x-l.x)*o.scale,b=(o.y-l.y)*o.scale;(d!==0||b!==0)&&t.scroll({dx:d,dy:b}),l.zoom!==o.scale&&t.zoom(l.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Ha.$inject=["eventBus","canvas"];function $c(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Fr={x:180,y:160};function zt(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n.handleImport(r.definitions)})}zt.prototype.handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=[];e.diagrams.forEach(function(i){var r=t.createNewDiagrams(i.plane);Array.prototype.push.apply(n,r)}),n.forEach(function(i){t.movePlaneElementsToOrigin(i.plane)})}};zt.prototype.createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var o=a.bpmnElement;if(o){var l=o.$parent;ce(o,"bpmn:SubProcess")&&!a.isExpanded&&n.push(o),Vc(o,e)&&i.push({diElement:a,parent:l})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var o=t.createDiagram(a);t._processToDiagramMap[a.id]=o,r.push(o)}}),i.forEach(function(a){for(var o=a.diElement,l=a.parent;l&&n.indexOf(l)===-1;)l=l.$parent;if(l){var d=t._processToDiagramMap[l.id];t.moveToDiPlane(o,d.plane)}}),r};zt.prototype.movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Oc(e),i={x:n.x-Fr.x,y:n.y-Fr.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};zt.prototype.moveToDiPlane=function(e,t){var n=Ga(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};zt.prototype.createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};zt.$inject=["eventBus","moddle"];function Ga(e){return ce(e,"bpmndi:BPMNDiagram")?e:Ga(e.$parent)}function Oc(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Mi(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),nc(t)}function Vc(e,t){var n=e.$parent;return!(!ce(n,"bpmn:SubProcess")||n===t.bpmnElement||Dl(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Un=250,Fc='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Uc="bjs-drilldown-empty";function It(e,t,n,i){jt.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i;var r=this;this.executed("shape.toggleCollapse",Un,function(a){var o=a.shape;r.canDrillDown(o)?r.addOverlay(o):r.removeOverlay(o)},!0),this.reverted("shape.toggleCollapse",Un,function(a){var o=a.shape;r.canDrillDown(o)?r.addOverlay(o):r.removeOverlay(o)},!0),this.executed(["shape.create","shape.move","shape.delete"],Un,function(a){var o=a.oldParent,l=a.newParent||a.parent,d=a.shape;r.canDrillDown(d)&&r.addOverlay(d),r.updateDrilldownOverlay(o),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(d)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Un,function(a){var o=a.oldParent,l=a.newParent||a.parent,d=a.shape;r.canDrillDown(d)&&r.addOverlay(d),r.updateDrilldownOverlay(o),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(d)},!0),t.on("import.render.complete",function(){n.filter(function(a){return r.canDrillDown(a)}).map(function(a){r.addOverlay(a)})})}yt(It,jt);It.prototype.updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this.updateOverlayVisibility(n)}};It.prototype.canDrillDown=function(e){var t=this._canvas;return ce(e,"bpmn:SubProcess")&&t.findRoot(Zi(e))};It.prototype.updateOverlayVisibility=function(e){var t=this._overlays,n=e.businessObject,i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.flowElements&&n.flowElements.length;si(i.html).toggle(Uc,!r)}};It.prototype.addOverlay=function(e){var t=this._canvas,n=this._overlays,i=n.get({element:e,type:"drilldown"});i.length&&this.removeOverlay(e);var r=mt('<button class="bjs-drilldown">'+Fc+"</button>");r.addEventListener("click",function(){t.setRootElement(t.findRoot(Zi(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:r}),this.updateOverlayVisibility(e)};It.prototype.removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};It.$inject=["canvas","eventBus","elementRegistry","overlays"];const qc={__depends__:[ja,Tc,Nc],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Wa],drilldownCentering:["type",Ha],drilldownOverlayBehavior:["type",It],subprocessCompatibility:["type",zt]},jc=/^class[ {]/;function zc(e){return jc.test(e.toString())}function Ji(e){return Array.isArray(e)}function _i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Hn(...e){e.length===1&&Ji(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Wc=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Hc=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Gc=/\/\*([^*]*)\*\//m;function Yc(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(zc(e)?Wc:Hc);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Gc);return(r&&r[1]||i).trim()})||[]}function Ya(e,t){t=t||{get:function(S,y){if(n.push(S),y===!1)return null;throw o(`No provider for "${S}"!`)}};const n=[],i=this._providers=Object.create(t._providers||null),r=this._instances=Object.create(null),a=r.injector=this,o=function(S){const y=n.join(" -> ");return n.length=0,new Error(y?`${S} (Resolving: ${y})`:S)};function l(S,y){if(!i[S]&&S.indexOf(".")!==-1){const E=S.split(".");let L=l(E.shift());for(;E.length;)L=L[E.shift()];return L}if(_i(r,S))return r[S];if(_i(i,S)){if(n.indexOf(S)!==-1)throw n.push(S),o("Cannot resolve circular dependency!");return n.push(S),r[S]=i[S][0](i[S][1]),n.pop(),r[S]}return t.get(S,y)}function d(S,y){if(typeof y>"u"&&(y={}),typeof S!="function")if(Ji(S))S=Hn(S.slice());else throw o(`Cannot invoke "${S}". Expected a function!`);const L=(S.$inject||Yc(S)).map(O=>_i(y,O)?y[O]:l(O));return{fn:S,dependencies:L}}function b(S){const{fn:y,dependencies:E}=d(S),L=Function.prototype.bind.apply(y,[null].concat(E));return new L}function c(S,y,E){const{fn:L,dependencies:O}=d(S,E);return L.apply(y,O)}function _(S){return Hn(y=>S.get(y))}function I(S,y){if(y&&y.length){const E=Object.create(null),L=Object.create(null),O=[],k=[],T=[];let x,P,G,W;for(let B in i)x=i[B],y.indexOf(B)!==-1&&(x[2]==="private"?(P=O.indexOf(x[3]),P===-1?(G=x[3].createChild([],y),W=_(G),O.push(x[3]),k.push(G),T.push(W),E[B]=[W,B,"private",G]):E[B]=[T[P],B,"private",k[P]]):E[B]=[x[2],x[1]],L[B]=!0),(x[2]==="factory"||x[2]==="type")&&x[1].$scope&&y.forEach(U=>{x[1].$scope.indexOf(U)!==-1&&(E[B]=[x[2],x[1]],L[U]=!0)});y.forEach(B=>{if(!L[B])throw new Error('No provider for "'+B+'". Cannot use provider from the parent!')}),S.unshift(E)}return new Ya(S,a)}const K={factory:c,type:b,value:function(S){return S}};function X(S,y){const E=S.__init__||[];return function(){E.forEach(L=>{typeof L=="string"?y.get(L):y.invoke(L)})}}function ne(S){const y=S.__exports__;if(y){const E=S.__modules__,L=Object.keys(S).reduce((P,G)=>(G!=="__exports__"&&G!=="__modules__"&&G!=="__init__"&&G!=="__depends__"&&(P[G]=S[G]),P),Object.create(null)),O=(E||[]).concat(L),k=I(O),T=Hn(function(P){return k.get(P)});y.forEach(function(P){i[P]=[T,P,"private",k]});const x=(S.__init__||[]).slice();return x.unshift(function(){k.init()}),S=Object.assign({},S,{__init__:x}),X(S,k)}return Object.keys(S).forEach(function(E){if(E==="__init__"||E==="__depends__")return;if(S[E][2]==="private"){i[E]=S[E];return}const L=S[E][0],O=S[E][1];i[E]=[K[L],Kc(L,O),L]}),X(S,a)}function ie(S,y){return S.indexOf(y)!==-1||(S=(y.__depends__||[]).reduce(ie,S),S.indexOf(y)!==-1)?S:S.concat(y)}function Y(S){const y=S.reduce(ie,[]).map(ne);let E=!1;return function(){E||(E=!0,y.forEach(L=>L()))}}this.get=l,this.invoke=c,this.instantiate=b,this.createChild=I,this.init=Y(e)}function Kc(e,t){return e!=="value"&&Ji(t)&&(t=Hn(t.slice())),t}var Xc=1;function Dt(e,t){Et.call(this,e,Xc),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}yt(Dt,Et);Dt.prototype.canRender=function(){return!0};Dt.prototype.drawShape=function(t,n,i){var r=Ee("rect");return be(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Oa(n)?be(r,le({},this.FRAME_STYLE,i||{})):be(r,le({},this.SHAPE_STYLE,i||{})),Pe(t,r),r};Dt.prototype.drawConnection=function(t,n,i){var r=Hi(n.waypoints,le({},this.CONNECTION_STYLE,i||{}));return Pe(t,r),r};Dt.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,o=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return Ut(o)};Dt.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return Ut(a)};Dt.$inject=["eventBus","styles"];function Qc(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return le(a,{class:n})},this.style=function(n,i){!ut(n)&&!i&&(i=n,n=[]);var r=Jt(n,function(a,o){return le(a,e[o]||{})},{});return i?le(r,i):r},this.computeStyle=function(n,i,r){return ut(i)||(r=i,i=[]),t.style(i||[],le({},r,n||{}))}}const Zc={__init__:["defaultRenderer"],defaultRenderer:["type",Dt],styles:["type",Qc]};function Jc(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function ed(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Gn(e,t){return Math.round(e*t)/t}function Ur(e){return At(e)?e+"px":e}function td(e){for(;e.parent;)e=e.parent;return e}function nd(e){e=le({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Ke(n,{position:"relative",overflow:"hidden",width:Ur(e.width),height:Ur(e.height)}),t.appendChild(n),n}function Ka(e,t,n){const i=Ee("g");et(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const id="base",Xa=0,rd=1,ad={shape:["x","y","width","height"],connection:["waypoints"]};function pe(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}pe.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];pe.prototype._init=function(e){const t=this._eventBus,n=this._container=nd(e),i=this._svg=Ee("svg");be(i,{width:"100%",height:"100%"}),Pe(n,i);const r=this._viewport=Ka(i,"viewport");e.deferUpdate!==!1&&(this._viewboxChanged=kl(Tt(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};pe.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};pe.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=$a(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};pe.prototype.getDefaultLayer=function(){return this.getLayer(id,Xa)};pe.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};pe.prototype._getChildIndex=function(e){return Jt(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};pe.prototype._createLayer=function(e,t){typeof t>"u"&&(t=rd);const n=this._getChildIndex(t);return{group:Ka(this._viewport,"layer-"+e,n),index:t,visible:!0}};pe.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};pe.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(sn(n),t.visible=!1),n};pe.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],sn(t.group))};pe.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};pe.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(td(e))||{}).rootElement:void 0};pe.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};pe.prototype._findPlaneForRoot=function(e){return ct(this._planes,function(t){return t.rootElement===e})};pe.prototype.getContainer=function(){return this._container};pe.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(ee([i.gfx,i.secondaryGfx],function(r){r&&(n?et(r).add(t):et(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};pe.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};pe.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};pe.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return et(n).has(t)};pe.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};pe.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};pe.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,Xa);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};pe.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};pe.prototype.setRootElement=function(e,t){if(Ot(t))throw new Error("override not supported");if(e===this._rootElement)return;let n;if(!e)throw new Error("rootElement required");return n=this._findPlaneForRoot(e),n||(e=this.addRootElement(e)),this._setRoot(e),e};pe.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};pe.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};pe.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};pe.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=ad[e];if(!ji(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};pe.prototype._setParent=function(e,t,n){ed(t.children,e,n),e.parent=t};pe.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const o=a.create(e,t,i);return this._elementRegistry.add(t,o),a.update(e,t,o),r.fire(e+".added",{element:t,gfx:o}),t};pe.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};pe.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};pe.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Jc(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};pe.prototype.removeShape=function(e){return this._removeElement(e,"shape")};pe.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};pe.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};pe.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};pe.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};pe.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,a,o,l,d,b;if(e)this._changeViewbox(function(){l=Math.min(n.width/e.width,n.height/e.height);const c=this._svg.createSVGMatrix().scale(l).translate(-e.x,-e.y);wn(t,c)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},o=wn(t),r=o?o.matrix:Ul(),l=Gn(r.a,1e3),d=Gn(-r.e||0,1e3),b=Gn(-r.f||0,1e3),e=this._cachedViewbox={x:d?d/l:0,y:b?b/l:0,width:n.width/l,height:n.height/l,scale:l,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};pe.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=le({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Qa(t,n)}),{x:n.e,y:n.f}};pe.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);i!==this.getRootElement()&&this.setRootElement(i),t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=Vt(e),a=Mi(r),o=this.viewbox(),l=this.zoom();let d,b;o.y+=t.top/l,o.x+=t.left/l,o.width-=(t.right+t.left)/l,o.height-=(t.bottom+t.top)/l;const c=Mi(o);if(!(r.width<o.width&&r.height<o.height))d=r.x-o.x,b=r.y-o.y;else{const I=Math.max(0,a.right-c.right),K=Math.min(0,a.left-c.left),X=Math.max(0,a.bottom-c.bottom),ne=Math.min(0,a.top-c.top);d=I||K,b=X||ne}this.scroll({dx:-d*l,dy:-b*l})};pe.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Gn(i.a,1e3)};function Qa(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}pe.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};pe.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let o,l,d,b,c;d=i.getCTM();const _=d.a;return t?(o=le(a,t),l=o.matrixTransform(d.inverse()),b=r.translate(l.x,l.y).scale(1/_*e).translate(-l.x,-l.y),c=d.multiply(b)):c=r.scale(e),Qa(this._viewport,c),c};pe.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};pe.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,o=n.height*t.scale;return{x:i,y:r,width:a,height:o}};pe.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var nn="data-element-id";function tt(e){this._elements={},this._eventBus=e}tt.$inject=["eventBus"];tt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),be(t,nn,i),n&&be(n,nn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};tt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(be(i.gfx,nn,""),i.secondaryGfx&&be(i.secondaryGfx,nn,""),delete t[n])};tt.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};tt.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&be(t,nn,i),t};tt.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&be(e,nn);var n=this._elements[t];return n&&n.element};tt.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};tt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],o=a.element,l=a.gfx;if(e(o,l))return o}};tt.prototype.getAll=function(){return this.filter(function(e){return e})};tt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};tt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};tt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var er={exports:{}},ci={};function sd(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var l=this.indexOf(a);if(typeof o>"u"){if(l!==-1)return;o=this.length}l!==-1&&this.splice(l,1),this.splice(o,0,a),l===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function od(e){return e.__refs_collection===!0}ci.extend=sd;ci.isExtended=od;var Za=ci;function ld(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function Ja(e,t,n){var i=Za.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function ud(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var o=r;r=null,o&&e.unset(o,i,n),r=a,e.set(r,i,n)}}})}function Rt(e,t){if(!(this instanceof Rt))return new Rt(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Rt.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Ja(this,t,e):ud(this,t,e)};Rt.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Za.isExtended(n)||Ja(this,t,e),n};Rt.prototype.ensureBound=function(e,t){ld(e,t)||this.bind(e,t)};Rt.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Rt.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var cd=Rt;er.exports=cd;er.exports.Collection=ci;var dd=er.exports;const Sn=Fs(dd);var es=new Sn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ts=new Sn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),qr=new Sn({name:"attachers",collection:!0},{name:"host"}),ns=new Sn({name:"outgoing",collection:!0},{name:"source"}),is=new Sn({name:"incoming",collection:!0},{name:"target"});function di(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),es.bind(this,"parent"),ts.bind(this,"labels"),ns.bind(this,"outgoing"),is.bind(this,"incoming")}function ln(){di.call(this),es.bind(this,"children"),qr.bind(this,"host"),qr.bind(this,"attachers")}yt(ln,di);function rs(){ln.call(this)}yt(rs,ln);function as(){ln.call(this),ts.bind(this,"labelTarget")}yt(as,ln);function ss(){di.call(this),ns.bind(this,"source"),is.bind(this,"target")}yt(ss,di);var pd={connection:ss,shape:ln,label:as,root:rs};function fd(e,t){var n=pd[e];if(!n)throw new Error("unknown type: <"+e+">");return le(new n,t)}function un(){this._uid=12}un.prototype.createRoot=function(e){return this.create("root",e)};un.prototype.createLabel=function(e){return this.create("label",e)};un.prototype.createShape=function(e){return this.create("shape",e)};un.prototype.createConnection=function(e){return this.create("connection",e)};un.prototype.create=function(e,t){return t=le({},t||{}),t.id||(t.id=e+"_"+this._uid++),fd(e,t)};var ri="__fn",os=1e3,hd=Array.prototype.slice;function Xe(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Xe.prototype.on=function(e,t,n,i){if(e=ut(e)?e:[e],St(t)&&(i=n,n=t,t=os),!At(t))throw new Error("priority must be a number");var r=n;i&&(r=Tt(n,i),r[ri]=n[ri]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:r,next:null})})};Xe.prototype.once=function(e,t,n,i){var r=this;if(St(t)&&(i=n,n=t,t=os),!At(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(i,arguments);return r.off(e,a),o}a[ri]=n,this.on(e,t,a)};Xe.prototype.off=function(e,t){e=ut(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};Xe.prototype.createEvent=function(e){var t=new An;return t.init(e),t};Xe.prototype.fire=function(e,t){var n,i,r,a;if(a=hd.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof An?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==o&&(n.type=o)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};Xe.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Xe.prototype._destroy=function(){this._listeners={}};Xe.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};Xe.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=md(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};Xe.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};Xe.prototype._getListeners=function(e){return this._listeners[e]};Xe.prototype._setListeners=function(e,t){this._listeners[e]=t};Xe.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[ri]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function An(){}An.prototype.stopPropagation=function(){this.cancelBubble=!0};An.prototype.preventDefault=function(){this.defaultPrevented=!0};An.prototype.init=function(e){le(this,e||{})};function md(e,t){return e.apply(null,t)}function yd(e){return e.childNodes[0]}function vd(e){return e.parentNode.childNodes[1]}function nt(e,t){this._eventBus=e,this._elementRegistry=t}nt.$inject=["eventBus","elementRegistry"];nt.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=vd(t),n||(n=Ee("g"),et(n).add("djs-children"),Pe(t.parentNode,n))):n=t,n};nt.prototype._clear=function(e){var t=yd(e);return ka(t),t};nt.prototype._createContainer=function(e,t,n,i){var r=Ee("g");et(r).add("djs-group"),typeof n<"u"?ls(r,t,t.childNodes[n]):Pe(t,r);var a=Ee("g");et(a).add("djs-element"),et(a).add("djs-"+e),i&&et(a).add("djs-frame"),Pe(r,a);var o=Ee("g");return et(o).add("djs-visual"),Pe(a,o),a};nt.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Oa(t))};nt.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Jt(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),ee(i,function(r){var a=r.children;if(a){var o=t._getChildrenContainer(r);ee(a.slice().reverse(),function(l){var d=n.getGraphics(l);ls(d.parentNode,o)})}})};nt.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})};nt.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};nt.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})};nt.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};nt.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Ia(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?be(n,"display","none"):be(n,"display","block")}};nt.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);sn(t.parentNode)};function ls(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const gd={__depends__:[Zc],__init__:["canvas"],canvas:["type",pe],elementRegistry:["type",tt],elementFactory:["type",un],eventBus:["type",Xe],graphicsFactory:["type",nt]};function bd(e){var t=new Ya(e);return t.init(),t}function wd(e){e=e||{};var t={config:["value",e]},n=[t,gd].concat(e.modules||[]);return bd(n)}function cn(e,t){this.injector=t=t||wd(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}cn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};cn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function tr(){}tr.prototype.get=function(e){return this.$model.properties.get(this,e)};tr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function us(e,t){this.model=e,this.properties=t}us.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(tr.prototype);ee(e.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(o){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ee(o,Tt(function(l,d){this.set(d,l)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var Ed={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},cs={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function nr(e,t){var n=cs[e];return n?n(t):t}function Bi(e){return!!Ed[e]}function ds(e){return!!cs[e]}function We(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function it(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}it.prototype.build=function(){return Rl(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};it.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};it.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var l=r.indexOf(e);if(l===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(l,1),this.addProperty(t,n?void 0:l,o),a[i.name]=a[i.localName]=t};it.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=We(r[0],i),o=We(r[1],a.prefix).name,l=this.propertiesByName[o];if(l)this.replaceProperty(l,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};it.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};it.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};it.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};it.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};it.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};it.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};it.prototype.hasProperty=function(e){return this.propertiesByName[e]};it.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ee(e.properties,Tt(function(a){a=le({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,l=a.redefines;o||l?this.redefineProperty(a,o||l,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function Pt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ee(e,Tt(this.registerPackage,this))}Pt.prototype.getPackage=function(e){return this.packageMap[e]};Pt.prototype.getPackages=function(){return this.packages};Pt.prototype.registerPackage=function(e){e=le({},e);var t=this.packageMap;jr(t,e,"prefix"),jr(t,e,"uri"),ee(e.types,Tt(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Pt.prototype.registerType=function(e,t){e=le({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:le(e.meta||{})});var n=We(e.name,t.prefix),i=n.name,r={};ee(e.properties,Tt(function(a){var o=We(a.name,n.prefix),l=o.name;Bi(a.type)||(a.type=We(a.type,o.prefix).name),le(a,{ns:o,name:l}),r[l]=a},this)),le(e,{ns:n,name:i,propertiesByName:r}),ee(e.extends,Tt(function(a){var o=We(a,n.prefix),l=this.typeMap[o.name];l.traits=l.traits||[],l.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Pt.prototype.mapTypes=function(e,t,n){var i=Bi(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(d,b){var c=We(d,Bi(d)?"":e.prefix);r.mapTypes(c,t,b)}function o(d){return a(d,!0)}function l(d){return a(d,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ee(i.superClass,n?o:l),t(i,!n),ee(i.traits,o)};Pt.prototype.getEffectiveDescriptor=function(e){var t=We(e),n=new it(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Pt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function jr(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Wt(e){this.model=e}Wt.prototype.set=function(e,t,n){if(!ht(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;xd(n)?i?delete e[r]:delete e.$attrs[$i(t)]:i?r in e?e[r]=n:ps(e,i,n):e.$attrs[$i(t)]=n};Wt.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[$i(t)];var i=n.name;return!e[i]&&n.isMany&&ps(e,n,[]),e[i]};Wt.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=le({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Wt.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Wt.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Wt.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function xd(e){return typeof e>"u"}function ps(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function $i(e){return e.replace(/^:/,"")}function at(e,t={}){this.properties=new Wt(this),this.factory=new us(this,this.properties),this.registry=new Pt(e,this.properties),this.typeCache={},this.config=t}at.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};at.prototype.getType=function(e){var t=this.typeCache,n=ht(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};at.prototype.createAny=function(e,t,n){var i=We(e),r={$type:e,$instanceOf:function(o){return o===this.$type},get:function(o){return this[o]},set:function(o,l){Cl(this,[o],l)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ee(n,function(o,l){Qt(o)&&o.value!==void 0?r[o.name]=o.value:r[l]=o}),r};at.prototype.getPackage=function(e){return this.registry.getPackage(e)};at.prototype.getPackages=function(){return this.registry.getPackages()};at.prototype.getElementDescriptor=function(e){return e.$descriptor};at.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};at.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};at.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var zr=String.fromCharCode,_d=Object.prototype.hasOwnProperty,Sd=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,gn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(gn).forEach(function(e){gn[e.toUpperCase()]=gn[e]});function Ad(e,t,n,i){return i?_d.call(gn,i)?gn[i]:"&"+i+";":zr(t||parseInt(n,16))}function Lt(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Sd,Ad):e}var Td="http://www.w3.org/2001/XMLSchema-instance",kd="xsi",Wr="xsi:type",Hr="non-whitespace outside of root node";function Kt(e){return new Error(e)}function Gr(e){return"missing namespace for prefix <"+e+">"}function qn(e){return{get:e,enumerable:!0}}function Cd(e){var t={},n;for(n in e)t[n]=e[n];return t}function Oi(e){return e+"$uri"}function Rd(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Oi(i)]=n;return t}function Yr(){return{line:0,column:0}}function Nd(e){throw e}function fs(e){if(!this)return new fs(e);var t=e&&e.proxy,n,i,r,a,o=Nd,l,d,b,c,_=Yr,I=!1,K=!1,X=null,ne=!1,ie;function Y(E){E instanceof Error||(E=Kt(E)),X=E,o(E,_)}function S(E){l&&(E instanceof Error||(E=Kt(E)),l(E,_))}this.on=function(E,L){if(typeof L!="function")throw Kt("required args <name, cb>");switch(E){case"openTag":i=L;break;case"text":n=L;break;case"closeTag":r=L;break;case"error":o=L;break;case"warn":l=L;break;case"cdata":a=L;break;case"attention":c=L;break;case"question":b=L;break;case"comment":d=L;break;default:throw Kt("unsupported event: "+E)}return this},this.ns=function(E){if(typeof E>"u"&&(E={}),typeof E!="object")throw Kt("required args <nsMap={}>");var L={},O;for(O in E)L[O]=E[O];return L[Td]=kd,K=!0,ie=L,this},this.parse=function(E){if(typeof E!="string")throw Kt("required args <xml=string>");return X=null,y(E),_=Yr,ne=!1,X},this.stop=function(){ne=!0};function y(E){var L=K?[]:null,O=K?Rd(ie):null,k,T=[],x=0,P=!1,G=!1,W=0,B=0,U,Re,ve,fe,Oe,p,s,v,u,f="",g=0,w;function j(){if(w!==null)return w;var ae,de,oe,qe=K&&O.xmlns,je=K&&I?[]:null,ge=g,xe=f,Qe=xe.length,R,te,he,Le,ye,Ze={},vt={},De,re,$;e:for(;ge<Qe;ge++)if(De=!1,re=xe.charCodeAt(ge),!(re===32||re<14&&re>8)){for((re<65||re>122||re>90&&re<97)&&re!==95&&re!==58&&(S("illegal first char attribute name"),De=!0),$=ge+1;$<Qe;$++)if(re=xe.charCodeAt($),!(re>96&&re<123||re>64&&re<91||re>47&&re<59||re===46||re===45||re===95)){if(re===32||re<14&&re>8){S("missing attribute value"),ge=$;continue e}if(re===61)break;S("illegal attribute name char"),De=!0}if(ye=xe.substring(ge,$),ye==="xmlns:xmlns"&&(S("illegal declaration of xmlns"),De=!0),re=xe.charCodeAt($+1),re===34)$=xe.indexOf('"',ge=$+2),$===-1&&($=xe.indexOf("'",ge),$!==-1&&(S("attribute value quote missmatch"),De=!0));else if(re===39)$=xe.indexOf("'",ge=$+2),$===-1&&($=xe.indexOf('"',ge),$!==-1&&(S("attribute value quote missmatch"),De=!0));else for(S("missing attribute value quotes"),De=!0,$=$+1;$<Qe&&(re=xe.charCodeAt($+1),!(re===32||re<14&&re>8));$++);for($===-1&&(S("missing closing quotes"),$=Qe,De=!0),De||(he=xe.substring(ge,$)),ge=$;$+1<Qe&&(re=xe.charCodeAt($+1),!(re===32||re<14&&re>8));$++)ge===$&&(S("illegal character after attribute end"),De=!0);if(ge=$+1,De)continue e;if(ye in vt){S("attribute <"+ye+"> already defined");continue}if(vt[ye]=!0,!K){Ze[ye]=he;continue}if(I){if(te=ye==="xmlns"?"xmlns":ye.charCodeAt(0)===120&&ye.substr(0,6)==="xmlns:"?ye.substr(6):null,te!==null){if(ae=Lt(he),de=Oi(te),Le=ie[ae],!Le){if(te==="xmlns"||de in O&&O[de]!==ae)do Le="ns"+x++;while(typeof O[Le]<"u");else Le=te;ie[ae]=Le}O[te]!==Le&&(R||(O=Cd(O),R=!0),O[te]=Le,te==="xmlns"&&(O[Oi(Le)]=ae,qe=Le),O[de]=ae),Ze[ye]=he;continue}je.push(ye,he);continue}if(re=ye.indexOf(":"),re===-1){Ze[ye]=he;continue}if(!(oe=O[ye.substring(0,re)])){S(Gr(ye.substring(0,re)));continue}ye=qe===oe?ye.substr(re+1):oe+ye.substr(re),ye===Wr&&(re=he.indexOf(":"),re!==-1?(oe=he.substring(0,re),oe=O[oe]||oe,he=oe+he.substring(re)):he=qe+":"+he),Ze[ye]=he}if(I)for(ge=0,Qe=je.length;ge<Qe;ge++){if(ye=je[ge++],he=je[ge],re=ye.indexOf(":"),re!==-1){if(!(oe=O[ye.substring(0,re)])){S(Gr(ye.substring(0,re)));continue}ye=qe===oe?ye.substr(re+1):oe+ye.substr(re),ye===Wr&&(re=he.indexOf(":"),re!==-1?(oe=he.substring(0,re),oe=O[oe]||oe,he=oe+he.substring(re)):he=qe+":"+he)}Ze[ye]=he}return w=Ze}function ue(){for(var ae=/(\r\n|\r|\n)/g,de=0,oe=0,qe=0,je=B,ge,xe;W>=qe&&(ge=ae.exec(E),!(!ge||(je=ge[0].length+ge.index,je>W)));)de+=1,qe=je;return W==-1?(oe=je,xe=E.substring(B)):B===0?xe=E.substring(B,W):(oe=W-qe,xe=B==-1?E.substring(W):E.substring(W,B+1)),{data:xe,line:de,column:oe}}for(_=ue,t&&(u=Object.create({},{name:qn(function(){return s}),originalName:qn(function(){return v}),attrs:qn(j),ns:qn(function(){return O})}));B!==-1;){if(E.charCodeAt(B)===60?W=B:W=E.indexOf("<",B),W===-1){if(T.length)return Y("unexpected end of file");if(B===0)return Y("missing start tag");B<E.length&&E.substring(B).trim()&&S(Hr);return}if(B!==W){if(T.length){if(n&&(n(E.substring(B,W),Lt,_),ne))return}else if(E.substring(B,W).trim()&&(S(Hr),ne))return}if(fe=E.charCodeAt(W+1),fe===33){if(ve=E.charCodeAt(W+2),ve===91&&E.substr(W+3,6)==="CDATA["){if(B=E.indexOf("]]>",W),B===-1)return Y("unclosed cdata");if(a&&(a(E.substring(W+9,B),_),ne))return;B+=3;continue}if(ve===45&&E.charCodeAt(W+3)===45){if(B=E.indexOf("-->",W),B===-1)return Y("unclosed comment");if(d&&(d(E.substring(W+4,B),Lt,_),ne))return;B+=3;continue}}if(fe===63){if(B=E.indexOf("?>",W),B===-1)return Y("unclosed question");if(b&&(b(E.substring(W,B+2),_),ne))return;B+=2;continue}for(U=W+1;;U++){if(Oe=E.charCodeAt(U),isNaN(Oe))return B=-1,Y("unclosed tag");if(Oe===34)ve=E.indexOf('"',U+1),U=ve!==-1?ve:U;else if(Oe===39)ve=E.indexOf("'",U+1),U=ve!==-1?ve:U;else if(Oe===62){B=U;break}}if(fe===33){if(c&&(c(E.substring(W,B+1),Lt,_),ne))return;B+=1;continue}if(w={},fe===47){if(P=!1,G=!0,!T.length)return Y("missing open tag");if(U=s=T.pop(),ve=W+2+U.length,E.substring(W+2,ve)!==U)return Y("closing tag mismatch");for(;ve<B;ve++)if(fe=E.charCodeAt(ve),!(fe===32||fe>8&&fe<14))return Y("close tag")}else{if(E.charCodeAt(B-1)===47?(U=s=E.substring(W+1,B-1),P=!0,G=!0):(U=s=E.substring(W+1,B),P=!0,G=!1),!(fe>96&&fe<123||fe>64&&fe<91||fe===95||fe===58))return Y("illegal first char nodeName");for(ve=1,Re=U.length;ve<Re;ve++)if(fe=U.charCodeAt(ve),!(fe>96&&fe<123||fe>64&&fe<91||fe>47&&fe<59||fe===45||fe===95||fe==46)){if(fe===32||fe<14&&fe>8){s=U.substring(0,ve),w=null;break}return Y("invalid nodeName")}G||T.push(s)}if(K){if(k=O,P&&(G||L.push(k),w===null&&(I=U.indexOf("xmlns",ve)!==-1)&&(g=ve,f=U,j(),I=!1)),v=s,fe=s.indexOf(":"),fe!==-1){if(p=O[s.substring(0,fe)],!p)return Y("missing namespace on <"+v+">");s=s.substr(fe+1)}else p=O.xmlns;p&&(s=p+":"+s)}if(P&&(g=ve,f=U,i&&(t?i(u,Lt,G,_):i(s,j,Lt,G,_),ne)))return;if(G){if(r&&(r(t?u:s,Lt,P,_),ne))return;K&&(P?O=k:O=L.pop())}B+=1}}}function hs(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Id={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},pi="xsi:type";function ms(e){return e.xml&&e.xml.serialize}function ys(e){return ms(e)===pi}function Dd(e){return ms(e)==="property"}function Pd(e){return e.charAt(0).toUpperCase()+e.slice(1)}function vs(e,t){return hs(t)?e.prefix+":"+Pd(e.localName):e.name}function Md(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function Ld(e,t){var n=We(e),i=t.getPackage(n.prefix);return Md(n,i)}function Nt(e){return new Error(e)}function bt(e){return e.$descriptor}function Bd(e){le(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Nt("expected element");var n=this.elementsById,i=bt(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw Nt("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Tn(){}Tn.prototype.handleEnd=function(){};Tn.prototype.handleText=function(){};Tn.prototype.handleNode=function(){};function ir(){}ir.prototype=Object.create(Tn.prototype);ir.prototype.handleNode=function(){return this};function dn(){}dn.prototype=Object.create(Tn.prototype);dn.prototype.handleText=function(e){this.body=(this.body||"")+e};function kn(e,t){this.property=e,this.context=t}kn.prototype=Object.create(dn.prototype);kn.prototype.handleNode=function(e){if(this.element)throw Nt("expected no sub nodes");return this.element=this.createReference(e),this};kn.prototype.handleEnd=function(){this.element.id=this.body};kn.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function rr(e,t){this.element=t,this.propertyDesc=e}rr.prototype=Object.create(dn.prototype);rr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=nr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function fi(){}fi.prototype=Object.create(dn.prototype);fi.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function He(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}He.prototype=Object.create(fi.prototype);He.prototype.addReference=function(e){this.context.addReference(e)};He.prototype.handleText=function(e){var t=this.element,n=bt(t),i=n.bodyProperty;if(!i)throw Nt("unexpected body text <"+e+">");dn.prototype.handleText.call(this,e)};He.prototype.handleEnd=function(){var e=this.body,t=this.element,n=bt(t),i=n.bodyProperty;i&&e!==void 0&&(e=nr(i.type,e),t.set(i.name,e))};He.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=bt(n),r=this.context,a=new n({}),o=this.model,l;return ee(t,function(d,b){var c=i.propertiesByName[b],_;c&&c.isReference?c.isMany?(_=d.split(" "),ee(_,function(I){r.addReference({element:a,property:c.ns.name,id:I})})):r.addReference({element:a,property:c.ns.name,id:d}):(c?d=nr(c.type,d):b!=="xmlns"&&(l=We(b,i.ns.prefix),o.getPackage(l.prefix)&&r.addWarning({message:"unknown attribute <"+b+">",element:a,property:b,value:d})),a.set(b,d))}),a};He.prototype.getPropertyForNode=function(e){var t=e.name,n=We(t),i=this.type,r=this.model,a=bt(i),o=n.name,l=a.propertiesByName[o],d,b;if(l&&!l.isAttr)return ys(l)&&(d=e.attributes[pi],d)?(d=Ld(d,r),b=r.getType(d),le({},l,{effectiveType:bt(b).name})):l;var c=r.getPackage(n.prefix);if(c){if(d=vs(n,c),b=r.getType(d),l=ct(a.properties,function(_){return!_.isVirtual&&!_.isReference&&!_.isAttribute&&b.hasType(_.type)}),l)return le({},l,{effectiveType:bt(b).name})}else if(l=ct(a.properties,function(_){return!_.isReference&&!_.isAttribute&&_.type==="Element"}),l)return l;throw Nt("unrecognized element <"+n.name+">")};He.prototype.toString=function(){return"ElementDescriptor["+bt(this.type).name+"]"};He.prototype.valueHandler=function(e,t){return new rr(e,t)};He.prototype.referenceHandler=function(e){return new kn(e,this.context)};He.prototype.handler=function(e){return e==="Element"?new rn(this.model,e,this.context):new He(this.model,e,this.context)};He.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,ds(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(le(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function ar(e,t,n){He.call(this,e,t,n)}ar.prototype=Object.create(He.prototype);ar.prototype.createElement=function(e){var t=e.name,n=We(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),o=a&&vs(n,a)||t;if(!r.hasType(o))throw Nt("unexpected element <"+e.originalName+">");return He.prototype.createElement.call(this,e)};function rn(e,t,n){this.model=e,this.context=n}rn.prototype=Object.create(fi.prototype);rn.prototype.createElement=function(e){var t=e.name,n=We(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};rn.prototype.handleChild=function(e){var t=new rn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};rn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function sr(e){e instanceof at&&(e={model:e}),le(this,{lax:!1},e)}sr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof He?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,o=new Bd(le({},t,{rootHandler:i})),l=new fs({proxy:!0}),d=$d();i.context=o,d.push(i);function b(L,O,k){var T=O(),x=T.line,P=T.column,G=T.data;G.charAt(0)==="<"&&G.indexOf(" ")!==-1&&(G=G.slice(0,G.indexOf(" "))+">");var W="unparsable content "+(G?G+" ":"")+`detected
	line: `+x+`
	column: `+P+`
	nested error: `+L.message;if(k)return o.addWarning({message:W,error:L}),!0;throw Nt(W)}function c(L,O){return b(L,O,!0)}function _(){var L=o.elementsById,O=o.references,k,T;for(k=0;T=O[k];k++){var x=T.element,P=L[T.id],G=bt(x).propertiesByName[T.property];if(P||o.addWarning({message:"unresolved reference <"+T.id+">",element:T.element,property:T.property,value:T.id}),G.isMany){var W=x.get(G.name),B=W.indexOf(T);B===-1&&(B=W.length),P?W[B]=P:W.splice(B,1)}else x.set(G.name,P)}}function I(){d.pop().handleEnd()}var K=/^<\?xml /i,X=/ encoding="([^"]+)"/i,ne=/^utf-8$/i;function ie(L){if(K.test(L)){var O=X.exec(L),k=O&&O[1];!k||ne.test(k)||o.addWarning({message:"unsupported document encoding <"+k+">, falling back to UTF-8"})}}function Y(L,O){var k=d.peek();try{d.push(k.handleNode(L))}catch(T){b(T,O,a)&&d.push(new ir)}}function S(L,O){try{d.peek().handleText(L)}catch(k){c(k,O)}}function y(L,O){L.trim()&&S(L,O)}var E=r.getPackages().reduce(function(L,O){return L[O.uri]=O.prefix,L},{"http://www.w3.org/XML/1998/namespace":"xml"});return l.ns(E).on("openTag",function(L,O,k,T){var x=L.attrs||{},P=Object.keys(x).reduce(function(W,B){var U=O(x[B]);return W[B]=U,W},{}),G={name:L.name,originalName:L.originalName,attributes:P,ns:L.ns};Y(G,T)}).on("question",ie).on("closeTag",I).on("cdata",S).on("text",function(L,O,k){y(O(L),k)}).on("error",b).on("warn",c),new Promise(function(L,O){var k;try{l.parse(e),_()}catch(W){k=W}var T=i.element;!k&&!T&&(k=Nt("failed to parse document as <"+i.type.$descriptor.name+">"));var x=o.warnings,P=o.references,G=o.elementsById;return k?(k.warnings=x,O(k)):L({rootElement:T,elementsById:G,references:P,warnings:x})})};sr.prototype.handler=function(e){return new ar(this.model,e)};function $d(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Od=`<?xml version="1.0" encoding="UTF-8"?>
`,Vd=/<|>|'|"|&|\n\r|\n/g,gs=/<|>|&/g;function Fd(e){var t={},n={},i={},r=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,l){n[o.uri]=o,l?r.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,l){t[o||"xmlns"]=l},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var l=o.uri,d=this.getNSKey(o);i[d]=this.byUri(l),e&&e.logUsed(o)},this.getUsed=function(o){function l(c){var _=d.getNSKey(c);return i[_]}var d=this,b=[].concat(r,a);return b.filter(l)}}function Ud(e){return e.charAt(0).toLowerCase()+e.slice(1)}function qd(e,t){return hs(t)?Ud(e):e}function bs(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function ws(e){return ht(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function jd(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function zd(e,t){return t.isGeneric?le({localName:t.ns.localName},e):le({localName:qd(t.ns.localName,t.$pkg)},e)}function Wd(e,t){return le({localName:t.ns.localName},e)}function Hd(e){var t=e.$descriptor;return Zt(t.properties,function(n){var i=n.name;if(n.isVirtual||!qi(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var Gd={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Yd={"<":"lt",">":"gt","&":"amp"};function Es(e,t,n){return e=ht(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function Kd(e){return Es(e,Vd,Gd)}function Xd(e){return Es(e,gs,Yd)}function Qd(e){return Zt(e,function(t){return t.isAttr})}function Zd(e){return Zt(e,function(t){return!t.isAttr})}function or(e){this.tagName=e}or.prototype.build=function(e){return this.element=e,this};or.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Ft(){}Ft.prototype.serializeValue=Ft.prototype.serializeTo=function(e){e.append(this.escape?Xd(this.value):this.value)};Ft.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(gs)!==-1&&(this.escape=!0),this};function lr(e){this.tagName=e}bs(lr,Ft);lr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Ce(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Ce.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=Hd(e),this.parseAttributes(Qd(r)),this.parseContainments(Zd(r))),this.parseGenericAttributes(e,i),this};Ce.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return zd(t,e)};Ce.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Wd(t,e)};Ce.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Ce.prototype.nsAttributeName=function(e){var t;if(ht(e)?t=We(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:le({localName:t.localName},n)};Ce.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ee(e,function(r,a){var o;a==="$body"?n.push(new Ft().build({type:"String"},r)):a==="$children"?ee(r,function(l){n.push(new Ce(t).build(l))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,r),o&&i.push({name:a,value:r}))}),i};Ce.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=We(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};Ce.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ee(i,function(a,o){var l=n.parseNsAttribute(e,o,a);l&&r.push(l)}),r};Ce.prototype.parseGenericAttributes=function(e,t){var n=this;ee(t,function(i){if(i.name!==pi)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Ce.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ee(e,function(r){var a=i.get(r.name),o=r.isReference,l=r.isMany;if(l||(a=[a]),r.isBody)n.push(new Ft().build(r,a[0]));else if(ds(r.type))ee(a,function(c){n.push(new lr(t.addTagName(t.nsPropertyTagName(r))).build(r,c))});else if(o)ee(a,function(c){n.push(new or(t.addTagName(t.nsPropertyTagName(r))).build(c))});else{var d=ys(r),b=Dd(r);ee(a,function(c){var _;d?_=new hi(t,r):b?_=new Ce(t,r):_=new Ce(t),n.push(_.build(c))})}})};Ce.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new Fd(i):t=i),t};Ce.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,o=i.byUri(r);return(!o||n)&&i.add(e,t),i.mapPrefix(a,r),e};Ce.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,o=e.uri,l,d,b;if(!a&&!o)return{localName:e.localName};if(b=Id[a]||i&&(i.getPackage(a)||{}).uri,o=o||b||r.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(o),!e){for(l=a,d=1;r.uriByPrefix(l);)l=a+"_"+d++;e=this.logNamespace({prefix:l,uri:o},b===o)}return a&&r.mapPrefix(a,o),e};Ce.prototype.parseAttributes=function(e){var t=this,n=this.element;ee(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];ee(r,function(o){a.push(o.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Ce.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),ws(e)};Ce.prototype.addAttribute=function(e,t){var n=this.attrs;ht(t)&&(t=Kd(t));var i=_l(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Ce.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=jd(n).concat(t)),ee(t,function(i){e.append(" ").append(ws(i.name)).append('="').append(i.value).append('"')})};Ce.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Ft;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ee(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function hi(e,t){Ce.call(this,e,t)}bs(hi,Ce);hi.prototype.parseNsAttributes=function(e){var t=Ce.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(pi),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};hi.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Jd(){this.value="",this.write=function(e){this.value+=e}}function ep(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function tp(e){e=le({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Jd,a=new ep(r,e.format);if(e.preamble&&a.append(Od),new Ce().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function mi(e,t){at.call(this,e,t)}mi.prototype=Object.create(at.prototype);mi.prototype.fromXML=function(e,t,n){ht(t)||(n=t,t="bpmn:Definitions");var i=new sr(le({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};mi.prototype.toXML=function(e,t){var n=new tp(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(o){return r(o)}})};var np="BPMN20",ip="http://www.omg.org/spec/BPMN/20100524/MODEL",rp="bpmn",ap=[],sp=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],op=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],lp={tagAlias:"lowerCase",typePrefix:"t"},up={name:np,uri:ip,prefix:rp,associations:ap,types:sp,enumerations:op,xml:lp},cp="BPMNDI",dp="http://www.omg.org/spec/BPMN/20100524/DI",pp="bpmndi",fp=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],hp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],mp=[],yp={name:cp,uri:dp,prefix:pp,types:fp,enumerations:hp,associations:mp},vp="DC",gp="http://www.omg.org/spec/DD/20100524/DC",bp="dc",wp=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Ep=[],xp={name:vp,uri:gp,prefix:bp,types:wp,associations:Ep},_p="DI",Sp="http://www.omg.org/spec/DD/20100524/DI",Ap="di",Tp=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],kp=[],Cp={tagAlias:"lowerCase"},Rp={name:_p,uri:Sp,prefix:Ap,types:Tp,associations:kp,xml:Cp},Np="bpmn.io colors for BPMN",Ip="http://bpmn.io/schema/bpmn/biocolor/1.0",Dp="bioc",Pp=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Mp=[],Lp=[],Bp={name:Np,uri:Ip,prefix:Dp,types:Pp,enumerations:Mp,associations:Lp},$p="BPMN in Color",Op="http://www.omg.org/spec/BPMN/non-normative/color/1.0",Vp="color",Fp=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Up=[],qp=[],jp={name:$p,uri:Op,prefix:Vp,types:Fp,enumerations:Up,associations:qp},zp={bpmn:up,bpmndi:yp,dc:xp,di:Rp,bioc:Bp,color:jp};function Wp(e,t){var n=le({},zp,e);return new mi(n,t)}function Cn(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(t>=1&&St(arguments[t-1])){var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);e.apply(this,i).then(function(r){var a=Object.keys(r)[0];return n(null,r[a])},function(r){return n(r,r.warnings)})}else return e.apply(this,arguments)}}var Hp="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Gp(e){qi(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(Hp)}})}function Ge(e,t){return e.$instanceOf(t)}function Yp(e){return ct(e.rootElements,function(t){return Ge(t,"bpmn:Process")||Ge(t,"bpmn:Collaboration")})}function Kp(e,t){var n={},i=[],r={};function a(g,w){return function(j){g(j,w)}}function o(g){n[g.id]=g}function l(g){return n[g.id]}function d(g,w){var j=g.gfx;if(j)throw new Error(t("already rendered {element}",{element:Ue(g)}));return e.element(g,r[g.id],w)}function b(g,w){return e.root(g,r[g.id],w)}function c(g,w){try{var j=r[g.id]&&d(g,w);return o(g),j}catch(ue){_(ue.message,{element:g,error:ue}),console.error(t("failed to import {element}",{element:Ue(g)})),console.error(ue)}}function _(g,w){e.error(g,w)}function I(g){var w=g.bpmnElement;w?r[w.id]?_(t("multiple DI elements defined for {element}",{element:Ue(w)}),{element:w}):(r[w.id]=g,Gp(w)):_(t("no bpmnElement referenced in {element}",{element:Ue(g)}),{element:g})}function K(g){X(g.plane)}function X(g){I(g),ee(g.planeElement,ne)}function ne(g){I(g)}function ie(g,w){var j=g.diagrams;if(w&&j.indexOf(w)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!w&&j&&j.length&&(w=j[0]),!w)throw new Error(t("no diagram to display"));r={},K(w);var ue=w.plane;if(!ue)throw new Error(t("no plane for {element}",{element:Ue(w)}));var ae=ue.bpmnElement;if(!ae)if(ae=Yp(g),ae)_(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Ue(ue),rootElement:Ue(ae)})),ue.bpmnElement=ae,I(ue);else throw new Error(t("no process or collaboration to display"));var de=b(ae,ue);if(Ge(ae,"bpmn:Process")||Ge(ae,"bpmn:SubProcess"))S(ae,de);else if(Ge(ae,"bpmn:Collaboration"))u(ae,de),y(g.rootElements,de);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:Ue(ue),rootElement:Ue(ae)}));Y()}function Y(){for(var g;i.length;)g=i.shift(),g()}function S(g,w){p(g,w),G(g.ioSpecification,w),P(g.artifacts,w),o(g)}function y(g,w){var j=Zt(g,function(ue){return!l(ue)&&Ge(ue,"bpmn:Process")&&ue.laneSets});j.forEach(a(S,w))}function E(g,w){c(g,w)}function L(g,w){ee(g,a(E,w))}function O(g,w){c(g,w)}function k(g,w){c(g,w)}function T(g,w){c(g,w)}function x(g,w){c(g,w)}function P(g,w){ee(g,function(j){Ge(j,"bpmn:Association")?i.push(function(){x(j,w)}):x(j,w)})}function G(g,w){g&&(ee(g.dataInputs,a(k,w)),ee(g.dataOutputs,a(T,w)))}function W(g,w){p(g,w),P(g.artifacts,w)}function B(g,w){var j=c(g,w);Ge(g,"bpmn:SubProcess")&&W(g,j||w),Ge(g,"bpmn:Activity")&&G(g.ioSpecification,w),i.push(function(){ee(g.dataInputAssociations,a(O,w)),ee(g.dataOutputAssociations,a(O,w))})}function U(g,w){c(g,w)}function Re(g,w){c(g,w)}function ve(g,w){i.push(function(){var j=c(g,w);g.childLaneSet&&fe(g.childLaneSet,j||w),f(g)})}function fe(g,w){ee(g.lanes,a(ve,w))}function Oe(g,w){ee(g,a(fe,w))}function p(g,w){s(g.flowElements,w),g.laneSets&&Oe(g.laneSets,w)}function s(g,w){ee(g,function(j){Ge(j,"bpmn:SequenceFlow")?i.push(function(){U(j,w)}):Ge(j,"bpmn:BoundaryEvent")?i.unshift(function(){B(j,w)}):Ge(j,"bpmn:FlowNode")?B(j,w):Ge(j,"bpmn:DataObject")||(Ge(j,"bpmn:DataStoreReference")||Ge(j,"bpmn:DataObjectReference")?Re(j,w):_(t("unrecognized flowElement {element} in context {context}",{element:Ue(j),context:w?Ue(w.businessObject):"null"}),{element:j,context:w}))})}function v(g,w){var j=c(g,w),ue=g.processRef;ue&&S(ue,j||w)}function u(g,w){ee(g.participants,a(v,w)),P(g.artifacts,w),i.push(function(){L(g.messageFlows,w)})}function f(g){ee(g.flowNodeRef,function(w){var j=w.get("lanes");j&&j.push(g)})}return{handleDeferred:Y,handleDefinitions:ie,handleSubProcess:W,registerDi:I}}function Xp(e,t,n){var i,r,a,o,l,d=[];function b(c,_){var I={root:function(ie,Y){return i.add(ie,Y)},element:function(ie,Y,S){return i.add(ie,Y,S)},error:function(ie,Y){d.push({message:ie,context:Y})}},K=new Kp(I,a);_=_||c.diagrams&&c.diagrams[0];var X=Qp(c,_);if(!X)throw new Error(a("no diagram to display"));ee(X,function(ie){K.handleDefinitions(c,ie)});var ne=_.plane.bpmnElement.id;o.setRootElement(o.findRoot(ne+"_plane")||o.findRoot(ne))}return new Promise(function(c,_){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("translate"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),b(t,n),r.fire("import.render.complete",{error:l,warnings:d}),c({warnings:d})}catch(I){return I.warnings=d,_(I)}})}function Qp(e,t){if(t){var n=t.plane.bpmnElement,i=n;!ce(n,"bpmn:Process")&&!ce(n,"bpmn:Collaboration")&&(i=Zp(n));var r;ce(i,"bpmn:Collaboration")?r=i:r=ct(e.rootElements,function(b){if(ce(b,"bpmn:Collaboration"))return ct(b.participants,function(c){return c.processRef===i})});var a=[i];r&&(a=Sl(r.participants,function(b){return b.processRef}),a.push(r));var o=xs(a),l=[t],d=[n];return ee(e.diagrams,function(b){var c=b.plane.bpmnElement;o.indexOf(c)!==-1&&d.indexOf(c)===-1&&(l.push(b),d.push(c))}),l}}function xs(e){var t=[];return ee(e,function(n){n&&(t.push(n),t=t.concat(xs(n.flowElements)))}),t}function Zp(e){for(var t=e;t;){if(ce(t,"bpmn:Process"))return t;t=t.$parent}}var Jp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',_s=Jp,Ss={verticalAlign:"middle"},As={color:"#404040"},ef={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},tf={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},nf={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},rf='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+_s+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',pt;function af(){pt=mt(rf),Ke(pt,ef),Ke(lt("svg",pt),Ss),Ke(lt(".backdrop",pt),tf),Ke(lt(".notice",pt),nf),Ke(lt(".link",pt),As,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function sf(){pt||(af(),Pi.bind(pt,".backdrop","click",function(e){document.body.removeChild(pt)})),document.body.appendChild(pt)}function Ie(e){e=le({},lf,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),cf(this._container),this._init(this._container,this._moddle,e)}yt(Ie,cn);Ie.prototype.importXML=Cn(async function(t,n){const i=this;function r(o){const l=i.get("eventBus").createEvent(o);return Object.defineProperty(l,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:o.warnings,references:o.references,elementsById:o.elementsById}}}),l}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let o;try{o=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(I){throw this._emit("import.parse.complete",{error:I}),I}let l=o.rootElement;const d=o.references,b=o.warnings,c=o.elementsById;a=a.concat(b),l=this._emit("import.parse.complete",r({error:null,definitions:l,elementsById:c,references:d,warnings:a}))||l;const _=await this.importDefinitions(l,n);return a=a.concat(_.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(o){let l=o;throw a=a.concat(l.warnings||[]),Yn(l,a),l=of(l),this._emit("import.done",{error:l,warnings:l.warnings}),l}});Ie.prototype.importDefinitions=Cn(async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}});Ie.prototype.open=Cn(async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw Yn(a,[]),a}if(typeof t=="string"&&(i=uf(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw Yn(a,[]),a}try{this.clear()}catch(a){throw Yn(a,[]),a}const{warnings:r}=await Xp(this,n,i);return{warnings:r}});Ie.prototype.saveXML=Cn(async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(o){i=o}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a});Ie.prototype.saveSVG=Cn(async function(t={}){this._emit("saveSVG.start");let n,i;try{const r=this.get("canvas"),a=r.getActiveLayer(),o=lt("defs",r._svg),l=Ir(a),d=o?"<defs>"+Ir(o)+"</defs>":"",b=a.getBBox();n=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+b.width+'" height="'+b.height+'" viewBox="'+b.x+" "+b.y+" "+b.width+" "+b.height+'" version="1.1">'+d+l+"</svg>"}catch(r){i=r}if(this._emit("saveSVG.done",{error:i,svg:n}),i)throw i;return{svg:n}});Ie.prototype._setDefinitions=function(e){this._definitions=e};Ie.prototype.getModules=function(e){return this._modules};Ie.prototype.clear=function(){this.getDefinitions()&&cn.prototype.clear.call(this)};Ie.prototype.destroy=function(){cn.prototype.destroy.call(this),ni(this._container)};Ie.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Ie.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Ie.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=lt(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Ie.prototype.getDefinitions=function(){return this._definitions};Ie.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Ie.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,i,r),l=le(Nl(n,["additionalModules"]),{canvas:le({},n.canvas,{container:e}),modules:o});cn.call(this,l),n&&n.container&&this.attachTo(n.container)};Ie.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Ie.prototype._createContainer=function(e){const t=mt('<div class="bjs-container"></div>');return Ke(t,{width:Kr(e.width),height:Kr(e.height),position:e.position}),t};Ie.prototype._createModdle=function(e){const t=le({},this._moddleExtensions,e.moddleExtensions);return new Wp(t)};Ie.prototype._modules=[];function Yn(e,t){return e.warnings=t,e}function of(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const lf={width:"100%",height:"100%",position:"relative"};function Kr(e){return e+(At(e)?"px":"")}function uf(e,t){return t&&ct(e.diagrams,function(n){return n.id===t})||null}function cf(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+_s+"</a>",i=mt(n);Ke(lt("svg",i),Ss),Ke(i,As,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),Yi.bind(i,"click",function(r){sf(),r.preventDefault()})}function yi(e){Ie.call(this,e)}yt(yi,Ie);yi.prototype._modules=[dc,Pa,xc,ja,qc];yi.prototype._moddleExtensions={};function df(e,t,n){return`<?xml version="1.0" encoding="UTF-8"?>
  <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
               xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
               typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
               targetNamespace="${n}">
    <process id="${e}" name="${t}" isExecutable="true"></process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_1">
      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${e}">
      </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
  </definitions>`}const pf={class:"mt-4 text-lg"},ff=an({__name:"ProcessTaskList",props:{modelValue:{type:Boolean,required:!0},instanceId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e){const t=e,{instanceId:n}=Xt(t),i=Q([]),r=Q([]),a=Q(!1),o=Q();let l;const d=async()=>{a.value=!0;try{if(!(n!=null&&n.value))return;const{xml:c,activities:_,tasks:I,processes:K}=await To(n.value);i.value=I!=null?I:[],r.value=K!=null?K:[],l||(l=Us(new yi({container:o.value}))),await l.importXML(c!=null?c:df("none","none","none"));const X=l.get("canvas");X.zoom("fit-viewport"),_==null||_.forEach(({activityId:ne,endTime:ie,deleteReason:Y})=>{let S="highlight-curr";Y?S="highlight-reject":ie&&(S="highlight"),X.addMarker(ne,S)})}finally{a.value=!1}},b=async()=>{d()};return(c,_)=>{const I=J("el-table-column"),K=J("el-table"),X=J("el-tag"),ne=J("el-dialog"),ie=ia("loading");return D(),F(ne,{title:c.$t("processInstance.op.task"),width:"98%","model-value":e.modelValue,onOpened:_[0]||(_[0]=()=>b()),"onUpdate:modelValue":_[1]||(_[1]=Y=>c.$emit("update:modelValue",Y))},{default:h(()=>[Ae("div",{ref_key:"bpmnContainer",ref:o,class:"w-full"},null,512),Qn((D(),F(K,{data:i.value},{default:h(()=>[m(I,{prop:"name",label:c.$t("processModel.name")},null,8,["label"]),m(I,{prop:"assignee",label:c.$t("processActivity.assignee")},null,8,["label"]),m(I,{property:"created",label:c.$t("processInstance.started")},{default:h(({row:Y})=>[z(q(C(Bt)(Y.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),m(I,{property:"endDate",label:c.$t("processInstance.ended")},{default:h(({row:Y})=>[z(q(Y.endDate?C(Bt)(Y.endDate).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"]),m(I,{prop:"duration",label:c.$t("processActivity.durationInMillis")},{default:h(({row:Y})=>[z(q(Y.duration?Math.floor(Y.duration/100/60/60)/10+" H":void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[ie,a.value]]),Ae("p",pf,q(c.$t("processInstance.history")),1),Qn((D(),F(K,{data:r.value},{default:h(()=>[m(I,{prop:"assignee",label:c.$t("processInstance.assignee")},null,8,["label"]),m(I,{prop:"status",label:c.$t("processInstance.status")},{default:h(({row:Y})=>[Y.status==="complete"?(D(),F(X,{key:0,type:"success",size:"small"},{default:h(()=>[z(q(c.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):Y.status==="reject"?(D(),F(X,{key:1,type:"danger",size:"small"},{default:h(()=>[z(q(c.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):Y.status==="cancel"?(D(),F(X,{key:2,type:"info",size:"small"},{default:h(()=>[z(q(c.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024)):(D(),F(X,{key:3,type:"warning",size:"small"},{default:h(()=>[z(q(c.$t(`processInstance.status.${Y.status}`)),1)]),_:2},1024))]),_:1},8,["label"]),m(I,{prop:"opinion",label:c.$t("processInstance.opinion")},null,8,["label"]),m(I,{property:"started",label:c.$t("processInstance.started")},{default:h(({row:Y})=>[z(q(C(Bt)(Y.started).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),m(I,{property:"ended",label:c.$t("processInstance.ended")},{default:h(({row:Y})=>[z(q(Y.ended?C(Bt)(Y.ended).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[ie,a.value]])]),_:1},8,["title","model-value"])}}});const hf=ai(ff,[["__scopeId","data-v-38992a11"]]),mf={class:"mb-1 ml-2"},yf={class:"mb-3"},vf={class:"mt-3 app-block"},gf={key:0},bf={class:"text-xs"},wf={class:"text-xs"},Ef={class:"text-xs"},xf={class:"text-xs"},_f={class:"text-xs"},Sf={class:"text-xs"},Af={class:"text-xs"},Tf={class:"text-xs"},kf={name:"ArticleList"},Gf=an({...kf,setup(e){const{t}=En(),n=Q({}),i=Q(),r=Q(1),a=Q(10),o=Q(0),l=Q(),d=Q([]),b=Q([]),c=Q(!1),_=Q(!1),I=Q(),K=Je(()=>d.value.map(R=>R.id)),X=Q("edit"),ne=Q([]),ie=Q(!1),Y=Q(),S=Q(),y=Q(),E=Q(),L=Q(),O=Q(),k=Q(),T=Q([]),x=Q(!1),P=Q(),G=Q(),W=Q(!1),B=["completelyDelete","delete","submit","archive","offline"],U=Q(B[0]),Re=Q(!1),ve=Q("internal"),fe=R=>U.value==="delete"?![20].includes(R.status):U.value==="submit"?![0,12].includes(R.status):U.value==="archive"?[0].includes(R.status):U.value==="offline"?[0,1,5,11,12].includes(R.status):(U.value==="completelyDelete",!0),Oe=Je(()=>b.value.filter(R=>fe(R)).map(R=>R.id)),p=async(R,te)=>{if(R==="delete")await sa(te);else if(R==="submit")await oa(te);else if(R==="archive")await la(te);else if(R==="offline")await ua(te);else if(R==="completelyDelete")await aa(te);else throw new Error(`not support action: ${R}`);s(),_t.success(t("success"))},s=async()=>{var R;c.value=!0;try{const{content:te,totalElements:he}=await go({...js(n.value),subChannelId:(R=P.value)==null?void 0:R.id,Q_OrderBy:i.value,page:r.value,pageSize:a.value});d.value=te,o.value=he}finally{c.value=!1}},v=async()=>{x.value=!0;try{T.value=Zn(await Vi({isArticlePermission:!0}))}finally{x.value=!1}},u=async()=>{ne.value=await ao()};qs(()=>{s(),v(),u()});const f=({column:R,prop:te,order:he})=>{var Le;te&&he?i.value=((Le=R.sortBy)!=null?Le:te)+(he==="descending"?"_desc":""):i.value=void 0,s()},g=()=>{r.value=1,s()},w=()=>{l.value.clearSort(),Ks(n.value),i.value=void 0,r.value=1,s()},j=()=>{X.value="add",I.value=void 0,_.value=!0},ue=R=>{X.value="copy",I.value=R,_.value=!0},ae=R=>{ke("article:update")||(X.value="edit",I.value=R,_.value=!0)},de=R=>{I.value=R,ve.value="internal",Re.value=!0},oe=R=>{I.value=R,ve.value="external",Re.value=!0},qe=(R,te)=>{var Ze,vt;ie.value=!0,Y.value=R,S.value=te.id,y.value=te.title,E.value=te.description,L.value=te.video;const he=ga(te.text),ye=va("img",he).map(De=>ya(De,"src")).filter(De=>De!=null);O.value=[...(vt=(Ze=te.imageList)==null?void 0:Ze.map(De=>De.url))!=null?vt:[],...ye],te.image&&O.value.push(te.image)},je=async R=>{await bo([R]),s(),_t.success(t("success"))},ge=R=>{G.value=R,W.value=!0},xe=async(R,te)=>{try{const{value:he}=await mn.prompt(`${t("article.sticky")} (${t("article.sticky.tooltip")})`,{confirmButtonText:t("ok"),cancelButtonText:t("cancel"),inputValue:String(te<1?1:te),inputPattern:/^\d{1,3}$/,inputErrorMessage:t("article.error.sticky")});await fr([R],Number(he)),s(),_t.success(t("success"))}catch(he){}},Qe=async R=>{await fr([R],0),s(),_t.success(t("success"))};return(R,te)=>{const he=J("el-button"),Le=J("el-tree"),ye=J("el-scrollbar"),Ze=J("el-aside"),vt=J("el-option"),De=J("el-select"),re=J("el-popconfirm"),$=J("el-table-column"),Ve=J("el-link"),Te=J("el-tag"),V=J("el-icon"),M=J("el-tooltip"),st=J("el-dropdown-item"),Rn=J("el-dropdown-menu"),Nn=J("el-dropdown"),In=J("el-table"),Dn=J("el-pagination"),Pn=J("el-main"),Mn=J("el-container"),pn=ia("loading");return D(),F(Mn,null,{default:h(()=>[m(Ze,{width:"220px",class:"pr-3"},{default:h(()=>[m(ye,{class:"p-2 bg-white rounded-sm"},{default:h(()=>[Ae("div",mf,[m(he,{type:P.value==null?"primary":void 0,link:"",onClick:te[0]||(te[0]=()=>{k.value.setCurrentKey(null),P.value=void 0,g()})},{default:h(()=>[z(q(R.$t("article.allChannel")),1)]),_:1},8,["type"])]),Qn(m(Le,{ref_key:"channelTree",ref:k,data:T.value,props:{label:"name"},"expand-on-click-node":!1,"node-key":"id","highlight-current":"",onNodeClick:te[1]||(te[1]=A=>{P.value=A,g()})},null,8,["data"]),[[pn,x.value]])]),_:1})]),_:1}),m(Pn,{class:"p-0"},{default:h(()=>[Ae("div",yf,[m(C(wo),{params:n.value,onSearch:g,onReset:w},{default:h(()=>[m(C(Fe),{label:R.$t("article.title"),name:"Q_Contains_@articleExt-title"},null,8,["label"]),m(C(Fe),{label:R.$t("article.text"),name:"Q_Contains_@articleExt-text"},null,8,["label"]),m(C(Fe),{label:R.$t("article.publishDate"),name:"Q_GE_publishDate_DateTime,Q_LE_publishDate_DateTime",type:"datetime"},null,8,["label"]),m(C(Fe),{label:R.$t("article.status"),name:"Q_In_status_Short",options:[0,1,10,11,12,15,20,21,22].map(A=>({label:R.$t(`article.status.${A}`),value:A}))},null,8,["label","options"]),m(C(Fe),{label:R.$t("article.block"),name:"Q_In_@BlockItem-blockId_Int",options:ne.value.filter(A=>A.recommendable).map(A=>({label:A.name,value:A.id}))},null,8,["label","options"]),m(C(Fe),{label:R.$t("article.org"),name:"Q_Like_org-name"},null,8,["label"]),m(C(Fe),{label:R.$t("article.user"),name:"Q_Like_user-username"},null,8,["label"]),m(C(Fe),{label:R.$t("article.created"),name:"Q_GE_@articleExt-created_DateTime,Q_LE_@articleExt-created_DateTime",type:"datetime"},null,8,["label"]),m(C(Fe),{label:R.$t("article.modifiedUser"),name:"Q_Like_modifiedUser@user-username"},null,8,["label"]),m(C(Fe),{label:R.$t("article.modified"),name:"Q_GE_@articleExt-modified_DateTime,Q_LE_@articleExt-modified_DateTime",type:"datetime"},null,8,["label"]),m(C(Fe),{label:R.$t("article.author"),name:"Q_Contains_@articleExt-author"},null,8,["label"]),m(C(Fe),{label:R.$t("article.editor"),name:"Q_Contains_@articleExt-editor"},null,8,["label"]),m(C(Fe),{label:R.$t("article.source"),name:"Q_Contains_@articleExt-source"},null,8,["label"]),m(C(Fe),{label:R.$t("article.subtitle"),name:"Q_Contains_@articleExt-subtitle"},null,8,["label"]),m(C(Fe),{label:R.$t("article.fullTitle"),name:"Q_Contains_@articleExt-fullTitle"},null,8,["label"]),m(C(Fe),{label:R.$t("article.seoKeywords"),name:"Q_Contains_@articleExt-seoKeywords"},null,8,["label"]),m(C(Fe),{label:R.$t("article.seoDescription"),name:"Q_Contains_@articleExt-seoDescription"},null,8,["label"])]),_:1},8,["params"])]),Ae("div",null,[m(he,{type:"primary",disabled:C(ke)("article:create"),icon:C(ea),onClick:te[2]||(te[2]=()=>j())},{default:h(()=>[z(q(R.$t("add")),1)]),_:1},8,["disabled","icon"]),m(De,{modelValue:U.value,"onUpdate:modelValue":te[3]||(te[3]=A=>U.value=A),class:"ml-2"},{prefix:h(()=>[z(q(R.$t("batchAction")+":"),1)]),default:h(()=>[(D(),Ne(rt,null,ot(B,A=>m(vt,{key:A,disabled:C(ke)(`article:${A}`),value:A,label:R.$t(`article.op.${A}`)},null,8,["disabled","value","label"])),64))]),_:1},8,["modelValue"]),m(re,{title:R.$t("confirmExecute"),onConfirm:te[4]||(te[4]=()=>p(U.value,Oe.value))},{reference:h(()=>[m(he,{disabled:Oe.value.length<=0||C(ke)(`article:${U.value}`),icon:C(zs)},{default:h(()=>[z(q(R.$t("execute")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),m(C(Eo),{name:"article",class:"ml-2"})]),Ae("div",vf,[Qn((D(),F(In,{ref_key:"table",ref:l,data:d.value,onSelectionChange:te[5]||(te[5]=A=>b.value=A),onRowDblclick:te[6]||(te[6]=A=>ae(A.id)),onSortChange:f},{default:h(()=>[m(C(xo),{name:"article"},{default:h(()=>[m($,{type:"selection",selectable:fe,width:"45"}),m($,{property:"id",label:"ID",width:"64",sortable:"custom"}),m($,{property:"title",label:R.$t("article.title"),"min-width":"280","sort-by":"@articleExt-title",sortable:"custom"},{default:h(({row:A})=>[m(Ve,{href:A.url,underline:!1,target:"_blank"},{default:h(()=>[z(q(A.title),1)]),_:2},1032,["href"]),(D(!0),Ne(rt,null,ot(A.blockItemList,_e=>(D(),F(Te,{key:_e.id,type:_e.enabled?void 0:"info",size:"small",class:"ml-1",closable:"",onClose:()=>je(_e.id)},{default:h(()=>[z(q(_e.block.name),1)]),_:2},1032,["type","onClose"]))),128)),A.sticky>0?(D(),F(Te,{key:0,type:"danger",class:"mx-1",effect:"light",title:R.$t("article.sticky"),size:"small",round:"",closable:!C(ke)("article:sticky"),onClose:()=>Qe(A.id)},{default:h(()=>[z(q(A.sticky),1)]),_:2},1032,["title","closable","onClose"])):se("",!0),A.srcId!=null?(D(),F(M,{key:1,placement:"top"},{content:h(()=>[z(q(C(t)(`article.type.${A.type}`))+": ",1),A.siteId!==A.src.siteId?(D(),Ne("span",gf,"["+q(A.src.site.name)+"]",1)):se("",!0),z(" "+q(A.src.channel.paths.map(_e=>_e.name).join("/")),1)]),default:h(()=>[m(V,{class:"ml-1 align-middle"},{default:h(()=>[m(C(Ws))]),_:1})]),_:2},1024)):se("",!0)]),_:1},8,["label"]),m($,{property:"channel.name",label:R.$t("article.channel"),"sort-by":"channel-name",sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"org.name",label:R.$t("article.org"),"sort-by":"org-name",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"author",label:R.$t("article.author"),"sort-by":"@articleExt-author",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"editor",label:R.$t("article.editor"),"sort-by":"@articleExt-editor",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"source",label:R.$t("article.source"),"sort-by":"@articleExt-source",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"user.username",label:R.$t("article.user"),"sort-by":"user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"created",label:R.$t("article.created"),"sort-by":"@articleExt-created","min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:h(({row:A})=>[z(q(C(Bt)(A.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),m($,{property:"modifiedUser.username",label:R.$t("article.modifiedUser"),"sort-by":"modifiedUser@user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"modified",label:R.$t("article.modified"),"sort-by":"@articleExt-modified","min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:h(({row:A})=>[z(q(C(Bt)(A.modified).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),m($,{property:"publishDate",label:R.$t("article.publishDate"),"min-width":"120",sortable:"custom","show-overflow-tooltip":""},{default:h(({row:A})=>[z(q(C(Bt)(A.publishDate).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),m($,{property:"views",label:R.$t("article.views"),"sort-by":"@articleBuffer-views",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"dayViews",label:R.$t("article.dayViews"),"sort-by":"@articleBuffer-dayViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"weekViews",label:R.$t("article.weekViews"),"sort-by":"@articleBuffer-weekViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"monthViews",label:R.$t("article.monthViews"),"sort-by":"@articleBuffer-monthViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"quarterViews",label:R.$t("article.quarterViews"),"sort-by":"@articleBuffer-quarterViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"yearViews",label:R.$t("article.yearViews"),"sort-by":"@articleBuffer-yearViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),m($,{property:"status",label:R.$t("article.status"),sortable:"custom","show-overflow-tooltip":""},{default:h(({row:A})=>[A.status===0?(D(),F(Te,{key:0,type:"success",size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024)):A.status===1?(D(),F(Te,{key:1,size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024)):A.status===20?(D(),F(Te,{key:2,type:"warning",size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024)):A.status===21?(D(),F(Te,{key:3,type:"warning",size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024)):A.status===22?(D(),F(M,{key:4,content:A.rejectReason,placement:"top"},{default:h(()=>[m(Te,{type:"danger",size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024)]),_:2},1032,["content"])):(D(),F(Te,{key:5,type:"info",size:"small"},{default:h(()=>[z(q(R.$t(`article.status.${A.status}`)),1)]),_:2},1024))]),_:1},8,["label"]),m($,{label:R.$t("table.action"),width:"260"},{default:h(({row:A})=>[m(he,{type:"primary",disabled:C(ke)("article:update"),size:"small",link:"",onClick:()=>ae(A.id)},{default:h(()=>[z(q(R.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),C(Be).epRank>0||C(Be).epDisplay?(D(),F(he,{key:0,type:"primary",disabled:!A.processInstanceId||C(ke)("processInstance:task")||C(Be).epRank<1,size:"small",link:"",onClick:()=>ge(A.processInstanceId)},{default:h(()=>[z(q(R.$t("processInstance.op.task")),1)]),_:2},1032,["disabled","onClick"])):se("",!0),m(re,{title:R.$t("confirmDelete"),onConfirm:()=>p("delete",[A.id])},{reference:h(()=>[m(he,{type:"primary",disabled:C(ke)("article:delete")||[20].includes(A.status),size:"small",link:""},{default:h(()=>[z(q(R.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"]),m(re,{title:R.$t("confirmCompletelyDelete"),onConfirm:()=>p("completelyDelete",[A.id])},{reference:h(()=>[m(he,{type:"primary",disabled:C(ke)("article:completelyDelete"),size:"small",link:""},{default:h(()=>[z(q(R.$t("completelyDelete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"]),m(Nn,{class:"ml-2 align-middle"},{dropdown:h(()=>[Ae("div",null,[m(Rn,null,{default:h(()=>[m(st,{disabled:C(ke)("article:submit")||[0,12].includes(A.status),onClick:()=>p("submit",[A.id])},{default:h(()=>[Ae("span",bf,q(R.$t("article.op.submit")),1)]),_:2},1032,["disabled","onClick"]),m(st,{disabled:C(ke)("article:archive")||![0].includes(A.status),onClick:()=>p("archive",[A.id])},{default:h(()=>[Ae("span",wf,q(R.$t("article.op.archive")),1)]),_:2},1032,["disabled","onClick"]),m(st,{disabled:C(ke)("article:offline")||![0,1,5,11,12].includes(A.status),onClick:()=>p("offline",[A.id])},{default:h(()=>[Ae("span",Ef,q(R.$t("article.op.offline")),1)]),_:2},1032,["disabled","onClick"]),m(st,{disabled:C(ke)("article:create"),divided:"",onClick:()=>ue(A.id)},{default:h(()=>[Ae("span",xf,q(R.$t("copy")),1)]),_:2},1032,["disabled","onClick"]),C(Be).epRank>=2||C(Be).epDisplay?(D(),F(st,{key:0,disabled:C(ke)("article:internalPush")||A.status!==0||A.srcId!=null||C(Be).epRank<2,title:C(Be).epRank<2?R.$t("error.enterprise.short"):void 0,onClick:()=>de(A.id)},{default:h(()=>[Ae("span",_f,q(R.$t("article.op.internalPush")),1)]),_:2},1032,["disabled","title","onClick"])):se("",!0),C(Be).epRank>=3||C(Be).epDisplay?(D(),F(st,{key:1,disabled:C(ke)("article:externalPush")||A.status!==0||A.srcId!=null||C(Be).epRank<3,title:C(Be).epRank<3?R.$t("error.enterprise.short"):void 0,onClick:()=>oe(A.id)},{default:h(()=>[Ae("span",Sf,q(R.$t("article.op.externalPush")),1)]),_:2},1032,["disabled","title","onClick"])):se("",!0),m(st,{disabled:C(ke)("article:sticky"),divided:"",onClick:()=>xe(A.id,A.sticky)},{default:h(()=>[Ae("span",Af,q(R.$t("article.op.sticky")),1)]),_:2},1032,["disabled","onClick"]),(D(!0),Ne(rt,null,ot(ne.value.filter(_e=>_e.enabled&&_e.recommendable),(_e,Mt)=>(D(),F(st,{key:_e.id,disabled:A.blocks.findIndex(Ht=>Ht.id===_e.id)>=0,divided:Mt===0,onClick:()=>qe(_e.id,A)},{default:h(()=>[Ae("span",Tf,q(`${R.$t("article.op.recommendTo")}: ${_e.name}`),1)]),_:2},1032,["disabled","divided","onClick"]))),128))]),_:2},1024)])]),default:h(()=>[m(he,{type:"primary",size:"small",link:""},{default:h(()=>[m(V,{class:"text-primary"},{default:h(()=>[m(C(Hs))]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[pn,c.value]]),m(Dn,{currentPage:r.value,"onUpdate:currentPage":te[7]||(te[7]=A=>r.value=A),pageSize:a.value,"onUpdate:pageSize":te[8]||(te[8]=A=>a.value=A),total:o.value,"page-sizes":C(Gs),layout:C(Ys),small:"",background:"",class:"justify-end px-3 py-2",onSizeChange:te[9]||(te[9]=()=>s()),onCurrentChange:te[10]||(te[10]=()=>s())},null,8,["currentPage","pageSize","total","page-sizes","layout"])]),m(yl,{modelValue:_.value,"onUpdate:modelValue":te[11]||(te[11]=A=>_.value=A),action:X.value,"bean-id":I.value,"bean-ids":K.value,channel:P.value,onFinished:s},null,8,["modelValue","action","bean-id","bean-ids","channel"]),m(wl,{modelValue:Re.value,"onUpdate:modelValue":te[12]||(te[12]=A=>Re.value=A),"bean-id":I.value,type:ve.value,onFinished:s},null,8,["modelValue","bean-id","type"]),m(Po,{modelValue:ie.value,"onUpdate:modelValue":te[13]||(te[13]=A=>ie.value=A),"bean-id":void 0,"bean-ids":[],"block-id":Y.value,"article-id":S.value,title:y.value,description:E.value,video:L.value,images:O.value,onFinished:s},null,8,["modelValue","block-id","article-id","title","description","video","images"]),m(hf,{modelValue:W.value,"onUpdate:modelValue":te[14]||(te[14]=A=>W.value=A),"instance-id":G.value},null,8,["modelValue","instance-id"])]),_:1})]),_:1})}}});export{Gf as default};
