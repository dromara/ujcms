import{g as fe,u as be,D as i,i as W,L as ge,j as m,w as a,m as n,ai as Ve,o as d,n as l,q as p,A as v,F as f,aj as _e,k,x as h,I as ye,J as F,y as P,K as we,a6 as $e,a7 as qe}from"./vendor.6c10456e.js";import{_ as Se,B as T,D as N,t as ke,p as Ie}from"./index.7a0e1ff0.js";import{m as Ue,b as ce,n as Le,o as De,p as Te,r as he}from"./config.5989ee23.js";import{a as Ce}from"./user.9ef507ab.js";import{_ as y}from"./LabelTip.a46dc98f.js";import{a as O}from"./BaseUpload.4531e0b6.js";import{F as Ke}from"./FieldItem.be13f8f1.js";const Me=S=>($e("data-v-50660bb6"),S=S(),qe(),S),Be={class:"watermark-position"},Qe=Me(()=>h("span",null,null,-1)),ze=fe({emits:{"update:modelValue":null,finished:null},setup(S){const{t:j}=be(),C=i(),w=i(),t=i({}),$=i(!1),I=i(!1),K=i([]),M=i([]),U=i([]),c=i([]),L=i([]),B=i(),J=W(()=>L.value.find(s=>s.id===B.value)),A=W(()=>{var s;return JSON.parse(((s=J.value)==null?void 0:s.customs)||"[]")}),q=[];T("siteSettings:base:update")&&q.push("base"),T("siteSettings:watermark:update")&&q.push("watermark"),T("siteSettings:customs:update")&&q.push("customs");const b=i(q[0]),Q=s=>{s==="watermark"?t.value=w.value.watermark:s==="customs"?t.value=w.value.customs:t.value=w.value},G=async()=>{M.value=await N({Q_EQ_type_Int:2})},R=async()=>{U.value=await N({Q_EQ_type_Int:1})},X=async()=>{c.value=await Ue()},Y=async()=>{K.value=ke(await Ce())},Z=async()=>{L.value=await ce({Q_EQ_type:"site"})},z=async()=>{w.value=await Le(),B.value=w.value.modelId,Q(b.value)};ge(async()=>{$.value=!0;try{await Promise.all([G(),R(),X(),Y(),Z(),z()])}finally{$.value=!1}});const x=async()=>{$.value=!0;try{await z()}finally{$.value=!1}},ee=()=>{C.value.validate(async s=>{if(!!s){I.value=!0;try{b.value==="watermark"?await De(t.value):b.value==="customs"?await Te(t.value):await he(t.value),we.success(j("success"))}finally{I.value=!1}x()}})};return(s,u)=>{const le=n("el-tab-pane"),ae=n("el-tabs"),te=n("el-aside"),ue=n("el-switch"),o=n("el-form-item"),r=n("el-col"),E=n("el-radio"),H=n("el-radio-group"),se=n("el-slider"),g=n("el-input"),D=n("el-row"),V=n("el-option"),_=n("el-select"),oe=n("el-cascader"),re=n("el-input-number"),de=n("el-button"),ne=n("el-form"),ie=n("el-main"),me=n("el-container"),pe=Ve("loading");return d(),m(me,null,{default:a(()=>[l(te,{width:"180px",class:"pr-3"},{default:a(()=>[l(ae,{modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=e=>b.value=e),onTabClick:u[1]||(u[1]=({paneName:e})=>Q(e)),"tab-position":"left",stretch:"",class:"bg-white"},{default:a(()=>[(d(),p(f,null,v(q,e=>l(le,{key:e,name:e,label:s.$t(`site.settings.${e}`)},null,8,["name","label"])),64))]),_:1},8,["modelValue"])]),_:1}),l(ie,{class:"p-3 app-block"},{default:a(()=>[_e((d(),m(ne,{ref_key:"form",ref:C,model:t.value,"label-width":"150px"},{default:a(()=>[b.value==="watermark"?(d(),m(D,{key:0},{default:a(()=>[l(r,{span:24},{default:a(()=>[l(o,{prop:"enabled",rules:{required:!0,message:()=>s.$t("v.required")}},{label:a(()=>[l(y,{message:"site.watermark.enabled"})]),default:a(()=>[l(ue,{modelValue:t.value.enabled,"onUpdate:modelValue":u[2]||(u[2]=e=>t.value.enabled=e)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"overlay",label:s.$t("site.watermark.overlay"),rules:t.value.enabled?{required:!0,message:()=>s.$t("v.required")}:{}},{default:a(()=>[l(k(O),{modelValue:t.value.overlay,"onUpdate:modelValue":u[3]||(u[3]=e=>t.value.overlay=e)},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"position",label:s.$t("site.watermark.position"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(H,{modelValue:t.value.position,"onUpdate:modelValue":u[4]||(u[4]=e=>t.value.position=e)},{default:a(()=>[h("div",Be,[(d(),p(f,null,v(9,e=>l(E,{key:e,label:e,title:s.$t(`site.watermark.position.${e}`)},{default:a(()=>[Qe]),_:2},1032,["label","title"])),64))])]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:24},{default:a(()=>[l(o,{prop:"dissolve",label:s.$t("site.watermark.dissolve"),rules:{required:!0,message:()=>s.$t("v.required")}},{label:a(()=>[l(y,{message:"site.watermark.dissolve"})]),default:a(()=>[l(se,{modelValue:t.value.dissolve,"onUpdate:modelValue":u[5]||(u[5]=e=>t.value.dissolve=e),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"minWidth",rules:{required:!0,message:()=>s.$t("v.required")}},{label:a(()=>[l(y,{message:"site.watermark.minWidth"})]),default:a(()=>[l(g,{modelValue:t.value.minWidth,"onUpdate:modelValue":u[6]||(u[6]=e=>t.value.minWidth=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"minHeight",rules:{required:!0,message:()=>s.$t("v.required")}},{label:a(()=>[l(y,{message:"site.watermark.minHeight"})]),default:a(()=>[l(g,{modelValue:t.value.minHeight,"onUpdate:modelValue":u[7]||(u[7]=e=>t.value.minHeight=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1})):b.value==="customs"?(d(),m(D,{key:1},{default:a(()=>[(d(!0),p(f,null,v(k(A),e=>(d(),m(r,{key:e.code,span:e.double?12:24},{default:a(()=>[l(o,{prop:e.code,label:e.name,rules:e.required?{required:!0,message:()=>s.$t("v.required")}:void 0},{default:a(()=>[l(Ke,{field:e,modelValue:t.value[e.code],"onUpdate:modelValue":ve=>t.value[e.code]=ve},null,8,["field","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","label","rules"])]),_:2},1032,["span"]))),128))]),_:1})):(d(),m(D,{key:2},{default:a(()=>[l(r,{span:12},{default:a(()=>[l(o,{prop:"name",label:s.$t("site.name"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(g,{modelValue:t.value.name,"onUpdate:modelValue":u[8]||(u[8]=e=>t.value.name=e),ref:"focus",maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"protocol",rules:{required:!0,message:()=>s.$t("v.required")}},{label:a(()=>[l(y,{message:"site.protocol"})]),default:a(()=>[l(_,{modelValue:t.value.protocol,"onUpdate:modelValue":u[9]||(u[9]=e=>t.value.protocol=e),class:"w-full"},{default:a(()=>[(d(),p(f,null,v(["http","https"],e=>l(V,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"domain",rules:[{required:!0,message:()=>s.$t("v.required")},{pattern:/^[a-z0-9-.]*$/,message:()=>s.$t("site.error.domainPattern")}]},{label:a(()=>[l(y,{message:"site.domain"})]),default:a(()=>[l(g,{modelValue:t.value.domain,"onUpdate:modelValue":u[10]||(u[10]=e=>t.value.domain=e),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"subDir",rules:{pattern:/^[\w-]*$/,message:()=>s.$t("site.error.subDirPattern")}},{label:a(()=>[l(y,{message:"site.subDir"})]),default:a(()=>[l(g,{modelValue:t.value.subDir,"onUpdate:modelValue":u[11]||(u[11]=e=>t.value.subDir=e),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"theme",label:s.$t("site.theme"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.theme,"onUpdate:modelValue":u[12]||(u[12]=e=>t.value.theme=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(c.value,e=>(d(),m(V,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"mobileTheme",label:s.$t("site.mobileTheme"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.mobileTheme,"onUpdate:modelValue":u[13]||(u[13]=e=>t.value.mobileTheme=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(c.value,e=>(d(),m(V,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"orgId",label:s.$t("site.org"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(oe,{modelValue:t.value.orgId,"onUpdate:modelValue":u[14]||(u[14]=e=>t.value.orgId=e),options:K.value,props:{value:"id",label:"name",checkStrictly:!0},onChange:u[15]||(u[15]=e=>t.value.orgId=e==null?void 0:e[e.length-1]),class:"w-full"},null,8,["modelValue","options"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"storageId",label:s.$t("site.storage"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.storageId,"onUpdate:modelValue":u[16]||(u[16]=e=>t.value.storageId=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(M.value,e=>(d(),m(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"htmlStorageId",label:s.$t("site.htmlStorage"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.htmlStorageId,"onUpdate:modelValue":u[17]||(u[17]=e=>t.value.htmlStorageId=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(U.value,e=>(d(),m(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"mobileStorageId",label:s.$t("site.mobileStorage"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.mobileStorageId,"onUpdate:modelValue":u[18]||(u[18]=e=>t.value.mobileStorageId=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(U.value,e=>(d(),m(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"modelId",label:s.$t("site.model"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(_,{modelValue:t.value.modelId,"onUpdate:modelValue":u[19]||(u[19]=e=>t.value.modelId=e),class:"w-full"},{default:a(()=>[(d(!0),p(f,null,v(L.value,e=>(d(),m(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"status",label:s.$t("site.status")},{default:a(()=>[l(H,{modelValue:t.value.status,"onUpdate:modelValue":u[20]||(u[20]=e=>t.value.status=e)},{default:a(()=>[(d(),p(f,null,v([0,1],e=>l(E,{key:e,label:e},{default:a(()=>[F(P(s.$t(`site.status.${e}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(r,{span:24},{default:a(()=>[l(o,{prop:"logo",label:s.$t("site.logo")},{default:a(()=>[l(k(O),{modelValue:t.value.logo,"onUpdate:modelValue":u[21]||(u[21]=e=>t.value.logo=e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"seoTitle",label:s.$t("site.seoTitle")},{default:a(()=>[l(g,{modelValue:t.value.seoKeywords,"onUpdate:modelValue":u[22]||(u[22]=e=>t.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"seoKeywords",label:s.$t("site.seoKeywords")},{default:a(()=>[l(g,{modelValue:t.value.seoKeywords,"onUpdate:modelValue":u[23]||(u[23]=e=>t.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(r,{span:24},{default:a(()=>[l(o,{prop:"seoDescription",label:s.$t("site.seoDescription")},{default:a(()=>[l(g,{modelValue:t.value.seoDescription,"onUpdate:modelValue":u[24]||(u[24]=e=>t.value.seoDescription=e),maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(r,{span:12},{default:a(()=>[l(o,{prop:"pageSize",label:s.$t("site.pageSize"),rules:{required:!0,message:()=>s.$t("v.required")}},{default:a(()=>[l(re,{modelValue:t.value.pageSize,"onUpdate:modelValue":u[25]||(u[25]=e=>t.value.pageSize=e),min:1,max:200},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1})]),_:1})),h("div",null,[l(de,{disabled:k(Ie)(`siteSettings:${b.value}:update`),loading:I.value,onClick:ye(ee,["prevent"]),type:"primary","native-type":"submit"},{default:a(()=>[F(P(s.$t("submit")),1)]),_:1},8,["disabled","loading","onClick"])])]),_:1},8,["model"])),[[pe,$.value]])]),_:1})]),_:1})}}});var je=Se(ze,[["__scopeId","data-v-50660bb6"]]);export{je as default};
