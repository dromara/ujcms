import{d as E,u as k,r as x,Y,o as S,X as s,a0 as u,b as w,P as C,l as r,h as m,w as p,aF as z,aG as N,v as O,x as V,a2 as F,a6 as I}from"./index-DiyxZ9gY.js";import{b as L,E as q}from"./el-radio-group-3iEWUNV9.js";/* empty css                        */import{h as W,i as j,j as G}from"./stat-D6Xe539s.js";const $={class:"p-3 mt-3 app-block"},P={class:"p-3 mt-3 app-block"},T={class:"p-3 mt-3 app-block"},U={class:"p-3 mt-3 app-block"},Q=E({__name:"VisitEnv",setup(X){const{t:c,n:f}=k(),v=x("last30day"),y=a=>{switch(a){case"today":return s().format("YYYY-MM-DD");case"yesterday":return s().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return s().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return s().subtract(29,"day").format("YYYY-MM-DD");case"last3month":return s().subtract(3,"month").format("YYYY-MM-DD");case"last6month":return s().subtract(6,"month").format("YYYY-MM-DD");case"lastYear":return s().subtract(1,"year").format("YYYY-MM-DD");default:return}},h=a=>a==="yesterday"?s().subtract(1,"day").format("YYYY-MM-DD"):s().format("YYYY-MM-DD"),_=Y(),M=async a=>{const n=await W({begin:y(a),end:h(a)}),i=n.reduce((t,d)=>t+Number(d.pvCount),0),l={title:{text:c("visitDevice.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>f(t*100/i,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:c("visitDevice.name"),type:"pie",radius:"72%",center:["40%","56%"],data:n.map(t=>({value:Number(t.pvCount),name:t.name}))}]},o=_.value;if(o==null)return;let e=u.getInstanceByDom(o);e==null&&(e=u.init(o)),e.setOption(l),window.addEventListener("resize",function(){e&&e.resize()})},D=Y(),B=async a=>{const n=await j({begin:y(a),end:h(a)}),i=n.reduce((t,d)=>t+Number(d.pvCount),0),l={title:{text:c("visitOs.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>f(t*100/i,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:c("visitOs.name"),type:"pie",radius:"72%",center:["40%","56%"],data:n.map(t=>({value:Number(t.pvCount),name:t.name}))}]},o=D.value;if(o==null)return;let e=u.getInstanceByDom(o);e==null&&(e=u.init(o)),e.setOption(l),window.addEventListener("resize",function(){e&&e.resize()})},b=Y(),R=async a=>{const n=await G({begin:y(a),end:h(a)}),i=n.reduce((t,d)=>t+Number(d.pvCount),0),l={title:{text:c("visitBrowser.name"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>f(t*100/i,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:c("visitBrowser.name"),type:"pie",radius:"72%",center:["40%","56%"],data:n.map(t=>({value:Number(t.pvCount),name:t.name}))}]},o=b.value;if(o==null)return;let e=u.getInstanceByDom(o);e==null&&(e=u.init(o)),e.setOption(l),window.addEventListener("resize",function(){e&&e.resize()})},g=async a=>{M(a),B(a),R(a)};return S(async()=>{g(v.value)}),(a,n)=>{const i=L,l=q,o=F,e=I;return w(),C("div",null,[r("div",$,[r("div",null,[m(l,{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=t=>v.value=t),onChange:n[1]||(n[1]=t=>g(t))},{default:p(()=>[(w(),C(z,null,N(["today","yesterday","last7day","last30day","last3month","last6month","lastYear","all"],t=>m(i,{key:t,value:t},{default:p(()=>[O(V(a.$t("visit.".concat(t))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])]),m(e,{gutter:12},{default:p(()=>[m(o,{span:12},{default:p(()=>[r("div",P,[r("div",{ref_key:"deviceChartRef",ref:_,class:"h-80"},null,512)])]),_:1}),m(o,{span:12},{default:p(()=>[r("div",T,[r("div",{ref_key:"osChartRef",ref:D,class:"h-80"},null,512)])]),_:1})]),_:1}),r("div",U,[r("div",{ref_key:"browserChartRef",ref:b,class:"h-80"},null,512)])])}}});export{Q as default};
