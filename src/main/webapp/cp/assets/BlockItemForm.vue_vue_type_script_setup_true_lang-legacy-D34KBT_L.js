System.register(["./config-legacy-DGGA2fzV.js","./content-legacy-C0HQ2q9C.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-C3VGk7HF.js","./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-legacy-DM1CTgFT.js","./vuedraggable.umd-legacy-Cf7q6G-3.js","./index-legacy-DywSgIaj.js","./BaseUpload-legacy-J8SCtRkN.js"],(function(e,l){"use strict";var a,t,u,d,i,o,r,n,m,s,c,b,p,v,g,k,h,y,f,V,I,_,$,q,U,w,x,B,j;return{setters:[e=>{a=e.a},e=>{t=e.F,u=e.V,d=e.W,i=e.X},e=>{o=e._},e=>{r=e.a},null,e=>{n=e.d,m=e.p,s=e.r,c=e.v,b=e.aX,p=e.b,v=e.e,g=e.f,k=e.w,h=e.i,y=e.K,f=e.a7,V=e.a8,I=e.k,_=e.af,$=e.n,q=e.t,U=e.aa,w=e.o,x=e.h,B=e.j},e=>{j=e.B}],execute:function(){const l=["onClick"],F=["src"],S=e("_",n({__name:"ImageExtractor",props:{modelValue:{type:Boolean,required:!0},urls:{type:Array,default:()=>[]},min:{type:Number,default:1},max:{type:Number,default:1},appendToBody:{type:Boolean}},emits:["update:modelValue","finished"],setup(e,{emit:a}){const t=e,u=a,{urls:d,max:i,modelValue:o}=m(t),r=s();return c(o,(()=>{o.value&&(r.value=b.uniq(d.value).map((e=>({url:e,checked:!1}))))})),(a,t)=>{const d=p("el-col"),o=p("el-row"),n=p("el-button"),m=p("el-dialog");return v(),g(m,{"model-value":e.modelValue,title:a.$t("article.extractImage"),width:768,"append-to-body":e.appendToBody,"onUpdate:modelValue":t[1]||(t[1]=e=>a.$emit("update:modelValue",e))},{footer:k((()=>[h(n,{type:"primary",disabled:r.value.filter((e=>e.checked)).length<e.min,onClick:t[0]||(t[0]=()=>(u("finished",r.value.filter((e=>e.checked)).map((e=>e.url))),void u("update:modelValue",!1)))},{default:k((()=>[$(q(a.$t("ok")),1)])),_:1},8,["disabled"])])),default:k((()=>[h(o,{gutter:16},{default:k((()=>[(v(!0),y(f,null,V(r.value,(e=>(v(),g(d,{key:e.url,src:e,span:8,class:"mt-2"},{default:k((()=>[I("div",{class:_(["p-1 border-2 rounded cursor-pointer text-center",{"border-primary":e.checked,"border-2":e.checked}]),onClick:()=>(e=>{if(e.checked)return void(e.checked=!e.checked);let l=0;r.value.forEach((e=>{e.checked&&(l+=1),l>=i.value&&(e.checked=!1)})),e.checked=!0})(e)},[I("img",{src:e.url,class:"max-h-36 inline"},null,8,F)],10,l)])),_:2},1032,["src"])))),128))])),_:1})])),_:1},8,["model-value","title","append-to-body"])}}}));e("a",n({name:"BlockItemForm",__name:"BlockItemForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},blockId:{type:String,default:null},articleId:{type:String,default:null},title:{type:String,default:null},description:{type:String,default:null},video:{type:String,default:null},images:{type:Array,default:()=>[]}},emits:{"update:modelValue":null,finished:null},setup(e){const l=e,{blockId:n}=m(l),c=s(),b=s(),I=s({}),_=s([]),F=U((()=>_.value.find((e=>e.id===(c.value??n?.value)))));w((async()=>{_.value=await a()}));const R=s(!1);return(l,a)=>{const m=p("el-option"),s=p("el-select"),U=p("el-form-item"),w=p("el-input"),T=p("el-button"),C=p("el-switch");return v(),y("div",null,[h(o,{values:I.value,"onUpdate:values":a[14]||(a[14]=e=>I.value=e),name:l.$t("menu.content.blockItem"),"query-bean":B(i),"create-bean":B(d),"update-bean":B(u),"delete-bean":B(t),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:b.value,"init-values":()=>({blockId:B(n),articleId:e.articleId,title:e.title,description:e.description,video:e.video,enabled:!0}),"to-values":e=>({...e,articleTitle:e.article?.title,articleId:e.article?.id}),addable:F.value?.enabled,perms:"blockItem","model-value":e.modelValue,"onUpdate:modelValue":a[15]||(a[15]=e=>l.$emit("update:modelValue",e)),onFinished:a[16]||(a[16]=()=>l.$emit("finished")),onBeanChange:a[17]||(a[17]=e=>c.value=e.blockId)},{default:k((({isEdit:t})=>[h(U,{prop:"blockId",label:l.$t("blockItem.block"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:k((()=>[h(s,{modelValue:I.value.blockId,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.blockId=e),class:"w-full",disabled:"",onChange:a[1]||(a[1]=e=>c.value=e)},{default:k((()=>[(v(!0),y(f,null,V(_.value,(e=>(v(),y(f,{key:e.id},[t||e.enabled?(v(),g(m,{key:0,label:e.name,value:e.id,disabled:!e.enabled},null,8,["label","value","disabled"])):x("",!0)],64)))),128))])),_:2},1032,["modelValue"])])),_:2},1032,["label","rules"]),t&&null!=I.value.articleId?(v(),g(U,{key:0,label:l.$t("blockItem.articleId")},{default:k((()=>[h(w,{modelValue:I.value.articleId,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.articleId=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),t&&null!=I.value.articleTitle?(v(),g(U,{key:1,label:l.$t("blockItem.articleTitle")},{default:k((()=>[h(w,{modelValue:I.value.articleTitle,"onUpdate:modelValue":a[3]||(a[3]=e=>I.value.articleTitle=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),h(U,{prop:"title",label:l.$t("blockItem.title"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{ref_key:"focus",ref:b,modelValue:I.value.title,"onUpdate:modelValue":a[4]||(a[4]=e=>I.value.title=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"]),null==I.value.articleId&&F.value?.withLinkUrl?(v(),g(U,{key:2,prop:"linkUrl",label:l.$t("blockItem.linkUrl"),rules:F.value?.linkUrlRequired?[{required:!0,message:()=>l.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}},{default:k((()=>[h(w,{modelValue:I.value.linkUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>I.value.linkUrl=e),maxlength:"255"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),F.value?.withSubtitle?(v(),g(U,{key:3,prop:"subtitle",label:l.$t("blockItem.subtitle"),rules:{required:F.value?.subtitleRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:I.value.subtitle,"onUpdate:modelValue":a[6]||(a[6]=e=>I.value.subtitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),F.value?.withDescription?(v(),g(U,{key:4,prop:"description",label:l.$t("blockItem.description"),rules:{required:F.value?.descriptionRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:I.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>I.value.description=e),type:"textarea",rows:5,maxlength:"1000"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),F.value?.withImage?(v(),g(U,{key:5,prop:"image",label:l.$t("blockItem.image"),rules:{required:F.value?.imageRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(B(r),{modelValue:I.value.image,"onUpdate:modelValue":a[8]||(a[8]=e=>I.value.image=e),width:F.value.imageWidth,height:F.value.imageHeight,mode:"manual"},null,8,["modelValue","width","height"]),e.images.length>0?(v(),g(T,{key:0,class:"self-start ml-2",onClick:a[9]||(a[9]=()=>R.value=!0)},{default:k((()=>[$(q(l.$t("article.extractImage")),1)])),_:1})):x("",!0)])),_:1},8,["label","rules"])):x("",!0),F.value?.withMobileImage?(v(),g(U,{key:6,prop:"mobileImage",label:l.$t("blockItem.mobileImage"),rules:{required:F.value?.mobileImageRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(B(r),{modelValue:I.value.mobileImage,"onUpdate:modelValue":a[10]||(a[10]=e=>I.value.mobileImage=e),width:F.value.mobileImageWidth,height:F.value.mobileImageHeight,mode:"manual"},null,8,["modelValue","width","height"])])),_:1},8,["label","rules"])):x("",!0),F.value?.withVideo?(v(),g(U,{key:7,prop:"video",label:l.$t("blockItem.video"),rules:{required:F.value?.videoRequired,message:()=>l.$t("v.required")}},{default:k((()=>[h(w,{modelValue:I.value.video,"onUpdate:modelValue":a[11]||(a[11]=e=>I.value.video=e),maxlength:"255"},{prepend:k((()=>a[20]||(a[20]=[$("URL")]))),_:1},8,["modelValue"]),h(B(j),{type:"video","on-success":e=>I.value.video=e.url},null,8,["on-success"])])),_:1},8,["label","rules"])):x("",!0),h(U,{prop:"targetBlank",label:l.$t("blockItem.targetBlank")},{default:k((()=>[h(C,{modelValue:I.value.targetBlank,"onUpdate:modelValue":a[12]||(a[12]=e=>I.value.targetBlank=e)},null,8,["modelValue"])])),_:1},8,["label"]),h(U,{prop:"enabled",label:l.$t("blockItem.enabled")},{default:k((()=>[h(C,{modelValue:I.value.enabled,"onUpdate:modelValue":a[13]||(a[13]=e=>I.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","addable","model-value"]),h(S,{modelValue:R.value,"onUpdate:modelValue":a[18]||(a[18]=e=>R.value=e),urls:e.images,"append-to-body":!0,onFinished:a[19]||(a[19]=e=>I.value.image=e[0])},null,8,["modelValue","urls"])])}}}))}}}));
