System.register(["./index-legacy-DywSgIaj.js","./tree-legacy-D1Cv8xKE.js","./config-legacy-DGGA2fzV.js","./user-legacy-LBZ1IdSp.js","./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-legacy-DM1CTgFT.js","./vuedraggable.umd-legacy-Cf7q6G-3.js","./BaseUpload.vue_vue_type_style_index_0_scoped_bf818630_lang-legacy-DiuVfy3G.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-BJUSlODe.js","./sortable.esm-legacy-xUcotENm.js","./content-legacy-C0HQ2q9C.js","./Tinymce-legacy-oURtVhhA.js","./BaseUpload-legacy-J8SCtRkN.js"],(function(e,l){"use strict";var a,t,u,s,d,i,o,n,r,m,p,v,g,b,f,y,_,c,V,h,w,k,$,q,x,U,S,C,F,I,W,H,j,B,K,T,L,z,D,A,R;return{setters:[e=>{a=e.d,t=e.u,u=e.ap,s=e.r,d=e.aa,i=e.U,o=e.V,n=e.v,r=e.o,m=e.b,p=e.c,v=e.e,g=e.f,b=e.w,f=e.i,y=e.K,_=e.a7,c=e.a8,V=e.g,h=e.ao,w=e.j,k=e.k,$=e.n,q=e.t,x=e.l,U=e.E,S=e.aq,C=e.h,F=e._},e=>{I=e.t},e=>{W=e.F,H=e.q,j=e.G,B=e.H,K=e.I,T=e.J,L=e.K,z=e.L},e=>{D=e.b},e=>{A=e.a},null,null,e=>{R=e._},null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".el-tabs[data-v-acd56a64] .el-tabs__header{margin-right:1px}.el-tabs[data-v-acd56a64] .el-tabs__content{flex-grow:0}.watermark-position[data-v-acd56a64]{display:flex;height:9rem;width:9rem;flex-wrap:wrap;border-radius:.25rem;border-width:1px;border-style:dashed;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.watermark-position[data-v-acd56a64] .el-radio__label{padding-left:0}.watermark-position[data-v-acd56a64] .el-radio{margin-right:0;display:flex;height:33.333333%;width:33.333333%;align-items:center;justify-content:center}\n/*$vite$:1*/",document.head.appendChild(l);const M={class:"watermark-position"},P=["innerHTML"],E={key:6};e("default",F(a({name:"SiteSettings",__name:"SiteSettings",emits:{"update:modelValue":null,finished:null},setup(e){const{t:l}=t(),a=u(),F=s(),N=s(),J=s({}),O=s(!1),G=s(!1),Y=s([]),Q=s([]),X=s([]),Z=s(),ee=d((()=>X.value.find((e=>e.id===Z.value)))),le=d((()=>JSON.parse(ee.value?.customs||"[]"))),ae=[];i("siteSettings:base:update")&&ae.push("base"),i("siteSettings:watermark:update")&&ae.push("watermark"),i("siteSettings:editor:update")&&(o.epRank>=2||o.epDisplay)&&ae.push("editor"),i("siteSettings:messageBoard:update")&&ae.push("messageBoard"),i("siteSettings:customs:update")&&ae.push("customs");const te=s(ae[0]),ue=()=>{"watermark"===te.value?J.value=N.value.watermark:"editor"===te.value?(J.value=N.value.editor,null==J.value.typesetting&&(J.value.typesetting={fontFamily:"",fontSize:"",lineHeight:"",textIndent:!1,imageCenterAlign:!0,tableFullWidth:!0,emptyLine:"one",halfWidthCharConversion:!0})):"messageBoard"===te.value?J.value=N.value.messageBoard:"customs"===te.value?J.value=N.value.customs:J.value=N.value};n(te,(()=>ue()));const se=async()=>{Q.value=await W()},de=async()=>{Y.value=I(await D())},ie=async()=>{X.value=await H({type:"site"})},oe=async()=>{N.value=await j(),Z.value=N.value.modelId};r((async()=>{O.value=!0;try{await Promise.all([se(),de(),ie(),oe()]),ue()}finally{O.value=!1}}));const ne=()=>{F.value.validate((async e=>{if(e){G.value=!0;try{"watermark"===te.value?await B(J.value):"editor"===te.value?await K(J.value):"messageBoard"===te.value?await T(J.value):"customs"===te.value?await L(J.value):await z(J.value),a.currentSite=await j(),U.success(l("success"))}finally{G.value=!1}(async()=>{O.value=!0;try{await oe()}finally{O.value=!1}})()}}))};return(e,l)=>{const a=m("el-tab-pane"),t=m("el-tabs"),u=m("el-aside"),s=m("el-switch"),d=m("el-form-item"),i=m("el-col"),n=m("el-radio"),r=m("el-radio-group"),U=m("el-slider"),I=m("el-input"),W=m("el-row"),H=m("el-alert"),j=m("el-divider"),B=m("el-option"),K=m("el-select"),T=m("el-input-number"),L=m("el-button"),z=m("el-form"),D=m("el-main"),N=m("el-container"),Y=p("loading");return v(),g(N,null,{default:b((()=>[f(u,{width:"180px",class:"pr-3"},{default:b((()=>[f(t,{modelValue:te.value,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value=e),"tab-position":"left",stretch:"",class:"bg-white"},{default:b((()=>[(v(),y(_,null,c(ae,(l=>f(a,{key:l,name:l,label:e.$t(`site.settings.${l}`)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),_:1}),f(D,{class:"p-3 app-block"},{default:b((()=>[V((v(),g(z,{ref_key:"form",ref:F,model:J.value,"label-width":"150px"},{default:b((()=>["watermark"===te.value?(v(),g(W,{key:0},{default:b((()=>[f(i,{span:24},{default:b((()=>[f(d,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.watermark.enabled",help:""})])),default:b((()=>[f(s,{modelValue:J.value.enabled,"onUpdate:modelValue":l[1]||(l[1]=e=>J.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"overlay",label:e.$t("site.watermark.overlay"),rules:J.value.enabled?{required:!0,message:()=>e.$t("v.required")}:{}},{default:b((()=>[f(w(A),{modelValue:J.value.overlay,"onUpdate:modelValue":l[2]||(l[2]=e=>J.value.overlay=e)},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"position",label:e.$t("site.watermark.position"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:b((()=>[f(r,{modelValue:J.value.position,"onUpdate:modelValue":l[3]||(l[3]=e=>J.value.position=e)},{default:b((()=>[k("div",M,[(v(),y(_,null,c(9,(a=>f(n,{key:a,value:a,title:e.$t(`site.watermark.position.${a}`)},{default:b((()=>l[30]||(l[30]=[k("span",null,null,-1)]))),_:2},1032,["value","title"]))),64))])])),_:1},8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"dissolve",label:e.$t("site.watermark.dissolve"),rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.watermark.dissolve",help:""})])),default:b((()=>[f(U,{modelValue:J.value.dissolve,"onUpdate:modelValue":l[4]||(l[4]=e=>J.value.dissolve=e),min:0,max:100,"show-input":""},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"minWidth",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.watermark.minWidth",help:""})])),default:b((()=>[f(I,{modelValue:J.value.minWidth,"onUpdate:modelValue":l[5]||(l[5]=e=>J.value.minWidth=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"minHeight",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.watermark.minHeight",help:""})])),default:b((()=>[f(I,{modelValue:J.value.minHeight,"onUpdate:modelValue":l[6]||(l[6]=e=>J.value.minHeight=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"editor"===te.value&&w(o).epRank<2?(v(),g(H,{key:1,type:"warning",closable:!1,"show-icon":!0},{title:b((()=>[k("span",{innerHTML:e.$t("error.enterprise")},null,8,P)])),_:1})):"editor"===te.value&&w(o).epRank>=2?(v(),y(_,{key:2},[f(j,null,{default:b((()=>[$(q(e.$t("site.editor.typesetting")),1)])),_:1}),f(W,null,{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.fontFamily"},{label:b((()=>[f(h,{message:"site.editor.typesetting.fontFamily"})])),default:b((()=>[f(K,{modelValue:J.value.typesetting.fontFamily,"onUpdate:modelValue":l[7]||(l[7]=e=>J.value.typesetting.fontFamily=e)},{default:b((()=>[(v(),y(_,null,c([{value:"",label:"默认"},{value:"SimSun",label:"宋体"},{value:"Microsoft YaHei",label:"微软雅黑"},{value:"SimKai,KaiTi",label:"楷体"},{value:"SimHei",label:"黑体"},{value:"SimLi,LiSu",label:"隶书"},{value:"andale mono,times",label:"Andale Mono"},{value:"arial,helvetica,sans-serif",label:"Arial"},{value:"arial black,avant garde",label:"Arial Black"},{value:"comic sans ms,sans-serif",label:"Comic Sans MS"},{value:"helvetica",label:"Helvetica"},{value:"impact,chicago",label:"Impact"},{value:"times new roman,times",label:"Times New Roman"}],(e=>f(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.fontSize"},{label:b((()=>[f(h,{message:"site.editor.typesetting.fontSize"})])),default:b((()=>[f(K,{modelValue:J.value.typesetting.fontSize,"onUpdate:modelValue":l[8]||(l[8]=e=>J.value.typesetting.fontSize=e)},{default:b((()=>[(v(),y(_,null,c([{value:"",label:"默认"},{value:"12px",label:"小五"},{value:"14px",label:"五号"},{value:"16px",label:"小四"},{value:"18px",label:"四号"},{value:"20px",label:"小三"},{value:"22px",label:"三号"},{value:"24px",label:"小二"},{value:"28px",label:"二号"}],(e=>f(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.lineHeight"},{label:b((()=>[f(h,{message:"site.editor.typesetting.lineHeight"})])),default:b((()=>[f(K,{modelValue:J.value.typesetting.lineHeight,"onUpdate:modelValue":l[9]||(l[9]=e=>J.value.typesetting.lineHeight=e)},{default:b((()=>[(v(),y(_,null,c([{value:"",label:"默认"},{value:"1.0",label:"1.0"},{value:"1.1",label:"1.1"},{value:"1.2",label:"1.2"},{value:"1.3",label:"1.3"},{value:"1.4",label:"1.4"},{value:"1.5",label:"1.5"},{value:"2.0",label:"2.0"}],(e=>f(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.emptyLine"},{label:b((()=>[f(h,{message:"site.editor.typesetting.emptyLine"})])),default:b((()=>[f(K,{modelValue:J.value.typesetting.emptyLine,"onUpdate:modelValue":l[10]||(l[10]=e=>J.value.typesetting.emptyLine=e)},{default:b((()=>[(v(),y(_,null,c([{value:"remain",label:"保留空行"},{value:"one",label:"合并为一行"},{value:"remove",label:"删除空行"}],(e=>f(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.textIndent"},{label:b((()=>[f(h,{message:"site.editor.typesetting.textIndent"})])),default:b((()=>[f(s,{modelValue:J.value.typesetting.textIndent,"onUpdate:modelValue":l[11]||(l[11]=e=>J.value.typesetting.textIndent=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.imageCenterAlign"},{label:b((()=>[f(h,{message:"site.editor.typesetting.imageCenterAlign"})])),default:b((()=>[f(s,{modelValue:J.value.typesetting.imageCenterAlign,"onUpdate:modelValue":l[12]||(l[12]=e=>J.value.typesetting.imageCenterAlign=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.tableFullWidth"},{label:b((()=>[f(h,{message:"site.editor.typesetting.tableFullWidth"})])),default:b((()=>[f(s,{modelValue:J.value.typesetting.tableFullWidth,"onUpdate:modelValue":l[13]||(l[13]=e=>J.value.typesetting.tableFullWidth=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.halfWidthCharConversion"},{label:b((()=>[f(h,{message:"site.editor.typesetting.halfWidthCharConversion"})])),default:b((()=>[f(s,{modelValue:J.value.typesetting.halfWidthCharConversion,"onUpdate:modelValue":l[14]||(l[14]=e=>J.value.typesetting.halfWidthCharConversion=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],64)):"messageBoard"===te.value?(v(),g(W,{key:3},{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.messageBoard.enabled"})])),default:b((()=>[f(s,{modelValue:J.value.enabled,"onUpdate:modelValue":l[15]||(l[15]=e=>J.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"loginRequired",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.messageBoard.loginRequired"})])),default:b((()=>[f(s,{modelValue:J.value.loginRequired,"onUpdate:modelValue":l[16]||(l[16]=e=>J.value.loginRequired=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"customs"===te.value?(v(),g(W,{key:4},{default:b((()=>[(v(!0),y(_,null,c(le.value,(l=>(v(),g(i,{key:l.code,span:l.double?12:24},{default:b((()=>[f(d,{prop:l.code,rules:l.required?{required:!0,message:()=>e.$t("v.required")}:void 0},{label:b((()=>[f(h,{label:l.name},null,8,["label"])])),default:b((()=>[f(R,{modelValue:J.value[l.code],"onUpdate:modelValue":e=>J.value[l.code]=e,"model-key":J.value[l.code+"Key"],"onUpdate:modelKey":e=>J.value[l.code+"Key"]=e,field:l},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])])),_:2},1032,["prop","rules"])])),_:2},1032,["span"])))),128))])),_:1})):(v(),g(W,{key:5},{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"name",label:e.$t("site.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:b((()=>[f(I,{ref:"focus",modelValue:J.value.name,"onUpdate:modelValue":l[17]||(l[17]=e=>J.value.name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"protocol",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.protocol",help:""})])),default:b((()=>[f(K,{modelValue:J.value.protocol,"onUpdate:modelValue":l[18]||(l[18]=e=>J.value.protocol=e),class:"w-full"},{default:b((()=>[(v(),y(_,null,c(["http","https"],(e=>f(B,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"domain",rules:[{required:!0,message:()=>e.$t("v.required")},{pattern:/^[a-z0-9-.]*$/,message:()=>e.$t("site.error.domainPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:b((()=>[f(h,{message:"site.domain",help:""})])),default:b((()=>[f(I,{modelValue:J.value.domain,"onUpdate:modelValue":l[19]||(l[19]=e=>J.value.domain=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"subDir",rules:[{pattern:/^[\w-]*$/,message:()=>e.$t("site.error.subDirPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:b((()=>[f(h,{message:"site.subDir",help:""})])),default:b((()=>[f(I,{modelValue:J.value.subDir,"onUpdate:modelValue":l[20]||(l[20]=e=>J.value.subDir=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"theme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.theme",help:""})])),default:b((()=>[f(K,{modelValue:J.value.theme,"onUpdate:modelValue":l[21]||(l[21]=e=>J.value.theme=e),class:"w-full"},{default:b((()=>[(v(!0),y(_,null,c(Q.value,(e=>(v(),g(B,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"mobileTheme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.mobileTheme",help:""})])),default:b((()=>[f(K,{modelValue:J.value.mobileTheme,"onUpdate:modelValue":l[22]||(l[22]=e=>J.value.mobileTheme=e),class:"w-full"},{default:b((()=>[(v(!0),y(_,null,c(Q.value,(e=>(v(),g(B,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"modelId",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.model",help:""})])),default:b((()=>[f(K,{modelValue:J.value.modelId,"onUpdate:modelValue":l[23]||(l[23]=e=>J.value.modelId=e),class:"w-full"},{default:b((()=>[(v(!0),y(_,null,c(X.value,(e=>(v(),g(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"logo"},{label:b((()=>[f(h,{message:"site.logo",help:""})])),default:b((()=>[f(w(A),{modelValue:J.value.logo,"onUpdate:modelValue":l[24]||(l[24]=e=>J.value.logo=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"seoTitle"},{label:b((()=>[f(h,{message:"site.seoTitle",help:""})])),default:b((()=>[f(I,{modelValue:J.value.seoTitle,"onUpdate:modelValue":l[25]||(l[25]=e=>J.value.seoTitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"seoKeywords"},{label:b((()=>[f(h,{message:"site.seoKeywords",help:""})])),default:b((()=>[f(I,{modelValue:J.value.seoKeywords,"onUpdate:modelValue":l[26]||(l[26]=e=>J.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"seoDescription"},{label:b((()=>[f(h,{message:"site.seoDescription",help:""})])),default:b((()=>[f(I,{modelValue:J.value.seoDescription,"onUpdate:modelValue":l[27]||(l[27]=e=>J.value.seoDescription=e),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"pageSize",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(h,{message:"site.pageSize",help:""})])),default:b((()=>[f(T,{modelValue:J.value.pageSize,"onUpdate:modelValue":l[28]||(l[28]=e=>J.value.pageSize=e),min:1,max:200},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"status"},{label:b((()=>[f(h,{message:"site.status",help:""})])),default:b((()=>[f(r,{modelValue:J.value.status,"onUpdate:modelValue":l[29]||(l[29]=e=>J.value.status=e)},{default:b((()=>[(v(),y(_,null,c([0,1],(l=>f(n,{key:l,value:l},{default:b((()=>[$(q(e.$t(`site.status.${l}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})),"editor"!==te.value||w(o).epRank>=1?(v(),y("div",E,[f(L,{disabled:w(S)(`siteSettings:${te.value}:update`),loading:G.value,type:"primary","native-type":"submit",onClick:x(ne,["prevent"])},{default:b((()=>[$(q(e.$t("save")),1)])),_:1},8,["disabled","loading"])])):C("",!0)])),_:1},8,["model"])),[[Y,O.value]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-acd56a64"]]))}}}));
